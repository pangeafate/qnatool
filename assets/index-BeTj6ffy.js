var W0=Object.defineProperty;var Q0=(e,t,n)=>t in e?W0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vs=(e,t,n)=>Q0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rp={exports:{}},Ui={},op={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),q0=Symbol.for("react.portal"),Y0=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),Z0=Symbol.for("react.context"),J0=Symbol.for("react.forward_ref"),ey=Symbol.for("react.suspense"),ty=Symbol.for("react.memo"),ny=Symbol.for("react.lazy"),Wu=Symbol.iterator;function ry(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,lp={};function ro(e,t,n){this.props=e,this.context=t,this.refs=lp,this.updater=n||sp}ro.prototype.isReactComponent={};ro.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ro.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ap(){}ap.prototype=ro.prototype;function Cc(e,t,n){this.props=e,this.context=t,this.refs=lp,this.updater=n||sp}var jc=Cc.prototype=new ap;jc.constructor=Cc;ip(jc,ro.prototype);jc.isPureReactComponent=!0;var Qu=Array.isArray,cp=Object.prototype.hasOwnProperty,Ic={current:null},up={key:!0,ref:!0,__self:!0,__source:!0};function dp(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)cp.call(t,r)&&!up.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];o.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:ds,type:e,key:s,ref:i,props:o,_owner:Ic.current}}function oy(e,t){return{$$typeof:ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ds}function sy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qu=/\/+/g;function El(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sy(""+e.key):t.toString(36)}function Qs(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ds:case q0:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+El(i,0):r,Qu(o)?(n="",e!=null&&(n=e.replace(qu,"$&/")+"/"),Qs(o,t,n,"",function(c){return c})):o!=null&&(Pc(o)&&(o=oy(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(qu,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",Qu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+El(s,l);i+=Qs(s,t,n,a,o)}else if(a=ry(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+El(s,l++),i+=Qs(s,t,n,a,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ws(e,t,n){if(e==null)return e;var r=[],o=0;return Qs(e,r,"","",function(s){return t.call(n,s,o++)}),r}function iy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xe={current:null},qs={transition:null},ly={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:qs,ReactCurrentOwner:Ic};function fp(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ws,forEach:function(e,t,n){ws(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ws(e,function(){t++}),t},toArray:function(e){return ws(e,function(t){return t})||[]},only:function(e){if(!Pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=ro;de.Fragment=Y0;de.Profiler=K0;de.PureComponent=Cc;de.StrictMode=X0;de.Suspense=ey;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ly;de.act=fp;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ip({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Ic.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)cp.call(t,a)&&!up.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ds,type:e.type,key:o,ref:s,props:r,_owner:i}};de.createContext=function(e){return e={$$typeof:Z0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:G0,_context:e},e.Consumer=e};de.createElement=dp;de.createFactory=function(e){var t=dp.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:J0,render:e}};de.isValidElement=Pc;de.lazy=function(e){return{$$typeof:ny,_payload:{_status:-1,_result:e},_init:iy}};de.memo=function(e,t){return{$$typeof:ty,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=qs.transition;qs.transition={};try{e()}finally{qs.transition=t}};de.unstable_act=fp;de.useCallback=function(e,t){return Xe.current.useCallback(e,t)};de.useContext=function(e){return Xe.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return Xe.current.useDeferredValue(e)};de.useEffect=function(e,t){return Xe.current.useEffect(e,t)};de.useId=function(){return Xe.current.useId()};de.useImperativeHandle=function(e,t,n){return Xe.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return Xe.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return Xe.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return Xe.current.useMemo(e,t)};de.useReducer=function(e,t,n){return Xe.current.useReducer(e,t,n)};de.useRef=function(e){return Xe.current.useRef(e)};de.useState=function(e){return Xe.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return Xe.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return Xe.current.useTransition()};de.version="18.3.1";op.exports=de;var P=op.exports;const H=np(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=P,cy=Symbol.for("react.element"),uy=Symbol.for("react.fragment"),dy=Object.prototype.hasOwnProperty,fy=ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,py={key:!0,ref:!0,__self:!0,__source:!0};function pp(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)dy.call(t,r)&&!py.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:cy,type:e,key:s,ref:i,props:o,_owner:fy.current}}Ui.Fragment=uy;Ui.jsx=pp;Ui.jsxs=pp;rp.exports=Ui;var u=rp.exports,da={},hp={exports:{}},ht={},mp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,k){var z=$.length;$.push(k);e:for(;0<z;){var B=z-1>>>1,D=$[B];if(0<o(D,k))$[B]=k,$[z]=D,z=B;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var k=$[0],z=$.pop();if(z!==k){$[0]=z;e:for(var B=0,D=$.length,Y=D>>>1;B<Y;){var W=2*(B+1)-1,Q=$[W],A=W+1,V=$[A];if(0>o(Q,z))A<D&&0>o(V,Q)?($[B]=V,$[A]=z,B=A):($[B]=Q,$[W]=z,B=W);else if(A<D&&0>o(V,z))$[B]=V,$[A]=z,B=A;else break e}}return k}function o($,k){var z=$.sortIndex-k.sortIndex;return z!==0?z:$.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var a=[],c=[],f=1,d=null,h=3,p=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var k=n(c);k!==null;){if(k.callback===null)r(c);else if(k.startTime<=$)r(c),k.sortIndex=k.expirationTime,t(a,k);else break;k=n(c)}}function v($){if(w=!1,y($),!x)if(n(a)!==null)x=!0,j(C);else{var k=n(c);k!==null&&O(v,k.startTime-$)}}function C($,k){x=!1,w&&(w=!1,m(_),_=-1),p=!0;var z=h;try{for(y(k),d=n(a);d!==null&&(!(d.expirationTime>k)||$&&!R());){var B=d.callback;if(typeof B=="function"){d.callback=null,h=d.priorityLevel;var D=B(d.expirationTime<=k);k=e.unstable_now(),typeof D=="function"?d.callback=D:d===n(a)&&r(a),y(k)}else r(a);d=n(a)}if(d!==null)var Y=!0;else{var W=n(c);W!==null&&O(v,W.startTime-k),Y=!1}return Y}finally{d=null,h=z,p=!1}}var E=!1,I=null,_=-1,b=5,T=-1;function R(){return!(e.unstable_now()-T<b)}function L(){if(I!==null){var $=e.unstable_now();T=$;var k=!0;try{k=I(!0,$)}finally{k?U():(E=!1,I=null)}}else E=!1}var U;if(typeof g=="function")U=function(){g(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,M=N.port2;N.port1.onmessage=L,U=function(){M.postMessage(null)}}else U=function(){S(L,0)};function j($){I=$,E||(E=!0,U())}function O($,k){_=S(function(){$(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,j(C))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var z=h;h=k;try{return $()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,k){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=h;h=$;try{return k()}finally{h=z}},e.unstable_scheduleCallback=function($,k,z){var B=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?B+z:B):z=B,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=z+D,$={id:f++,callback:k,priorityLevel:$,startTime:z,expirationTime:D,sortIndex:-1},z>B?($.sortIndex=z,t(c,$),n(a)===null&&$===n(c)&&(w?(m(_),_=-1):w=!0,O(v,z-B))):($.sortIndex=D,t(a,$),x||p||(x=!0,j(C))),$},e.unstable_shouldYield=R,e.unstable_wrapCallback=function($){var k=h;return function(){var z=h;h=k;try{return $.apply(this,arguments)}finally{h=z}}}})(gp);mp.exports=gp;var hy=mp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my=P,ut=hy;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yp=new Set,Oo={};function hr(e,t){Ur(e,t),Ur(e+"Capture",t)}function Ur(e,t){for(Oo[e]=t,e=0;e<t.length;e++)yp.add(t[e])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=Object.prototype.hasOwnProperty,gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yu={},Xu={};function yy(e){return fa.call(Xu,e)?!0:fa.call(Yu,e)?!1:gy.test(e)?Xu[e]=!0:(Yu[e]=!0,!1)}function xy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vy(e,t,n,r){if(t===null||typeof t>"u"||xy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ke(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new Ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new Ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new Ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new Ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new Ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new Ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new Ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new Ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new Ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tc=/[\-:]([a-z])/g;function $c(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tc,$c);He[t]=new Ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tc,$c);He[t]=new Ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tc,$c);He[t]=new Ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new Ke(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new Ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mc(e,t,n,r){var o=He.hasOwnProperty(t)?He[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vy(t,n,o,r)&&(n=null),r||o===null?yy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var dn=my.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ns=Symbol.for("react.element"),Sr=Symbol.for("react.portal"),Er=Symbol.for("react.fragment"),Ac=Symbol.for("react.strict_mode"),pa=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),vp=Symbol.for("react.context"),zc=Symbol.for("react.forward_ref"),ha=Symbol.for("react.suspense"),ma=Symbol.for("react.suspense_list"),Rc=Symbol.for("react.memo"),hn=Symbol.for("react.lazy"),wp=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function ao(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,bl;function So(e){if(bl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bl=t&&t[1]||""}return`
`+bl+e}var kl=!1;function _l(e,t){if(!e||kl)return"";kl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var a=`
`+o[i].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=i&&0<=l);break}}}finally{kl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?So(e):""}function wy(e){switch(e.tag){case 5:return So(e.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return e=_l(e.type,!1),e;case 11:return e=_l(e.type.render,!1),e;case 1:return e=_l(e.type,!0),e;default:return""}}function ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Er:return"Fragment";case Sr:return"Portal";case pa:return"Profiler";case Ac:return"StrictMode";case ha:return"Suspense";case ma:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vp:return(e.displayName||"Context")+".Consumer";case xp:return(e._context.displayName||"Context")+".Provider";case zc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rc:return t=e.displayName||null,t!==null?t:ga(e.type)||"Memo";case hn:t=e._payload,e=e._init;try{return ga(e(t))}catch{}}return null}function Ny(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ga(t);case 8:return t===Ac?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function An(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Np(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sy(e){var t=Np(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ss(e){e._valueTracker||(e._valueTracker=Sy(e))}function Sp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Np(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ai(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ya(e,t){var n=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=An(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ep(e,t){t=t.checked,t!=null&&Mc(e,"checked",t,!1)}function xa(e,t){Ep(e,t);var n=An(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?va(e,t.type,n):t.hasOwnProperty("defaultValue")&&va(e,t.type,An(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function va(e,t,n){(t!=="number"||ai(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Eo=Array.isArray;function zr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+An(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ju(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(Eo(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:An(n)}}function bp(e,t){var n=An(t.value),r=An(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ed(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Es,_p=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Es.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ey=["Webkit","ms","Moz","O"];Object.keys(Io).forEach(function(e){Ey.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Io[t]=Io[e]})});function Cp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Io.hasOwnProperty(e)&&Io[e]?(""+t).trim():t+"px"}function jp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Cp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var by=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sa(e,t){if(t){if(by[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Ea(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ba=null;function Dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ka=null,Rr=null,Dr=null;function td(e){if(e=hs(e)){if(typeof ka!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Xi(t),ka(e.stateNode,e.type,t))}}function Ip(e){Rr?Dr?Dr.push(e):Dr=[e]:Rr=e}function Pp(){if(Rr){var e=Rr,t=Dr;if(Dr=Rr=null,td(e),t)for(e=0;e<t.length;e++)td(t[e])}}function Tp(e,t){return e(t)}function $p(){}var Cl=!1;function Mp(e,t,n){if(Cl)return e(t,n);Cl=!0;try{return Tp(e,t,n)}finally{Cl=!1,(Rr!==null||Dr!==null)&&($p(),Pp())}}function Fo(e,t){var n=e.stateNode;if(n===null)return null;var r=Xi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var _a=!1;if(on)try{var co={};Object.defineProperty(co,"passive",{get:function(){_a=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{_a=!1}function ky(e,t,n,r,o,s,i,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Po=!1,ci=null,ui=!1,Ca=null,_y={onError:function(e){Po=!0,ci=e}};function Cy(e,t,n,r,o,s,i,l,a){Po=!1,ci=null,ky.apply(_y,arguments)}function jy(e,t,n,r,o,s,i,l,a){if(Cy.apply(this,arguments),Po){if(Po){var c=ci;Po=!1,ci=null}else throw Error(X(198));ui||(ui=!0,Ca=c)}}function mr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ap(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nd(e){if(mr(e)!==e)throw Error(X(188))}function Iy(e){var t=e.alternate;if(!t){if(t=mr(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return nd(o),e;if(s===r)return nd(o),t;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function zp(e){return e=Iy(e),e!==null?Rp(e):null}function Rp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Rp(e);if(t!==null)return t;e=e.sibling}return null}var Dp=ut.unstable_scheduleCallback,rd=ut.unstable_cancelCallback,Py=ut.unstable_shouldYield,Ty=ut.unstable_requestPaint,Ie=ut.unstable_now,$y=ut.unstable_getCurrentPriorityLevel,Oc=ut.unstable_ImmediatePriority,Op=ut.unstable_UserBlockingPriority,di=ut.unstable_NormalPriority,My=ut.unstable_LowPriority,Lp=ut.unstable_IdlePriority,Wi=null,Bt=null;function Ay(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Wi,e,void 0,(e.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Dy,zy=Math.log,Ry=Math.LN2;function Dy(e){return e>>>=0,e===0?32:31-(zy(e)/Ry|0)|0}var bs=64,ks=4194304;function bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=bo(l):(s&=i,s!==0&&(r=bo(s)))}else i=n&~o,i!==0?r=bo(i):s!==0&&(r=bo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-At(t),o=1<<n,r|=e[n],t&=~o;return r}function Oy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ly(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-At(s),l=1<<i,a=o[i];a===-1?(!(l&n)||l&r)&&(o[i]=Oy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function ja(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fp(){var e=bs;return bs<<=1,!(bs&4194240)&&(bs=64),e}function jl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-At(t),e[t]=n}function Fy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-At(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Lc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-At(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var he=0;function Hp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vp,Fc,Bp,Up,Wp,Ia=!1,_s=[],bn=null,kn=null,_n=null,Ho=new Map,Vo=new Map,xn=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(e,t){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(t.pointerId)}}function uo(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=hs(t),t!==null&&Fc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Vy(e,t,n,r,o){switch(t){case"focusin":return bn=uo(bn,e,t,n,r,o),!0;case"dragenter":return kn=uo(kn,e,t,n,r,o),!0;case"mouseover":return _n=uo(_n,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return Ho.set(s,uo(Ho.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Vo.set(s,uo(Vo.get(s)||null,e,t,n,r,o)),!0}return!1}function Qp(e){var t=Gn(e.target);if(t!==null){var n=mr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ap(n),t!==null){e.blockedOn=t,Wp(e.priority,function(){Bp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ys(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ba=r,n.target.dispatchEvent(r),ba=null}else return t=hs(n),t!==null&&Fc(t),e.blockedOn=n,!1;t.shift()}return!0}function sd(e,t,n){Ys(e)&&n.delete(t)}function By(){Ia=!1,bn!==null&&Ys(bn)&&(bn=null),kn!==null&&Ys(kn)&&(kn=null),_n!==null&&Ys(_n)&&(_n=null),Ho.forEach(sd),Vo.forEach(sd)}function fo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ia||(Ia=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,By)))}function Bo(e){function t(o){return fo(o,e)}if(0<_s.length){fo(_s[0],e);for(var n=1;n<_s.length;n++){var r=_s[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bn!==null&&fo(bn,e),kn!==null&&fo(kn,e),_n!==null&&fo(_n,e),Ho.forEach(t),Vo.forEach(t),n=0;n<xn.length;n++)r=xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xn.length&&(n=xn[0],n.blockedOn===null);)Qp(n),n.blockedOn===null&&xn.shift()}var Or=dn.ReactCurrentBatchConfig,pi=!0;function Uy(e,t,n,r){var o=he,s=Or.transition;Or.transition=null;try{he=1,Hc(e,t,n,r)}finally{he=o,Or.transition=s}}function Wy(e,t,n,r){var o=he,s=Or.transition;Or.transition=null;try{he=4,Hc(e,t,n,r)}finally{he=o,Or.transition=s}}function Hc(e,t,n,r){if(pi){var o=Pa(e,t,n,r);if(o===null)Ol(e,t,r,hi,n),od(e,r);else if(Vy(o,e,t,n,r))r.stopPropagation();else if(od(e,r),t&4&&-1<Hy.indexOf(e)){for(;o!==null;){var s=hs(o);if(s!==null&&Vp(s),s=Pa(e,t,n,r),s===null&&Ol(e,t,r,hi,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Ol(e,t,r,null,n)}}var hi=null;function Pa(e,t,n,r){if(hi=null,e=Dc(r),e=Gn(e),e!==null)if(t=mr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ap(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hi=e,null}function qp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($y()){case Oc:return 1;case Op:return 4;case di:case My:return 16;case Lp:return 536870912;default:return 16}default:return 16}}var Nn=null,Vc=null,Xs=null;function Yp(){if(Xs)return Xs;var e,t=Vc,n=t.length,r,o="value"in Nn?Nn.value:Nn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return Xs=o.slice(e,1<r?1-r:void 0)}function Ks(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cs(){return!0}function id(){return!1}function mt(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cs:id,this.isPropagationStopped=id,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),t}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=mt(oo),ps=ke({},oo,{view:0,detail:0}),Qy=mt(ps),Il,Pl,po,Qi=ke({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==po&&(po&&e.type==="mousemove"?(Il=e.screenX-po.screenX,Pl=e.screenY-po.screenY):Pl=Il=0,po=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),ld=mt(Qi),qy=ke({},Qi,{dataTransfer:0}),Yy=mt(qy),Xy=ke({},ps,{relatedTarget:0}),Tl=mt(Xy),Ky=ke({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),Gy=mt(Ky),Zy=ke({},oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jy=mt(Zy),ex=ke({},oo,{data:0}),ad=mt(ex),tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rx[e])?!!t[e]:!1}function Uc(){return ox}var sx=ke({},ps,{key:function(e){if(e.key){var t=tx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(e){return e.type==="keypress"?Ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ix=mt(sx),lx=ke({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=mt(lx),ax=ke({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),cx=mt(ax),ux=ke({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),dx=mt(ux),fx=ke({},Qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),px=mt(fx),hx=[9,13,27,32],Wc=on&&"CompositionEvent"in window,To=null;on&&"documentMode"in document&&(To=document.documentMode);var mx=on&&"TextEvent"in window&&!To,Xp=on&&(!Wc||To&&8<To&&11>=To),ud=" ",dd=!1;function Kp(e,t){switch(e){case"keyup":return hx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var br=!1;function gx(e,t){switch(e){case"compositionend":return Gp(t);case"keypress":return t.which!==32?null:(dd=!0,ud);case"textInput":return e=t.data,e===ud&&dd?null:e;default:return null}}function yx(e,t){if(br)return e==="compositionend"||!Wc&&Kp(e,t)?(e=Yp(),Xs=Vc=Nn=null,br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xp&&t.locale!=="ko"?null:t.data;default:return null}}var xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xx[e.type]:t==="textarea"}function Zp(e,t,n,r){Ip(r),t=mi(t,"onChange"),0<t.length&&(n=new Bc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $o=null,Uo=null;function vx(e){ch(e,0)}function qi(e){var t=Cr(e);if(Sp(t))return e}function wx(e,t){if(e==="change")return t}var Jp=!1;if(on){var $l;if(on){var Ml="oninput"in document;if(!Ml){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),Ml=typeof pd.oninput=="function"}$l=Ml}else $l=!1;Jp=$l&&(!document.documentMode||9<document.documentMode)}function hd(){$o&&($o.detachEvent("onpropertychange",eh),Uo=$o=null)}function eh(e){if(e.propertyName==="value"&&qi(Uo)){var t=[];Zp(t,Uo,e,Dc(e)),Mp(vx,t)}}function Nx(e,t,n){e==="focusin"?(hd(),$o=t,Uo=n,$o.attachEvent("onpropertychange",eh)):e==="focusout"&&hd()}function Sx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qi(Uo)}function Ex(e,t){if(e==="click")return qi(t)}function bx(e,t){if(e==="input"||e==="change")return qi(t)}function kx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:kx;function Wo(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!fa.call(t,o)||!Rt(e[o],t[o]))return!1}return!0}function md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gd(e,t){var n=md(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=md(n)}}function th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nh(){for(var e=window,t=ai();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ai(e.document)}return t}function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _x(e){var t=nh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&th(n.ownerDocument.documentElement,n)){if(r!==null&&Qc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=gd(n,s);var i=gd(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cx=on&&"documentMode"in document&&11>=document.documentMode,kr=null,Ta=null,Mo=null,$a=!1;function yd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$a||kr==null||kr!==ai(r)||(r=kr,"selectionStart"in r&&Qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&Wo(Mo,r)||(Mo=r,r=mi(Ta,"onSelect"),0<r.length&&(t=new Bc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}function js(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},Al={},rh={};on&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function Yi(e){if(Al[e])return Al[e];if(!_r[e])return e;var t=_r[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rh)return Al[e]=t[n];return e}var oh=Yi("animationend"),sh=Yi("animationiteration"),ih=Yi("animationstart"),lh=Yi("transitionend"),ah=new Map,xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){ah.set(e,t),hr(t,[e])}for(var zl=0;zl<xd.length;zl++){var Rl=xd[zl],jx=Rl.toLowerCase(),Ix=Rl[0].toUpperCase()+Rl.slice(1);Dn(jx,"on"+Ix)}Dn(oh,"onAnimationEnd");Dn(sh,"onAnimationIteration");Dn(ih,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(lh,"onTransitionEnd");Ur("onMouseEnter",["mouseout","mouseover"]);Ur("onMouseLeave",["mouseout","mouseover"]);Ur("onPointerEnter",["pointerout","pointerover"]);Ur("onPointerLeave",["pointerout","pointerover"]);hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Px=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function vd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,jy(r,t,void 0,e),e.currentTarget=null}function ch(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&o.isPropagationStopped())break e;vd(o,l,c),s=a}else for(i=0;i<r.length;i++){if(l=r[i],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&o.isPropagationStopped())break e;vd(o,l,c),s=a}}}if(ui)throw e=Ca,ui=!1,Ca=null,e}function we(e,t){var n=t[Da];n===void 0&&(n=t[Da]=new Set);var r=e+"__bubble";n.has(r)||(uh(t,e,2,!1),n.add(r))}function Dl(e,t,n){var r=0;t&&(r|=4),uh(n,e,r,t)}var Is="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[Is]){e[Is]=!0,yp.forEach(function(n){n!=="selectionchange"&&(Px.has(n)||Dl(n,!1,e),Dl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Is]||(t[Is]=!0,Dl("selectionchange",!1,t))}}function uh(e,t,n,r){switch(qp(t)){case 1:var o=Uy;break;case 4:o=Wy;break;default:o=Hc}n=o.bind(null,t,n,e),o=void 0,!_a||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ol(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Gn(l),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Mp(function(){var c=s,f=Dc(n),d=[];e:{var h=ah.get(e);if(h!==void 0){var p=Bc,x=e;switch(e){case"keypress":if(Ks(n)===0)break e;case"keydown":case"keyup":p=ix;break;case"focusin":x="focus",p=Tl;break;case"focusout":x="blur",p=Tl;break;case"beforeblur":case"afterblur":p=Tl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cx;break;case oh:case sh:case ih:p=Gy;break;case lh:p=dx;break;case"scroll":p=Qy;break;case"wheel":p=px;break;case"copy":case"cut":case"paste":p=Jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cd}var w=(t&4)!==0,S=!w&&e==="scroll",m=w?h!==null?h+"Capture":null:h;w=[];for(var g=c,y;g!==null;){y=g;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,m!==null&&(v=Fo(g,m),v!=null&&w.push(qo(g,v,y)))),S)break;g=g.return}0<w.length&&(h=new p(h,x,null,n,f),d.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==ba&&(x=n.relatedTarget||n.fromElement)&&(Gn(x)||x[sn]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=c,x=x?Gn(x):null,x!==null&&(S=mr(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=c),p!==x)){if(w=ld,v="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=cd,v="onPointerLeave",m="onPointerEnter",g="pointer"),S=p==null?h:Cr(p),y=x==null?h:Cr(x),h=new w(v,g+"leave",p,n,f),h.target=S,h.relatedTarget=y,v=null,Gn(f)===c&&(w=new w(m,g+"enter",x,n,f),w.target=y,w.relatedTarget=S,v=w),S=v,p&&x)t:{for(w=p,m=x,g=0,y=w;y;y=gr(y))g++;for(y=0,v=m;v;v=gr(v))y++;for(;0<g-y;)w=gr(w),g--;for(;0<y-g;)m=gr(m),y--;for(;g--;){if(w===m||m!==null&&w===m.alternate)break t;w=gr(w),m=gr(m)}w=null}else w=null;p!==null&&wd(d,h,p,w,!1),x!==null&&S!==null&&wd(d,S,x,w,!0)}}e:{if(h=c?Cr(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var C=wx;else if(fd(h))if(Jp)C=bx;else{C=Sx;var E=Nx}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=Ex);if(C&&(C=C(e,c))){Zp(d,C,n,f);break e}E&&E(e,h,c),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&va(h,"number",h.value)}switch(E=c?Cr(c):window,e){case"focusin":(fd(E)||E.contentEditable==="true")&&(kr=E,Ta=c,Mo=null);break;case"focusout":Mo=Ta=kr=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,yd(d,n,f);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":yd(d,n,f)}var I;if(Wc)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else br?Kp(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Xp&&n.locale!=="ko"&&(br||_!=="onCompositionStart"?_==="onCompositionEnd"&&br&&(I=Yp()):(Nn=f,Vc="value"in Nn?Nn.value:Nn.textContent,br=!0)),E=mi(c,_),0<E.length&&(_=new ad(_,e,null,n,f),d.push({event:_,listeners:E}),I?_.data=I:(I=Gp(n),I!==null&&(_.data=I)))),(I=mx?gx(e,n):yx(e,n))&&(c=mi(c,"onBeforeInput"),0<c.length&&(f=new ad("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=I))}ch(d,t)})}function qo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mi(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Fo(e,n),s!=null&&r.unshift(qo(e,s,o)),s=Fo(e,t),s!=null&&r.push(qo(e,s,o))),e=e.return}return r}function gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wd(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,o?(a=Fo(n,s),a!=null&&i.unshift(qo(n,a,l))):o||(a=Fo(n,s),a!=null&&i.push(qo(n,a,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Tx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(Tx,`
`).replace($x,"")}function Ps(e,t,n){if(t=Nd(t),Nd(e)!==t&&n)throw Error(X(425))}function gi(){}var Ma=null,Aa=null;function za(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ra=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,Ax=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(e){return Sd.resolve(null).then(e).catch(zx)}:Ra;function zx(e){setTimeout(function(){throw e})}function Ll(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Bo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Bo(t)}function Cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ed(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var so=Math.random().toString(36).slice(2),Vt="__reactFiber$"+so,Yo="__reactProps$"+so,sn="__reactContainer$"+so,Da="__reactEvents$"+so,Rx="__reactListeners$"+so,Dx="__reactHandles$"+so;function Gn(e){var t=e[Vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sn]||n[Vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ed(e);e!==null;){if(n=e[Vt])return n;e=Ed(e)}return t}e=n,n=e.parentNode}return null}function hs(e){return e=e[Vt]||e[sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Xi(e){return e[Yo]||null}var Oa=[],jr=-1;function On(e){return{current:e}}function Ne(e){0>jr||(e.current=Oa[jr],Oa[jr]=null,jr--)}function xe(e,t){jr++,Oa[jr]=e.current,e.current=t}var zn={},Qe=On(zn),nt=On(!1),ir=zn;function Wr(e,t){var n=e.type.contextTypes;if(!n)return zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rt(e){return e=e.childContextTypes,e!=null}function yi(){Ne(nt),Ne(Qe)}function bd(e,t,n){if(Qe.current!==zn)throw Error(X(168));xe(Qe,t),xe(nt,n)}function dh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(X(108,Ny(e)||"Unknown",o));return ke({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zn,ir=Qe.current,xe(Qe,e),xe(nt,nt.current),!0}function kd(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=dh(e,t,ir),r.__reactInternalMemoizedMergedChildContext=e,Ne(nt),Ne(Qe),xe(Qe,e)):Ne(nt),xe(nt,n)}var Kt=null,Ki=!1,Fl=!1;function fh(e){Kt===null?Kt=[e]:Kt.push(e)}function Ox(e){Ki=!0,fh(e)}function Ln(){if(!Fl&&Kt!==null){Fl=!0;var e=0,t=he;try{var n=Kt;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,Ki=!1}catch(o){throw Kt!==null&&(Kt=Kt.slice(e+1)),Dp(Oc,Ln),o}finally{he=t,Fl=!1}}return null}var Ir=[],Pr=0,vi=null,wi=0,yt=[],xt=0,lr=null,Gt=1,Zt="";function Qn(e,t){Ir[Pr++]=wi,Ir[Pr++]=vi,vi=e,wi=t}function ph(e,t,n){yt[xt++]=Gt,yt[xt++]=Zt,yt[xt++]=lr,lr=e;var r=Gt;e=Zt;var o=32-At(r)-1;r&=~(1<<o),n+=1;var s=32-At(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Gt=1<<32-At(t)+o|n<<o|r,Zt=s+e}else Gt=1<<s|n<<o|r,Zt=e}function qc(e){e.return!==null&&(Qn(e,1),ph(e,1,0))}function Yc(e){for(;e===vi;)vi=Ir[--Pr],Ir[Pr]=null,wi=Ir[--Pr],Ir[Pr]=null;for(;e===lr;)lr=yt[--xt],yt[xt]=null,Zt=yt[--xt],yt[xt]=null,Gt=yt[--xt],yt[xt]=null}var ct=null,at=null,Se=!1,Pt=null;function hh(e,t){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _d(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ct=e,at=Cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ct=e,at=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lr!==null?{id:Gt,overflow:Zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ct=e,at=null,!0):!1;default:return!1}}function La(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fa(e){if(Se){var t=at;if(t){var n=t;if(!_d(e,t)){if(La(e))throw Error(X(418));t=Cn(n.nextSibling);var r=ct;t&&_d(e,t)?hh(r,n):(e.flags=e.flags&-4097|2,Se=!1,ct=e)}}else{if(La(e))throw Error(X(418));e.flags=e.flags&-4097|2,Se=!1,ct=e}}}function Cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ct=e}function Ts(e){if(e!==ct)return!1;if(!Se)return Cd(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!za(e.type,e.memoizedProps)),t&&(t=at)){if(La(e))throw mh(),Error(X(418));for(;t;)hh(e,t),t=Cn(t.nextSibling)}if(Cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){at=Cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}at=null}}else at=ct?Cn(e.stateNode.nextSibling):null;return!0}function mh(){for(var e=at;e;)e=Cn(e.nextSibling)}function Qr(){at=ct=null,Se=!1}function Xc(e){Pt===null?Pt=[e]:Pt.push(e)}var Lx=dn.ReactCurrentBatchConfig;function ho(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function $s(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jd(e){var t=e._init;return t(e._payload)}function gh(e){function t(m,g){if(e){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=Tn(m,g),m.index=0,m.sibling=null,m}function s(m,g,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,y,v){return g===null||g.tag!==6?(g=ql(y,m.mode,v),g.return=m,g):(g=o(g,y),g.return=m,g)}function a(m,g,y,v){var C=y.type;return C===Er?f(m,g,y.props.children,v,y.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===hn&&jd(C)===g.type)?(v=o(g,y.props),v.ref=ho(m,g,y),v.return=m,v):(v=ri(y.type,y.key,y.props,null,m.mode,v),v.ref=ho(m,g,y),v.return=m,v)}function c(m,g,y,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Yl(y,m.mode,v),g.return=m,g):(g=o(g,y.children||[]),g.return=m,g)}function f(m,g,y,v,C){return g===null||g.tag!==7?(g=rr(y,m.mode,v,C),g.return=m,g):(g=o(g,y),g.return=m,g)}function d(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ql(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ns:return y=ri(g.type,g.key,g.props,null,m.mode,y),y.ref=ho(m,null,g),y.return=m,y;case Sr:return g=Yl(g,m.mode,y),g.return=m,g;case hn:var v=g._init;return d(m,v(g._payload),y)}if(Eo(g)||ao(g))return g=rr(g,m.mode,y,null),g.return=m,g;$s(m,g)}return null}function h(m,g,y,v){var C=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:l(m,g,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ns:return y.key===C?a(m,g,y,v):null;case Sr:return y.key===C?c(m,g,y,v):null;case hn:return C=y._init,h(m,g,C(y._payload),v)}if(Eo(y)||ao(y))return C!==null?null:f(m,g,y,v,null);$s(m,y)}return null}function p(m,g,y,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(y)||null,l(g,m,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ns:return m=m.get(v.key===null?y:v.key)||null,a(g,m,v,C);case Sr:return m=m.get(v.key===null?y:v.key)||null,c(g,m,v,C);case hn:var E=v._init;return p(m,g,y,E(v._payload),C)}if(Eo(v)||ao(v))return m=m.get(y)||null,f(g,m,v,C,null);$s(g,v)}return null}function x(m,g,y,v){for(var C=null,E=null,I=g,_=g=0,b=null;I!==null&&_<y.length;_++){I.index>_?(b=I,I=null):b=I.sibling;var T=h(m,I,y[_],v);if(T===null){I===null&&(I=b);break}e&&I&&T.alternate===null&&t(m,I),g=s(T,g,_),E===null?C=T:E.sibling=T,E=T,I=b}if(_===y.length)return n(m,I),Se&&Qn(m,_),C;if(I===null){for(;_<y.length;_++)I=d(m,y[_],v),I!==null&&(g=s(I,g,_),E===null?C=I:E.sibling=I,E=I);return Se&&Qn(m,_),C}for(I=r(m,I);_<y.length;_++)b=p(I,m,_,y[_],v),b!==null&&(e&&b.alternate!==null&&I.delete(b.key===null?_:b.key),g=s(b,g,_),E===null?C=b:E.sibling=b,E=b);return e&&I.forEach(function(R){return t(m,R)}),Se&&Qn(m,_),C}function w(m,g,y,v){var C=ao(y);if(typeof C!="function")throw Error(X(150));if(y=C.call(y),y==null)throw Error(X(151));for(var E=C=null,I=g,_=g=0,b=null,T=y.next();I!==null&&!T.done;_++,T=y.next()){I.index>_?(b=I,I=null):b=I.sibling;var R=h(m,I,T.value,v);if(R===null){I===null&&(I=b);break}e&&I&&R.alternate===null&&t(m,I),g=s(R,g,_),E===null?C=R:E.sibling=R,E=R,I=b}if(T.done)return n(m,I),Se&&Qn(m,_),C;if(I===null){for(;!T.done;_++,T=y.next())T=d(m,T.value,v),T!==null&&(g=s(T,g,_),E===null?C=T:E.sibling=T,E=T);return Se&&Qn(m,_),C}for(I=r(m,I);!T.done;_++,T=y.next())T=p(I,m,_,T.value,v),T!==null&&(e&&T.alternate!==null&&I.delete(T.key===null?_:T.key),g=s(T,g,_),E===null?C=T:E.sibling=T,E=T);return e&&I.forEach(function(L){return t(m,L)}),Se&&Qn(m,_),C}function S(m,g,y,v){if(typeof y=="object"&&y!==null&&y.type===Er&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ns:e:{for(var C=y.key,E=g;E!==null;){if(E.key===C){if(C=y.type,C===Er){if(E.tag===7){n(m,E.sibling),g=o(E,y.props.children),g.return=m,m=g;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===hn&&jd(C)===E.type){n(m,E.sibling),g=o(E,y.props),g.ref=ho(m,E,y),g.return=m,m=g;break e}n(m,E);break}else t(m,E);E=E.sibling}y.type===Er?(g=rr(y.props.children,m.mode,v,y.key),g.return=m,m=g):(v=ri(y.type,y.key,y.props,null,m.mode,v),v.ref=ho(m,g,y),v.return=m,m=v)}return i(m);case Sr:e:{for(E=y.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=o(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=Yl(y,m.mode,v),g.return=m,m=g}return i(m);case hn:return E=y._init,S(m,g,E(y._payload),v)}if(Eo(y))return x(m,g,y,v);if(ao(y))return w(m,g,y,v);$s(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,y),g.return=m,m=g):(n(m,g),g=ql(y,m.mode,v),g.return=m,m=g),i(m)):n(m,g)}return S}var qr=gh(!0),yh=gh(!1),Ni=On(null),Si=null,Tr=null,Kc=null;function Gc(){Kc=Tr=Si=null}function Zc(e){var t=Ni.current;Ne(Ni),e._currentValue=t}function Ha(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Lr(e,t){Si=e,Kc=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function bt(e){var t=e._currentValue;if(Kc!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(Si===null)throw Error(X(308));Tr=e,Si.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var Zn=null;function Jc(e){Zn===null?Zn=[e]:Zn.push(e)}function xh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Jc(t)):(n.next=o.next,o.next=n),t.interleaved=n,ln(e,r)}function ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var mn=!1;function eu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,ln(e,n)}return o=r.interleaved,o===null?(t.next=t,Jc(r)):(t.next=o.next,o.next=t),r.interleaved=t,ln(e,n)}function Gs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lc(e,n)}}function Id(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ei(e,t,n,r){var o=e.updateQueue;mn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var a=l,c=a.next;a.next=null,i===null?s=c:i.next=c,i=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=o.baseState;i=0,f=c=a=null,l=s;do{var h=l.lane,p=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,w=l;switch(h=t,p=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){d=x.call(p,d,h);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,h=typeof x=="function"?x.call(p,d,h):x,h==null)break e;d=ke({},d,h);break e;case 2:mn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=p,a=d):f=f.next=p,i|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(a=d),o.baseState=a,o.firstBaseUpdate=c,o.lastBaseUpdate=f,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);cr|=i,e.lanes=i,e.memoizedState=d}}function Pd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(X(191,o));o.call(r)}}}var ms={},Ut=On(ms),Xo=On(ms),Ko=On(ms);function Jn(e){if(e===ms)throw Error(X(174));return e}function tu(e,t){switch(xe(Ko,t),xe(Xo,e),xe(Ut,ms),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Na(t,e)}Ne(Ut),xe(Ut,t)}function Yr(){Ne(Ut),Ne(Xo),Ne(Ko)}function wh(e){Jn(Ko.current);var t=Jn(Ut.current),n=Na(t,e.type);t!==n&&(xe(Xo,e),xe(Ut,n))}function nu(e){Xo.current===e&&(Ne(Ut),Ne(Xo))}var Ee=On(0);function bi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hl=[];function ru(){for(var e=0;e<Hl.length;e++)Hl[e]._workInProgressVersionPrimary=null;Hl.length=0}var Zs=dn.ReactCurrentDispatcher,Vl=dn.ReactCurrentBatchConfig,ar=0,be=null,$e=null,ze=null,ki=!1,Ao=!1,Go=0,Fx=0;function Be(){throw Error(X(321))}function ou(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rt(e[n],t[n]))return!1;return!0}function su(e,t,n,r,o,s){if(ar=s,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?Ux:Wx,e=n(r,o),Ao){s=0;do{if(Ao=!1,Go=0,25<=s)throw Error(X(301));s+=1,ze=$e=null,t.updateQueue=null,Zs.current=Qx,e=n(r,o)}while(Ao)}if(Zs.current=_i,t=$e!==null&&$e.next!==null,ar=0,ze=$e=be=null,ki=!1,t)throw Error(X(300));return e}function iu(){var e=Go!==0;return Go=0,e}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?be.memoizedState=ze=e:ze=ze.next=e,ze}function kt(){if($e===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=ze===null?be.memoizedState:ze.next;if(t!==null)ze=t,$e=e;else{if(e===null)throw Error(X(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ze===null?be.memoizedState=ze=e:ze=ze.next=e}return ze}function Zo(e,t){return typeof t=="function"?t(e):t}function Bl(e){var t=kt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=$e,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,a=null,c=s;do{var f=c.lane;if((ar&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,i=r):a=a.next=d,be.lanes|=f,cr|=f}c=c.next}while(c!==null&&c!==s);a===null?i=r:a.next=l,Rt(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,be.lanes|=s,cr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ul(e){var t=kt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Rt(s,t.memoizedState)||(et=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Nh(){}function Sh(e,t){var n=be,r=kt(),o=t(),s=!Rt(r.memoizedState,o);if(s&&(r.memoizedState=o,et=!0),r=r.queue,lu(kh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Jo(9,bh.bind(null,n,r,o,t),void 0,null),Re===null)throw Error(X(349));ar&30||Eh(n,t,o)}return o}function Eh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bh(e,t,n,r){t.value=n,t.getSnapshot=r,_h(t)&&Ch(e)}function kh(e,t,n){return n(function(){_h(t)&&Ch(e)})}function _h(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rt(e,n)}catch{return!0}}function Ch(e){var t=ln(e,1);t!==null&&zt(t,e,1,-1)}function Td(e){var t=Ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e},t.queue=e,e=e.dispatch=Bx.bind(null,be,e),[t.memoizedState,e]}function Jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jh(){return kt().memoizedState}function Js(e,t,n,r){var o=Ht();be.flags|=e,o.memoizedState=Jo(1|t,n,void 0,r===void 0?null:r)}function Gi(e,t,n,r){var o=kt();r=r===void 0?null:r;var s=void 0;if($e!==null){var i=$e.memoizedState;if(s=i.destroy,r!==null&&ou(r,i.deps)){o.memoizedState=Jo(t,n,s,r);return}}be.flags|=e,o.memoizedState=Jo(1|t,n,s,r)}function $d(e,t){return Js(8390656,8,e,t)}function lu(e,t){return Gi(2048,8,e,t)}function Ih(e,t){return Gi(4,2,e,t)}function Ph(e,t){return Gi(4,4,e,t)}function Th(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $h(e,t,n){return n=n!=null?n.concat([e]):null,Gi(4,4,Th.bind(null,t,e),n)}function au(){}function Mh(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ah(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zh(e,t,n){return ar&21?(Rt(n,t)||(n=Fp(),be.lanes|=n,cr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function Hx(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Vl.transition;Vl.transition={};try{e(!1),t()}finally{he=n,Vl.transition=r}}function Rh(){return kt().memoizedState}function Vx(e,t,n){var r=Pn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dh(e))Oh(t,n);else if(n=xh(e,t,n,r),n!==null){var o=Ye();zt(n,e,r,o),Lh(n,t,r)}}function Bx(e,t,n){var r=Pn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))Oh(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Rt(l,i)){var a=t.interleaved;a===null?(o.next=o,Jc(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}finally{}n=xh(e,t,o,r),n!==null&&(o=Ye(),zt(n,e,r,o),Lh(n,t,r))}}function Dh(e){var t=e.alternate;return e===be||t!==null&&t===be}function Oh(e,t){Ao=ki=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Lh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lc(e,n)}}var _i={readContext:bt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Ux={readContext:bt,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:$d,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Js(4194308,4,Th.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var n=Ht();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ht();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vx.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:Td,useDebugValue:au,useDeferredValue:function(e){return Ht().memoizedState=e},useTransition:function(){var e=Td(!1),t=e[0];return e=Hx.bind(null,e[1]),Ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=be,o=Ht();if(Se){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),Re===null)throw Error(X(349));ar&30||Eh(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,$d(kh.bind(null,r,s,e),[e]),r.flags|=2048,Jo(9,bh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ht(),t=Re.identifierPrefix;if(Se){var n=Zt,r=Gt;n=(r&~(1<<32-At(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Go++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wx={readContext:bt,useCallback:Mh,useContext:bt,useEffect:lu,useImperativeHandle:$h,useInsertionEffect:Ih,useLayoutEffect:Ph,useMemo:Ah,useReducer:Bl,useRef:jh,useState:function(){return Bl(Zo)},useDebugValue:au,useDeferredValue:function(e){var t=kt();return zh(t,$e.memoizedState,e)},useTransition:function(){var e=Bl(Zo)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Nh,useSyncExternalStore:Sh,useId:Rh,unstable_isNewReconciler:!1},Qx={readContext:bt,useCallback:Mh,useContext:bt,useEffect:lu,useImperativeHandle:$h,useInsertionEffect:Ih,useLayoutEffect:Ph,useMemo:Ah,useReducer:Ul,useRef:jh,useState:function(){return Ul(Zo)},useDebugValue:au,useDeferredValue:function(e){var t=kt();return $e===null?t.memoizedState=e:zh(t,$e.memoizedState,e)},useTransition:function(){var e=Ul(Zo)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Nh,useSyncExternalStore:Sh,useId:Rh,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Va(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zi={isMounted:function(e){return(e=e._reactInternals)?mr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ye(),o=Pn(e),s=nn(r,o);s.payload=t,n!=null&&(s.callback=n),t=jn(e,s,o),t!==null&&(zt(t,e,o,r),Gs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ye(),o=Pn(e),s=nn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=jn(e,s,o),t!==null&&(zt(t,e,o,r),Gs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ye(),r=Pn(e),o=nn(n,r);o.tag=2,t!=null&&(o.callback=t),t=jn(e,o,r),t!==null&&(zt(t,e,r,n),Gs(t,e,r))}};function Md(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!Wo(n,r)||!Wo(o,s):!0}function Fh(e,t,n){var r=!1,o=zn,s=t.contextType;return typeof s=="object"&&s!==null?s=bt(s):(o=rt(t)?ir:Qe.current,r=t.contextTypes,s=(r=r!=null)?Wr(e,o):zn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zi,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ad(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zi.enqueueReplaceState(t,t.state,null)}function Ba(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},eu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=bt(s):(s=rt(t)?ir:Qe.current,o.context=Wr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Va(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Zi.enqueueReplaceState(o,o.state,null),Ei(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Xr(e,t){try{var n="",r=t;do n+=wy(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function Wl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ua(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var qx=typeof WeakMap=="function"?WeakMap:Map;function Hh(e,t,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ji||(ji=!0,ec=r),Ua(e,t)},n}function Vh(e,t,n){n=nn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ua(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ua(e,t),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function zd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new qx;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=lv.bind(null,e,t,n),t.then(e,e))}function Rd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=nn(-1,1),t.tag=2,jn(n,t,1))),n.lanes|=1),e)}var Yx=dn.ReactCurrentOwner,et=!1;function qe(e,t,n,r){t.child=e===null?yh(t,null,n,r):qr(t,e.child,n,r)}function Od(e,t,n,r,o){n=n.render;var s=t.ref;return Lr(t,o),r=su(e,t,n,r,s,o),n=iu(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,an(e,t,o)):(Se&&n&&qc(t),t.flags|=1,qe(e,t,r,o),t.child)}function Ld(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!gu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Bh(e,t,s,r,o)):(e=ri(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wo,n(i,r)&&e.ref===t.ref)return an(e,t,o)}return t.flags|=1,e=Tn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Bh(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(Wo(s,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,an(e,t,o)}return Wa(e,t,n,r,o)}function Uh(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Mr,it),it|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(Mr,it),it|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Mr,it),it|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,xe(Mr,it),it|=r;return qe(e,t,o,n),t.child}function Wh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wa(e,t,n,r,o){var s=rt(n)?ir:Qe.current;return s=Wr(t,s),Lr(t,o),n=su(e,t,n,r,s,o),r=iu(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,an(e,t,o)):(Se&&r&&qc(t),t.flags|=1,qe(e,t,n,o),t.child)}function Fd(e,t,n,r,o){if(rt(n)){var s=!0;xi(t)}else s=!1;if(Lr(t,o),t.stateNode===null)ei(e,t),Fh(t,n,r),Ba(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=bt(c):(c=rt(n)?ir:Qe.current,c=Wr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Ad(t,i,r,c),mn=!1;var h=t.memoizedState;i.state=h,Ei(t,r,i,o),a=t.memoizedState,l!==r||h!==a||nt.current||mn?(typeof f=="function"&&(Va(t,n,f,r),a=t.memoizedState),(l=mn||Md(t,n,l,r,h,a,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),i.props=r,i.state=a,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,vh(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Ct(t.type,l),i.props=c,d=t.pendingProps,h=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=bt(a):(a=rt(n)?ir:Qe.current,a=Wr(t,a));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Ad(t,i,r,a),mn=!1,h=t.memoizedState,i.state=h,Ei(t,r,i,o);var x=t.memoizedState;l!==d||h!==x||nt.current||mn?(typeof p=="function"&&(Va(t,n,p,r),x=t.memoizedState),(c=mn||Md(t,n,c,r,h,x,a)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,a)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),i.props=r,i.state=x,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Qa(e,t,n,r,s,o)}function Qa(e,t,n,r,o,s){Wh(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&kd(t,n,!1),an(e,t,s);r=t.stateNode,Yx.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=qr(t,e.child,null,s),t.child=qr(t,null,l,s)):qe(e,t,l,s),t.memoizedState=r.state,o&&kd(t,n,!0),t.child}function Qh(e){var t=e.stateNode;t.pendingContext?bd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bd(e,t.context,!1),tu(e,t.containerInfo)}function Hd(e,t,n,r,o){return Qr(),Xc(o),t.flags|=256,qe(e,t,n,r),t.child}var qa={dehydrated:null,treeContext:null,retryLane:0};function Ya(e){return{baseLanes:e,cachePool:null,transitions:null}}function qh(e,t,n){var r=t.pendingProps,o=Ee.current,s=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),xe(Ee,o&1),e===null)return Fa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=tl(i,r,0,null),e=rr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ya(n),t.memoizedState=qa,e):cu(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Xx(e,t,i,r,l,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,l=o.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=Tn(o,a),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Tn(l,s):(s=rr(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Ya(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=qa,r}return s=e.child,e=s.sibling,r=Tn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cu(e,t){return t=tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ms(e,t,n,r){return r!==null&&Xc(r),qr(t,e.child,null,n),e=cu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xx(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=Wl(Error(X(422))),Ms(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=tl({mode:"visible",children:r.children},o,0,null),s=rr(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&qr(t,e.child,null,i),t.child.memoizedState=Ya(i),t.memoizedState=qa,s);if(!(t.mode&1))return Ms(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=Wl(s,r,void 0),Ms(e,t,i,r)}if(l=(i&e.childLanes)!==0,et||l){if(r=Re,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ln(e,o),zt(r,e,o,-1))}return mu(),r=Wl(Error(X(421))),Ms(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=av.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,at=Cn(o.nextSibling),ct=t,Se=!0,Pt=null,e!==null&&(yt[xt++]=Gt,yt[xt++]=Zt,yt[xt++]=lr,Gt=e.id,Zt=e.overflow,lr=t),t=cu(t,r.children),t.flags|=4096,t)}function Vd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ha(e.return,t,n)}function Ql(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Yh(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(qe(e,t,r.children,n),r=Ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vd(e,n,t);else if(e.tag===19)Vd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xe(Ee,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&bi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ql(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&bi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ql(t,!0,n,null,s);break;case"together":Ql(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ei(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=Tn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Kx(e,t,n){switch(t.tag){case 3:Qh(t),Qr();break;case 5:wh(t);break;case 1:rt(t.type)&&xi(t);break;case 4:tu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;xe(Ni,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xe(Ee,Ee.current&1),t.flags|=128,null):n&t.child.childLanes?qh(e,t,n):(xe(Ee,Ee.current&1),e=an(e,t,n),e!==null?e.sibling:null);xe(Ee,Ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yh(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),xe(Ee,Ee.current),r)break;return null;case 22:case 23:return t.lanes=0,Uh(e,t,n)}return an(e,t,n)}var Xh,Xa,Kh,Gh;Xh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xa=function(){};Kh=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Jn(Ut.current);var s=null;switch(n){case"input":o=ya(e,o),r=ya(e,r),s=[];break;case"select":o=ke({},o,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":o=wa(e,o),r=wa(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=gi)}Sa(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Oo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&l[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Oo.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&we("scroll",e),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};Gh=function(e,t,n,r){n!==r&&(t.flags|=4)};function mo(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gx(e,t,n){var r=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return rt(t.type)&&yi(),Ue(t),null;case 3:return r=t.stateNode,Yr(),Ne(nt),Ne(Qe),ru(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ts(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(rc(Pt),Pt=null))),Xa(e,t),Ue(t),null;case 5:nu(t);var o=Jn(Ko.current);if(n=t.type,e!==null&&t.stateNode!=null)Kh(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return Ue(t),null}if(e=Jn(Ut.current),Ts(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Vt]=t,r[Yo]=s,e=(t.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(o=0;o<ko.length;o++)we(ko[o],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Gu(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":Ju(r,s),we("invalid",r)}Sa(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ps(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ps(r.textContent,l,e),o=["children",""+l]):Oo.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&we("scroll",r)}switch(n){case"input":Ss(r),Zu(r,s,!0);break;case"textarea":Ss(r),ed(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gi)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Vt]=t,e[Yo]=r,Xh(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ea(n,r),n){case"dialog":we("cancel",e),we("close",e),o=r;break;case"iframe":case"object":case"embed":we("load",e),o=r;break;case"video":case"audio":for(o=0;o<ko.length;o++)we(ko[o],e);o=r;break;case"source":we("error",e),o=r;break;case"img":case"image":case"link":we("error",e),we("load",e),o=r;break;case"details":we("toggle",e),o=r;break;case"input":Gu(e,r),o=ya(e,r),we("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ke({},r,{value:void 0}),we("invalid",e);break;case"textarea":Ju(e,r),o=wa(e,r),we("invalid",e);break;default:o=r}Sa(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?jp(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&_p(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Lo(e,a):typeof a=="number"&&Lo(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oo.hasOwnProperty(s)?a!=null&&s==="onScroll"&&we("scroll",e):a!=null&&Mc(e,s,a,i))}switch(n){case"input":Ss(e),Zu(e,r,!1);break;case"textarea":Ss(e),ed(e);break;case"option":r.value!=null&&e.setAttribute("value",""+An(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?zr(e,!!r.multiple,s,!1):r.defaultValue!=null&&zr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=gi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ue(t),null;case 6:if(e&&t.stateNode!=null)Gh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=Jn(Ko.current),Jn(Ut.current),Ts(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vt]=t,(s=r.nodeValue!==n)&&(e=ct,e!==null))switch(e.tag){case 3:Ps(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ps(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vt]=t,t.stateNode=r}return Ue(t),null;case 13:if(Ne(Ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&at!==null&&t.mode&1&&!(t.flags&128))mh(),Qr(),t.flags|=98560,s=!1;else if(s=Ts(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(X(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Vt]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ue(t),s=!1}else Pt!==null&&(rc(Pt),Pt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Me===0&&(Me=3):mu())),t.updateQueue!==null&&(t.flags|=4),Ue(t),null);case 4:return Yr(),Xa(e,t),e===null&&Qo(t.stateNode.containerInfo),Ue(t),null;case 10:return Zc(t.type._context),Ue(t),null;case 17:return rt(t.type)&&yi(),Ue(t),null;case 19:if(Ne(Ee),s=t.memoizedState,s===null)return Ue(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)mo(s,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=bi(e),i!==null){for(t.flags|=128,mo(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(Ee,Ee.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ie()>Kr&&(t.flags|=128,r=!0,mo(s,!1),t.lanes=4194304)}else{if(!r)if(e=bi(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Se)return Ue(t),null}else 2*Ie()-s.renderingStartTime>Kr&&n!==1073741824&&(t.flags|=128,r=!0,mo(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ie(),t.sibling=null,n=Ee.current,xe(Ee,r?n&1|2:n&1),t):(Ue(t),null);case 22:case 23:return hu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?it&1073741824&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Zx(e,t){switch(Yc(t),t.tag){case 1:return rt(t.type)&&yi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yr(),Ne(nt),Ne(Qe),ru(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nu(t),null;case 13:if(Ne(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Ee),null;case 4:return Yr(),null;case 10:return Zc(t.type._context),null;case 22:case 23:return hu(),null;case 24:return null;default:return null}}var As=!1,We=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,se=null;function $r(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function Ka(e,t,n){try{n()}catch(r){_e(e,t,r)}}var Bd=!1;function ev(e,t){if(Ma=pi,e=nh(),Qc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,a=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||o!==0&&d.nodeType!==3||(l=i+o),d!==s||r!==0&&d.nodeType!==3||(a=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===o&&(l=i),h===s&&++f===r&&(a=i),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Aa={focusedElem:e,selectionRange:n},pi=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,S=x.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ct(t.type,w),S);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(v){_e(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return x=Bd,Bd=!1,x}function zo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Ka(t,n,s)}o=o.next}while(o!==r)}}function Ji(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ga(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zh(e){var t=e.alternate;t!==null&&(e.alternate=null,Zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[Yo],delete t[Da],delete t[Rx],delete t[Dx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jh(e){return e.tag===5||e.tag===3||e.tag===4}function Ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Za(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=gi));else if(r!==4&&(e=e.child,e!==null))for(Za(e,t,n),e=e.sibling;e!==null;)Za(e,t,n),e=e.sibling}function Ja(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ja(e,t,n),e=e.sibling;e!==null;)Ja(e,t,n),e=e.sibling}var Le=null,jt=!1;function fn(e,t,n){for(n=n.child;n!==null;)em(e,t,n),n=n.sibling}function em(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Wi,n)}catch{}switch(n.tag){case 5:We||$r(n,t);case 6:var r=Le,o=jt;Le=null,fn(e,t,n),Le=r,jt=o,Le!==null&&(jt?(e=Le,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(jt?(e=Le,n=n.stateNode,e.nodeType===8?Ll(e.parentNode,n):e.nodeType===1&&Ll(e,n),Bo(e)):Ll(Le,n.stateNode));break;case 4:r=Le,o=jt,Le=n.stateNode.containerInfo,jt=!0,fn(e,t,n),Le=r,jt=o;break;case 0:case 11:case 14:case 15:if(!We&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Ka(n,t,i),o=o.next}while(o!==r)}fn(e,t,n);break;case 1:if(!We&&($r(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){_e(n,t,l)}fn(e,t,n);break;case 21:fn(e,t,n);break;case 22:n.mode&1?(We=(r=We)||n.memoizedState!==null,fn(e,t,n),We=r):fn(e,t,n);break;default:fn(e,t,n)}}function Wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Jx),t.forEach(function(r){var o=cv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function _t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,jt=!1;break e;case 3:Le=l.stateNode.containerInfo,jt=!0;break e;case 4:Le=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(Le===null)throw Error(X(160));em(s,i,o),Le=null,jt=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(c){_e(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tm(t,e),t=t.sibling}function tm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),Ft(e),r&4){try{zo(3,e,e.return),Ji(3,e)}catch(w){_e(e,e.return,w)}try{zo(5,e,e.return)}catch(w){_e(e,e.return,w)}}break;case 1:_t(t,e),Ft(e),r&512&&n!==null&&$r(n,n.return);break;case 5:if(_t(t,e),Ft(e),r&512&&n!==null&&$r(n,n.return),e.flags&32){var o=e.stateNode;try{Lo(o,"")}catch(w){_e(e,e.return,w)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ep(o,s),Ea(l,i);var c=Ea(l,s);for(i=0;i<a.length;i+=2){var f=a[i],d=a[i+1];f==="style"?jp(o,d):f==="dangerouslySetInnerHTML"?_p(o,d):f==="children"?Lo(o,d):Mc(o,f,d,c)}switch(l){case"input":xa(o,s);break;case"textarea":bp(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?zr(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?zr(o,!!s.multiple,s.defaultValue,!0):zr(o,!!s.multiple,s.multiple?[]:"",!1))}o[Yo]=s}catch(w){_e(e,e.return,w)}}break;case 6:if(_t(t,e),Ft(e),r&4){if(e.stateNode===null)throw Error(X(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(w){_e(e,e.return,w)}}break;case 3:if(_t(t,e),Ft(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bo(t.containerInfo)}catch(w){_e(e,e.return,w)}break;case 4:_t(t,e),Ft(e);break;case 13:_t(t,e),Ft(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(fu=Ie())),r&4&&Wd(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(We=(c=We)||f,_t(t,e),We=c):_t(t,e),Ft(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(se=e,f=e.child;f!==null;){for(d=se=f;se!==null;){switch(h=se,p=h.child,h.tag){case 0:case 11:case 14:case 15:zo(4,h,h.return);break;case 1:$r(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){_e(r,n,w)}}break;case 5:$r(h,h.return);break;case 22:if(h.memoizedState!==null){qd(d);continue}}p!==null?(p.return=h,se=p):qd(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Cp("display",i))}catch(w){_e(e,e.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){_e(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_t(t,e),Ft(e),r&4&&Wd(e);break;case 21:break;default:_t(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jh(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Lo(o,""),r.flags&=-33);var s=Ud(e);Ja(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Ud(e);Za(e,l,i);break;default:throw Error(X(161))}}catch(a){_e(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tv(e,t,n){se=e,nm(e)}function nm(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var o=se,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||As;if(!i){var l=o.alternate,a=l!==null&&l.memoizedState!==null||We;l=As;var c=We;if(As=i,(We=a)&&!c)for(se=o;se!==null;)i=se,a=i.child,i.tag===22&&i.memoizedState!==null?Yd(o):a!==null?(a.return=i,se=a):Yd(o);for(;s!==null;)se=s,nm(s),s=s.sibling;se=o,As=l,We=c}Qd(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,se=s):Qd(e)}}function Qd(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||Ji(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!We)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ct(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Pd(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pd(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Bo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}We||t.flags&512&&Ga(t)}catch(h){_e(t,t.return,h)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function qd(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Yd(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ji(4,t)}catch(a){_e(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(a){_e(t,o,a)}}var s=t.return;try{Ga(t)}catch(a){_e(t,s,a)}break;case 5:var i=t.return;try{Ga(t)}catch(a){_e(t,i,a)}}}catch(a){_e(t,t.return,a)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var nv=Math.ceil,Ci=dn.ReactCurrentDispatcher,uu=dn.ReactCurrentOwner,St=dn.ReactCurrentBatchConfig,fe=0,Re=null,Pe=null,Fe=0,it=0,Mr=On(0),Me=0,es=null,cr=0,el=0,du=0,Ro=null,Je=null,fu=0,Kr=1/0,Xt=null,ji=!1,ec=null,In=null,zs=!1,Sn=null,Ii=0,Do=0,tc=null,ti=-1,ni=0;function Ye(){return fe&6?Ie():ti!==-1?ti:ti=Ie()}function Pn(e){return e.mode&1?fe&2&&Fe!==0?Fe&-Fe:Lx.transition!==null?(ni===0&&(ni=Fp()),ni):(e=he,e!==0||(e=window.event,e=e===void 0?16:qp(e.type)),e):1}function zt(e,t,n,r){if(50<Do)throw Do=0,tc=null,Error(X(185));fs(e,n,r),(!(fe&2)||e!==Re)&&(e===Re&&(!(fe&2)&&(el|=n),Me===4&&vn(e,Fe)),ot(e,r),n===1&&fe===0&&!(t.mode&1)&&(Kr=Ie()+500,Ki&&Ln()))}function ot(e,t){var n=e.callbackNode;Ly(e,t);var r=fi(e,e===Re?Fe:0);if(r===0)n!==null&&rd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rd(n),t===1)e.tag===0?Ox(Xd.bind(null,e)):fh(Xd.bind(null,e)),Ax(function(){!(fe&6)&&Ln()}),n=null;else{switch(Hp(r)){case 1:n=Oc;break;case 4:n=Op;break;case 16:n=di;break;case 536870912:n=Lp;break;default:n=di}n=um(n,rm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rm(e,t){if(ti=-1,ni=0,fe&6)throw Error(X(327));var n=e.callbackNode;if(Fr()&&e.callbackNode!==n)return null;var r=fi(e,e===Re?Fe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pi(e,r);else{t=r;var o=fe;fe|=2;var s=sm();(Re!==e||Fe!==t)&&(Xt=null,Kr=Ie()+500,nr(e,t));do try{sv();break}catch(l){om(e,l)}while(!0);Gc(),Ci.current=s,fe=o,Pe!==null?t=0:(Re=null,Fe=0,t=Me)}if(t!==0){if(t===2&&(o=ja(e),o!==0&&(r=o,t=nc(e,o))),t===1)throw n=es,nr(e,0),vn(e,r),ot(e,Ie()),n;if(t===6)vn(e,r);else{if(o=e.current.alternate,!(r&30)&&!rv(o)&&(t=Pi(e,r),t===2&&(s=ja(e),s!==0&&(r=s,t=nc(e,s))),t===1))throw n=es,nr(e,0),vn(e,r),ot(e,Ie()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:qn(e,Je,Xt);break;case 3:if(vn(e,r),(r&130023424)===r&&(t=fu+500-Ie(),10<t)){if(fi(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ye(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ra(qn.bind(null,e,Je,Xt),t);break}qn(e,Je,Xt);break;case 4:if(vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-At(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nv(r/1960))-r,10<r){e.timeoutHandle=Ra(qn.bind(null,e,Je,Xt),r);break}qn(e,Je,Xt);break;case 5:qn(e,Je,Xt);break;default:throw Error(X(329))}}}return ot(e,Ie()),e.callbackNode===n?rm.bind(null,e):null}function nc(e,t){var n=Ro;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=Pi(e,t),e!==2&&(t=Je,Je=n,t!==null&&rc(t)),e}function rc(e){Je===null?Je=e:Je.push.apply(Je,e)}function rv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Rt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~du,t&=~el,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-At(t),r=1<<n;e[n]=-1,t&=~r}}function Xd(e){if(fe&6)throw Error(X(327));Fr();var t=fi(e,0);if(!(t&1))return ot(e,Ie()),null;var n=Pi(e,t);if(e.tag!==0&&n===2){var r=ja(e);r!==0&&(t=r,n=nc(e,r))}if(n===1)throw n=es,nr(e,0),vn(e,t),ot(e,Ie()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qn(e,Je,Xt),ot(e,Ie()),null}function pu(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(Kr=Ie()+500,Ki&&Ln())}}function ur(e){Sn!==null&&Sn.tag===0&&!(fe&6)&&Fr();var t=fe;fe|=1;var n=St.transition,r=he;try{if(St.transition=null,he=1,e)return e()}finally{he=r,St.transition=n,fe=t,!(fe&6)&&Ln()}}function hu(){it=Mr.current,Ne(Mr)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Mx(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yi();break;case 3:Yr(),Ne(nt),Ne(Qe),ru();break;case 5:nu(r);break;case 4:Yr();break;case 13:Ne(Ee);break;case 19:Ne(Ee);break;case 10:Zc(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Re=e,Pe=e=Tn(e.current,null),Fe=it=t,Me=0,es=null,du=el=cr=0,Je=Ro=null,Zn!==null){for(t=0;t<Zn.length;t++)if(n=Zn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Zn=null}return e}function om(e,t){do{var n=Pe;try{if(Gc(),Zs.current=_i,ki){for(var r=be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ki=!1}if(ar=0,ze=$e=be=null,Ao=!1,Go=0,uu.current=null,n===null||n.return===null){Me=1,es=t,Pe=null;break}e:{var s=e,i=n.return,l=n,a=t;if(t=Fe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Rd(i);if(p!==null){p.flags&=-257,Dd(p,i,l,s,t),p.mode&1&&zd(s,c,t),t=p,a=c;var x=t.updateQueue;if(x===null){var w=new Set;w.add(a),t.updateQueue=w}else x.add(a);break e}else{if(!(t&1)){zd(s,c,t),mu();break e}a=Error(X(426))}}else if(Se&&l.mode&1){var S=Rd(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Dd(S,i,l,s,t),Xc(Xr(a,l));break e}}s=a=Xr(a,l),Me!==4&&(Me=2),Ro===null?Ro=[s]:Ro.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=Hh(s,a,t);Id(s,m);break e;case 1:l=a;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(In===null||!In.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=Vh(s,l,t);Id(s,v);break e}}s=s.return}while(s!==null)}lm(n)}catch(C){t=C,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function sm(){var e=Ci.current;return Ci.current=_i,e===null?_i:e}function mu(){(Me===0||Me===3||Me===2)&&(Me=4),Re===null||!(cr&268435455)&&!(el&268435455)||vn(Re,Fe)}function Pi(e,t){var n=fe;fe|=2;var r=sm();(Re!==e||Fe!==t)&&(Xt=null,nr(e,t));do try{ov();break}catch(o){om(e,o)}while(!0);if(Gc(),fe=n,Ci.current=r,Pe!==null)throw Error(X(261));return Re=null,Fe=0,Me}function ov(){for(;Pe!==null;)im(Pe)}function sv(){for(;Pe!==null&&!Py();)im(Pe)}function im(e){var t=cm(e.alternate,e,it);e.memoizedProps=e.pendingProps,t===null?lm(e):Pe=t,uu.current=null}function lm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Zx(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Pe=null;return}}else if(n=Gx(n,t,it),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);Me===0&&(Me=5)}function qn(e,t,n){var r=he,o=St.transition;try{St.transition=null,he=1,iv(e,t,n,r)}finally{St.transition=o,he=r}return null}function iv(e,t,n,r){do Fr();while(Sn!==null);if(fe&6)throw Error(X(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fy(e,s),e===Re&&(Pe=Re=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zs||(zs=!0,um(di,function(){return Fr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=St.transition,St.transition=null;var i=he;he=1;var l=fe;fe|=4,uu.current=null,ev(e,n),tm(n,e),_x(Aa),pi=!!Ma,Aa=Ma=null,e.current=n,tv(n),Ty(),fe=l,he=i,St.transition=s}else e.current=n;if(zs&&(zs=!1,Sn=e,Ii=o),s=e.pendingLanes,s===0&&(In=null),Ay(n.stateNode),ot(e,Ie()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ji)throw ji=!1,e=ec,ec=null,e;return Ii&1&&e.tag!==0&&Fr(),s=e.pendingLanes,s&1?e===tc?Do++:(Do=0,tc=e):Do=0,Ln(),null}function Fr(){if(Sn!==null){var e=Hp(Ii),t=St.transition,n=he;try{if(St.transition=null,he=16>e?16:e,Sn===null)var r=!1;else{if(e=Sn,Sn=null,Ii=0,fe&6)throw Error(X(331));var o=fe;for(fe|=4,se=e.current;se!==null;){var s=se,i=s.child;if(se.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(se=c;se!==null;){var f=se;switch(f.tag){case 0:case 11:case 15:zo(8,f,s)}var d=f.child;if(d!==null)d.return=f,se=d;else for(;se!==null;){f=se;var h=f.sibling,p=f.return;if(Zh(f),f===c){se=null;break}if(h!==null){h.return=p,se=h;break}se=p}}}var x=s.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}se=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,se=i;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zo(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,se=m;break e}se=s.return}}var g=e.current;for(se=g;se!==null;){i=se;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,se=y;else e:for(i=g;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ji(9,l)}}catch(C){_e(l,l.return,C)}if(l===i){se=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,se=v;break e}se=l.return}}if(fe=o,Ln(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Wi,e)}catch{}r=!0}return r}finally{he=n,St.transition=t}}return!1}function Kd(e,t,n){t=Xr(n,t),t=Hh(e,t,1),e=jn(e,t,1),t=Ye(),e!==null&&(fs(e,1,t),ot(e,t))}function _e(e,t,n){if(e.tag===3)Kd(e,e,n);else for(;t!==null;){if(t.tag===3){Kd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){e=Xr(n,e),e=Vh(t,e,1),t=jn(t,e,1),e=Ye(),t!==null&&(fs(t,1,e),ot(t,e));break}}t=t.return}}function lv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ye(),e.pingedLanes|=e.suspendedLanes&n,Re===e&&(Fe&n)===n&&(Me===4||Me===3&&(Fe&130023424)===Fe&&500>Ie()-fu?nr(e,0):du|=n),ot(e,t)}function am(e,t){t===0&&(e.mode&1?(t=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):t=1);var n=Ye();e=ln(e,t),e!==null&&(fs(e,t,n),ot(e,n))}function av(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),am(e,n)}function cv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),am(e,n)}var cm;cm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Kx(e,t,n);et=!!(e.flags&131072)}else et=!1,Se&&t.flags&1048576&&ph(t,wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ei(e,t),e=t.pendingProps;var o=Wr(t,Qe.current);Lr(t,n),o=su(null,t,r,e,o,n);var s=iu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(r)?(s=!0,xi(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,eu(t),o.updater=Zi,t.stateNode=o,o._reactInternals=t,Ba(t,r,e,n),t=Qa(null,t,r,!0,s,n)):(t.tag=0,Se&&s&&qc(t),qe(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ei(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=dv(r),e=Ct(r,e),o){case 0:t=Wa(null,t,r,e,n);break e;case 1:t=Fd(null,t,r,e,n);break e;case 11:t=Od(null,t,r,e,n);break e;case 14:t=Ld(null,t,r,Ct(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ct(r,o),Wa(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ct(r,o),Fd(e,t,r,o,n);case 3:e:{if(Qh(t),e===null)throw Error(X(387));r=t.pendingProps,s=t.memoizedState,o=s.element,vh(e,t),Ei(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Xr(Error(X(423)),t),t=Hd(e,t,r,n,o);break e}else if(r!==o){o=Xr(Error(X(424)),t),t=Hd(e,t,r,n,o);break e}else for(at=Cn(t.stateNode.containerInfo.firstChild),ct=t,Se=!0,Pt=null,n=yh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qr(),r===o){t=an(e,t,n);break e}qe(e,t,r,n)}t=t.child}return t;case 5:return wh(t),e===null&&Fa(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,za(r,o)?i=null:s!==null&&za(r,s)&&(t.flags|=32),Wh(e,t),qe(e,t,i,n),t.child;case 6:return e===null&&Fa(t),null;case 13:return qh(e,t,n);case 4:return tu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qr(t,null,r,n):qe(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ct(r,o),Od(e,t,r,o,n);case 7:return qe(e,t,t.pendingProps,n),t.child;case 8:return qe(e,t,t.pendingProps.children,n),t.child;case 12:return qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,xe(Ni,r._currentValue),r._currentValue=i,s!==null)if(Rt(s.value,i)){if(s.children===o.children&&!nt.current){t=an(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=nn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ha(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(X(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ha(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}qe(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Lr(t,n),o=bt(o),r=r(o),t.flags|=1,qe(e,t,r,n),t.child;case 14:return r=t.type,o=Ct(r,t.pendingProps),o=Ct(r.type,o),Ld(e,t,r,o,n);case 15:return Bh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ct(r,o),ei(e,t),t.tag=1,rt(r)?(e=!0,xi(t)):e=!1,Lr(t,n),Fh(t,r,o),Ba(t,r,o,n),Qa(null,t,r,!0,e,n);case 19:return Yh(e,t,n);case 22:return Uh(e,t,n)}throw Error(X(156,t.tag))};function um(e,t){return Dp(e,t)}function uv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,n,r){return new uv(e,t,n,r)}function gu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dv(e){if(typeof e=="function")return gu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zc)return 11;if(e===Rc)return 14}return 2}function Tn(e,t){var n=e.alternate;return n===null?(n=wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ri(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")gu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Er:return rr(n.children,o,s,t);case Ac:i=8,o|=8;break;case pa:return e=wt(12,n,t,o|2),e.elementType=pa,e.lanes=s,e;case ha:return e=wt(13,n,t,o),e.elementType=ha,e.lanes=s,e;case ma:return e=wt(19,n,t,o),e.elementType=ma,e.lanes=s,e;case wp:return tl(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xp:i=10;break e;case vp:i=9;break e;case zc:i=11;break e;case Rc:i=14;break e;case hn:i=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=wt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function rr(e,t,n,r){return e=wt(7,e,r,t),e.lanes=n,e}function tl(e,t,n,r){return e=wt(22,e,r,t),e.elementType=wp,e.lanes=n,e.stateNode={isHidden:!1},e}function ql(e,t,n){return e=wt(6,e,null,t),e.lanes=n,e}function Yl(e,t,n){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function yu(e,t,n,r,o,s,i,l,a){return e=new fv(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=wt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(s),e}function pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dm(e){if(!e)return zn;e=e._reactInternals;e:{if(mr(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(rt(n))return dh(e,n,t)}return t}function fm(e,t,n,r,o,s,i,l,a){return e=yu(n,r,!0,e,o,s,i,l,a),e.context=dm(null),n=e.current,r=Ye(),o=Pn(n),s=nn(r,o),s.callback=t??null,jn(n,s,o),e.current.lanes=o,fs(e,o,r),ot(e,r),e}function nl(e,t,n,r){var o=t.current,s=Ye(),i=Pn(o);return n=dm(n),t.context===null?t.context=n:t.pendingContext=n,t=nn(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jn(o,t,i),e!==null&&(zt(e,o,i,s),Gs(e,o,i)),i}function Ti(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xu(e,t){Gd(e,t),(e=e.alternate)&&Gd(e,t)}function hv(){return null}var pm=typeof reportError=="function"?reportError:function(e){console.error(e)};function vu(e){this._internalRoot=e}rl.prototype.render=vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));nl(e,t,null,null)};rl.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ur(function(){nl(null,e,null,null)}),t[sn]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Up();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xn.length&&t!==0&&t<xn[n].priority;n++);xn.splice(n,0,e),n===0&&Qp(e)}};function wu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zd(){}function mv(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Ti(i);s.call(c)}}var i=fm(t,r,e,0,null,!1,!1,"",Zd);return e._reactRootContainer=i,e[sn]=i.current,Qo(e.nodeType===8?e.parentNode:e),ur(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=Ti(a);l.call(c)}}var a=yu(e,0,!1,null,null,!1,!1,"",Zd);return e._reactRootContainer=a,e[sn]=a.current,Qo(e.nodeType===8?e.parentNode:e),ur(function(){nl(t,a,n,r)}),a}function sl(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var a=Ti(i);l.call(a)}}nl(t,i,e,o)}else i=mv(n,t,e,o,r);return Ti(i)}Vp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bo(t.pendingLanes);n!==0&&(Lc(t,n|1),ot(t,Ie()),!(fe&6)&&(Kr=Ie()+500,Ln()))}break;case 13:ur(function(){var r=ln(e,1);if(r!==null){var o=Ye();zt(r,e,1,o)}}),xu(e,1)}};Fc=function(e){if(e.tag===13){var t=ln(e,134217728);if(t!==null){var n=Ye();zt(t,e,134217728,n)}xu(e,134217728)}};Bp=function(e){if(e.tag===13){var t=Pn(e),n=ln(e,t);if(n!==null){var r=Ye();zt(n,e,t,r)}xu(e,t)}};Up=function(){return he};Wp=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};ka=function(e,t,n){switch(t){case"input":if(xa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Xi(r);if(!o)throw Error(X(90));Sp(r),xa(r,o)}}}break;case"textarea":bp(e,n);break;case"select":t=n.value,t!=null&&zr(e,!!n.multiple,t,!1)}};Tp=pu;$p=ur;var gv={usingClientEntryPoint:!1,Events:[hs,Cr,Xi,Ip,Pp,pu]},go={findFiberByHostInstance:Gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yv={bundleType:go.bundleType,version:go.version,rendererPackageName:go.rendererPackageName,rendererConfig:go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zp(e),e===null?null:e.stateNode},findFiberByHostInstance:go.findFiberByHostInstance||hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rs.isDisabled&&Rs.supportsFiber)try{Wi=Rs.inject(yv),Bt=Rs}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv;ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wu(t))throw Error(X(200));return pv(e,t,null,n)};ht.createRoot=function(e,t){if(!wu(e))throw Error(X(299));var n=!1,r="",o=pm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=yu(e,1,!1,null,null,n,!1,r,o),e[sn]=t.current,Qo(e.nodeType===8?e.parentNode:e),new vu(t)};ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=zp(t),e=e===null?null:e.stateNode,e};ht.flushSync=function(e){return ur(e)};ht.hydrate=function(e,t,n){if(!ol(t))throw Error(X(200));return sl(null,e,t,!0,n)};ht.hydrateRoot=function(e,t,n){if(!wu(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=pm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=fm(t,null,e,1,n??null,o,!1,s,i),e[sn]=t.current,Qo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new rl(t)};ht.render=function(e,t,n){if(!ol(t))throw Error(X(200));return sl(null,e,t,!1,n)};ht.unmountComponentAtNode=function(e){if(!ol(e))throw Error(X(40));return e._reactRootContainer?(ur(function(){sl(null,null,e,!1,function(){e._reactRootContainer=null,e[sn]=null})}),!0):!1};ht.unstable_batchedUpdates=pu;ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ol(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return sl(e,t,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function hm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hm)}catch(e){console.error(e)}}hm(),hp.exports=ht;var xv=hp.exports,Jd=xv;da.createRoot=Jd.createRoot,da.hydrateRoot=Jd.hydrateRoot;function Ve(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ve(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var mm={exports:{}},gm={},ym={exports:{}},xm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gr=P;function vv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wv=typeof Object.is=="function"?Object.is:vv,Nv=Gr.useState,Sv=Gr.useEffect,Ev=Gr.useLayoutEffect,bv=Gr.useDebugValue;function kv(e,t){var n=t(),r=Nv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Ev(function(){o.value=n,o.getSnapshot=t,Xl(o)&&s({inst:o})},[e,n,t]),Sv(function(){return Xl(o)&&s({inst:o}),e(function(){Xl(o)&&s({inst:o})})},[e]),bv(n),n}function Xl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wv(e,n)}catch{return!0}}function _v(e,t){return t()}var Cv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_v:kv;xm.useSyncExternalStore=Gr.useSyncExternalStore!==void 0?Gr.useSyncExternalStore:Cv;ym.exports=xm;var jv=ym.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var il=P,Iv=jv;function Pv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tv=typeof Object.is=="function"?Object.is:Pv,$v=Iv.useSyncExternalStore,Mv=il.useRef,Av=il.useEffect,zv=il.useMemo,Rv=il.useDebugValue;gm.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Mv(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=zv(function(){function a(p){if(!c){if(c=!0,f=p,p=r(p),o!==void 0&&i.hasValue){var x=i.value;if(o(x,p))return d=x}return d=p}if(x=d,Tv(f,p))return x;var w=r(p);return o!==void 0&&o(x,w)?(f=p,x):(f=p,d=w)}var c=!1,f,d,h=n===void 0?null:n;return[function(){return a(t())},h===null?void 0:function(){return a(h())}]},[t,n,r,o]);var l=$v(e,s[0],s[1]);return Av(function(){i.hasValue=!0,i.value=l},[l]),Rv(l),l};mm.exports=gm;var Dv=mm.exports;const vm=np(Dv),Ov={},ef=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,p))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Ov?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,a);return a},wm=e=>e?ef(e):ef,{useDebugValue:Lv}=H,{useSyncExternalStoreWithSelector:Fv}=vm,Hv=e=>e;function Nm(e,t=Hv,n){const r=Fv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lv(r),r}const tf=(e,t)=>{const n=wm(e),r=(o,s=t)=>Nm(n,o,s);return Object.assign(r,n),r},Vv=(e,t)=>e?tf(e,t):tf;function De(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Bv={value:()=>{}};function ll(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new oi(n)}function oi(e){this._=e}function Uv(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}oi.prototype=ll.prototype={constructor:oi,on:function(e,t){var n=this._,r=Uv(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=Wv(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=nf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=nf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oi(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function Wv(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function nf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Bv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var oc="http://www.w3.org/1999/xhtml";const rf={svg:"http://www.w3.org/2000/svg",xhtml:oc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function al(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),rf.hasOwnProperty(t)?{space:rf[t],local:e}:e}function Qv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===oc&&t.documentElement.namespaceURI===oc?t.createElement(e):t.createElementNS(n,e)}}function qv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sm(e){var t=al(e);return(t.local?qv:Qv)(t)}function Yv(){}function Nu(e){return e==null?Yv:function(){return this.querySelector(e)}}function Xv(e){typeof e!="function"&&(e=Nu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=new Array(i),a,c,f=0;f<i;++f)(a=s[f])&&(c=e.call(a,a.__data__,f,s))&&("__data__"in a&&(c.__data__=a.__data__),l[f]=c);return new dt(r,this._parents)}function Kv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Gv(){return[]}function Em(e){return e==null?Gv:function(){return this.querySelectorAll(e)}}function Zv(e){return function(){return Kv(e.apply(this,arguments))}}function Jv(e){typeof e=="function"?e=Zv(e):e=Em(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&(r.push(e.call(a,a.__data__,c,i)),o.push(a));return new dt(r,o)}function bm(e){return function(){return this.matches(e)}}function km(e){return function(t){return t.matches(e)}}var e1=Array.prototype.find;function t1(e){return function(){return e1.call(this.children,e)}}function n1(){return this.firstElementChild}function r1(e){return this.select(e==null?n1:t1(typeof e=="function"?e:km(e)))}var o1=Array.prototype.filter;function s1(){return Array.from(this.children)}function i1(e){return function(){return o1.call(this.children,e)}}function l1(e){return this.selectAll(e==null?s1:i1(typeof e=="function"?e:km(e)))}function a1(e){typeof e!="function"&&(e=bm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new dt(r,this._parents)}function _m(e){return new Array(e.length)}function c1(){return new dt(this._enter||this._groups.map(_m),this._parents)}function $i(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}$i.prototype={constructor:$i,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function u1(e){return function(){return e}}function d1(e,t,n,r,o,s){for(var i=0,l,a=t.length,c=s.length;i<c;++i)(l=t[i])?(l.__data__=s[i],r[i]=l):n[i]=new $i(e,s[i]);for(;i<a;++i)(l=t[i])&&(o[i]=l)}function f1(e,t,n,r,o,s,i){var l,a,c=new Map,f=t.length,d=s.length,h=new Array(f),p;for(l=0;l<f;++l)(a=t[l])&&(h[l]=p=i.call(a,a.__data__,l,t)+"",c.has(p)?o[l]=a:c.set(p,a));for(l=0;l<d;++l)p=i.call(e,s[l],l,s)+"",(a=c.get(p))?(r[l]=a,a.__data__=s[l],c.delete(p)):n[l]=new $i(e,s[l]);for(l=0;l<f;++l)(a=t[l])&&c.get(h[l])===a&&(o[l]=a)}function p1(e){return e.__data__}function h1(e,t){if(!arguments.length)return Array.from(this,p1);var n=t?f1:d1,r=this._parents,o=this._groups;typeof e!="function"&&(e=u1(e));for(var s=o.length,i=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var f=r[c],d=o[c],h=d.length,p=m1(e.call(f,f&&f.__data__,c,r)),x=p.length,w=l[c]=new Array(x),S=i[c]=new Array(x),m=a[c]=new Array(h);n(f,d,w,S,m,p,t);for(var g=0,y=0,v,C;g<x;++g)if(v=w[g]){for(g>=y&&(y=g+1);!(C=S[y])&&++y<x;);v._next=C||null}}return i=new dt(i,r),i._enter=l,i._exit=a,i}function m1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g1(){return new dt(this._exit||this._groups.map(_m),this._parents)}function y1(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function x1(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),l=new Array(o),a=0;a<i;++a)for(var c=n[a],f=r[a],d=c.length,h=l[a]=new Array(d),p,x=0;x<d;++x)(p=c[x]||f[x])&&(h[x]=p);for(;a<o;++a)l[a]=n[a];return new dt(l,this._parents)}function v1(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function w1(e){e||(e=N1);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],l=i.length,a=o[s]=new Array(l),c,f=0;f<l;++f)(c=i[f])&&(a[f]=c);a.sort(t)}return new dt(o,this._parents).order()}function N1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function S1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function E1(){return Array.from(this)}function b1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function k1(){let e=0;for(const t of this)++e;return e}function _1(){return!this.node()}function C1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,l;s<i;++s)(l=o[s])&&e.call(l,l.__data__,s,o);return this}function j1(e){return function(){this.removeAttribute(e)}}function I1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P1(e,t){return function(){this.setAttribute(e,t)}}function T1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function M1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function A1(e,t){var n=al(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?I1:j1:typeof t=="function"?n.local?M1:$1:n.local?T1:P1)(n,t))}function Cm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function z1(e){return function(){this.style.removeProperty(e)}}function R1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function D1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function O1(e,t,n){return arguments.length>1?this.each((t==null?z1:typeof t=="function"?D1:R1)(e,t,n??"")):Zr(this.node(),e)}function Zr(e,t){return e.style.getPropertyValue(t)||Cm(e).getComputedStyle(e,null).getPropertyValue(t)}function L1(e){return function(){delete this[e]}}function F1(e,t){return function(){this[e]=t}}function H1(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function V1(e,t){return arguments.length>1?this.each((t==null?L1:typeof t=="function"?H1:F1)(e,t)):this.node()[e]}function jm(e){return e.trim().split(/^|\s+/)}function Su(e){return e.classList||new Im(e)}function Im(e){this._node=e,this._names=jm(e.getAttribute("class")||"")}Im.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pm(e,t){for(var n=Su(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Tm(e,t){for(var n=Su(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function B1(e){return function(){Pm(this,e)}}function U1(e){return function(){Tm(this,e)}}function W1(e,t){return function(){(t.apply(this,arguments)?Pm:Tm)(this,e)}}function Q1(e,t){var n=jm(e+"");if(arguments.length<2){for(var r=Su(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?W1:t?B1:U1)(n,t))}function q1(){this.textContent=""}function Y1(e){return function(){this.textContent=e}}function X1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function K1(e){return arguments.length?this.each(e==null?q1:(typeof e=="function"?X1:Y1)(e)):this.node().textContent}function G1(){this.innerHTML=""}function Z1(e){return function(){this.innerHTML=e}}function J1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ew(e){return arguments.length?this.each(e==null?G1:(typeof e=="function"?J1:Z1)(e)):this.node().innerHTML}function tw(){this.nextSibling&&this.parentNode.appendChild(this)}function nw(){return this.each(tw)}function rw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ow(){return this.each(rw)}function sw(e){var t=typeof e=="function"?e:Sm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iw(){return null}function lw(e,t){var n=typeof e=="function"?e:Sm(e),r=t==null?iw:typeof t=="function"?t:Nu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aw(){var e=this.parentNode;e&&e.removeChild(this)}function cw(){return this.each(aw)}function uw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fw(e){return this.select(e?dw:uw)}function pw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hw(e){return function(t){e.call(this,t,this.__data__)}}function mw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function yw(e,t,n){return function(){var r=this.__on,o,s=hw(t);if(r){for(var i=0,l=r.length;i<l;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function xw(e,t,n){var r=mw(e+""),o,s=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,f;a<c;++a)for(o=0,f=l[a];o<s;++o)if((i=r[o]).type===f.type&&i.name===f.name)return f.value}return}for(l=t?yw:gw,o=0;o<s;++o)this.each(l(r[o],t,n));return this}function $m(e,t,n){var r=Cm(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function vw(e,t){return function(){return $m(this,e,t)}}function ww(e,t){return function(){return $m(this,e,t.apply(this,arguments))}}function Nw(e,t){return this.each((typeof t=="function"?ww:vw)(e,t))}function*Sw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var Mm=[null];function dt(e,t){this._groups=e,this._parents=t}function gs(){return new dt([[document.documentElement]],Mm)}function Ew(){return this}dt.prototype=gs.prototype={constructor:dt,select:Xv,selectAll:Jv,selectChild:r1,selectChildren:l1,filter:a1,data:h1,enter:c1,exit:g1,join:y1,merge:x1,selection:Ew,order:v1,sort:w1,call:S1,nodes:E1,node:b1,size:k1,empty:_1,each:C1,attr:A1,style:O1,property:V1,classed:Q1,text:K1,html:ew,raise:nw,lower:ow,append:sw,insert:lw,remove:cw,clone:fw,datum:pw,on:xw,dispatch:Nw,[Symbol.iterator]:Sw};function vt(e){return typeof e=="string"?new dt([[document.querySelector(e)]],[document.documentElement]):new dt([[e]],Mm)}function bw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function It(e,t){if(e=bw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const kw={passive:!1},ts={capture:!0,passive:!1};function Kl(e){e.stopImmediatePropagation()}function Hr(e){e.preventDefault(),e.stopImmediatePropagation()}function Am(e){var t=e.document.documentElement,n=vt(e).on("dragstart.drag",Hr,ts);"onselectstart"in t?n.on("selectstart.drag",Hr,ts):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function zm(e,t){var n=e.document.documentElement,r=vt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Hr,ts),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ds=e=>()=>e;function sc(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:l,dx:a,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}sc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function _w(e){return!e.ctrlKey&&!e.button}function Cw(){return this.parentNode}function jw(e,t){return t??{x:e.x,y:e.y}}function Iw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pw(){var e=_w,t=Cw,n=jw,r=Iw,o={},s=ll("start","drag","end"),i=0,l,a,c,f,d=0;function h(v){v.on("mousedown.drag",p).filter(r).on("touchstart.drag",S).on("touchmove.drag",m,kw).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,C){if(!(f||!e.call(this,v,C))){var E=y(this,t.call(this,v,C),v,C,"mouse");E&&(vt(v.view).on("mousemove.drag",x,ts).on("mouseup.drag",w,ts),Am(v.view),Kl(v),c=!1,l=v.clientX,a=v.clientY,E("start",v))}}function x(v){if(Hr(v),!c){var C=v.clientX-l,E=v.clientY-a;c=C*C+E*E>d}o.mouse("drag",v)}function w(v){vt(v.view).on("mousemove.drag mouseup.drag",null),zm(v.view,c),Hr(v),o.mouse("end",v)}function S(v,C){if(e.call(this,v,C)){var E=v.changedTouches,I=t.call(this,v,C),_=E.length,b,T;for(b=0;b<_;++b)(T=y(this,I,v,C,E[b].identifier,E[b]))&&(Kl(v),T("start",v,E[b]))}}function m(v){var C=v.changedTouches,E=C.length,I,_;for(I=0;I<E;++I)(_=o[C[I].identifier])&&(Hr(v),_("drag",v,C[I]))}function g(v){var C=v.changedTouches,E=C.length,I,_;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),I=0;I<E;++I)(_=o[C[I].identifier])&&(Kl(v),_("end",v,C[I]))}function y(v,C,E,I,_,b){var T=s.copy(),R=It(b||E,C),L,U,N;if((N=n.call(v,new sc("beforestart",{sourceEvent:E,target:h,identifier:_,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),I))!=null)return L=N.x-R[0]||0,U=N.y-R[1]||0,function M(j,O,$){var k=R,z;switch(j){case"start":o[_]=M,z=i++;break;case"end":delete o[_],--i;case"drag":R=It($||O,C),z=i;break}T.call(j,v,new sc(j,{sourceEvent:O,subject:N,target:h,identifier:_,active:z,x:R[0]+L,y:R[1]+U,dx:R[0]-k[0],dy:R[1]-k[1],dispatch:T}),I)}}return h.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Ds(!!v),h):e},h.container=function(v){return arguments.length?(t=typeof v=="function"?v:Ds(v),h):t},h.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ds(v),h):n},h.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Ds(!!v),h):r},h.on=function(){var v=s.on.apply(s,arguments);return v===s?h:v},h.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,h):Math.sqrt(d)},h}function Eu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ys(){}var ns=.7,Mi=1/ns,Vr="\\s*([+-]?\\d+)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tw=/^#([0-9a-f]{3,8})$/,$w=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),Mw=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),Aw=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${rs}\\)$`),zw=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${rs}\\)$`),Rw=new RegExp(`^hsl\\(${rs},${Wt},${Wt}\\)$`),Dw=new RegExp(`^hsla\\(${rs},${Wt},${Wt},${rs}\\)$`),of={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eu(ys,os,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sf,formatHex:sf,formatHex8:Ow,formatHsl:Lw,formatRgb:lf,toString:lf});function sf(){return this.rgb().formatHex()}function Ow(){return this.rgb().formatHex8()}function Lw(){return Dm(this).formatHsl()}function lf(){return this.rgb().formatRgb()}function os(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?af(t):n===3?new tt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Os(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Os(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$w.exec(e))?new tt(t[1],t[2],t[3],1):(t=Mw.exec(e))?new tt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Aw.exec(e))?Os(t[1],t[2],t[3],t[4]):(t=zw.exec(e))?Os(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Rw.exec(e))?df(t[1],t[2]/100,t[3]/100,1):(t=Dw.exec(e))?df(t[1],t[2]/100,t[3]/100,t[4]):of.hasOwnProperty(e)?af(of[e]):e==="transparent"?new tt(NaN,NaN,NaN,0):null}function af(e){return new tt(e>>16&255,e>>8&255,e&255,1)}function Os(e,t,n,r){return r<=0&&(e=t=n=NaN),new tt(e,t,n,r)}function Fw(e){return e instanceof ys||(e=os(e)),e?(e=e.rgb(),new tt(e.r,e.g,e.b,e.opacity)):new tt}function ic(e,t,n,r){return arguments.length===1?Fw(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Eu(tt,ic,Rm(ys,{brighter(e){return e=e==null?Mi:Math.pow(Mi,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ns:Math.pow(ns,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tt(or(this.r),or(this.g),or(this.b),Ai(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cf,formatHex:cf,formatHex8:Hw,formatRgb:uf,toString:uf}));function cf(){return`#${er(this.r)}${er(this.g)}${er(this.b)}`}function Hw(){return`#${er(this.r)}${er(this.g)}${er(this.b)}${er((isNaN(this.opacity)?1:this.opacity)*255)}`}function uf(){const e=Ai(this.opacity);return`${e===1?"rgb(":"rgba("}${or(this.r)}, ${or(this.g)}, ${or(this.b)}${e===1?")":`, ${e})`}`}function Ai(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function or(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function er(e){return e=or(e),(e<16?"0":"")+e.toString(16)}function df(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tt(e,t,n,r)}function Dm(e){if(e instanceof Tt)return new Tt(e.h,e.s,e.l,e.opacity);if(e instanceof ys||(e=os(e)),!e)return new Tt;if(e instanceof Tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,l=s-o,a=(s+o)/2;return l?(t===s?i=(n-r)/l+(n<r)*6:n===s?i=(r-t)/l+2:i=(t-n)/l+4,l/=a<.5?s+o:2-s-o,i*=60):l=a>0&&a<1?0:i,new Tt(i,l,a,e.opacity)}function Vw(e,t,n,r){return arguments.length===1?Dm(e):new Tt(e,t,n,r??1)}function Tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Eu(Tt,Vw,Rm(ys,{brighter(e){return e=e==null?Mi:Math.pow(Mi,e),new Tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ns:Math.pow(ns,e),new Tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new tt(Gl(e>=240?e-240:e+120,o,r),Gl(e,o,r),Gl(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Tt(ff(this.h),Ls(this.s),Ls(this.l),Ai(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ai(this.opacity);return`${e===1?"hsl(":"hsla("}${ff(this.h)}, ${Ls(this.s)*100}%, ${Ls(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ff(e){return e=(e||0)%360,e<0?e+360:e}function Ls(e){return Math.max(0,Math.min(1,e||0))}function Gl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Om=e=>()=>e;function Bw(e,t){return function(n){return e+n*t}}function Uw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ww(e){return(e=+e)==1?Lm:function(t,n){return n-t?Uw(t,n,e):Om(isNaN(t)?n:t)}}function Lm(e,t){var n=t-e;return n?Bw(e,n):Om(isNaN(e)?t:e)}const pf=function e(t){var n=Ww(t);function r(o,s){var i=n((o=ic(o)).r,(s=ic(s)).r),l=n(o.g,s.g),a=n(o.b,s.b),c=Lm(o.opacity,s.opacity);return function(f){return o.r=i(f),o.g=l(f),o.b=a(f),o.opacity=c(f),o+""}}return r.gamma=e,r}(1);function gn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var lc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zl=new RegExp(lc.source,"g");function Qw(e){return function(){return e}}function qw(e){return function(t){return e(t)+""}}function Yw(e,t){var n=lc.lastIndex=Zl.lastIndex=0,r,o,s,i=-1,l=[],a=[];for(e=e+"",t=t+"";(r=lc.exec(e))&&(o=Zl.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(r=r[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,a.push({i,x:gn(r,o)})),n=Zl.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?a[0]?qw(a[0].x):Qw(t):(t=a.length,function(c){for(var f=0,d;f<t;++f)l[(d=a[f]).i]=d.x(c);return l.join("")})}var hf=180/Math.PI,ac={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fm(e,t,n,r,o,s){var i,l,a;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),e*r<t*n&&(e=-e,t=-t,a=-a,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*hf,skewX:Math.atan(a)*hf,scaleX:i,scaleY:l}}var Fs;function Xw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ac:Fm(t.a,t.b,t.c,t.d,t.e,t.f)}function Kw(e){return e==null||(Fs||(Fs=document.createElementNS("http://www.w3.org/2000/svg","g")),Fs.setAttribute("transform",e),!(e=Fs.transform.baseVal.consolidate()))?ac:(e=e.matrix,Fm(e.a,e.b,e.c,e.d,e.e,e.f))}function Hm(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function s(c,f,d,h,p,x){if(c!==d||f!==h){var w=p.push("translate(",null,t,null,n);x.push({i:w-4,x:gn(c,d)},{i:w-2,x:gn(f,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function i(c,f,d,h){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),h.push({i:d.push(o(d)+"rotate(",null,r)-2,x:gn(c,f)})):f&&d.push(o(d)+"rotate("+f+r)}function l(c,f,d,h){c!==f?h.push({i:d.push(o(d)+"skewX(",null,r)-2,x:gn(c,f)}):f&&d.push(o(d)+"skewX("+f+r)}function a(c,f,d,h,p,x){if(c!==d||f!==h){var w=p.push(o(p)+"scale(",null,",",null,")");x.push({i:w-4,x:gn(c,d)},{i:w-2,x:gn(f,h)})}else(d!==1||h!==1)&&p.push(o(p)+"scale("+d+","+h+")")}return function(c,f){var d=[],h=[];return c=e(c),f=e(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,h),i(c.rotate,f.rotate,d,h),l(c.skewX,f.skewX,d,h),a(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,h),c=f=null,function(p){for(var x=-1,w=h.length,S;++x<w;)d[(S=h[x]).i]=S.x(p);return d.join("")}}}var Gw=Hm(Xw,"px, ","px)","deg)"),Zw=Hm(Kw,", ",")",")"),Jw=1e-12;function mf(e){return((e=Math.exp(e))+1/e)/2}function e2(e){return((e=Math.exp(e))-1/e)/2}function t2(e){return((e=Math.exp(2*e))-1)/(e+1)}const n2=function e(t,n,r){function o(s,i){var l=s[0],a=s[1],c=s[2],f=i[0],d=i[1],h=i[2],p=f-l,x=d-a,w=p*p+x*x,S,m;if(w<Jw)m=Math.log(h/c)/t,S=function(I){return[l+I*p,a+I*x,c*Math.exp(t*I*m)]};else{var g=Math.sqrt(w),y=(h*h-c*c+r*w)/(2*c*n*g),v=(h*h-c*c-r*w)/(2*h*n*g),C=Math.log(Math.sqrt(y*y+1)-y),E=Math.log(Math.sqrt(v*v+1)-v);m=(E-C)/t,S=function(I){var _=I*m,b=mf(C),T=c/(n*g)*(b*t2(t*_+C)-e2(C));return[l+T*p,a+T*x,c*b/mf(t*_+C)]}}return S.duration=m*1e3*t/Math.SQRT2,S}return o.rho=function(s){var i=Math.max(.001,+s),l=i*i,a=l*l;return e(i,l,a)},o}(Math.SQRT2,2,4);var Jr=0,_o=0,yo=0,Vm=1e3,zi,Co,Ri=0,dr=0,cl=0,ss=typeof performance=="object"&&performance.now?performance:Date,Bm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bu(){return dr||(Bm(r2),dr=ss.now()+cl)}function r2(){dr=0}function Di(){this._call=this._time=this._next=null}Di.prototype=Um.prototype={constructor:Di,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bu():+n)+(t==null?0:+t),!this._next&&Co!==this&&(Co?Co._next=this:zi=this,Co=this),this._call=e,this._time=n,cc()},stop:function(){this._call&&(this._call=null,this._time=1/0,cc())}};function Um(e,t,n){var r=new Di;return r.restart(e,t,n),r}function o2(){bu(),++Jr;for(var e=zi,t;e;)(t=dr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jr}function gf(){dr=(Ri=ss.now())+cl,Jr=_o=0;try{o2()}finally{Jr=0,i2(),dr=0}}function s2(){var e=ss.now(),t=e-Ri;t>Vm&&(cl-=t,Ri=e)}function i2(){for(var e,t=zi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zi=n);Co=e,cc(r)}function cc(e){if(!Jr){_o&&(_o=clearTimeout(_o));var t=e-dr;t>24?(e<1/0&&(_o=setTimeout(gf,e-ss.now()-cl)),yo&&(yo=clearInterval(yo))):(yo||(Ri=ss.now(),yo=setInterval(s2,Vm)),Jr=1,Bm(gf))}}function yf(e,t,n){var r=new Di;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var l2=ll("start","end","cancel","interrupt"),a2=[],Wm=0,xf=1,uc=2,si=3,vf=4,dc=5,ii=6;function ul(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;c2(e,n,{name:t,index:r,group:o,on:l2,tween:a2,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Wm})}function ku(e,t){var n=Dt(e,t);if(n.state>Wm)throw new Error("too late; already scheduled");return n}function Qt(e,t){var n=Dt(e,t);if(n.state>si)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function c2(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Um(s,0,n.time);function s(c){n.state=xf,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var f,d,h,p;if(n.state!==xf)return a();for(f in r)if(p=r[f],p.name===n.name){if(p.state===si)return yf(i);p.state===vf?(p.state=ii,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=ii,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(yf(function(){n.state===si&&(n.state=vf,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=uc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===uc){for(n.state=si,o=new Array(h=n.tween.length),f=0,d=-1;f<h;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function l(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=dc,1),d=-1,h=o.length;++d<h;)o[d].call(e,f);n.state===dc&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=ii,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function li(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>uc&&r.state<dc,r.state=ii,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function u2(e){return this.each(function(){li(this,e)})}function d2(e,t){var n,r;return function(){var o=Qt(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function f2(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=Qt(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var l={name:t,value:n},a=0,c=o.length;a<c;++a)if(o[a].name===t){o[a]=l;break}a===c&&o.push(l)}s.tween=o}}function p2(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Dt(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?d2:f2)(n,e,t))}function _u(e,t,n){var r=e._id;return e.each(function(){var o=Qt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Dt(o,r).value[t]}}function Qm(e,t){var n;return(typeof t=="number"?gn:t instanceof os?pf:(n=os(t))?(t=n,pf):Yw)(e,t)}function h2(e){return function(){this.removeAttribute(e)}}function m2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g2(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function y2(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function x2(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function v2(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function w2(e,t){var n=al(e),r=n==="transform"?Zw:Qm;return this.attrTween(e,typeof t=="function"?(n.local?v2:x2)(n,r,_u(this,"attr."+e,t)):t==null?(n.local?m2:h2)(n):(n.local?y2:g2)(n,r,t))}function N2(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function S2(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function E2(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&S2(e,s)),n}return o._value=t,o}function b2(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&N2(e,s)),n}return o._value=t,o}function k2(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=al(e);return this.tween(n,(r.local?E2:b2)(r,t))}function _2(e,t){return function(){ku(this,e).delay=+t.apply(this,arguments)}}function C2(e,t){return t=+t,function(){ku(this,e).delay=t}}function j2(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_2:C2)(t,e)):Dt(this.node(),t).delay}function I2(e,t){return function(){Qt(this,e).duration=+t.apply(this,arguments)}}function P2(e,t){return t=+t,function(){Qt(this,e).duration=t}}function T2(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?I2:P2)(t,e)):Dt(this.node(),t).duration}function $2(e,t){if(typeof t!="function")throw new Error;return function(){Qt(this,e).ease=t}}function M2(e){var t=this._id;return arguments.length?this.each($2(t,e)):Dt(this.node(),t).ease}function A2(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qt(this,e).ease=n}}function z2(e){if(typeof e!="function")throw new Error;return this.each(A2(this._id,e))}function R2(e){typeof e!="function"&&(e=bm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new cn(r,this._parents,this._name,this._id)}function D2(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),l=0;l<s;++l)for(var a=t[l],c=n[l],f=a.length,d=i[l]=new Array(f),h,p=0;p<f;++p)(h=a[p]||c[p])&&(d[p]=h);for(;l<r;++l)i[l]=t[l];return new cn(i,this._parents,this._name,this._id)}function O2(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function L2(e,t,n){var r,o,s=O2(t)?ku:Qt;return function(){var i=s(this,e),l=i.on;l!==r&&(o=(r=l).copy()).on(t,n),i.on=o}}function F2(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(L2(n,e,t))}function H2(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function V2(){return this.on("end.remove",H2(this._id))}function B2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nu(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var l=r[i],a=l.length,c=s[i]=new Array(a),f,d,h=0;h<a;++h)(f=l[h])&&(d=e.call(f,f.__data__,h,l))&&("__data__"in f&&(d.__data__=f.__data__),c[h]=d,ul(c[h],t,n,h,c,Dt(f,n)));return new cn(s,this._parents,t,n)}function U2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Em(e));for(var r=this._groups,o=r.length,s=[],i=[],l=0;l<o;++l)for(var a=r[l],c=a.length,f,d=0;d<c;++d)if(f=a[d]){for(var h=e.call(f,f.__data__,d,a),p,x=Dt(f,n),w=0,S=h.length;w<S;++w)(p=h[w])&&ul(p,t,n,w,h,x);s.push(h),i.push(f)}return new cn(s,i,t,n)}var W2=gs.prototype.constructor;function Q2(){return new W2(this._groups,this._parents)}function q2(e,t){var n,r,o;return function(){var s=Zr(this,e),i=(this.style.removeProperty(e),Zr(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function qm(e){return function(){this.style.removeProperty(e)}}function Y2(e,t,n){var r,o=n+"",s;return function(){var i=Zr(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function X2(e,t,n){var r,o,s;return function(){var i=Zr(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),Zr(this,e))),i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l))}}function K2(e,t){var n,r,o,s="style."+t,i="end."+s,l;return function(){var a=Qt(this,e),c=a.on,f=a.value[s]==null?l||(l=qm(t)):void 0;(c!==n||o!==f)&&(r=(n=c).copy()).on(i,o=f),a.on=r}}function G2(e,t,n){var r=(e+="")=="transform"?Gw:Qm;return t==null?this.styleTween(e,q2(e,r)).on("end.style."+e,qm(e)):typeof t=="function"?this.styleTween(e,X2(e,r,_u(this,"style."+e,t))).each(K2(this._id,e)):this.styleTween(e,Y2(e,r,t),n).on("end.style."+e,null)}function Z2(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function J2(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&Z2(e,i,n)),r}return s._value=t,s}function eN(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,J2(e,t,n??""))}function tN(e){return function(){this.textContent=e}}function nN(e){return function(){var t=e(this);this.textContent=t??""}}function rN(e){return this.tween("text",typeof e=="function"?nN(_u(this,"text",e)):tN(e==null?"":e+""))}function oN(e){return function(t){this.textContent=e.call(this,t)}}function sN(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&oN(o)),t}return r._value=e,r}function iN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,sN(e))}function lN(){for(var e=this._name,t=this._id,n=Ym(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,c=0;c<l;++c)if(a=i[c]){var f=Dt(a,t);ul(a,e,n,c,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new cn(r,this._parents,e,n)}function aN(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var l={value:i},a={value:function(){--o===0&&s()}};n.each(function(){var c=Qt(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),c.on=t}),o===0&&s()})}var cN=0;function cn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ym(){return++cN}var Yt=gs.prototype;cn.prototype={constructor:cn,select:B2,selectAll:U2,selectChild:Yt.selectChild,selectChildren:Yt.selectChildren,filter:R2,merge:D2,selection:Q2,transition:lN,call:Yt.call,nodes:Yt.nodes,node:Yt.node,size:Yt.size,empty:Yt.empty,each:Yt.each,on:F2,attr:w2,attrTween:k2,style:G2,styleTween:eN,text:rN,textTween:iN,remove:V2,tween:p2,delay:j2,duration:T2,ease:M2,easeVarying:z2,end:aN,[Symbol.iterator]:Yt[Symbol.iterator]};function uN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dN={time:null,delay:0,duration:250,ease:uN};function fN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function pN(e){var t,n;e instanceof cn?(t=e._id,e=e._name):(t=Ym(),(n=dN).time=bu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&ul(a,e,t,c,i,n||fN(a,t));return new cn(r,this._parents,e,t)}gs.prototype.interrupt=u2;gs.prototype.transition=pN;const Hs=e=>()=>e;function hN(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Jt(e,t,n){this.k=e,this.x=t,this.y=n}Jt.prototype={constructor:Jt,scale:function(e){return e===1?this:new Jt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Jt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rn=new Jt(1,0,0);Jt.prototype;function Jl(e){e.stopImmediatePropagation()}function xo(e){e.preventDefault(),e.stopImmediatePropagation()}function mN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function wf(){return this.__zoom||rn}function yN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xN(){return navigator.maxTouchPoints||"ontouchstart"in this}function vN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Xm(){var e=mN,t=gN,n=vN,r=yN,o=xN,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,a=n2,c=ll("start","zoom","end"),f,d,h,p=500,x=150,w=0,S=10;function m(N){N.property("__zoom",wf).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",b).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(N,M,j,O){var $=N.selection?N.selection():N;$.property("__zoom",wf),N!==$?C(N,M,j,O):$.interrupt().each(function(){E(this,arguments).event(O).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},m.scaleBy=function(N,M,j,O){m.scaleTo(N,function(){var $=this.__zoom.k,k=typeof M=="function"?M.apply(this,arguments):M;return $*k},j,O)},m.scaleTo=function(N,M,j,O){m.transform(N,function(){var $=t.apply(this,arguments),k=this.__zoom,z=j==null?v($):typeof j=="function"?j.apply(this,arguments):j,B=k.invert(z),D=typeof M=="function"?M.apply(this,arguments):M;return n(y(g(k,D),z,B),$,i)},j,O)},m.translateBy=function(N,M,j,O){m.transform(N,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof j=="function"?j.apply(this,arguments):j),t.apply(this,arguments),i)},null,O)},m.translateTo=function(N,M,j,O,$){m.transform(N,function(){var k=t.apply(this,arguments),z=this.__zoom,B=O==null?v(k):typeof O=="function"?O.apply(this,arguments):O;return n(rn.translate(B[0],B[1]).scale(z.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof j=="function"?-j.apply(this,arguments):-j),k,i)},O,$)};function g(N,M){return M=Math.max(s[0],Math.min(s[1],M)),M===N.k?N:new Jt(M,N.x,N.y)}function y(N,M,j){var O=M[0]-j[0]*N.k,$=M[1]-j[1]*N.k;return O===N.x&&$===N.y?N:new Jt(N.k,O,$)}function v(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function C(N,M,j,O){N.on("start.zoom",function(){E(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(O).end()}).tween("zoom",function(){var $=this,k=arguments,z=E($,k).event(O),B=t.apply($,k),D=j==null?v(B):typeof j=="function"?j.apply($,k):j,Y=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),W=$.__zoom,Q=typeof M=="function"?M.apply($,k):M,A=a(W.invert(D).concat(Y/W.k),Q.invert(D).concat(Y/Q.k));return function(V){if(V===1)V=Q;else{var re=A(V),oe=Y/re[2];V=new Jt(oe,D[0]-re[0]*oe,D[1]-re[1]*oe)}z.zoom(null,V)}})}function E(N,M,j){return!j&&N.__zooming||new I(N,M)}function I(N,M){this.that=N,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,M),this.taps=0}I.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,M){return this.mouse&&N!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var M=vt(this.that).datum();c.call(N,this.that,new hN(N,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:c}),M)}};function _(N,...M){if(!e.apply(this,arguments))return;var j=E(this,M).event(N),O=this.__zoom,$=Math.max(s[0],Math.min(s[1],O.k*Math.pow(2,r.apply(this,arguments)))),k=It(N);if(j.wheel)(j.mouse[0][0]!==k[0]||j.mouse[0][1]!==k[1])&&(j.mouse[1]=O.invert(j.mouse[0]=k)),clearTimeout(j.wheel);else{if(O.k===$)return;j.mouse=[k,O.invert(k)],li(this),j.start()}xo(N),j.wheel=setTimeout(z,x),j.zoom("mouse",n(y(g(O,$),j.mouse[0],j.mouse[1]),j.extent,i));function z(){j.wheel=null,j.end()}}function b(N,...M){if(h||!e.apply(this,arguments))return;var j=N.currentTarget,O=E(this,M,!0).event(N),$=vt(N.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",Y,!0),k=It(N,j),z=N.clientX,B=N.clientY;Am(N.view),Jl(N),O.mouse=[k,this.__zoom.invert(k)],li(this),O.start();function D(W){if(xo(W),!O.moved){var Q=W.clientX-z,A=W.clientY-B;O.moved=Q*Q+A*A>w}O.event(W).zoom("mouse",n(y(O.that.__zoom,O.mouse[0]=It(W,j),O.mouse[1]),O.extent,i))}function Y(W){$.on("mousemove.zoom mouseup.zoom",null),zm(W.view,O.moved),xo(W),O.event(W).end()}}function T(N,...M){if(e.apply(this,arguments)){var j=this.__zoom,O=It(N.changedTouches?N.changedTouches[0]:N,this),$=j.invert(O),k=j.k*(N.shiftKey?.5:2),z=n(y(g(j,k),O,$),t.apply(this,M),i);xo(N),l>0?vt(this).transition().duration(l).call(C,z,O,N):vt(this).call(m.transform,z,O,N)}}function R(N,...M){if(e.apply(this,arguments)){var j=N.touches,O=j.length,$=E(this,M,N.changedTouches.length===O).event(N),k,z,B,D;for(Jl(N),z=0;z<O;++z)B=j[z],D=It(B,this),D=[D,this.__zoom.invert(D),B.identifier],$.touch0?!$.touch1&&$.touch0[2]!==D[2]&&($.touch1=D,$.taps=0):($.touch0=D,k=!0,$.taps=1+!!f);f&&(f=clearTimeout(f)),k&&($.taps<2&&(d=D[0],f=setTimeout(function(){f=null},p)),li(this),$.start())}}function L(N,...M){if(this.__zooming){var j=E(this,M).event(N),O=N.changedTouches,$=O.length,k,z,B,D;for(xo(N),k=0;k<$;++k)z=O[k],B=It(z,this),j.touch0&&j.touch0[2]===z.identifier?j.touch0[0]=B:j.touch1&&j.touch1[2]===z.identifier&&(j.touch1[0]=B);if(z=j.that.__zoom,j.touch1){var Y=j.touch0[0],W=j.touch0[1],Q=j.touch1[0],A=j.touch1[1],V=(V=Q[0]-Y[0])*V+(V=Q[1]-Y[1])*V,re=(re=A[0]-W[0])*re+(re=A[1]-W[1])*re;z=g(z,Math.sqrt(V/re)),B=[(Y[0]+Q[0])/2,(Y[1]+Q[1])/2],D=[(W[0]+A[0])/2,(W[1]+A[1])/2]}else if(j.touch0)B=j.touch0[0],D=j.touch0[1];else return;j.zoom("touch",n(y(z,B,D),j.extent,i))}}function U(N,...M){if(this.__zooming){var j=E(this,M).event(N),O=N.changedTouches,$=O.length,k,z;for(Jl(N),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),k=0;k<$;++k)z=O[k],j.touch0&&j.touch0[2]===z.identifier?delete j.touch0:j.touch1&&j.touch1[2]===z.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(z=It(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<S)){var B=vt(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return m.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:Hs(+N),m):r},m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Hs(!!N),m):e},m.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:Hs(!!N),m):o},m.extent=function(N){return arguments.length?(t=typeof N=="function"?N:Hs([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),m):t},m.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],m):[s[0],s[1]]},m.translateExtent=function(N){return arguments.length?(i[0][0]=+N[0][0],i[1][0]=+N[1][0],i[0][1]=+N[0][1],i[1][1]=+N[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(N){return arguments.length?(n=N,m):n},m.duration=function(N){return arguments.length?(l=+N,m):l},m.interpolate=function(N){return arguments.length?(a=N,m):a},m.on=function(){var N=c.on.apply(c,arguments);return N===c?m:N},m.clickDistance=function(N){return arguments.length?(w=(N=+N)*N,m):Math.sqrt(w)},m.tapDistance=function(N){return arguments.length?(S=+N,m):S},m}const dl=P.createContext(null),wN=dl.Provider,un={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Km=un.error001();function ve(e,t){const n=P.useContext(dl);if(n===null)throw new Error(Km);return Nm(n,e,t)}const Ae=()=>{const e=P.useContext(dl);if(e===null)throw new Error(Km);return P.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},NN=e=>e.userSelectionActive?"none":"all";function fl({position:e,children:t,className:n,style:r,...o}){const s=ve(NN),i=`${e}`.split("-");return H.createElement("div",{className:Ve(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function SN({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:H.createElement(fl,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},H.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:a,className:c,...f})=>{const d=P.useRef(null),[h,p]=P.useState({x:0,y:0,width:0,height:0}),x=Ve(["react-flow__edge-textwrapper",c]);return P.useEffect(()=>{if(d.current){const w=d.current.getBBox();p({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:H.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...f},o&&H.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),H.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),a)};var bN=P.memo(EN);const Cu=e=>({width:e.offsetWidth,height:e.offsetHeight}),eo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ju=(e={x:0,y:0},t)=>({x:eo(e.x,t[0][0],t[1][0]),y:eo(e.y,t[0][1],t[1][1])}),Nf=(e,t,n)=>e<t?eo(Math.abs(e-t),1,50)/50:e>n?-eo(Math.abs(e-n),1,50)/50:0,Gm=(e,t)=>{const n=Nf(e.x,35,t.width-35)*20,r=Nf(e.y,35,t.height-35)*20;return[n,r]},Zm=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Jm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),is=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),eg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Sf=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),kN=(e,t)=>eg(Jm(is(e),is(t))),fc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},_N=e=>Nt(e.width)&&Nt(e.height)&&Nt(e.x)&&Nt(e.y),Nt=e=>!isNaN(e)&&isFinite(e),Ce=Symbol.for("internals"),tg=["Enter"," ","Escape"],CN=(e,t)=>{},jN=e=>"nativeEvent"in e;function pc(e){var o,s;const t=jN(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const ng=e=>"clientX"in e,$n=(e,t)=>{var s,i;const n=ng(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Oi=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},xs=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p=20})=>H.createElement(H.Fragment,null,H.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&H.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&Nt(n)&&Nt(r)?H.createElement(bN,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c}):null);xs.displayName="BaseEdge";function vo(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function rg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[s,l,o,i]}function og({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:l}){const a=e*.125+o*.375+i*.375+n*.125,c=t*.125+s*.375+l*.375+r*.125,f=Math.abs(a-e),d=Math.abs(c-t);return[a,c,f,d]}var Rn;(function(e){e.Strict="strict",e.Loose="loose"})(Rn||(Rn={}));var tr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(tr||(tr={}));var ls;(function(e){e.Partial="partial",e.Full="full"})(ls||(ls={}));var wn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(wn||(wn={}));var Li;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Li||(Li={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));function Ef({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===le.Left||e===le.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function sg({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:r,targetY:o,targetPosition:s=le.Top}){const[i,l]=Ef({pos:n,x1:e,y1:t,x2:r,y2:o}),[a,c]=Ef({pos:s,x1:r,y1:o,x2:e,y2:t}),[f,d,h,p]=og({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:a,targetControlY:c});return[`M${e},${t} C${i},${l} ${a},${c} ${r},${o}`,f,d,h,p]}const Iu=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=le.Bottom,targetPosition:s=le.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:w})=>{const[S,m,g]=sg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return H.createElement(xs,{path:S,labelX:m,labelY:g,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:w})});Iu.displayName="SimpleBezierEdge";const bf={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},IN=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},kf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function PN({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:r=le.Top,center:o,offset:s}){const i=bf[t],l=bf[r],a={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},f=IN({source:a,sourcePosition:t,target:c}),d=f.x!==0?"x":"y",h=f[d];let p=[],x,w;const S={x:0,y:0},m={x:0,y:0},[g,y,v,C]=rg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*l[d]===-1){x=o.x??g,w=o.y??y;const I=[{x,y:a.y},{x,y:c.y}],_=[{x:a.x,y:w},{x:c.x,y:w}];i[d]===h?p=d==="x"?I:_:p=d==="x"?_:I}else{const I=[{x:a.x,y:c.y}],_=[{x:c.x,y:a.y}];if(d==="x"?p=i.x===h?_:I:p=i.y===h?I:_,t===r){const U=Math.abs(e[d]-n[d]);if(U<=s){const N=Math.min(s-1,s-U);i[d]===h?S[d]=(a[d]>e[d]?-1:1)*N:m[d]=(c[d]>n[d]?-1:1)*N}}if(t!==r){const U=d==="x"?"y":"x",N=i[d]===l[U],M=a[U]>c[U],j=a[U]<c[U];(i[d]===1&&(!N&&M||N&&j)||i[d]!==1&&(!N&&j||N&&M))&&(p=d==="x"?I:_)}const b={x:a.x+S.x,y:a.y+S.y},T={x:c.x+m.x,y:c.y+m.y},R=Math.max(Math.abs(b.x-p[0].x),Math.abs(T.x-p[0].x)),L=Math.max(Math.abs(b.y-p[0].y),Math.abs(T.y-p[0].y));R>=L?(x=(b.x+T.x)/2,w=p[0].y):(x=p[0].x,w=(b.y+T.y)/2)}return[[e,{x:a.x+S.x,y:a.y+S.y},...p,{x:c.x+m.x,y:c.y+m.y},n],x,w,v,C]}function TN(e,t,n,r){const o=Math.min(kf(e,t)/2,kf(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*f}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*l},${i}`}function hc({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:r,targetY:o,targetPosition:s=le.Top,borderRadius:i=5,centerX:l,centerY:a,offset:c=20}){const[f,d,h,p,x]=PN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:l,y:a},offset:c});return[f.reduce((S,m,g)=>{let y="";return g>0&&g<f.length-1?y=TN(f[g-1],m,f[g+1],i):y=`${g===0?"M":"L"}${m.x} ${m.y}`,S+=y,S},""),d,h,p,x]}const pl=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,sourcePosition:d=le.Bottom,targetPosition:h=le.Top,markerEnd:p,markerStart:x,pathOptions:w,interactionWidth:S})=>{const[m,g,y]=hc({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return H.createElement(xs,{path:m,labelX:g,labelY:y,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:x,interactionWidth:S})});pl.displayName="SmoothStepEdge";const Pu=P.memo(e=>{var t;return H.createElement(pl,{...e,pathOptions:P.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Pu.displayName="StepEdge";function $N({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,l]=rg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,l]}const Tu=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[x,w,S]=$N({sourceX:e,sourceY:t,targetX:n,targetY:r});return H.createElement(xs,{path:x,labelX:w,labelY:S,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p})});Tu.displayName="StraightEdge";function Vs(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _f({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case le.Left:return[t-Vs(t-r,s),n];case le.Right:return[t+Vs(r-t,s),n];case le.Top:return[t,n-Vs(n-o,s)];case le.Bottom:return[t,n+Vs(o-n,s)]}}function ig({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:r,targetY:o,targetPosition:s=le.Top,curvature:i=.25}){const[l,a]=_f({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,f]=_f({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[d,h,p,x]=og({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:f});return[`M${e},${t} C${l},${a} ${c},${f} ${r},${o}`,d,h,p,x]}const Fi=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=le.Bottom,targetPosition:s=le.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,pathOptions:w,interactionWidth:S})=>{const[m,g,y]=ig({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:w==null?void 0:w.curvature});return H.createElement(xs,{path:m,labelX:g,labelY:y,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:S})});Fi.displayName="BezierEdge";const $u=P.createContext(null),MN=$u.Provider;$u.Consumer;const AN=()=>P.useContext($u),zN=e=>"id"in e&&"source"in e&&"target"in e,RN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,mc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,DN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ON=(e,t)=>{if(!e.source||!e.target)return t;let n;return zN(e)?n={...e}:n={...e,id:RN(e)},DN(n,t)?t:t.concat(n)},gc=({x:e,y:t},[n,r,o],s,[i,l])=>{const a={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(a.x/i),y:l*Math.round(a.y/l)}:a},lg=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),sr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},hl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=sr(o,t).positionAbsolute;return Jm(r,is({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eg(n)},ag=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const a={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(f=>{const{width:d,height:h,selectable:p=!0,hidden:x=!1}=f;if(i&&!p||x)return!1;const{positionAbsolute:w}=sr(f,l),S={x:w.x,y:w.y,width:d||0,height:h||0},m=fc(a,S),g=typeof d>"u"||typeof h>"u"||d===null||h===null,y=s&&m>0,v=(d||0)*(h||0);(g||y||m>=v||f.dragging)&&c.push(f)}),c},cg=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},ug=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),l=n/(e.height*(1+s)),a=Math.min(i,l),c=eo(a,r,o),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*c,p=n/2-d*c;return{x:h,y:p,zoom:c}},Yn=(e,t=0)=>e.transition().duration(t);function Cf(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,l;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),o},[])}function LN(e,t,n,r,o,s){const{x:i,y:l}=$n(e),c=t.elementsFromPoint(i,l).find(x=>x.classList.contains("react-flow__handle"));if(c){const x=c.getAttribute("data-nodeid");if(x){const w=Mu(void 0,c),S=c.getAttribute("data-handleid"),m=s({nodeId:x,id:S,type:w});if(m){const g=o.find(y=>y.nodeId===x&&y.type===w&&y.id===S);return{handle:{id:S,type:w,nodeId:x,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:m}}}}let f=[],d=1/0;if(o.forEach(x=>{const w=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(w<=r){const S=s(x);w<=d&&(w<d?f=[{handle:x,validHandleResult:S}]:w===d&&f.push({handle:x,validHandleResult:S}),d=w)}}),!f.length)return{handle:null,validHandleResult:dg()};if(f.length===1)return f[0];const h=f.some(({validHandleResult:x})=>x.isValid),p=f.some(({handle:x})=>x.type==="target");return f.find(({handle:x,validHandleResult:w})=>p?x.type==="target":h?w.isValid:!0)||f[0]}const FN={source:null,target:null,sourceHandle:null,targetHandle:null},dg=()=>({handleDomNode:null,isValid:!1,connection:FN,endHandle:null});function fg(e,t,n,r,o,s,i){const l=o==="target",a=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...dg(),handleDomNode:a};if(a){const f=Mu(void 0,a),d=a.getAttribute("data-nodeid"),h=a.getAttribute("data-handleid"),p=a.classList.contains("connectable"),x=a.classList.contains("connectableend"),w={source:l?d:n,sourceHandle:l?h:r,target:l?n:d,targetHandle:l?r:h};c.connection=w,p&&x&&(t===Rn.Strict?l&&f==="source"||!l&&f==="target":d!==n||h!==r)&&(c.endHandle={nodeId:d,handleId:h,type:f},c.isValid=s(w))}return c}function HN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[Ce]){const{handleBounds:i}=s[Ce];let l=[],a=[];i&&(l=Cf(s,i,"source",`${t}-${n}-${r}`),a=Cf(s,i,"target",`${t}-${n}-${r}`)),o.push(...l,...a)}return o},[])}function Mu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ea(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function VN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function pg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:a,onReconnectEnd:c}){const f=Zm(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:x,onConnectStart:w,panBy:S,getNodes:m,cancelConnection:g}=s();let y=0,v;const{x:C,y:E}=$n(e),I=f==null?void 0:f.elementFromPoint(C,E),_=Mu(a,I),b=h==null?void 0:h.getBoundingClientRect();if(!b||!_)return;let T,R=$n(e,b),L=!1,U=null,N=!1,M=null;const j=HN({nodes:m(),nodeId:n,handleId:t,handleType:_}),O=()=>{if(!p)return;const[z,B]=Gm(R,b);S({x:z,y:B}),y=requestAnimationFrame(O)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:_,connectionStartHandle:{nodeId:n,handleId:t,type:_},connectionEndHandle:null}),w==null||w(e,{nodeId:n,handleId:t,handleType:_});function $(z){const{transform:B}=s();R=$n(z,b);const{handle:D,validHandleResult:Y}=LN(z,f,gc(R,B,!1,[1,1]),x,j,W=>fg(W,d,n,t,o?"target":"source",l,f));if(v=D,L||(O(),L=!0),M=Y.handleDomNode,U=Y.connection,N=Y.isValid,i({connectionPosition:v&&N?lg({x:v.x,y:v.y},B):R,connectionStatus:VN(!!v,N),connectionEndHandle:Y.endHandle}),!v&&!N&&!M)return ea(T);U.source!==U.target&&M&&(ea(T),T=M,M.classList.add("connecting","react-flow__handle-connecting"),M.classList.toggle("valid",N),M.classList.toggle("react-flow__handle-valid",N))}function k(z){var B,D;(v||M)&&U&&N&&(r==null||r(U)),(D=(B=s()).onConnectEnd)==null||D.call(B,z),a&&(c==null||c(z)),ea(T),g(),cancelAnimationFrame(y),L=!1,N=!1,U=null,M=null,f.removeEventListener("mousemove",$),f.removeEventListener("mouseup",k),f.removeEventListener("touchmove",$),f.removeEventListener("touchend",k)}f.addEventListener("mousemove",$),f.addEventListener("mouseup",k),f.addEventListener("touchmove",$),f.addEventListener("touchend",k)}const jf=()=>!0,BN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),UN=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},hg=P.forwardRef(({type:e="source",position:t=le.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:a,className:c,onMouseDown:f,onTouchStart:d,...h},p)=>{var b,T;const x=i||null,w=e==="target",S=Ae(),m=AN(),{connectOnClick:g,noPanClassName:y}=ve(BN,De),{connecting:v,clickConnecting:C}=ve(UN(m,x,e),De);m||(T=(b=S.getState()).onError)==null||T.call(b,"010",un.error010());const E=R=>{const{defaultEdgeOptions:L,onConnect:U,hasDefaultEdges:N}=S.getState(),M={...L,...R};if(N){const{edges:j,setEdges:O}=S.getState();O(ON(M,j))}U==null||U(M),l==null||l(M)},I=R=>{if(!m)return;const L=ng(R);o&&(L&&R.button===0||!L)&&pg({event:R,handleId:x,nodeId:m,onConnect:E,isTarget:w,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||jf}),L?f==null||f(R):d==null||d(R)},_=R=>{const{onClickConnectStart:L,onClickConnectEnd:U,connectionClickStartHandle:N,connectionMode:M,isValidConnection:j}=S.getState();if(!m||!N&&!o)return;if(!N){L==null||L(R,{nodeId:m,handleId:x,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:x}});return}const O=Zm(R.target),$=n||j||jf,{connection:k,isValid:z}=fg({nodeId:m,id:x,type:e},M,N.nodeId,N.handleId||null,N.type,$,O);z&&E(k),U==null||U(R),S.setState({connectionClickStartHandle:null})};return H.createElement("div",{"data-handleid":x,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${x}-${e}`,className:Ve(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,c,{source:!w,target:w,connectable:r,connectablestart:o,connectableend:s,connecting:C,connectionindicator:r&&(o&&!v||s&&v)}]),onMouseDown:I,onTouchStart:I,onClick:g?_:void 0,ref:p,...h},a)});hg.displayName="Handle";var Mt=P.memo(hg);const mg=({data:e,isConnectable:t,targetPosition:n=le.Top,sourcePosition:r=le.Bottom})=>H.createElement(H.Fragment,null,H.createElement(Mt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,H.createElement(Mt,{type:"source",position:r,isConnectable:t}));mg.displayName="DefaultNode";var yc=P.memo(mg);const gg=({data:e,isConnectable:t,sourcePosition:n=le.Bottom})=>H.createElement(H.Fragment,null,e==null?void 0:e.label,H.createElement(Mt,{type:"source",position:n,isConnectable:t}));gg.displayName="InputNode";var yg=P.memo(gg);const xg=({data:e,isConnectable:t,targetPosition:n=le.Top})=>H.createElement(H.Fragment,null,H.createElement(Mt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);xg.displayName="OutputNode";var vg=P.memo(xg);const Au=()=>null;Au.displayName="GroupNode";const WN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Bs=e=>e.id;function QN(e,t){return De(e.selectedNodes.map(Bs),t.selectedNodes.map(Bs))&&De(e.selectedEdges.map(Bs),t.selectedEdges.map(Bs))}const wg=P.memo(({onSelectionChange:e})=>{const t=Ae(),{selectedNodes:n,selectedEdges:r}=ve(WN,QN);return P.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});wg.displayName="SelectionListener";const qN=e=>!!e.onSelectionChange;function YN({onSelectionChange:e}){const t=ve(qN);return e||t?H.createElement(wg,{onSelectionChange:e}):null}const XN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function yr(e,t){P.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ue(e,t,n){P.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const KN=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:a,nodesDraggable:c,nodesConnectable:f,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:w,maxZoom:S,nodeExtent:m,onNodesChange:g,onEdgesChange:y,elementsSelectable:v,connectionMode:C,snapGrid:E,snapToGrid:I,translateExtent:_,connectOnClick:b,defaultEdgeOptions:T,fitView:R,fitViewOptions:L,onNodesDelete:U,onEdgesDelete:N,onNodeDrag:M,onNodeDragStart:j,onNodeDragStop:O,onSelectionDrag:$,onSelectionDragStart:k,onSelectionDragStop:z,noPanClassName:B,nodeOrigin:D,rfId:Y,autoPanOnConnect:W,autoPanOnNodeDrag:Q,onError:A,connectionRadius:V,isValidConnection:re,nodeDragThreshold:oe})=>{const{setNodes:F,setEdges:Z,setDefaultNodesAndEdges:ee,setMinZoom:K,setMaxZoom:te,setTranslateExtent:q,setNodeExtent:ie,reset:J}=ve(XN,De),G=Ae();return P.useEffect(()=>{const ne=r==null?void 0:r.map(ce=>({...ce,...T}));return ee(n,ne),()=>{J()}},[]),ue("defaultEdgeOptions",T,G.setState),ue("connectionMode",C,G.setState),ue("onConnect",o,G.setState),ue("onConnectStart",s,G.setState),ue("onConnectEnd",i,G.setState),ue("onClickConnectStart",l,G.setState),ue("onClickConnectEnd",a,G.setState),ue("nodesDraggable",c,G.setState),ue("nodesConnectable",f,G.setState),ue("nodesFocusable",d,G.setState),ue("edgesFocusable",h,G.setState),ue("edgesUpdatable",p,G.setState),ue("elementsSelectable",v,G.setState),ue("elevateNodesOnSelect",x,G.setState),ue("snapToGrid",I,G.setState),ue("snapGrid",E,G.setState),ue("onNodesChange",g,G.setState),ue("onEdgesChange",y,G.setState),ue("connectOnClick",b,G.setState),ue("fitViewOnInit",R,G.setState),ue("fitViewOnInitOptions",L,G.setState),ue("onNodesDelete",U,G.setState),ue("onEdgesDelete",N,G.setState),ue("onNodeDrag",M,G.setState),ue("onNodeDragStart",j,G.setState),ue("onNodeDragStop",O,G.setState),ue("onSelectionDrag",$,G.setState),ue("onSelectionDragStart",k,G.setState),ue("onSelectionDragStop",z,G.setState),ue("noPanClassName",B,G.setState),ue("nodeOrigin",D,G.setState),ue("rfId",Y,G.setState),ue("autoPanOnConnect",W,G.setState),ue("autoPanOnNodeDrag",Q,G.setState),ue("onError",A,G.setState),ue("connectionRadius",V,G.setState),ue("isValidConnection",re,G.setState),ue("nodeDragThreshold",oe,G.setState),yr(e,F),yr(t,Z),yr(w,K),yr(S,te),yr(_,q),yr(m,ie),null},If={display:"none"},GN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ng="react-flow__node-desc",Sg="react-flow__edge-desc",ZN="react-flow__aria-live",JN=e=>e.ariaLiveMessage;function eS({rfId:e}){const t=ve(JN);return H.createElement("div",{id:`${ZN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:GN},t)}function tS({rfId:e,disableKeyboardA11y:t}){return H.createElement(H.Fragment,null,H.createElement("div",{id:`${Ng}-${e}`,style:If},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),H.createElement("div",{id:`${Sg}-${e}`,style:If},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&H.createElement(eS,{rfId:e}))}var as=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=P.useState(!1),o=P.useRef(!1),s=P.useRef(new Set([])),[i,l]=P.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),f=c.reduce((d,h)=>d.concat(...h),[]);return[c,f]}return[[],[]]},[e]);return P.useEffect(()=>{const a=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||a;if(e!==null){const f=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&pc(p))return!1;const w=Tf(p.code,l);s.current.add(p[w]),Pf(i,s.current,!1)&&(p.preventDefault(),r(!0))},d=p=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&pc(p))return!1;const w=Tf(p.code,l);Pf(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[w]),p.key==="Meta"&&s.current.clear(),o.current=!1},h=()=>{s.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",f),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",f),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function Pf(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Tf(e,t){return t.includes(e)?"code":"key"}function Eg(e,t,n,r){var l,a;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),i=sr(s,r);return Eg(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=s[Ce])==null?void 0:l.z)??0)>(n.z??0)?((a=s[Ce])==null?void 0:a.z)??0:n.z??0},r)}function bg(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:i,y:l,z:a}=Eg(r,e,{...r.position,z:((s=r[Ce])==null?void 0:s.z)??0},t);r.positionAbsolute={x:i,y:l},r[Ce].z=a,n!=null&&n[r.id]&&(r[Ce].isParent=!0)}})}function ta(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(l=>{var p;const a=(Nt(l.zIndex)?l.zIndex:0)+(l.selected?i:0),c=t.get(l.id),f={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},d=l.parentNode||l.parentId;d&&(s[d]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==l.type;Object.defineProperty(f,Ce,{enumerable:!1,value:{handleBounds:h||(p=c==null?void 0:c[Ce])==null?void 0:p.handleBounds,z:a}}),o.set(l.id,f)}),bg(o,n,s),o}function kg(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:a,fitViewOnInitDone:c,fitViewOnInit:f,nodeOrigin:d}=e(),h=t.initial&&!c&&f;if(l&&a&&(h||!t.initial)){const x=n().filter(S=>{var g;const m=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(g=t.nodes)!=null&&g.length?m&&t.nodes.some(y=>y.id===S.id):m}),w=x.every(S=>S.width&&S.height);if(x.length>0&&w){const S=hl(x,d),{x:m,y:g,zoom:y}=ug(S,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),v=rn.translate(m,g).scale(y);return typeof t.duration=="number"&&t.duration>0?l.transform(Yn(a,t.duration),v):l.transform(a,v),!0}}return!1}function nS(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ce]:r[Ce],selected:n.selected})}),new Map(t)}function rS(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Us({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:a,hasDefaultEdges:c}=n();e!=null&&e.length&&(a&&r({nodeInternals:nS(e,o)}),i==null||i(e)),t!=null&&t.length&&(c&&r({edges:rS(t,s)}),l==null||l(t))}const xr=()=>{},oS={zoomIn:xr,zoomOut:xr,zoomTo:xr,getZoom:()=>1,setViewport:xr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xr,fitBounds:xr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},sS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),iS=()=>{const e=Ae(),{d3Zoom:t,d3Selection:n}=ve(sS,De);return P.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Yn(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Yn(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(Yn(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,l,a]=e.getState().transform,c=rn.translate(o.x??i,o.y??l).scale(o.zoom??a);t.transform(Yn(n,s==null?void 0:s.duration),c)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>kg(e.getState,o),setCenter:(o,s,i)=>{const{width:l,height:a,maxZoom:c}=e.getState(),f=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,d=l/2-o*f,h=a/2-s*f,p=rn.translate(d,h).scale(f);t.transform(Yn(n,i==null?void 0:i.duration),p)},fitBounds:(o,s)=>{const{width:i,height:l,minZoom:a,maxZoom:c}=e.getState(),{x:f,y:d,zoom:h}=ug(o,i,l,a,c,(s==null?void 0:s.padding)??.1),p=rn.translate(f,d).scale(h);t.transform(Yn(n,s==null?void 0:s.duration),p)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),gc(o,s,i,l)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:a}=e.getState();if(!a)return o;const{x:c,y:f}=a.getBoundingClientRect(),d={x:o.x-c,y:o.y-f};return gc(d,s,i,l)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:l,y:a}=i.getBoundingClientRect(),c=lg(o,s);return{x:c.x+l,y:c.y+a}},viewportInitialized:!0}:oS,[t,n])};function ml(){const e=iS(),t=Ae(),n=P.useCallback(()=>t.getState().getNodes().map(w=>({...w})),[]),r=P.useCallback(w=>t.getState().nodeInternals.get(w),[]),o=P.useCallback(()=>{const{edges:w=[]}=t.getState();return w.map(S=>({...S}))},[]),s=P.useCallback(w=>{const{edges:S=[]}=t.getState();return S.find(m=>m.id===w)},[]),i=P.useCallback(w=>{const{getNodes:S,setNodes:m,hasDefaultNodes:g,onNodesChange:y}=t.getState(),v=S(),C=typeof w=="function"?w(v):w;if(g)m(C);else if(y){const E=C.length===0?v.map(I=>({type:"remove",id:I.id})):C.map(I=>({item:I,type:"reset"}));y(E)}},[]),l=P.useCallback(w=>{const{edges:S=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:y}=t.getState(),v=typeof w=="function"?w(S):w;if(g)m(v);else if(y){const C=v.length===0?S.map(E=>({type:"remove",id:E.id})):v.map(E=>({item:E,type:"reset"}));y(C)}},[]),a=P.useCallback(w=>{const S=Array.isArray(w)?w:[w],{getNodes:m,setNodes:g,hasDefaultNodes:y,onNodesChange:v}=t.getState();if(y){const E=[...m(),...S];g(E)}else if(v){const C=S.map(E=>({item:E,type:"add"}));v(C)}},[]),c=P.useCallback(w=>{const S=Array.isArray(w)?w:[w],{edges:m=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:v}=t.getState();if(y)g([...m,...S]);else if(v){const C=S.map(E=>({item:E,type:"add"}));v(C)}},[]),f=P.useCallback(()=>{const{getNodes:w,edges:S=[],transform:m}=t.getState(),[g,y,v]=m;return{nodes:w().map(C=>({...C})),edges:S.map(C=>({...C})),viewport:{x:g,y,zoom:v}}},[]),d=P.useCallback(({nodes:w,edges:S})=>{const{nodeInternals:m,getNodes:g,edges:y,hasDefaultNodes:v,hasDefaultEdges:C,onNodesDelete:E,onEdgesDelete:I,onNodesChange:_,onEdgesChange:b}=t.getState(),T=(w||[]).map(M=>M.id),R=(S||[]).map(M=>M.id),L=g().reduce((M,j)=>{const O=j.parentNode||j.parentId,$=!T.includes(j.id)&&O&&M.find(z=>z.id===O);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(T.includes(j.id)||$)&&M.push(j),M},[]),U=y.filter(M=>typeof M.deletable=="boolean"?M.deletable:!0),N=U.filter(M=>R.includes(M.id));if(L||N){const M=cg(L,U),j=[...N,...M],O=j.reduce(($,k)=>($.includes(k.id)||$.push(k.id),$),[]);if((C||v)&&(C&&t.setState({edges:y.filter($=>!O.includes($.id))}),v&&(L.forEach($=>{m.delete($.id)}),t.setState({nodeInternals:new Map(m)}))),O.length>0&&(I==null||I(j),b&&b(O.map($=>({id:$,type:"remove"})))),L.length>0&&(E==null||E(L),_)){const $=L.map(k=>({id:k.id,type:"remove"}));_($)}}},[]),h=P.useCallback(w=>{const S=_N(w),m=S?null:t.getState().nodeInternals.get(w.id);return!S&&!m?[null,null,S]:[S?w:Sf(m),m,S]},[]),p=P.useCallback((w,S=!0,m)=>{const[g,y,v]=h(w);return g?(m||t.getState().getNodes()).filter(C=>{if(!v&&(C.id===y.id||!C.positionAbsolute))return!1;const E=Sf(C),I=fc(E,g);return S&&I>0||I>=g.width*g.height}):[]},[]),x=P.useCallback((w,S,m=!0)=>{const[g]=h(w);if(!g)return!1;const y=fc(g,S);return m&&y>0||y>=g.width*g.height},[]);return P.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:l,addNodes:a,addEdges:c,toObject:f,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:x}),[e,n,r,o,s,i,l,a,c,f,d,p,x])}const lS={actInsideInputWithModifier:!1};var aS=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ae(),{deleteElements:r}=ml(),o=as(e,lS),s=as(t);P.useEffect(()=>{if(o){const{edges:i,getNodes:l}=n.getState(),a=l().filter(f=>f.selected),c=i.filter(f=>f.selected);r({nodes:a,edges:c}),n.setState({nodesSelectionActive:!1})}},[o]),P.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function cS(e){const t=Ae();P.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=Cu(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",un.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const zu={position:"absolute",width:"100%",height:"100%",top:0,left:0},uS=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ws=e=>({x:e.x,y:e.y,zoom:e.k}),vr=(e,t)=>e.target.closest(`.${t}`),$f=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Mf=e=>{const t=e.ctrlKey&&Oi()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},dS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),fS=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:a=tr.Free,zoomOnDoubleClick:c=!0,elementsSelectable:f,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:x,maxZoom:w,zoomActivationKeyCode:S,preventScrolling:m=!0,children:g,noWheelClassName:y,noPanClassName:v})=>{const C=P.useRef(),E=Ae(),I=P.useRef(!1),_=P.useRef(!1),b=P.useRef(null),T=P.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:L,d3ZoomHandler:U,userSelectionActive:N}=ve(dS,De),M=as(S),j=P.useRef(0),O=P.useRef(!1),$=P.useRef();return cS(b),P.useEffect(()=>{if(b.current){const k=b.current.getBoundingClientRect(),z=Xm().scaleExtent([x,w]).translateExtent(p),B=vt(b.current).call(z),D=rn.translate(h.x,h.y).scale(eo(h.zoom,x,w)),Y=[[0,0],[k.width,k.height]],W=z.constrain()(D,Y,p);z.transform(B,W),z.wheelDelta(Mf),E.setState({d3Zoom:z,d3Selection:B,d3ZoomHandler:B.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:b.current.closest(".react-flow")})}},[]),P.useEffect(()=>{L&&R&&(i&&!M&&!N?L.on("wheel.zoom",k=>{if(vr(k,y))return!1;k.preventDefault(),k.stopImmediatePropagation();const z=L.property("__zoom").k||1;if(k.ctrlKey&&s){const re=It(k),oe=Mf(k),F=z*Math.pow(2,oe);R.scaleTo(L,F,re,k);return}const B=k.deltaMode===1?20:1;let D=a===tr.Vertical?0:k.deltaX*B,Y=a===tr.Horizontal?0:k.deltaY*B;!Oi()&&k.shiftKey&&a!==tr.Vertical&&(D=k.deltaY*B,Y=0),R.translateBy(L,-(D/z)*l,-(Y/z)*l,{internal:!0});const W=Ws(L.property("__zoom")),{onViewportChangeStart:Q,onViewportChange:A,onViewportChangeEnd:V}=E.getState();clearTimeout($.current),O.current||(O.current=!0,t==null||t(k,W),Q==null||Q(W)),O.current&&(e==null||e(k,W),A==null||A(W),$.current=setTimeout(()=>{n==null||n(k,W),V==null||V(W),O.current=!1},150))},{passive:!1}):typeof U<"u"&&L.on("wheel.zoom",function(k,z){if(!m&&k.type==="wheel"&&!k.ctrlKey||vr(k,y))return null;k.preventDefault(),U.call(this,k,z)},{passive:!1}))},[N,i,a,L,R,U,M,s,m,y,t,e,n]),P.useEffect(()=>{R&&R.on("start",k=>{var D,Y;if(!k.sourceEvent||k.sourceEvent.internal)return null;j.current=(D=k.sourceEvent)==null?void 0:D.button;const{onViewportChangeStart:z}=E.getState(),B=Ws(k.transform);I.current=!0,T.current=B,((Y=k.sourceEvent)==null?void 0:Y.type)==="mousedown"&&E.setState({paneDragging:!0}),z==null||z(B),t==null||t(k.sourceEvent,B)})},[R,t]),P.useEffect(()=>{R&&(N&&!I.current?R.on("zoom",null):N||R.on("zoom",k=>{var B;const{onViewportChange:z}=E.getState();if(E.setState({transform:[k.transform.x,k.transform.y,k.transform.k]}),_.current=!!(r&&$f(d,j.current??0)),(e||z)&&!((B=k.sourceEvent)!=null&&B.internal)){const D=Ws(k.transform);z==null||z(D),e==null||e(k.sourceEvent,D)}}))},[N,R,e,d,r]),P.useEffect(()=>{R&&R.on("end",k=>{if(!k.sourceEvent||k.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=E.getState();if(I.current=!1,E.setState({paneDragging:!1}),r&&$f(d,j.current??0)&&!_.current&&r(k.sourceEvent),_.current=!1,(n||z)&&uS(T.current,k.transform)){const B=Ws(k.transform);T.current=B,clearTimeout(C.current),C.current=setTimeout(()=>{z==null||z(B),n==null||n(k.sourceEvent,B)},i?150:0)}})},[R,i,d,n,r]),P.useEffect(()=>{R&&R.filter(k=>{const z=M||o,B=s&&k.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&k.button===1&&k.type==="mousedown"&&(vr(k,"react-flow__node")||vr(k,"react-flow__edge")))return!0;if(!d&&!z&&!i&&!c&&!s||N||!c&&k.type==="dblclick"||vr(k,y)&&k.type==="wheel"||vr(k,v)&&(k.type!=="wheel"||i&&k.type==="wheel"&&!M)||!s&&k.ctrlKey&&k.type==="wheel"||!z&&!i&&!B&&k.type==="wheel"||!d&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(d)&&!d.includes(k.button)&&k.type==="mousedown")return!1;const D=Array.isArray(d)&&d.includes(k.button)||!k.button||k.button<=1;return(!k.ctrlKey||k.type==="wheel")&&D})},[N,R,o,s,i,c,d,f,M]),H.createElement("div",{className:"react-flow__renderer",ref:b,style:zu},g)},pS=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function hS(){const{userSelectionActive:e,userSelectionRect:t}=ve(pS,De);return e&&t?H.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Af(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function _g(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(l=>l.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&Af(r,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&Af(r,i);break}case"remove":return r}return r.push(i),r},n)}function Cg(e,t){return _g(e,t)}function mS(e,t){return _g(e,t)}const yn=(e,t)=>({id:e,type:"select",selected:t});function Ar(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(yn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(yn(r.id,!1))),n},[])}const na=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},gS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),jg=P.memo(({isSelecting:e,selectionMode:t=ls.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:a,onPaneMouseMove:c,onPaneMouseLeave:f,children:d})=>{const h=P.useRef(null),p=Ae(),x=P.useRef(0),w=P.useRef(0),S=P.useRef(),{userSelectionActive:m,elementsSelectable:g,dragging:y}=ve(gS,De),v=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,w.current=0},C=U=>{s==null||s(U),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},E=U=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){U.preventDefault();return}i==null||i(U)},I=l?U=>l(U):void 0,_=U=>{const{resetSelectedElements:N,domNode:M}=p.getState();if(S.current=M==null?void 0:M.getBoundingClientRect(),!g||!e||U.button!==0||U.target!==h.current||!S.current)return;const{x:j,y:O}=$n(U,S.current);N(),p.setState({userSelectionRect:{width:0,height:0,startX:j,startY:O,x:j,y:O}}),r==null||r(U)},b=U=>{const{userSelectionRect:N,nodeInternals:M,edges:j,transform:O,onNodesChange:$,onEdgesChange:k,nodeOrigin:z,getNodes:B}=p.getState();if(!e||!S.current||!N)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=$n(U,S.current),Y=N.startX??0,W=N.startY??0,Q={...N,x:D.x<Y?D.x:Y,y:D.y<W?D.y:W,width:Math.abs(D.x-Y),height:Math.abs(D.y-W)},A=B(),V=ag(M,Q,O,t===ls.Partial,!0,z),re=cg(V,j).map(F=>F.id),oe=V.map(F=>F.id);if(x.current!==oe.length){x.current=oe.length;const F=Ar(A,oe);F.length&&($==null||$(F))}if(w.current!==re.length){w.current=re.length;const F=Ar(j,re);F.length&&(k==null||k(F))}p.setState({userSelectionRect:Q})},T=U=>{if(U.button!==0)return;const{userSelectionRect:N}=p.getState();!m&&N&&U.target===h.current&&(C==null||C(U)),p.setState({nodesSelectionActive:x.current>0}),v(),o==null||o(U)},R=U=>{m&&(p.setState({nodesSelectionActive:x.current>0}),o==null||o(U)),v()},L=g&&(e||m);return H.createElement("div",{className:Ve(["react-flow__pane",{dragging:y,selection:e}]),onClick:L?void 0:na(C,h),onContextMenu:na(E,h),onWheel:na(I,h),onMouseEnter:L?void 0:a,onMouseDown:L?_:void 0,onMouseMove:L?b:c,onMouseUp:L?T:void 0,onMouseLeave:L?R:f,ref:h,style:zu},d,H.createElement(hS,null))});jg.displayName="Pane";function Ig(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Ig(r,t):!1}function zf(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function yS(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Ig(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function xS(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Pg(e,t,n,r,o=[0,0],s){const i=xS(e,e.extent||r);let l=i;const a=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(a&&e.width&&e.height){const d=n.get(a),{x:h,y:p}=sr(d,o).positionAbsolute;l=d&&Nt(h)&&Nt(p)&&Nt(d.width)&&Nt(d.height)?[[h+e.width*o[0],p+e.height*o[1]],[h+d.width-e.width+e.width*o[0],p+d.height-e.height+e.height*o[1]]]:l}else s==null||s("005",un.error005()),l=i;else if(e.extent&&a&&e.extent!=="parent"){const d=n.get(a),{x:h,y:p}=sr(d,o).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let c={x:0,y:0};if(a){const d=n.get(a);c=sr(d,o).positionAbsolute}const f=l&&l!=="parent"?ju(t,l):t;return{position:{x:f.x-c.x,y:f.y-c.y},positionAbsolute:f}}function ra({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Rf=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),l={x:i.width*r[0],y:i.height*r[1]};return s.map(a=>{const c=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(c.left-i.left-l.x)/n,y:(c.top-i.top-l.y)/n,...Cu(a)}})};function wo(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function xc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:a}=t.getState(),c=l.get(e);if(!c){a==null||a("012",un.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):o([e])}function vS(){const e=Ae();return P.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,a={x:(i-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(a.x/o[0]):a.x,ySnapped:s?o[1]*Math.round(a.y/o[1]):a.y,...a}},[])}function oa(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Tg({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const l=Ae(),[a,c]=P.useState(!1),f=P.useRef([]),d=P.useRef({x:null,y:null}),h=P.useRef(0),p=P.useRef(null),x=P.useRef({x:0,y:0}),w=P.useRef(null),S=P.useRef(!1),m=P.useRef(!1),g=P.useRef(!1),y=vS();return P.useEffect(()=>{if(e!=null&&e.current){const v=vt(e.current),C=({x:_,y:b})=>{const{nodeInternals:T,onNodeDrag:R,onSelectionDrag:L,updateNodePositions:U,nodeExtent:N,snapGrid:M,snapToGrid:j,nodeOrigin:O,onError:$}=l.getState();d.current={x:_,y:b};let k=!1,z={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&N){const D=hl(f.current,O);z=is(D)}if(f.current=f.current.map(D=>{const Y={x:_-D.distance.x,y:b-D.distance.y};j&&(Y.x=M[0]*Math.round(Y.x/M[0]),Y.y=M[1]*Math.round(Y.y/M[1]));const W=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];f.current.length>1&&N&&!D.extent&&(W[0][0]=D.positionAbsolute.x-z.x+N[0][0],W[1][0]=D.positionAbsolute.x+(D.width??0)-z.x2+N[1][0],W[0][1]=D.positionAbsolute.y-z.y+N[0][1],W[1][1]=D.positionAbsolute.y+(D.height??0)-z.y2+N[1][1]);const Q=Pg(D,Y,T,W,O,$);return k=k||D.position.x!==Q.position.x||D.position.y!==Q.position.y,D.position=Q.position,D.positionAbsolute=Q.positionAbsolute,D}),!k)return;U(f.current,!0,!0),c(!0);const B=o?R:oa(L);if(B&&w.current){const[D,Y]=ra({nodeId:o,dragItems:f.current,nodeInternals:T});B(w.current,D,Y)}},E=()=>{if(!p.current)return;const[_,b]=Gm(x.current,p.current);if(_!==0||b!==0){const{transform:T,panBy:R}=l.getState();d.current.x=(d.current.x??0)-_/T[2],d.current.y=(d.current.y??0)-b/T[2],R({x:_,y:b})&&C(d.current)}h.current=requestAnimationFrame(E)},I=_=>{var O;const{nodeInternals:b,multiSelectionActive:T,nodesDraggable:R,unselectNodesAndEdges:L,onNodeDragStart:U,onSelectionDragStart:N}=l.getState();m.current=!0;const M=o?U:oa(N);(!i||!s)&&!T&&o&&((O=b.get(o))!=null&&O.selected||L()),o&&s&&i&&xc({id:o,store:l,nodeRef:e});const j=y(_);if(d.current=j,f.current=yS(b,R,j,o),M&&f.current){const[$,k]=ra({nodeId:o,dragItems:f.current,nodeInternals:b});M(_.sourceEvent,$,k)}};if(t)v.on(".drag",null);else{const _=Pw().on("start",b=>{const{domNode:T,nodeDragThreshold:R}=l.getState();R===0&&I(b),g.current=!1;const L=y(b);d.current=L,p.current=(T==null?void 0:T.getBoundingClientRect())||null,x.current=$n(b.sourceEvent,p.current)}).on("drag",b=>{var U,N;const T=y(b),{autoPanOnNodeDrag:R,nodeDragThreshold:L}=l.getState();if(b.sourceEvent.type==="touchmove"&&b.sourceEvent.touches.length>1&&(g.current=!0),!g.current){if(!S.current&&m.current&&R&&(S.current=!0,E()),!m.current){const M=T.xSnapped-(((U=d==null?void 0:d.current)==null?void 0:U.x)??0),j=T.ySnapped-(((N=d==null?void 0:d.current)==null?void 0:N.y)??0);Math.sqrt(M*M+j*j)>L&&I(b)}(d.current.x!==T.xSnapped||d.current.y!==T.ySnapped)&&f.current&&m.current&&(w.current=b.sourceEvent,x.current=$n(b.sourceEvent,p.current),C(T))}}).on("end",b=>{if(!(!m.current||g.current)&&(c(!1),S.current=!1,m.current=!1,cancelAnimationFrame(h.current),f.current)){const{updateNodePositions:T,nodeInternals:R,onNodeDragStop:L,onSelectionDragStop:U}=l.getState(),N=o?L:oa(U);if(T(f.current,!1,!1),N){const[M,j]=ra({nodeId:o,dragItems:f.current,nodeInternals:R});N(b.sourceEvent,M,j)}}}).filter(b=>{const T=b.target;return!b.button&&(!n||!zf(T,`.${n}`,e))&&(!r||zf(T,r,e))});return v.call(_),()=>{v.on(".drag",null)}}}},[e,t,n,r,s,l,o,i,y]),a}function $g(){const e=Ae();return P.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:a,onError:c,nodesDraggable:f}=e.getState(),d=i().filter(g=>g.selected&&(g.draggable||f&&typeof g.draggable>"u")),h=l?a[0]:5,p=l?a[1]:5,x=n.isShiftPressed?4:1,w=n.x*h*x,S=n.y*p*x,m=d.map(g=>{if(g.positionAbsolute){const y={x:g.positionAbsolute.x+w,y:g.positionAbsolute.y+S};l&&(y.x=a[0]*Math.round(y.x/a[0]),y.y=a[1]*Math.round(y.y/a[1]));const{positionAbsolute:v,position:C}=Pg(g,y,r,o,void 0,c);g.position=C,g.positionAbsolute=v}return g});s(m,!0,!1)},[])}const Br={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var No=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:a,selected:c,onClick:f,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:x,onDoubleClick:w,style:S,className:m,isDraggable:g,isSelectable:y,isConnectable:v,isFocusable:C,selectNodesOnDrag:E,sourcePosition:I,targetPosition:_,hidden:b,resizeObserver:T,dragHandle:R,zIndex:L,isParent:U,noDragClassName:N,noPanClassName:M,initialized:j,disableKeyboardA11y:O,ariaLabel:$,rfId:k,hasHandleBounds:z})=>{const B=Ae(),D=P.useRef(null),Y=P.useRef(null),W=P.useRef(I),Q=P.useRef(_),A=P.useRef(r),V=y||g||f||d||h||p,re=$g(),oe=wo(n,B.getState,d),F=wo(n,B.getState,h),Z=wo(n,B.getState,p),ee=wo(n,B.getState,x),K=wo(n,B.getState,w),te=J=>{const{nodeDragThreshold:G}=B.getState();if(y&&(!E||!g||G>0)&&xc({id:n,store:B,nodeRef:D}),f){const ne=B.getState().nodeInternals.get(n);ne&&f(J,{...ne})}},q=J=>{if(!pc(J)&&!O)if(tg.includes(J.key)&&y){const G=J.key==="Escape";xc({id:n,store:B,unselect:G,nodeRef:D})}else g&&c&&Object.prototype.hasOwnProperty.call(Br,J.key)&&(B.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),re({x:Br[J.key].x,y:Br[J.key].y,isShiftPressed:J.shiftKey}))};P.useEffect(()=>()=>{Y.current&&(T==null||T.unobserve(Y.current),Y.current=null)},[]),P.useEffect(()=>{if(D.current&&!b){const J=D.current;(!j||!z||Y.current!==J)&&(Y.current&&(T==null||T.unobserve(Y.current)),T==null||T.observe(J),Y.current=J)}},[b,j,z]),P.useEffect(()=>{const J=A.current!==r,G=W.current!==I,ne=Q.current!==_;D.current&&(J||G||ne)&&(J&&(A.current=r),G&&(W.current=I),ne&&(Q.current=_),B.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,r,I,_]);const ie=Tg({nodeRef:D,disabled:b||!g,noDragClassName:N,handleSelector:R,nodeId:n,isSelectable:y,selectNodesOnDrag:E});return b?null:H.createElement("div",{className:Ve(["react-flow__node",`react-flow__node-${r}`,{[M]:g},m,{selected:c,selectable:y,parent:U,dragging:ie}]),ref:D,style:{zIndex:L,transform:`translate(${l}px,${a}px)`,pointerEvents:V?"all":"none",visibility:j?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:oe,onMouseMove:F,onMouseLeave:Z,onContextMenu:ee,onClick:te,onDoubleClick:K,onKeyDown:C?q:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":O?void 0:`${Ng}-${k}`,"aria-label":$},H.createElement(MN,{value:n},H.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:c,isConnectable:v,sourcePosition:I,targetPosition:_,dragging:ie,dragHandle:R,zIndex:L})))};return t.displayName="NodeWrapper",P.memo(t)};const wS=e=>{const t=e.getNodes().filter(n=>n.selected);return{...hl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function NS({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ae(),{width:o,height:s,x:i,y:l,transformString:a,userSelectionActive:c}=ve(wS,De),f=$g(),d=P.useRef(null);if(P.useEffect(()=>{var x;n||(x=d.current)==null||x.focus({preventScroll:!0})},[n]),Tg({nodeRef:d}),c||!o||!s)return null;const h=e?x=>{const w=r.getState().getNodes().filter(S=>S.selected);e(x,w)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(Br,x.key)&&f({x:Br[x.key].x,y:Br[x.key].y,isShiftPressed:x.shiftKey})};return H.createElement("div",{className:Ve(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a}},H.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:o,height:s,top:l,left:i}}))}var SS=P.memo(NS);const ES=e=>e.nodesSelectionActive,Mg=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:a,onMoveStart:c,onMoveEnd:f,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:C,panOnScroll:E,panOnScrollSpeed:I,panOnScrollMode:_,zoomOnDoubleClick:b,panOnDrag:T,defaultViewport:R,translateExtent:L,minZoom:U,maxZoom:N,preventScrolling:M,onSelectionContextMenu:j,noWheelClassName:O,noPanClassName:$,disableKeyboardA11y:k})=>{const z=ve(ES),B=as(d),D=as(m),Y=D||T,W=D||E,Q=B||h&&Y!==!0;return aS({deleteKeyCode:l,multiSelectionKeyCode:S}),H.createElement(fS,{onMove:a,onMoveStart:c,onMoveEnd:f,onPaneContextMenu:s,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:C,panOnScroll:W,panOnScrollSpeed:I,panOnScrollMode:_,zoomOnDoubleClick:b,panOnDrag:!B&&Y,defaultViewport:R,translateExtent:L,minZoom:U,maxZoom:N,zoomActivationKeyCode:g,preventScrolling:M,noWheelClassName:O,noPanClassName:$},H.createElement(jg,{onSelectionStart:x,onSelectionEnd:w,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:Y,isSelecting:!!Q,selectionMode:p},e,z&&H.createElement(SS,{onSelectionContextMenu:j,noPanClassName:$,disableKeyboardA11y:k})))};Mg.displayName="FlowRenderer";var bS=P.memo(Mg);function kS(e){return ve(P.useCallback(n=>e?ag(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function _S(e){const t={input:No(e.input||yg),default:No(e.default||yc),output:No(e.output||vg),group:No(e.group||Au)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=No(e[s]||yc),o),n);return{...t,...r}}const CS=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},jS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ag=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=ve(jS,De),l=kS(e.onlyRenderVisibleElements),a=P.useRef(),c=P.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return a.current=f,f},[]);return P.useEffect(()=>()=>{var f;(f=a==null?void 0:a.current)==null||f.disconnect()},[]),H.createElement("div",{className:"react-flow__nodes",style:zu},l.map(f=>{var C,E,I;let d=f.type||"default";e.nodeTypes[d]||(i==null||i("003",un.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(f.draggable||t&&typeof f.draggable>"u"),x=!!(f.selectable||o&&typeof f.selectable>"u"),w=!!(f.connectable||n&&typeof f.connectable>"u"),S=!!(f.focusable||r&&typeof f.focusable>"u"),m=e.nodeExtent?ju(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,g=(m==null?void 0:m.x)??0,y=(m==null?void 0:m.y)??0,v=CS({x:g,y,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return H.createElement(h,{key:f.id,id:f.id,className:f.className,style:f.style,type:d,data:f.data,sourcePosition:f.sourcePosition||le.Bottom,targetPosition:f.targetPosition||le.Top,hidden:f.hidden,xPos:g,yPos:y,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:p,isSelectable:x,isConnectable:w,isFocusable:S,resizeObserver:c,dragHandle:f.dragHandle,zIndex:((C=f[Ce])==null?void 0:C.z)??0,isParent:!!((E=f[Ce])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((I=f[Ce])!=null&&I.handleBounds)})}))};Ag.displayName="NodeRenderer";var IS=P.memo(Ag);const PS=(e,t,n)=>n===le.Left?e-t:n===le.Right?e+t:e,TS=(e,t,n)=>n===le.Top?e-t:n===le.Bottom?e+t:e,Df="react-flow__edgeupdater",Of=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:l})=>H.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:Ve([Df,`${Df}-${l}`]),cx:PS(t,r,e),cy:TS(n,r,e),r,stroke:"transparent",fill:"transparent"}),$S=()=>!0;var wr=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:l,selected:a,animated:c,label:f,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:w,style:S,source:m,target:g,sourceX:y,sourceY:v,targetX:C,targetY:E,sourcePosition:I,targetPosition:_,elementsSelectable:b,hidden:T,sourceHandleId:R,targetHandleId:L,onContextMenu:U,onMouseEnter:N,onMouseMove:M,onMouseLeave:j,reconnectRadius:O,onReconnect:$,onReconnectStart:k,onReconnectEnd:z,markerEnd:B,markerStart:D,rfId:Y,ariaLabel:W,isFocusable:Q,isReconnectable:A,pathOptions:V,interactionWidth:re,disableKeyboardA11y:oe})=>{const F=P.useRef(null),[Z,ee]=P.useState(!1),[K,te]=P.useState(!1),q=Ae(),ie=P.useMemo(()=>`url('#${mc(D,Y)}')`,[D,Y]),J=P.useMemo(()=>`url('#${mc(B,Y)}')`,[B,Y]);if(T)return null;const G=Oe=>{var Lt;const{edges:st,addSelectedEdges:Hn,unselectNodesAndEdges:Vn,multiSelectionActive:Bn}=q.getState(),qt=st.find(io=>io.id===n);qt&&(b&&(q.setState({nodesSelectionActive:!1}),qt.selected&&Bn?(Vn({nodes:[],edges:[qt]}),(Lt=F.current)==null||Lt.blur()):Hn([n])),i&&i(Oe,qt))},ne=vo(n,q.getState,l),ce=vo(n,q.getState,U),me=vo(n,q.getState,N),pe=vo(n,q.getState,M),ae=vo(n,q.getState,j),ge=(Oe,st)=>{if(Oe.button!==0)return;const{edges:Hn,isValidConnection:Vn}=q.getState(),Bn=st?g:m,qt=(st?L:R)||null,Lt=st?"target":"source",io=Vn||$S,wl=st,lo=Hn.find(Un=>Un.id===n);te(!0),k==null||k(Oe,lo,Lt);const Nl=Un=>{te(!1),z==null||z(Un,lo,Lt)};pg({event:Oe,handleId:qt,nodeId:Bn,onConnect:Un=>$==null?void 0:$(lo,Un),isTarget:wl,getState:q.getState,setState:q.setState,isValidConnection:io,edgeUpdaterType:Lt,onReconnectEnd:Nl})},je=Oe=>ge(Oe,!0),gt=Oe=>ge(Oe,!1),Ge=()=>ee(!0),Ze=()=>ee(!1),Ot=!b&&!i,Fn=Oe=>{var st;if(!oe&&tg.includes(Oe.key)&&b){const{unselectNodesAndEdges:Hn,addSelectedEdges:Vn,edges:Bn}=q.getState();Oe.key==="Escape"?((st=F.current)==null||st.blur(),Hn({edges:[Bn.find(Lt=>Lt.id===n)]})):Vn([n])}};return H.createElement("g",{className:Ve(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:a,animated:c,inactive:Ot,updating:Z}]),onClick:G,onDoubleClick:ne,onContextMenu:ce,onMouseEnter:me,onMouseMove:pe,onMouseLeave:ae,onKeyDown:Q?Fn:void 0,tabIndex:Q?0:void 0,role:Q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${m} to ${g}`,"aria-describedby":Q?`${Sg}-${Y}`:void 0,ref:F},!K&&H.createElement(e,{id:n,source:m,target:g,selected:a,animated:c,label:f,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:w,data:s,style:S,sourceX:y,sourceY:v,targetX:C,targetY:E,sourcePosition:I,targetPosition:_,sourceHandleId:R,targetHandleId:L,markerStart:ie,markerEnd:J,pathOptions:V,interactionWidth:re}),A&&H.createElement(H.Fragment,null,(A==="source"||A===!0)&&H.createElement(Of,{position:I,centerX:y,centerY:v,radius:O,onMouseDown:je,onMouseEnter:Ge,onMouseOut:Ze,type:"source"}),(A==="target"||A===!0)&&H.createElement(Of,{position:_,centerX:C,centerY:E,radius:O,onMouseDown:gt,onMouseEnter:Ge,onMouseOut:Ze,type:"target"})))};return t.displayName="EdgeWrapper",P.memo(t)};function MS(e){const t={default:wr(e.default||Fi),straight:wr(e.bezier||Tu),step:wr(e.step||Pu),smoothstep:wr(e.step||pl),simplebezier:wr(e.simplebezier||Iu)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=wr(e[s]||Fi),o),n);return{...t,...r}}function Lf(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case le.Top:return{x:r+s/2,y:o};case le.Right:return{x:r+s,y:o+i/2};case le.Bottom:return{x:r+s/2,y:o+i};case le.Left:return{x:r,y:o+i/2}}}function Ff(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const AS=(e,t,n,r,o,s)=>{const i=Lf(n,e,t),l=Lf(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function zS({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:l,transform:a}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const f=is({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:i/a[2],height:l/a[2]}),d=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),h=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y));return Math.ceil(d*h)>0}function Hf(e){var r,o,s,i,l;const t=((r=e==null?void 0:e[Ce])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const RS=[{level:0,isMaxLevel:!0,edges:[]}];function DS(e,t,n=!1){let r=-1;const o=e.reduce((i,l)=>{var f,d;const a=Nt(l.zIndex);let c=a?l.zIndex:0;if(n){const h=t.get(l.target),p=t.get(l.source),x=l.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),w=Math.max(((f=p==null?void 0:p[Ce])==null?void 0:f.z)||0,((d=h==null?void 0:h[Ce])==null?void 0:d.z)||0,1e3);c=(a?l.zIndex:0)+(x?w:0)}return i[c]?i[c].push(l):i[c]=[l],r=c>r?c:r,i},{}),s=Object.entries(o).map(([i,l])=>{const a=+i;return{edges:l,level:a,isMaxLevel:a===r}});return s.length===0?RS:s}function OS(e,t,n){const r=ve(P.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&zS({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return DS(r,t,n)}const LS=({color:e="none",strokeWidth:t=1})=>H.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),FS=({color:e="none",strokeWidth:t=1})=>H.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Vf={[Li.Arrow]:LS,[Li.ArrowClosed]:FS};function HS(e){const t=Ae();return P.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(Vf,e)?Vf[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",un.error009(e)),null)},[e])}const VS=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const a=HS(t);return a?H.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},H.createElement(a,{color:n,strokeWidth:i})):null},BS=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=mc(i,t);r.includes(l)||(o.push({id:l,color:i.color||e,...i}),r.push(l))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},zg=({defaultColor:e,rfId:t})=>{const n=ve(P.useCallback(BS({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return H.createElement("defs",null,n.map(r=>H.createElement(VS,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};zg.displayName="MarkerDefinitions";var US=P.memo(zg);const WS=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Rg=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:a,onEdgeMouseLeave:c,onEdgeClick:f,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:w,children:S,disableKeyboardA11y:m})=>{const{edgesFocusable:g,edgesUpdatable:y,elementsSelectable:v,width:C,height:E,connectionMode:I,nodeInternals:_,onError:b}=ve(WS,De),T=OS(t,_,n);return C?H.createElement(H.Fragment,null,T.map(({level:R,edges:L,isMaxLevel:U})=>H.createElement("svg",{key:R,style:{zIndex:R},width:C,height:E,className:"react-flow__edges react-flow__container"},U&&H.createElement(US,{defaultColor:e,rfId:r}),H.createElement("g",null,L.map(N=>{const[M,j,O]=Hf(_.get(N.source)),[$,k,z]=Hf(_.get(N.target));if(!O||!z)return null;let B=N.type||"default";o[B]||(b==null||b("011",un.error011(B)),B="default");const D=o[B]||o.default,Y=I===Rn.Strict?k.target:(k.target??[]).concat(k.source??[]),W=Ff(j.source,N.sourceHandle),Q=Ff(Y,N.targetHandle),A=(W==null?void 0:W.position)||le.Bottom,V=(Q==null?void 0:Q.position)||le.Top,re=!!(N.focusable||g&&typeof N.focusable>"u"),oe=N.reconnectable||N.updatable,F=typeof h<"u"&&(oe||y&&typeof oe>"u");if(!W||!Q)return b==null||b("008",un.error008(W,N)),null;const{sourceX:Z,sourceY:ee,targetX:K,targetY:te}=AS(M,W,A,$,Q,V);return H.createElement(D,{key:N.id,id:N.id,className:Ve([N.className,s]),type:B,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:Z,sourceY:ee,targetX:K,targetY:te,sourcePosition:A,targetPosition:V,elementsSelectable:v,onContextMenu:i,onMouseEnter:l,onMouseMove:a,onMouseLeave:c,onClick:f,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:w,rfId:r,ariaLabel:N.ariaLabel,isFocusable:re,isReconnectable:F,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:m})})))),S):null};Rg.displayName="EdgeRenderer";var QS=P.memo(Rg);const qS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function YS({children:e}){const t=ve(qS);return H.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function XS(e){const t=ml(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const KS={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},Dg=({nodeId:e,handleType:t,style:n,type:r=wn.Bezier,CustomComponent:o,connectionStatus:s})=>{var E,I,_;const{fromNode:i,handleId:l,toX:a,toY:c,connectionMode:f}=ve(P.useCallback(b=>({fromNode:b.nodeInternals.get(e),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[e]),De),d=(E=i==null?void 0:i[Ce])==null?void 0:E.handleBounds;let h=d==null?void 0:d[t];if(f===Rn.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!h)return null;const p=l?h.find(b=>b.id===l):h[0],x=p?p.x+p.width/2:(i.width??0)/2,w=p?p.y+p.height/2:i.height??0,S=(((I=i.positionAbsolute)==null?void 0:I.x)??0)+x,m=(((_=i.positionAbsolute)==null?void 0:_.y)??0)+w,g=p==null?void 0:p.position,y=g?KS[g]:null;if(!g||!y)return null;if(o)return H.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:S,fromY:m,toX:a,toY:c,fromPosition:g,toPosition:y,connectionStatus:s});let v="";const C={sourceX:S,sourceY:m,sourcePosition:g,targetX:a,targetY:c,targetPosition:y};return r===wn.Bezier?[v]=ig(C):r===wn.Step?[v]=hc({...C,borderRadius:0}):r===wn.SmoothStep?[v]=hc(C):r===wn.SimpleBezier?[v]=sg(C):v=`M${S},${m} ${a},${c}`,H.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};Dg.displayName="ConnectionLine";const GS=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function ZS({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:l,height:a,connectionStatus:c}=ve(GS,De);return!(o&&s&&l&&i)?null:H.createElement("svg",{style:e,width:l,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},H.createElement("g",{className:Ve(["react-flow__connection",c])},H.createElement(Dg,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:c})))}function Bf(e,t){return P.useRef(null),Ae(),P.useMemo(()=>t(e),[e])}const Og=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:a,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:w,onSelectionEnd:S,connectionLineType:m,connectionLineStyle:g,connectionLineComponent:y,connectionLineContainerStyle:v,selectionKeyCode:C,selectionOnDrag:E,selectionMode:I,multiSelectionKeyCode:_,panActivationKeyCode:b,zoomActivationKeyCode:T,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:U,selectNodesOnDrag:N,defaultViewport:M,translateExtent:j,minZoom:O,maxZoom:$,preventScrolling:k,defaultMarkerColor:z,zoomOnScroll:B,zoomOnPinch:D,panOnScroll:Y,panOnScrollSpeed:W,panOnScrollMode:Q,zoomOnDoubleClick:A,panOnDrag:V,onPaneClick:re,onPaneMouseEnter:oe,onPaneMouseMove:F,onPaneMouseLeave:Z,onPaneScroll:ee,onPaneContextMenu:K,onEdgeContextMenu:te,onEdgeMouseEnter:q,onEdgeMouseMove:ie,onEdgeMouseLeave:J,onReconnect:G,onReconnectStart:ne,onReconnectEnd:ce,reconnectRadius:me,noDragClassName:pe,noWheelClassName:ae,noPanClassName:ge,elevateEdgesOnSelect:je,disableKeyboardA11y:gt,nodeOrigin:Ge,nodeExtent:Ze,rfId:Ot})=>{const Fn=Bf(e,_S),Oe=Bf(t,MS);return XS(s),H.createElement(bS,{onPaneClick:re,onPaneMouseEnter:oe,onPaneMouseMove:F,onPaneMouseLeave:Z,onPaneContextMenu:K,onPaneScroll:ee,deleteKeyCode:R,selectionKeyCode:C,selectionOnDrag:E,selectionMode:I,onSelectionStart:w,onSelectionEnd:S,multiSelectionKeyCode:_,panActivationKeyCode:b,zoomActivationKeyCode:T,elementsSelectable:U,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:B,zoomOnPinch:D,zoomOnDoubleClick:A,panOnScroll:Y,panOnScrollSpeed:W,panOnScrollMode:Q,panOnDrag:V,defaultViewport:M,translateExtent:j,minZoom:O,maxZoom:$,onSelectionContextMenu:x,preventScrolling:k,noDragClassName:pe,noWheelClassName:ae,noPanClassName:ge,disableKeyboardA11y:gt},H.createElement(YS,null,H.createElement(QS,{edgeTypes:Oe,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:L,onEdgeContextMenu:te,onEdgeMouseEnter:q,onEdgeMouseMove:ie,onEdgeMouseLeave:J,onReconnect:G,onReconnectStart:ne,onReconnectEnd:ce,reconnectRadius:me,defaultMarkerColor:z,noPanClassName:ge,elevateEdgesOnSelect:!!je,disableKeyboardA11y:gt,rfId:Ot},H.createElement(ZS,{style:g,type:m,component:y,containerStyle:v})),H.createElement("div",{className:"react-flow__edgelabel-renderer"}),H.createElement(IS,{nodeTypes:Fn,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:N,onlyRenderVisibleElements:L,noPanClassName:ge,noDragClassName:pe,disableKeyboardA11y:gt,nodeOrigin:Ge,nodeExtent:Ze,rfId:Ot})))};Og.displayName="GraphView";var JS=P.memo(Og);const vc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],pn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:vc,nodeExtent:vc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Rn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:CN,isValidConnection:void 0},eE=()=>Vv((e,t)=>({...pn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:ta(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?ta(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:a,nodeOrigin:c}=t(),f=a==null?void 0:a.querySelector(".react-flow__viewport");if(!f)return;const d=window.getComputedStyle(f),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((w,S)=>{const m=o.get(S.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[Ce]:{...m[Ce],handleBounds:void 0}});else if(m){const g=Cu(S.nodeElement);!!(g.width&&g.height&&(m.width!==g.width||m.height!==g.height||S.forceUpdate))&&(o.set(m.id,{...m,[Ce]:{...m[Ce],handleBounds:{source:Rf(".source",S.nodeElement,h,c),target:Rf(".target",S.nodeElement,h,c)}},...g}),w.push({id:m.id,type:"dimensions",dimensions:g}))}return w},[]);bg(o,c);const x=i||s&&!i&&kg(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(l=>{const a={id:l.id,type:"position",dragging:o};return r&&(a.positionAbsolute=l.positionAbsolute,a.position=l.position),a});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:a}=t();if(n!=null&&n.length){if(s){const c=Cg(n,l()),f=ta(c,o,i,a);e({nodeInternals:f})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>yn(a,!0)):(i=Ar(s(),n),l=Ar(o,[])),Us({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>yn(a,!0)):(i=Ar(o,n),l=Ar(s(),[])),Us({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),l=r||o,a=i.map(f=>(f.selected=!1,yn(f.id,!1))),c=l.map(f=>yn(f.id,!1));Us({changedNodes:a,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(l=>l.selected).map(l=>yn(l.id,!1)),i=n.filter(l=>l.selected).map(l=>yn(l.id,!1));Us({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=ju(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:l,translateExtent:a}=t();if(!i||!l||!n.x&&!n.y)return!1;const c=rn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),f=[[0,0],[o,s]],d=i==null?void 0:i.constrain()(c,f,a);return i.transform(l,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:pn.connectionNodeId,connectionHandleId:pn.connectionHandleId,connectionHandleType:pn.connectionHandleType,connectionStatus:pn.connectionStatus,connectionStartHandle:pn.connectionStartHandle,connectionEndHandle:pn.connectionEndHandle}),reset:()=>e({...pn})}),Object.is),Ru=({children:e})=>{const t=P.useRef(null);return t.current||(t.current=eE()),H.createElement(wN,{value:t.current},e)};Ru.displayName="ReactFlowProvider";const Lg=({children:e})=>P.useContext(dl)?H.createElement(H.Fragment,null,e):H.createElement(Ru,null,e);Lg.displayName="ReactFlowWrapper";const tE={input:yg,default:yc,output:vg,group:Au},nE={default:Fi,straight:Tu,step:Pu,smoothstep:pl,simplebezier:Iu},rE=[0,0],oE=[15,15],sE={x:0,y:0,zoom:1},iE={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Fg=P.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=tE,edgeTypes:i=nE,onNodeClick:l,onEdgeClick:a,onInit:c,onMove:f,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:m,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:E,onNodeDragStart:I,onNodeDrag:_,onNodeDragStop:b,onNodesDelete:T,onEdgesDelete:R,onSelectionChange:L,onSelectionDragStart:U,onSelectionDrag:N,onSelectionDragStop:M,onSelectionContextMenu:j,onSelectionStart:O,onSelectionEnd:$,connectionMode:k=Rn.Strict,connectionLineType:z=wn.Bezier,connectionLineStyle:B,connectionLineComponent:D,connectionLineContainerStyle:Y,deleteKeyCode:W="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:A=!1,selectionMode:V=ls.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:oe=Oi()?"Meta":"Control",zoomActivationKeyCode:F=Oi()?"Meta":"Control",snapToGrid:Z=!1,snapGrid:ee=oE,onlyRenderVisibleElements:K=!1,selectNodesOnDrag:te=!0,nodesDraggable:q,nodesConnectable:ie,nodesFocusable:J,nodeOrigin:G=rE,edgesFocusable:ne,edgesUpdatable:ce,elementsSelectable:me,defaultViewport:pe=sE,minZoom:ae=.5,maxZoom:ge=2,translateExtent:je=vc,preventScrolling:gt=!0,nodeExtent:Ge,defaultMarkerColor:Ze="#b1b1b7",zoomOnScroll:Ot=!0,zoomOnPinch:Fn=!0,panOnScroll:Oe=!1,panOnScrollSpeed:st=.5,panOnScrollMode:Hn=tr.Free,zoomOnDoubleClick:Vn=!0,panOnDrag:Bn=!0,onPaneClick:qt,onPaneMouseEnter:Lt,onPaneMouseMove:io,onPaneMouseLeave:wl,onPaneScroll:lo,onPaneContextMenu:Nl,children:Hu,onEdgeContextMenu:Un,onEdgeDoubleClick:f0,onEdgeMouseEnter:p0,onEdgeMouseMove:h0,onEdgeMouseLeave:m0,onEdgeUpdate:g0,onEdgeUpdateStart:y0,onEdgeUpdateEnd:x0,onReconnect:v0,onReconnectStart:w0,onReconnectEnd:N0,reconnectRadius:S0=10,edgeUpdaterRadius:E0=10,onNodesChange:b0,onEdgesChange:k0,noDragClassName:_0="nodrag",noWheelClassName:C0="nowheel",noPanClassName:Vu="nopan",fitView:j0=!1,fitViewOptions:I0,connectOnClick:P0=!0,attributionPosition:T0,proOptions:$0,defaultEdgeOptions:M0,elevateNodesOnSelect:A0=!0,elevateEdgesOnSelect:z0=!1,disableKeyboardA11y:Bu=!1,autoPanOnConnect:R0=!0,autoPanOnNodeDrag:D0=!0,connectionRadius:O0=20,isValidConnection:L0,onError:F0,style:H0,id:Uu,nodeDragThreshold:V0,...B0},U0)=>{const Sl=Uu||"1";return H.createElement("div",{...B0,style:{...H0,...iE},ref:U0,className:Ve(["react-flow",o]),"data-testid":"rf__wrapper",id:Uu},H.createElement(Lg,null,H.createElement(JS,{onInit:c,onMove:f,onMoveStart:d,onMoveEnd:h,onNodeClick:l,onEdgeClick:a,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:i,connectionLineType:z,connectionLineStyle:B,connectionLineComponent:D,connectionLineContainerStyle:Y,selectionKeyCode:Q,selectionOnDrag:A,selectionMode:V,deleteKeyCode:W,multiSelectionKeyCode:oe,panActivationKeyCode:re,zoomActivationKeyCode:F,onlyRenderVisibleElements:K,selectNodesOnDrag:te,defaultViewport:pe,translateExtent:je,minZoom:ae,maxZoom:ge,preventScrolling:gt,zoomOnScroll:Ot,zoomOnPinch:Fn,zoomOnDoubleClick:Vn,panOnScroll:Oe,panOnScrollSpeed:st,panOnScrollMode:Hn,panOnDrag:Bn,onPaneClick:qt,onPaneMouseEnter:Lt,onPaneMouseMove:io,onPaneMouseLeave:wl,onPaneScroll:lo,onPaneContextMenu:Nl,onSelectionContextMenu:j,onSelectionStart:O,onSelectionEnd:$,onEdgeContextMenu:Un,onEdgeDoubleClick:f0,onEdgeMouseEnter:p0,onEdgeMouseMove:h0,onEdgeMouseLeave:m0,onReconnect:v0??g0,onReconnectStart:w0??y0,onReconnectEnd:N0??x0,reconnectRadius:S0??E0,defaultMarkerColor:Ze,noDragClassName:_0,noWheelClassName:C0,noPanClassName:Vu,elevateEdgesOnSelect:z0,rfId:Sl,disableKeyboardA11y:Bu,nodeOrigin:G,nodeExtent:Ge}),H.createElement(KN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:m,nodesDraggable:q,nodesConnectable:ie,nodesFocusable:J,edgesFocusable:ne,edgesUpdatable:ce,elementsSelectable:me,elevateNodesOnSelect:A0,minZoom:ae,maxZoom:ge,nodeExtent:Ge,onNodesChange:b0,onEdgesChange:k0,snapToGrid:Z,snapGrid:ee,connectionMode:k,translateExtent:je,connectOnClick:P0,defaultEdgeOptions:M0,fitView:j0,fitViewOptions:I0,onNodesDelete:T,onEdgesDelete:R,onNodeDragStart:I,onNodeDrag:_,onNodeDragStop:b,onSelectionDrag:N,onSelectionDragStart:U,onSelectionDragStop:M,noPanClassName:Vu,nodeOrigin:G,rfId:Sl,autoPanOnConnect:R0,autoPanOnNodeDrag:D0,onError:F0,connectionRadius:O0,isValidConnection:L0,nodeDragThreshold:V0}),H.createElement(YN,{onSelectionChange:L}),Hu,H.createElement(SN,{proOptions:$0,position:T0}),H.createElement(tS,{rfId:Sl,disableKeyboardA11y:Bu})))});Fg.displayName="ReactFlow";function Hg(e){return t=>{const[n,r]=P.useState(t),o=P.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const lE=Hg(Cg),aE=Hg(mS),Vg=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:l,strokeWidth:a,className:c,borderRadius:f,shapeRendering:d,onClick:h,selected:p})=>{const{background:x,backgroundColor:w}=s||{},S=i||x||w;return H.createElement("rect",{className:Ve(["react-flow__minimap-node",{selected:p},c]),x:t,y:n,rx:f,ry:f,width:r,height:o,fill:S,stroke:l,strokeWidth:a,shapeRendering:d,onClick:h?m=>h(m,e):void 0})};Vg.displayName="MiniMapNode";var cE=P.memo(Vg);const uE=e=>e.nodeOrigin,dE=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),sa=e=>e instanceof Function?e:()=>e;function fE({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:s=cE,onClick:i}){const l=ve(dE,De),a=ve(uE),c=sa(t),f=sa(e),d=sa(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return H.createElement(H.Fragment,null,l.map(p=>{const{x,y:w}=sr(p,a).positionAbsolute;return H.createElement(s,{key:p.id,x,y:w,width:p.width,height:p.height,style:p.style,selected:p.selected,className:d(p),color:c(p),borderRadius:r,strokeColor:f(p),strokeWidth:o,shapeRendering:h,onClick:i,id:p.id})}))}var pE=P.memo(fE);const hE=200,mE=150,gE=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?kN(hl(t,e.nodeOrigin),n):n,rfId:e.rfId}},yE="react-flow__minimap-desc";function Bg({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:f=1,position:d="bottom-right",onClick:h,onNodeClick:p,pannable:x=!1,zoomable:w=!1,ariaLabel:S="React Flow mini map",inversePan:m=!1,zoomStep:g=10,offsetScale:y=5}){const v=Ae(),C=P.useRef(null),{boundingRect:E,viewBB:I,rfId:_}=ve(gE,De),b=(e==null?void 0:e.width)??hE,T=(e==null?void 0:e.height)??mE,R=E.width/b,L=E.height/T,U=Math.max(R,L),N=U*b,M=U*T,j=y*U,O=E.x-(N-E.width)/2-j,$=E.y-(M-E.height)/2-j,k=N+j*2,z=M+j*2,B=`${yE}-${_}`,D=P.useRef(0);D.current=U,P.useEffect(()=>{if(C.current){const Q=vt(C.current),A=oe=>{const{transform:F,d3Selection:Z,d3Zoom:ee}=v.getState();if(oe.sourceEvent.type!=="wheel"||!Z||!ee)return;const K=-oe.sourceEvent.deltaY*(oe.sourceEvent.deltaMode===1?.05:oe.sourceEvent.deltaMode?1:.002)*g,te=F[2]*Math.pow(2,K);ee.scaleTo(Z,te)},V=oe=>{const{transform:F,d3Selection:Z,d3Zoom:ee,translateExtent:K,width:te,height:q}=v.getState();if(oe.sourceEvent.type!=="mousemove"||!Z||!ee)return;const ie=D.current*Math.max(1,F[2])*(m?-1:1),J={x:F[0]-oe.sourceEvent.movementX*ie,y:F[1]-oe.sourceEvent.movementY*ie},G=[[0,0],[te,q]],ne=rn.translate(J.x,J.y).scale(F[2]),ce=ee.constrain()(ne,G,K);ee.transform(Z,ce)},re=Xm().on("zoom",x?V:null).on("zoom.wheel",w?A:null);return Q.call(re),()=>{Q.on("zoom",null)}}},[x,w,m,g]);const Y=h?Q=>{const A=It(Q);h(Q,{x:A[0],y:A[1]})}:void 0,W=p?(Q,A)=>{const V=v.getState().nodeInternals.get(A);p(Q,V)}:void 0;return H.createElement(fl,{position:d,style:e,className:Ve(["react-flow__minimap",t]),"data-testid":"rf__minimap"},H.createElement("svg",{width:b,height:T,viewBox:`${O} ${$} ${k} ${z}`,role:"img","aria-labelledby":B,ref:C,onClick:Y},S&&H.createElement("title",{id:B},S),H.createElement(pE,{onClick:W,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:l}),H.createElement("path",{className:"react-flow__minimap-mask",d:`M${O-j},${$-j}h${k+j*2}v${z+j*2}h${-k-j*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fill:a,fillRule:"evenodd",stroke:c,strokeWidth:f,pointerEvents:"none"})))}Bg.displayName="MiniMap";var xE=P.memo(Bg);function vE(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},H.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function wE(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},H.createElement("path",{d:"M0 0h32v4.2H0z"}))}function NE(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},H.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function SE(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},H.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function EE(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},H.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const jo=({children:e,className:t,...n})=>H.createElement("button",{type:"button",className:Ve(["react-flow__controls-button",t]),...n},e);jo.displayName="ControlButton";const bE=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ug=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:a,className:c,children:f,position:d="bottom-left"})=>{const h=Ae(),[p,x]=P.useState(!1),{isInteractive:w,minZoomReached:S,maxZoomReached:m}=ve(bE,De),{zoomIn:g,zoomOut:y,fitView:v}=ml();if(P.useEffect(()=>{x(!0)},[]),!p)return null;const C=()=>{g(),s==null||s()},E=()=>{y(),i==null||i()},I=()=>{v(o),l==null||l()},_=()=>{h.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),a==null||a(!w)};return H.createElement(fl,{className:Ve(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls"},t&&H.createElement(H.Fragment,null,H.createElement(jo,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},H.createElement(vE,null)),H.createElement(jo,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},H.createElement(wE,null))),n&&H.createElement(jo,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view"},H.createElement(NE,null)),r&&H.createElement(jo,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},w?H.createElement(EE,null):H.createElement(SE,null)),f)};Ug.displayName="Controls";var kE=P.memo(Ug),Et;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Et||(Et={}));function _E({color:e,dimensions:t,lineWidth:n}){return H.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function CE({color:e,radius:t}){return H.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const jE={[Et.Dots]:"#91919a",[Et.Lines]:"#eee",[Et.Cross]:"#e2e2e2"},IE={[Et.Dots]:1,[Et.Lines]:1,[Et.Cross]:6},PE=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Wg({id:e,variant:t=Et.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:i,style:l,className:a}){const c=P.useRef(null),{transform:f,patternId:d}=ve(PE,De),h=i||jE[t],p=r||IE[t],x=t===Et.Dots,w=t===Et.Cross,S=Array.isArray(n)?n:[n,n],m=[S[0]*f[2]||1,S[1]*f[2]||1],g=p*f[2],y=w?[g,g]:m,v=x?[g/s,g/s]:[y[0]/s,y[1]/s];return H.createElement("svg",{className:Ve(["react-flow__background",a]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},H.createElement("pattern",{id:d+e,x:f[0]%m[0],y:f[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},x?H.createElement(CE,{color:h,radius:g/s}):H.createElement(_E,{dimensions:y,color:h,lineWidth:o})),H.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Wg.displayName="Background";var TE=P.memo(Wg);const Qg={},{useDebugValue:$E}=H,{useSyncExternalStoreWithSelector:ME}=vm;let Uf=!1;const AE=e=>e;function zE(e,t=AE,n){(Qg?"production":void 0)!=="production"&&n&&!Uf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Uf=!0);const r=ME(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $E(r),r}const RE=e=>{(Qg?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?wm(e):e,n=(r,o)=>zE(t,r,o);return Object.assign(n,t),n},DE=e=>RE;var qg=Symbol.for("immer-nothing"),Wf=Symbol.for("immer-draftable"),ft=Symbol.for("immer-state");function $t(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var to=Object.getPrototypeOf;function no(e){return!!e&&!!e[ft]}function fr(e){var t;return e?Yg(e)||Array.isArray(e)||!!e[Wf]||!!((t=e.constructor)!=null&&t[Wf])||yl(e)||xl(e):!1}var OE=Object.prototype.constructor.toString();function Yg(e){if(!e||typeof e!="object")return!1;const t=to(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===OE}function Hi(e,t){gl(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function gl(e){const t=e[ft];return t?t.type_:Array.isArray(e)?1:yl(e)?2:xl(e)?3:0}function wc(e,t){return gl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xg(e,t,n){const r=gl(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function LE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function yl(e){return e instanceof Map}function xl(e){return e instanceof Set}function Xn(e){return e.copy_||e.base_}function Nc(e,t){if(yl(e))return new Map(e);if(xl(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Yg(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ft];let o=Reflect.ownKeys(r);for(let s=0;s<o.length;s++){const i=o[s],l=r[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(to(e),r)}else{const r=to(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function Du(e,t=!1){return vl(e)||no(e)||!fr(e)||(gl(e)>1&&(e.set=e.add=e.clear=e.delete=FE),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Du(r,!0))),e}function FE(){$t(2)}function vl(e){return Object.isFrozen(e)}var HE={};function pr(e){const t=HE[e];return t||$t(0,e),t}var cs;function Kg(){return cs}function VE(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qf(e,t){t&&(pr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Sc(e){Ec(e),e.drafts_.forEach(BE),e.drafts_=null}function Ec(e){e===cs&&(cs=e.parent_)}function qf(e){return cs=VE(cs,e)}function BE(e){const t=e[ft];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Yf(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ft].modified_&&(Sc(t),$t(4)),fr(e)&&(e=Vi(t,e),t.parent_||Bi(t,e)),t.patches_&&pr("Patches").generateReplacementPatches_(n[ft].base_,e,t.patches_,t.inversePatches_)):e=Vi(t,n,[]),Sc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qg?e:void 0}function Vi(e,t,n){if(vl(t))return t;const r=t[ft];if(!r)return Hi(t,(o,s)=>Xf(e,r,t,o,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Bi(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let s=o,i=!1;r.type_===3&&(s=new Set(o),o.clear(),i=!0),Hi(s,(l,a)=>Xf(e,r,o,l,a,n,i)),Bi(e,o,!1),n&&e.patches_&&pr("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Xf(e,t,n,r,o,s,i){if(no(o)){const l=s&&t&&t.type_!==3&&!wc(t.assigned_,r)?s.concat(r):void 0,a=Vi(e,o,l);if(Xg(n,r,a),no(a))e.canAutoFreeze_=!1;else return}else i&&n.add(o);if(fr(o)&&!vl(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Vi(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Bi(e,o)}}function Bi(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Du(t,n)}function UE(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Kg(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,s=Ou;n&&(o=[r],s=us);const{revoke:i,proxy:l}=Proxy.revocable(o,s);return r.draft_=l,r.revoke_=i,l}var Ou={get(e,t){if(t===ft)return e;const n=Xn(e);if(!wc(n,t))return WE(e,n,t);const r=n[t];return e.finalized_||!fr(r)?r:r===ia(e.base_,t)?(la(e),e.copy_[t]=kc(r,e)):r},has(e,t){return t in Xn(e)},ownKeys(e){return Reflect.ownKeys(Xn(e))},set(e,t,n){const r=Gg(Xn(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=ia(Xn(e),t),s=o==null?void 0:o[ft];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(LE(n,o)&&(n!==void 0||wc(e.base_,t)))return!0;la(e),bc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ia(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,la(e),bc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){$t(11)},getPrototypeOf(e){return to(e.base_)},setPrototypeOf(){$t(12)}},us={};Hi(Ou,(e,t)=>{us[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});us.deleteProperty=function(e,t){return us.set.call(this,e,t,void 0)};us.set=function(e,t,n){return Ou.set.call(this,e[0],t,n,e[0])};function ia(e,t){const n=e[ft];return(n?Xn(n):e)[t]}function WE(e,t,n){var o;const r=Gg(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function Gg(e,t){if(!(t in e))return;let n=to(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=to(n)}}function bc(e){e.modified_||(e.modified_=!0,e.parent_&&bc(e.parent_))}function la(e){e.copy_||(e.copy_=Nc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var QE=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const i=this;return function(a=s,...c){return i.produce(a,f=>n.call(this,f,...c))}}typeof n!="function"&&$t(6),r!==void 0&&typeof r!="function"&&$t(7);let o;if(fr(t)){const s=qf(this),i=kc(t,void 0);let l=!0;try{o=n(i),l=!1}finally{l?Sc(s):Ec(s)}return Qf(s,r),Yf(o,s)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===qg&&(o=void 0),this.autoFreeze_&&Du(o,!0),r){const s=[],i=[];pr("Patches").generateReplacementPatches_(t,o,s,i),r(s,i)}return o}else $t(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...l)=>this.produceWithPatches(i,a=>t(a,...l));let r,o;return[this.produce(t,n,(i,l)=>{r=i,o=l}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fr(e)||$t(8),no(e)&&(e=qE(e));const t=qf(this),n=kc(e,void 0);return n[ft].isManual_=!0,Ec(t),n}finishDraft(e,t){const n=e&&e[ft];(!n||!n.isManual_)&&$t(9);const{scope_:r}=n;return Qf(r,t),Yf(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=pr("Patches").applyPatches_;return no(e)?r(e,t):this.produce(e,o=>r(o,t))}};function kc(e,t){const n=yl(e)?pr("MapSet").proxyMap_(e,t):xl(e)?pr("MapSet").proxySet_(e,t):UE(e,t);return(t?t.scope_:Kg()).drafts_.push(n),n}function qE(e){return no(e)||$t(10,e),Zg(e)}function Zg(e){if(!fr(e)||vl(e))return e;const t=e[ft];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Nc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Nc(e,!0);return Hi(n,(r,o)=>{Xg(n,r,Zg(o))}),t&&(t.finalized_=!1),n}var pt=new QE,YE=pt.produce;pt.produceWithPatches.bind(pt);pt.setAutoFreeze.bind(pt);pt.setUseStrictShallowCopy.bind(pt);pt.applyPatches.bind(pt);pt.createDraft.bind(pt);pt.finishDraft.bind(pt);const XE=e=>(t,n,r)=>(r.setState=(o,s,...i)=>{const l=typeof o=="function"?YE(o):o;return t(l,s,...i)},e(r.setState,n,r)),KE=XE,Kn=class Kn{constructor(){vs(this,"counters",new Map);vs(this,"pathRegistry",{nodeToPathsMap:new Map,pathToNodeMap:new Map})}static getInstance(){return Kn.instance||(Kn.instance=new Kn),Kn.instance}generateQuestionPathId(t,n,r){return t?`${t.pathId}-Q${n}`:`${r}-Q${n}`}generateAnswerPathId(t,n){return`${t.pathId}-A${n}`}generateOutcomePathId(t,n){return`${t.pathId}-E${n}`}generateVariantPathId(t,n){return`${t}-V${n+1}`}parseVariantFromPath(t){const n=t.match(/(.*-A\d+)-V(\d+)/);return n?{answerPath:n[1],variantNumber:parseInt(n[2])}:null}parsePathId(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];i.startsWith("Q")?o.push({type:"Q",number:parseInt(i.substring(1))}):i.startsWith("A")&&o.push({type:"A",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}parsePathIdWithVariants(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];if(i.startsWith("Q"))o.push({type:"Q",number:parseInt(i.substring(1))});else if(i.startsWith("A"))o.push({type:"A",number:parseInt(i.substring(1))});else if(i.startsWith("V")&&i.includes("+V")){const l=i.substring(1).split("+V").map(a=>parseInt(a));o.push({type:"VC",numbers:l})}else i.startsWith("V")?o.push({type:"V",number:parseInt(i.substring(1))}):i.startsWith("E")&&o.push({type:"E",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}getPathLevel(t){return this.parsePathId(t).segments.filter(r=>r.type==="Q").length}getParentPathId(t){const n=t.split("-");return n.length<=2?null:n.slice(0,-1).join("-")}generateEdgeId(t,n,r){const o=r?`-${r}`:"";return`edge-${t}-${n}${o}`}registerNode(t,n){this.pathRegistry.pathToNodeMap.set(n,t);const r=this.pathRegistry.nodeToPathsMap.get(t)||[];r.includes(n)||this.pathRegistry.nodeToPathsMap.set(t,[...r,n])}getNodePaths(t){return this.pathRegistry.nodeToPathsMap.get(t)||[]}getNodeForPath(t){return this.pathRegistry.pathToNodeMap.get(t)||null}recalculatePathIds(t,n,r){var p,x,w,S,m,g,y,v,C;const o={nodeToPathsMap:new Map,pathToNodeMap:new Map},s=new Map,i=new Map,l=new Map;t.forEach(E=>{s.set(E.id,E)}),n.forEach(E=>{const I=i.get(E.source)||[];I.push(E),i.set(E.source,I);const _=l.get(E.target)||[];_.push(E),l.set(E.target,_)});const a=t.filter(E=>{var I;return E.type==="question"&&((I=E.data)==null?void 0:I.isRoot)===!0});this.counters.clear();const c=new Map;t.forEach(E=>{var I;c.set(E.id,{...E,data:{...E.data,pathIds:[],topic:((I=E.data)==null?void 0:I.topic)||r}})});const f=[];a.forEach(E=>{var _;i.has(E.id)&&(((_=i.get(E.id))==null?void 0:_.length)||0)>0&&f.push({nodeId:E.id,parentPathId:null,level:1})});const d=new Set;for(;f.length>0;){const{nodeId:E,parentPathId:I,level:_}=f.shift(),b=c.get(E);if(!b)continue;let T;if(b.type==="question"){const M=this.getQuestionNumberForNode(b.id,I,t);I===null?T=`${((p=b.data)==null?void 0:p.topic)||r}-Q${M}`:T=`${I}-Q${M}`}else if(b.type==="answer"){const M=this.getAnswerNumberForNode(b.id,I||"STANDALONE",t);if(T=`${I||"STANDALONE"}-A${M}`,((x=b.data)==null?void 0:x.answerType)==="single"){const O=`${E}:${T}`;if(!d.has(O)){d.add(O);const $=c.get(E),k=$.data.pathIds||[];if(!k.includes(T)){c.set(E,{...$,data:{...$.data,pathId:T,primaryPathId:T,pathIds:[...k,T],isRoot:!1,questionLevel:_}}),o.pathToNodeMap.set(T,E);const z=o.nodeToPathsMap.get(E)||[];z.includes(T)||o.nodeToPathsMap.set(E,[...z,T])}}}else{const O=c.get(E),$=O.data.pathIds||[],k=[];if(((w=b.data)==null?void 0:w.answerType)==="multiple")(((S=b.data)==null?void 0:S.variants)||[]).forEach((D,Y)=>{const W=`${T}-V${Y+1}`;$.includes(W)||k.push(W)});else if(((m=b.data)==null?void 0:m.answerType)==="combinations"){const D=(((g=b.data)==null?void 0:g.variants)||[]).length;for(let Y=1;Y<Math.pow(2,D);Y++){const W=[];for(let A=0;A<D;A++)Y&1<<A&&W.push(A+1);const Q=`${T}-V${W.join("+V")}`;$.includes(Q)||k.push(Q)}}const z=[...$,...k];c.set(E,{...O,data:{...O.data,pathId:T,pathIds:z,isRoot:!1,questionLevel:_}}),k.forEach(B=>{o.pathToNodeMap.set(B,E);const D=o.nodeToPathsMap.get(E)||[];D.includes(B)||o.nodeToPathsMap.set(E,[...D,B])})}const j=i.get(E)||[];((y=b.data)==null?void 0:y.answerType)==="single"?j.forEach(O=>{f.push({nodeId:O.target,parentPathId:T,level:_+1,sourceHandle:O.sourceHandle||void 0,sourceNodeId:E})}):((v=b.data)==null?void 0:v.answerType)==="multiple"?j.forEach(O=>{if(O.sourceHandle&&O.sourceHandle.startsWith("variant-")){const $=parseInt(O.sourceHandle.replace("variant-","")),k=`${T}-V${$+1}`;f.push({nodeId:O.target,parentPathId:k,level:_+1,sourceHandle:O.sourceHandle||void 0,sourceNodeId:E})}}):((C=b.data)==null?void 0:C.answerType)==="combinations"&&j.forEach(O=>{var $;if(O.sourceHandle&&O.sourceHandle.startsWith("combination-")){const k=O.sourceHandle.replace("combination-",""),z=(($=b.data)==null?void 0:$.variants)||[],B=[],D=z.length;for(let W=1;W<Math.pow(2,D);W++){const Q=[];for(let V=0;V<D;V++)W&1<<V&&Q.push(V+1);const A={id:`combo-${W}`,variantIndices:Q};B.push(A)}const Y=B.find(W=>W.id===k);if(Y){const W=`${T}-V${Y.variantIndices.join("+V")}`;f.push({nodeId:O.target,parentPathId:W,level:_+1,sourceHandle:O.sourceHandle||void 0,sourceNodeId:E})}}});continue}else if(b.type==="outcome"){const M=this.getOutcomeNumberForNode(b.id,I||"STANDALONE",t);T=`${I||"STANDALONE"}-E${M}`}else T=`${I||"STANDALONE"}-NODE`;const R=`${E}:${T}`;if(d.has(R))continue;d.add(R);const L=c.get(E),U=L.data.pathIds||[];if(!U.includes(T)){const M=[...U,T],j=L.data.primaryPathId,O=!j||T.length<(j||"").length;c.set(E,{...L,data:{...L.data,pathId:O?T:L.data.pathId||T,primaryPathId:O?T:j||T,pathIds:M,isRoot:L.data.isRoot||!1,questionLevel:_,topic:(L.data.isRoot&&L.data.topic,L.data.topic)}})}o.pathToNodeMap.set(T,E);const N=o.nodeToPathsMap.get(E)||[];N.includes(T)||o.nodeToPathsMap.set(E,[...N,T]),b.type!=="answer"&&(i.get(E)||[]).forEach(j=>{if(c.get(j.target)){const $=b.type==="question"?_:_+1;f.push({nodeId:j.target,parentPathId:T,level:$,sourceHandle:j.sourceHandle||void 0,sourceNodeId:E})}})}return t.forEach(E=>{var b;const I=c.get(E.id);if(((b=E.data)==null?void 0:b.isRoot)===!0)return;let _=!1;if(I&&(!I.data.pathIds||I.data.pathIds.length===0)&&(_=!0),_){let T;E.type==="question"?T=`disconnected from root-Q${this.getQuestionNumberForNode(E.id,"disconnected from root",t)}`:E.type==="answer"?T=`disconnected from root-A${this.getAnswerNumberForNode(E.id,"disconnected from root",t)}`:E.type==="outcome"?T=`disconnected from root-E${this.getOutcomeNumberForNode(E.id,"disconnected from root",t)}`:T="disconnected from root-NODE";const R=`${E.id}:${T}`;if(!d.has(R)){d.add(R);const L=c.get(E.id);c.set(E.id,{...L,data:{...L.data,pathId:T,primaryPathId:T,pathIds:[T],isRoot:!1,questionLevel:1,topic:L.data.topic}}),o.pathToNodeMap.set(T,E.id),o.nodeToPathsMap.set(E.id,[T])}}}),this.pathRegistry=o,{nodes:Array.from(c.values()),registry:o}}getQuestionNumberForNode(t,n,r){var a;const o=r.find(c=>c.id===t);return n===null||((a=o==null?void 0:o.data)==null?void 0:a.isRoot)===!0?1:r.filter(c=>{var f;return c.type==="question"&&!((f=c.data)!=null&&f.isRoot)}).sort((c,f)=>c.id.localeCompare(f.id)).findIndex(c=>c.id===t)+2}getAnswerNumberForNode(t,n,r){return r.filter(l=>l.type==="answer").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getOutcomeNumberForNode(t,n,r){return r.filter(l=>l.type==="outcome").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getNextQuestionNumber(t,n){if(t===null)return 1;const r="Q-NEXT",o=this.counters.get(r)||0;return this.counters.set(r,o+1),o+1}getNextAnswerNumber(t){const n="A-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}getNextOutcomeNumber(t){const n="E-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}reset(){this.counters.clear(),this.pathRegistry={nodeToPathsMap:new Map,pathToNodeMap:new Map}}getRegistry(){return this.pathRegistry}getDisplayLabel(t,n){const r=this.parsePathId(t),o=[];switch(r.segments.forEach(s=>{s.type==="Q"&&o.push(s.number)}),n){case"question":return`Q${o.join(".")}`;case"answer":const s=r.segments.filter(i=>i.type==="A").pop();return`A${(s==null?void 0:s.number)||"?"}`;case"outcome":return`Outcome ${this.getPathLevel(t)}`;default:return t}}calculatePathScore(t,n){const r=this.parsePathIdWithVariants(t);let o=0,s=r.topic;for(let i=0;i<r.segments.length;i++){const l=r.segments[i];if(l.type==="Q")s+=`-Q${l.number}`;else if(l.type==="A")s+=`-A${l.number}`;else if(l.type==="V"&&l.number!==void 0){s+=`-V${l.number}`;const a=s.substring(0,s.lastIndexOf("-V")),c=this.getNodeForPath(a);if(c){const f=n.find(d=>d.id===c);if(f&&f.data.variants){const d=l.number-1,h=f.data.variants[d];h&&(o+=h.score||0)}}}else if(l.type==="VC"&&l.numbers){const a=`V${l.numbers.join("+V")}`;s+=`-${a}`;const c=s.substring(0,s.lastIndexOf("-V")),f=this.getNodeForPath(c);if(f){const d=n.find(h=>h.id===f);d&&d.data.variants&&l.numbers.forEach(h=>{const p=d.data.variants[h];p&&(o+=p.score||0)})}}else l.type==="E"&&l.number!==void 0&&(s+=`-E${l.number}`)}return o}getHumanReadablePath(t,n){const r=this.parsePathIdWithVariants(t),o=[];let s="";return r.segments.forEach((i,l)=>{if(i.type==="Q"&&i.number!==void 0){s=l===0?`${r.topic}-Q${i.number}`:s+`-Q${i.number}`;const a=this.getNodeForPath(s),c=n.find(f=>f.id===a);c&&o.push(`Q${i.number}: ${c.data.questionText||"Question"}`)}else if(i.type==="A"&&i.number!==void 0)s+=`-A${i.number}`,o.push(`Answer ${i.number}`);else if(i.type==="V"&&i.number!==void 0){const a=s;s+=`-V${i.number}`;const c=this.getNodeForPath(a),f=n.find(d=>d.id===c);if(f&&f.data.variants){const d=f.data.variants[i.number-1];d&&o.push(`→ "${d.text}"`)}}else if(i.type==="VC"&&i.numbers){const a=s,c=`V${i.numbers.join("+V")}`;s+=`-${c}`;const f=this.getNodeForPath(a),d=n.find(h=>h.id===f);if(d&&d.data.variants){const h=i.numbers.map(p=>{var x;return(x=d.data.variants[p])==null?void 0:x.text}).filter(Boolean);h.length>0&&o.push(`→ [${h.join(" + ")}]`)}}else i.type==="E"&&i.number!==void 0&&(s+=`-E${i.number}`,o.push(`Outcome ${i.number}`))}),o.join(" ")}printPathStructure(t){console.log("=== Path Structure Debug ==="),t.forEach(n=>{n.data.pathIds?(console.log(`Node ${n.id} (${n.type}):`),console.log(`  Primary: ${n.data.pathId||n.data.primaryPathId}`),console.log(`  All paths: ${n.data.pathIds.join(", ")}`)):n.data.pathId&&console.log(`Node ${n.id} (${n.type}): ${n.data.pathId}`)}),console.log("=== Counters ==="),this.counters.forEach((n,r)=>{console.log(`${r}: ${n}`)})}};vs(Kn,"instance");let lt=Kn;const Te=DE()(KE((e,t)=>({nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,selectedNodeIds:[],clipboard:{nodes:[],edges:[]},focusNodeId:null,pathDisplaysFolded:!1,combinationSectionsFolded:!1,history:[{nodes:[],edges:[]}],historyIndex:0,addNode:n=>{t().saveToHistory(),e(r=>{r.nodes.push(n)})},updateNode:(n,r)=>e(o=>{const s=o.nodes.findIndex(i=>i.id===n);s!==-1&&(o.nodes[s].data={...o.nodes[s].data,...r})}),updateNodePosition:(n,r)=>e(o=>{const s=o.nodes.findIndex(i=>i.id===n);s!==-1&&(o.nodes[s].position=r)}),deleteNode:n=>{t().saveToHistory(),e(r=>{r.nodes=r.nodes.filter(s=>s.id!==n);const o=r.edges.filter(s=>s.source===n||s.target===n);r.edges=r.edges.filter(s=>s.source!==n&&s.target!==n),r.selectedNodeId===n&&(r.selectedNodeId=null),o.length>0&&console.log(`Cleaned up ${o.length} edges for deleted node ${n}`)})},addEdge:n=>{t().saveToHistory(),e(r=>{var s;if(!r.edges.some(i=>i.source===n.source&&i.target===n.target&&i.sourceHandle===n.sourceHandle&&i.targetHandle===n.targetHandle)){r.edges.push(n);const i=r.nodes.find(a=>a.id===n.target),l=r.nodes.find(a=>a.id===n.source);if(i&&i.type==="outcome"&&l){const a=r.nodes.findIndex(c=>c.id===n.target);if(a!==-1){const c=lt.getInstance(),f=((s=l.data)==null?void 0:s.pathId)||"PATH",d=c.getOutcomeNumberForNode(n.target,f,r.nodes),h=`${f}-E${d}`;r.nodes[a].data={...r.nodes[a].data,pathId:h},console.log(`Updated outcome node path ID to: ${h}`)}}}})},deleteEdge:n=>{t().saveToHistory(),e(r=>{r.edges=r.edges.filter(o=>o.id!==n)})},setNodes:n=>e(r=>{r.nodes=n}),setEdges:n=>e(r=>{r.edges=n}),setSelectedNodeId:n=>e(r=>{r.selectedNodeId=n,r.selectedEdgeId=null}),setSelectedEdgeId:n=>e(r=>{r.selectedEdgeId=n,r.selectedNodeId=null}),setSelectedNodeIds:n=>e(r=>{r.selectedNodeIds=n}),addToSelection:n=>e(r=>{r.selectedNodeIds.includes(n)||r.selectedNodeIds.push(n)}),removeFromSelection:n=>e(r=>{r.selectedNodeIds=r.selectedNodeIds.filter(o=>o!==n)}),clearSelection:()=>e(n=>{n.selectedNodeId=null,n.selectedEdgeId=null,n.selectedNodeIds=[]}),copySelectedNodes:()=>e(n=>{const r=n.nodes.filter(s=>n.selectedNodeIds.includes(s.id)),o=n.edges.filter(s=>n.selectedNodeIds.includes(s.source)&&n.selectedNodeIds.includes(s.target));n.clipboard.nodes=r,n.clipboard.edges=o,console.log(`Copied ${r.length} nodes and ${o.length} edges to clipboard.`)}),pasteNodes:n=>e(r=>{if(r.clipboard.nodes.length===0){console.log("Clipboard is empty, nothing to paste.");return}const o=[],s=[],i=(n==null?void 0:n.x)||0,l=(n==null?void 0:n.y)||0,a=new Map;r.clipboard.nodes.forEach(c=>{const f=`pasted-${c.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.set(c.id,f);const d={...c,id:f,position:{x:c.position.x+i,y:c.position.y+l},data:{...c.data,pathId:c.data.pathId?`${c.data.pathId}-copy`:void 0,topic:c.data.topic?`${c.data.topic}-copy`:c.data.topic,isRoot:!1}};o.push(d)}),r.clipboard.edges.forEach(c=>{const f=a.get(c.source),d=a.get(c.target);if(f&&d){const h=`pasted-${c.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,p={...c,id:h,source:f,target:d,sourceHandle:c.sourceHandle,targetHandle:c.targetHandle,animated:!0};s.push(p)}}),r.nodes.push(...o),r.edges.push(...s),r.selectedNodeIds=o.map(c=>c.id),r.selectedNodeId=null,r.selectedEdgeId=null,console.log(`Pasted ${o.length} nodes and ${s.length} edges.`)}),focusOnNode:n=>{e({focusNodeId:n})},clearFocusNode:()=>{e({focusNodeId:null})},togglePathDisplays:()=>{e(n=>({pathDisplaysFolded:!n.pathDisplaysFolded}))},toggleCombinationSections:()=>{e(n=>({combinationSectionsFolded:!n.combinationSectionsFolded}))},toggleAllMeta:()=>{e(n=>{const r=!n.pathDisplaysFolded||!n.combinationSectionsFolded;return{pathDisplaysFolded:r,combinationSectionsFolded:r}})},canUndo:()=>t().historyIndex>0,canRedo:()=>{const n=t();return n.historyIndex<n.history.length-1},cleanupDuplicateEdges:()=>e(n=>{const r=[],o=new Set;n.edges.forEach(i=>{const l=`${i.source}-${i.target}-${i.sourceHandle||""}-${i.targetHandle||""}`;o.has(l)||(o.add(l),r.push(i))});const s=n.edges.length-r.length;n.edges=r,s>0&&console.log(`Removed ${s} duplicate edges`)}),recalculateFlowIds:(n,r)=>e(o=>{var p;const s=lt.getInstance(),i=o.nodes.find(x=>x.id===n);if(!i||!((p=i.data)!=null&&p.isRoot)){console.log(`Root node ${n} not found or is not a root node`);return}const l=o.nodes.findIndex(x=>x.id===n);l!==-1&&(o.nodes[l]={...o.nodes[l],data:{...o.nodes[l].data,topic:r}});const a=new Set,c=[n];for(a.add(n);c.length>0;){const x=c.shift();o.edges.filter(S=>S.source===x).forEach(S=>{a.has(S.target)||(a.add(S.target),c.push(S.target))})}const f=o.nodes.filter(x=>a.has(x.id)),d=o.edges.filter(x=>a.has(x.source)&&a.has(x.target));console.log(`Recalculating ${f.length} nodes for root "${n}" with topic "${r}"`);const h=s.recalculatePathIds(f,d,r);h.nodes.forEach(x=>{const w=o.nodes.findIndex(S=>S.id===x.id);w!==-1&&(o.nodes[w]=x)}),console.log(`Recalculated path IDs for topic: ${r} (${h.nodes.length} nodes updated)`)}),propagateTopicOnConnection:(n,r)=>e(o=>{var f,d;const s=o.nodes.find(h=>h.id===n),i=o.nodes.find(h=>h.id===r);if(!s||!i)return;if((f=i.data)!=null&&f.isRoot){console.log(`Target node ${r} is a root node - preserving its dedicated topic "${i.data.topic}"`);return}const l=(h,p=new Set)=>{var S,m,g;if(p.has(h))return null;p.add(h);const x=o.nodes.find(y=>y.id===h);if(!x)return null;if((S=x.data)!=null&&S.topic&&((m=x.data)!=null&&m.isRoot)||(g=x.data)!=null&&g.topic)return x.data.topic;const w=o.edges.find(y=>y.target===h);return w?l(w.source,p):null},a=l(n),c=l(r);if(c&&a&&c!==a){console.log(`Cross-topic connection: ${a} -> ${c} (preserving target topic)`);return}if(a&&(!((d=i.data)!=null&&d.topic)||i.data.topic!==a)){const h=o.nodes.findIndex(p=>p.id===r);h!==-1&&(o.nodes[h].data={...o.nodes[h].data,topic:a},console.log(`Propagated topic "${a}" to node ${r}`))}}),propagatePathIdOnConnection:(n,r,o)=>e(s=>{var h,p,x,w,S,m,g,y,v,C,E,I;const i=s.nodes.find(_=>_.id===n),l=s.nodes.find(_=>_.id===r);if(!i||!l)return;const a=lt.getInstance();let c=[];if(((h=i.data)==null?void 0:h.answerType)==="multiple"&&(o!=null&&o.startsWith("variant-"))){const _=(p=i.data)==null?void 0:p.pathId;if(_&&!_.startsWith("disconnected from root-")){const T=`V${parseInt(o.replace("variant-",""))+1}`,R=`${_}-${T}`;c=[R],console.log(`Generated variant path for Multiple answer: ${R} from base ${_}`)}else{console.log(`Source node ${n} has invalid base path for Multiple variant connection`);return}}else if(((x=i.data)==null?void 0:x.answerType)==="combinations"&&(o!=null&&o.startsWith("combination-"))){const _=(w=i.data)==null?void 0:w.pathId;if(_&&!_.startsWith("disconnected from root-")){const b=o.replace("combination-",""),R=(((S=i.data)==null?void 0:S.combinations)||[]).find(L=>L.id===b);if(R&&R.variantIndices){const L=R.variantIndices.map(N=>`V${N}`).join("+"),U=`${_}-${L}`;c=[U],console.log(`Generated combination path for Combinations answer: ${U} from base ${_}`)}else{console.log(`Could not find combination data for ${b}`);return}}else{console.log(`Source node ${n} has invalid base path for Combinations connection`);return}}else c=((m=i.data)==null?void 0:m.pathIds)||[(g=i.data)==null?void 0:g.pathId].filter(Boolean);if(c.length===0){console.log(`Source node ${n} has no valid path IDs for propagation`);return}const f=[];c.forEach(_=>{let b;if(l.type==="question"){const T=a.getQuestionNumberForNode(r,_,s.nodes);b=`${_}-Q${T}`}else if(l.type==="answer"){const T=a.getAnswerNumberForNode(r,_,s.nodes);b=`${_}-A${T}`}else if(l.type==="outcome"){const T=a.getOutcomeNumberForNode(r,_,s.nodes);b=`${_}-E${T}`}else b=`${_}-NODE`;f.push(b)});const d=s.nodes.findIndex(_=>_.id===r);if(d!==-1){const b=[...((y=s.nodes[d].data)==null?void 0:y.pathIds)||[(v=s.nodes[d].data)==null?void 0:v.pathId].filter(Boolean)];f.forEach(L=>{b.includes(L)||b.push(L)}),s.nodes[d].data={...s.nodes[d].data,pathId:b[0]||((C=s.nodes[d].data)==null?void 0:C.pathId),pathIds:b},console.log(`Updated ${l.type} node ${r} with ${f.length} new path IDs via handle "${o}". Total paths: ${b.length}`),console.log(`All path IDs for node ${r}:`,b);const T=(E=i.data)==null?void 0:E.topic,R=(I=l.data)==null?void 0:I.topic;T&&R&&T!==R&&console.log(`Cross-topic connection detected: ${T} -> ${R} for node ${r}`)}}),createLinkedQuestion:(n,r)=>e(o=>{var y,v,C,E,I,_,b;const s=o.nodes.find(T=>T.id===n);if(!s)return;const i=lt.getInstance(),l=i.getNextQuestionNumber(((y=s.data)==null?void 0:y.pathId)||null),a=((v=s.data)==null?void 0:v.topic)||"NEW-TOPIC",c=(C=s.data)!=null&&C.pathId?{nodeId:s.id,pathId:s.data.pathId,parentPathId:null,level:((E=s.data)==null?void 0:E.questionLevel)||1,topic:a}:null,f=i.generateQuestionPathId(c,l,a),d=`q-${Date.now()}`,h={id:d,type:"question",position:r,data:{pathId:f,topic:a,questionText:"New Question",questionLevel:(((I=s.data)==null?void 0:I.questionLevel)||1)+1,elementId:"NEW",subElementId:"NEW"}},p=i.getNextAnswerNumber(f),x={nodeId:d,pathId:f,parentPathId:((_=s.data)==null?void 0:_.pathId)||null,level:(((b=s.data)==null?void 0:b.questionLevel)||1)+1,topic:a},w=i.generateAnswerPathId(x,p),S=`a-${Date.now()}`,m={id:S,type:"answer",position:{x:r.x,y:r.y+120},data:{pathId:w,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},g={id:i.generateEdgeId(d,S),source:d,target:S,animated:!0};o.nodes.push(h,m),o.edges.push(g)}),importFromExcel:n=>e(r=>{r.nodes=n.nodes,r.edges=n.edges}),additiveImport:(n,r)=>e(o=>{o.nodes.push(...n),o.edges.push(...r)}),exportToFormat:n=>{const{nodes:r,edges:o}=t();return n==="json"?{nodes:r,edges:o}:null},validateTopicUniqueness:(n,r)=>t().nodes.filter(s=>{var i;return((i=s.data)==null?void 0:i.topic)===n&&s.id!==r}).length===0,generateUniqueTopicName:(n,r)=>{let o=n||"New Topic",s=1;for(;!t().validateTopicUniqueness(o,r);)o=`${n} ${s++}`;return o},clearFlow:()=>e(n=>{n.nodes=[],n.edges=[],n.selectedNodeId=null,n.focusNodeId=null,n.history=[{nodes:[],edges:[]}],n.historyIndex=0,lt.getInstance().reset()}),saveToHistory:()=>e(n=>{const r={nodes:JSON.parse(JSON.stringify(n.nodes)),edges:JSON.parse(JSON.stringify(n.edges))};n.history=n.history.slice(0,n.historyIndex+1),n.history.push(r),n.historyIndex=n.history.length-1,n.history.length>50&&(n.history.shift(),n.historyIndex=n.history.length-1)}),undo:()=>e(n=>{if(n.historyIndex>0){n.historyIndex--;const r=n.history[n.historyIndex];n.nodes=JSON.parse(JSON.stringify(r.nodes)),n.edges=JSON.parse(JSON.stringify(r.edges)),console.log("Undo: Restored state from history index",n.historyIndex)}}),redo:()=>e(n=>{if(n.historyIndex<n.history.length-1){n.historyIndex++;const r=n.history[n.historyIndex];n.nodes=JSON.parse(JSON.stringify(r.nodes)),n.edges=JSON.parse(JSON.stringify(r.edges)),console.log("Redo: Restored state from history index",n.historyIndex)}}),propagatePathToAll:()=>{t().saveToHistory(),e(n=>{const r=n.nodes.filter(s=>{var i,l;return((i=s.data)==null?void 0:i.isRoot)&&((l=s.data)==null?void 0:l.topic)});if(r.length===0){console.log("No root nodes with topics found");return}console.log(`Found ${r.length} root nodes with topics`);const o=lt.getInstance();if(o.reset(),r.length===1){const s=r[0].data.topic;console.log(`Recalculating path IDs for single topic "${s}"`);const i=o.recalculatePathIds(n.nodes,n.edges,s);n.nodes=i.nodes,console.log(`Recalculated path IDs for topic "${s}"`)}else{console.log("Multiple root nodes detected - processing all nodes together to preserve individual topics and handle cross-connections");const s=o.recalculatePathIds(n.nodes,n.edges,"MULTI-ROOT");n.nodes=s.nodes,console.log(`Processed ${r.length} roots with cross-connection support`),console.log(`Processed ${r.length} roots with individual topic preservation`)}console.log("Path ID propagation completed - all nodes now have updated path IDs")})}}))),Jg=["shift","alt","meta","mod","ctrl","control"],GE={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Mn(e){return(GE[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function e0(e){return Jg.includes(e)}function aa(e,t=","){return e.toLowerCase().split(t)}function ca(e,t="+",n=">",r=!1,o){let s=[],i=!1;e.includes(n)?(i=!0,s=e.toLocaleLowerCase().split(n).map(c=>Mn(c))):s=e.toLocaleLowerCase().split(t).map(c=>Mn(c));const l={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:r},a=s.filter(c=>!Jg.includes(c));return{...l,keys:a,description:o,isSequence:i}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&t0([Mn(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&n0([Mn(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{en.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{en.clear()},0)}));const en=new Set;function Lu(e){return Array.isArray(e)}function ZE(e,t=","){return(Lu(e)?e:e.split(t)).every(n=>en.has(n.trim().toLowerCase()))}function t0(e){const t=Array.isArray(e)?e:[e];en.has("meta")&&en.forEach(n=>!e0(n)&&en.delete(n.toLowerCase())),t.forEach(n=>en.add(n.toLowerCase()))}function n0(e){const t=Array.isArray(e)?e:[e];e==="meta"?en.clear():t.forEach(n=>en.delete(n.toLowerCase()))}function JE(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function eb(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function tb(e){return r0(e,["input","textarea","select"])}function r0(e,t=!1){const{target:n,composed:r}=e;let o;return nb(n)&&r?o=e.composedPath()[0]&&e.composedPath()[0].tagName:o=n&&n.tagName,Lu(t)?!!(o&&t&&t.some(s=>s.toLowerCase()===o.toLowerCase())):!!(o&&t&&t)}function nb(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function rb(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(n=>t.includes(n))||e.includes("*"):!0}const ob=(e,t,n=!1)=>{const{alt:r,meta:o,mod:s,shift:i,ctrl:l,keys:a,useKey:c}=t,{code:f,key:d,ctrlKey:h,metaKey:p,shiftKey:x,altKey:w}=e,S=Mn(f);if(c&&(a==null?void 0:a.length)===1&&a.includes(d))return!0;if(!(a!=null&&a.includes(S))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(S))return!1;if(!n){if(r!==w&&S!=="alt"||i!==x&&S!=="shift")return!1;if(s){if(!p&&!h)return!1}else if(o!==p&&S!=="meta"&&S!=="os"||l!==h&&S!=="ctrl"&&S!=="control")return!1}return a&&a.length===1&&a.includes(S)?!0:a?ZE(a):!a},sb=P.createContext(void 0),ib=()=>P.useContext(sb);function o0(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((n,r)=>n&&o0(e[r],t[r]),!0):e===t}const lb=P.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),ab=()=>P.useContext(lb);function cb(e){const t=P.useRef(void 0);return o0(t.current,e)||(t.current=e),t.current}const Kf=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},ub=typeof window<"u"?P.useLayoutEffect:P.useEffect;function Wn(e,t,n,r){const o=P.useRef(null),s=P.useRef(!1),i=n instanceof Array?r instanceof Array?void 0:r:n,l=Lu(e)?e.join(i==null?void 0:i.delimiter):e,a=n instanceof Array?n:r instanceof Array?r:void 0,c=P.useCallback(t,a??[]),f=P.useRef(c);a?f.current=c:f.current=t;const d=cb(i),{activeScopes:h}=ab(),p=ib();return ub(()=>{if((d==null?void 0:d.enabled)===!1||!rb(h,d==null?void 0:d.scopes))return;let x=[],w;const S=(v,C=!1)=>{var E;if(!(tb(v)&&!r0(v,d==null?void 0:d.enableOnFormTags))){if(o.current!==null){const I=o.current.getRootNode();if((I instanceof Document||I instanceof ShadowRoot)&&I.activeElement!==o.current&&!o.current.contains(I.activeElement)){Kf(v);return}}(E=v.target)!=null&&E.isContentEditable&&!(d!=null&&d.enableOnContentEditable)||aa(l,d==null?void 0:d.delimiter).forEach(I=>{var _,b,T,R;if(I.includes((d==null?void 0:d.splitKey)??"+")&&I.includes((d==null?void 0:d.sequenceSplitKey)??">")){console.warn(`Hotkey ${I} contains both ${(d==null?void 0:d.splitKey)??"+"} and ${(d==null?void 0:d.sequenceSplitKey)??">"} which is not supported.`);return}const L=ca(I,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description);if(L.isSequence){w=setTimeout(()=>{x=[]},(d==null?void 0:d.sequenceTimeoutMs)??1e3);const U=L.useKey?v.key:Mn(v.code);if(e0(U.toLowerCase()))return;x.push(U);const N=(_=L.keys)==null?void 0:_[x.length-1];if(U!==N){x=[],w&&clearTimeout(w);return}x.length===((b=L.keys)==null?void 0:b.length)&&(f.current(v,L),w&&clearTimeout(w),x=[])}else if(ob(v,L,d==null?void 0:d.ignoreModifiers)||(T=L.keys)!=null&&T.includes("*")){if((R=d==null?void 0:d.ignoreEventWhen)!=null&&R.call(d,v)||C&&s.current)return;if(JE(v,L,d==null?void 0:d.preventDefault),!eb(v,L,d==null?void 0:d.enabled)){Kf(v);return}f.current(v,L),C||(s.current=!0)}})}},m=v=>{v.code!==void 0&&(t0(Mn(v.code)),((d==null?void 0:d.keydown)===void 0&&(d==null?void 0:d.keyup)!==!0||d!=null&&d.keydown)&&S(v))},g=v=>{v.code!==void 0&&(n0(Mn(v.code)),s.current=!1,d!=null&&d.keyup&&S(v,!0))},y=o.current||(i==null?void 0:i.document)||document;return y.addEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),y.addEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),p&&aa(l,d==null?void 0:d.delimiter).forEach(v=>p.addHotkey(ca(v,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),()=>{y.removeEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),y.removeEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),p&&aa(l,d==null?void 0:d.delimiter).forEach(v=>p.removeHotkey(ca(v,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),x=[],w&&clearTimeout(w)}},[l,d,h]),o}function db(){const{selectedNodeId:e,selectedEdgeId:t,selectedNodeIds:n,createLinkedQuestion:r,deleteNode:o,deleteEdge:s,undo:i,redo:l,copySelectedNodes:a,pasteNodes:c}=Te();Wn("tab",f=>{if(f.preventDefault(),e){const d=Te.getState().nodes.find(h=>h.id===e);if(d){const h={x:d.position.x+300,y:d.position.y};r(e,h)}}}),Wn("delete, backspace",()=>{t?s(t):n.length>0?n.forEach(f=>o(f)):e&&o(e)}),Wn("ctrl+c, cmd+c",f=>{f.preventDefault(),console.log("Copy shortcut pressed, selectedNodeIds:",n),n.length>0&&a()}),Wn("ctrl+v, cmd+v",f=>{f.preventDefault(),console.log("Paste shortcut pressed"),c({x:50,y:50})}),Wn("ctrl+z, cmd+z",f=>{f.preventDefault(),i()}),Wn("ctrl+y, cmd+shift+z",f=>{f.preventDefault(),l()}),Wn("escape",()=>{const{setSelectedNodeId:f,setSelectedEdgeId:d,clearSelection:h}=Te.getState();f(null),d(null),h()})}/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s0=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},a)=>P.createElement("svg",{ref:a,...pb,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:s0("lucide",o),...l},[...i.map(([c,f])=>P.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(e,t)=>{const n=P.forwardRef(({className:r,...o},s)=>P.createElement(hb,{ref:s,iconNode:t,className:s0(`lucide-${fb(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=ye("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ye("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=ye("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ye("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=ye("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=ye("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function jb({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,recalculateFlowIds:s,propagateTopicOnConnection:i,propagatePathIdOnConnection:l,focusOnNode:a,edges:c,pathDisplaysFolded:f,nodes:d}=Te(),[h,p]=P.useState(null),[x,w]=P.useState(null),S=h!==null?h:f,m=R=>R.trim()?d.filter(U=>{var N;return((N=U.data)==null?void 0:N.isRoot)&&U.id!==e&&U.data.topic===R.trim()}).length===0:!1,g=R=>{const L=[],U=d.filter(M=>{var j;return((j=M.data)==null?void 0:j.isRoot)&&M.id!==e}).map(M=>M.data.topic).filter(M=>M);for(let M=1;M<=5;M++){const j=`${R}-${M}`;U.includes(j)||L.push(j)}return["NEW","ALT","BRANCH","FLOW","PATH"].forEach(M=>{const j=`${M}-${R}`;!U.includes(j)&&L.length<8&&L.push(j)}),L.slice(0,5)},y=()=>{r(e)},v=R=>{const L=R.target;if(L.tagName==="INPUT"||L.tagName==="TEXTAREA"||L.closest("input")||L.closest("textarea"))return;const U=c.find(N=>N.source===e);U&&a(U.target)},C=R=>{o(e,{questionText:R.target.value})},E=R=>{const L=R.target.value;if(w(null),o(e,{topic:L}),t.isRoot&&L.trim()&&!m(L)){w(`Topic "${L}" already exists. Please choose a different name.`);return}t.isRoot&&L.trim()&&s(e,L)},I=R=>{if(!R.target.value.trim()&&t.isRoot){const U=d.filter(j=>{var O;return((O=j.data)==null?void 0:O.isRoot)&&j.id!==e}).map(j=>j.data.topic).filter(j=>j);let N=1,M=`TOPIC-${N}`;for(;U.includes(M);)N++,M=`TOPIC-${N}`;o(e,{topic:M}),s(e,M),w(null)}},_=R=>{o(e,{topic:R}),w(null),t.isRoot&&s(e,R)},b=R=>{R.stopPropagation()},T=()=>{if(t.isRoot&&x){console.log("Cannot create connection: Topic validation failed. Please fix the topic first.");return}const{nodes:R,addNode:L,addEdge:U,edges:N}=Te.getState();if(N.find(z=>z.source===e)){console.log("This question already has a connection. Only one outgoing connection is allowed.");return}const j=R.find(z=>z.id===e);if(!j)return;const O=`answer-${Date.now()}`,$={id:O,type:"answer",position:{x:j.position.x+150,y:j.position.y+150},data:{pathId:"path-id-will-be-generated",pathIds:[],answerType:"single",topic:t.topic,variants:[{id:`var-${Date.now()}`,text:"Answer option",score:0}]}};L($);const k={id:`edge-${e}-${O}`,source:e,target:O,sourceHandle:null,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};U(k),i(e,O),l(e,O)};return u.jsxs("div",{className:`
        bg-white rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-blue-500 shadow-xl ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:y,onDoubleClick:v,children:[!t.isRoot&&u.jsx(Mt,{type:"target",position:le.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:t.isRoot?"Root Question":"Question"})]}),u.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Level ",t.questionLevel]})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),S?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]}),!S&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((R,L)=>u.jsx("div",{className:"text-xs pl-2",children:R},L))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathId}),S?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]})}),t.isRoot&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Topic"}),u.jsxs("div",{onClick:b,onMouseDown:b,children:[u.jsx("input",{type:"text",value:t.topic||"",onChange:E,onBlur:I,className:`w-full p-2 border rounded text-sm font-semibold focus:outline-none focus:ring-2 focus:border-transparent ${x?"border-red-300 focus:ring-red-500":"border-gray-200 focus:ring-blue-500"}`,placeholder:"Enter topic...",onFocus:b,onKeyDown:b}),x&&u.jsxs("div",{className:"mt-1 space-y-2",children:[u.jsx("p",{className:"text-xs text-red-600",children:x}),t.topic&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Suggestions:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:g(t.topic).map((R,L)=>u.jsx("button",{onClick:()=>_(R),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:R},L))})]})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Question"}),u.jsx("div",{onClick:b,onMouseDown:b,children:u.jsx("textarea",{value:t.questionText,onChange:C,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:3,placeholder:"Enter your question here...",onFocus:b,onKeyDown:b})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.elementId}),u.jsx("span",{className:"text-gray-400",children:"|"}),u.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.subElementId})]})]}),u.jsx(Mt,{type:"source",position:le.Bottom,className:"w-3 h-3 bg-green-500 border-2 border-white cursor-pointer hover:bg-green-600 transition-colors",style:{background:"#22c55e"},onClick:R=>{R.stopPropagation(),T()}})]})}const Ib=({onClick:e,hasInfo:t,className:n=""})=>u.jsx("button",{onClick:e,className:`
        w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold
        transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-300
        ${t?"bg-blue-500 text-white shadow-sm hover:bg-blue-600":"bg-gray-300 text-gray-600 hover:bg-gray-400 hover:text-gray-700"}
        ${n}
      `,title:t?"Has additional info - click to edit":"Add additional info",type:"button",children:"i"}),Pb=({isOpen:e,onClose:t,onSave:n,currentInfo:r,variantText:o})=>{const[s,i]=P.useState(r),[l,a]=P.useState(o);P.useEffect(()=>{i(r),a(o)},[r,o,e]);const c=()=>{n(l,s),t()},f=d=>{d.key==="Escape"?t():d.key==="Enter"&&(d.ctrlKey||d.metaKey)&&c()};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",onKeyDown:f,children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),u.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",title:"Close",children:u.jsx(Fu,{size:20,className:"text-gray-500"})})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Answer Variant:"}),u.jsx("textarea",{value:l,onChange:d=>a(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter answer variant text...",style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word"}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Additional Information:"}),u.jsx("textarea",{value:s,onChange:d=>i(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter additional information that will be stored with this answer variant...",autoFocus:!0})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"This information will be saved with the answer variant but won't be displayed as part of the answer text."})]}),u.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),u.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save"})]})]})}):null};function Tb({id:e,data:t,selected:n}){var V,re,oe;const{setSelectedNodeId:r,updateNode:o,nodes:s,edges:i,addNode:l,addEdge:a,propagateTopicOnConnection:c,focusOnNode:f,pathDisplaysFolded:d,combinationSectionsFolded:h}=Te(),[p,x]=P.useState(t.answerType||"single"),[w,S]=P.useState(null),[m,g]=P.useState(null),y=w!==null?w:d,v=m!==null?m:h,[C,E]=P.useState({isOpen:!1,variantId:null}),I=F=>{F.style.height="auto",F.style.height=F.scrollHeight+"px"};P.useEffect(()=>{x(t.answerType||"single")},[t.answerType]);const _=()=>{r(e)},b=F=>{if(p!=="single")return;const Z=F.target;if(Z.tagName==="INPUT"||Z.tagName==="TEXTAREA"||Z.closest("input")||Z.closest("textarea")||Z.closest("button"))return;const ee=i.find(K=>K.source===e&&K.sourceHandle==="default");ee&&f(ee.target)},T=(F,Z)=>{if(p!=="multiple")return;const ee=Z.target;if(ee.tagName==="INPUT"||ee.tagName==="TEXTAREA"||ee.closest("input")||ee.closest("textarea")||ee.closest("button"))return;const K=`variant-${F}`,te=i.find(q=>q.source===e&&q.sourceHandle===K);te&&f(te.target)},R=(F,Z)=>{if(p!=="combinations")return;const ee=Z.target;if(ee.tagName==="INPUT"||ee.tagName==="TEXTAREA"||ee.closest("input")||ee.closest("textarea")||ee.closest("button"))return;const K=`combination-${F}`,te=i.find(q=>q.source===e&&q.sourceHandle===K);te&&f(te.target)},L=F=>{const{edges:Z}=Te.getState();if(Z.find(G=>G.source===e&&G.sourceHandle===(F||"default"))){console.log("This answer variant already has a connection. Only one connection per variant is allowed.");return}const K=s.find(G=>G.id===e);if(!K)return;let te=t.topic;if(!te){const G=ne=>{var pe;const ce=s.find(ae=>ae.id===ne);if(!ce)return"Topic";if((pe=ce.data)!=null&&pe.topic)return ce.data.topic;const me=Te.getState().edges.find(ae=>ae.target===ne);return me?G(me.source):"Topic"};te=G(e)}const q=`question-${Date.now()}`,ie={id:q,type:"question",position:{x:F==="default"?K.position.x:K.position.x+200,y:K.position.y+200},data:{pathId:"path-id-will-be-generated",topic:te,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(ie);const J={id:`edge-${e}-${q}`,source:e,target:q,sourceHandle:F||"default",targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(J),c(e,q)},U=()=>{const F={id:`var-${Date.now()}`,text:"New Answer",score:0},Z=t.variants||[];o(e,{variants:[...Z,F]})},N=(F,Z)=>{const K=(t.variants||[]).map(te=>te.id===F?{...te,...Z}:te);o(e,{variants:K})},M=F=>{E({isOpen:!0,variantId:F})},j=()=>{E({isOpen:!1,variantId:null})},O=(F,Z)=>{C.variantId&&N(C.variantId,{text:F,additionalInfo:Z}),j()},$=F=>{const Z=t.variants||[];if(Z.length>1){const ee=Z.filter(K=>K.id!==F);o(e,{variants:ee})}},k=F=>{const Z=[],ee=F.length;for(let K=1;K<Math.pow(2,ee);K++){const te=[],q=[];for(let J=0;J<ee;J++)K&1<<J&&(te.push(J+1),q.push(F[J].text||`Answer ${J+1}`));const ie={id:`combo-${K}`,variantIndices:te,pathId:`combination-${te.join("-")}`,label:q.join(" + ")};Z.push(ie)}return Z},z=()=>{if(p!=="combinations")return[];const F=t.variants||[];return F.length<2?[]:t.combinations||k(F)},B=()=>z().filter(Z=>{const ee=`combination-${Z.id}`;return i.some(K=>K.source===e&&K.sourceHandle===ee)}),D=()=>z().filter(Z=>{const ee=`combination-${Z.id}`;return!i.some(K=>K.source===e&&K.sourceHandle===ee)}),Y=F=>{if(console.log("Creating linked question for combination:",F),i.find(J=>J.source===e&&J.sourceHandle===`combination-${F}`)){console.log("This combination already has a connection. Only one connection per combination is allowed.");return}const ee=s.find(J=>J.id===e);if(!ee)return;let K=t.topic;if(!K){const J=G=>{var me;const ne=s.find(pe=>pe.id===G);if(!ne)return"Topic";if((me=ne.data)!=null&&me.topic)return ne.data.topic;const ce=Te.getState().edges.find(pe=>pe.target===G);return ce?J(ce.source):"Topic"};K=J(e)}const te=`question-${Date.now()}`,q={id:te,type:"question",position:{x:ee.position.x+200,y:ee.position.y+200},data:{pathId:"path-id-will-be-generated",topic:K,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(q);const ie={id:`edge-${e}-${te}`,source:e,target:te,sourceHandle:`combination-${F}`,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(ie),c(e,te)},W=F=>{x(F),o(e,{answerType:F});const{edges:Z,deleteEdge:ee,nodes:K,updateNode:te}=Te.getState(),q=Z.filter(ie=>ie.source===e);console.log(`Switching to ${F} mode: removing ${q.length} outgoing edges and cleaning up pathIDs`),q.forEach(ie=>{var G,ne;const J=K.find(ce=>ce.id===ie.target);if(J){const ce=((G=J.data)==null?void 0:G.pathIds)||[(ne=J.data)==null?void 0:ne.pathId].filter(Boolean),me=t.pathId;if(me){const pe=ce.filter(ae=>!ae.startsWith(me));te(ie.target,{pathId:pe.length>0?pe[0]:void 0,pathIds:pe.length>0?pe:[]}),console.log(`Cleaned pathIDs for target node ${ie.target}: removed paths starting with ${me}`)}}}),q.forEach(ie=>ee(ie.id))},Q=F=>{F.stopPropagation()},A=t.variants||[];return u.jsxs("div",{className:`
        bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow-lg border-2 p-4 w-[350px]
        ${n?"border-purple-500 shadow-xl ring-2 ring-purple-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-100":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer relative
      `,onClick:_,onDoubleClick:b,children:[u.jsx(Mt,{type:"target",position:le.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),t.answerLevel&&u.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:["Level ",t.answerLevel]}),u.jsxs("div",{className:"flex items-center space-x-2 text-xs",onClick:Q,onMouseDown:Q,children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"single",checked:p==="single",onChange:F=>W(F.target.value),className:"mr-1"}),"Single"]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"multiple",checked:p==="multiple",onChange:F=>W(F.target.value),className:"mr-1"}),"Multiple"]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"combinations",checked:p==="combinations",onChange:F=>W(F.target.value),className:"mr-1"}),"Combinations"]})]})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:F=>{F.stopPropagation(),S(!y)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),y?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]}),!y&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((F,Z)=>u.jsx("div",{className:"text-xs pl-2",children:F},Z))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:F=>{F.stopPropagation(),S(!y)},children:[u.jsx("div",{className:"truncate",children:y?"Path: ...":t.pathIds[0]}),y?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:F=>{F.stopPropagation(),S(!y)},children:[u.jsx("div",{className:"truncate",children:y?"Path: ...":t.pathId||"No path"}),y?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]})}),u.jsx("div",{className:`text-xs rounded px-2 py-1 text-center font-medium ${p==="single"?"bg-blue-50 text-blue-600":p==="multiple"?"bg-green-50 text-green-600":"bg-yellow-50 text-yellow-600"}`,children:p==="single"?"↓ Single path (bottom)":p==="multiple"?"→ Multiple paths (variants)":"→ Combinations (variants)"}),u.jsx("div",{className:"space-y-2",children:A.map((F,Z)=>{var te;const ee=`variant-${Z}`,K=(te=t.orphanedVariants)==null?void 0:te.includes(ee);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`bg-white rounded-lg p-3 shadow-sm border ${p==="multiple"?"border-green-200 hover:border-green-300":"border-gray-100"} ${K?"ring-1 ring-orange-400 border-orange-300":""} transition-colors`,onClick:Q,onMouseDown:Q,onDoubleClick:q=>T(Z,q),children:[u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(Ib,{onClick:()=>M(F.id),hasInfo:!!F.additionalInfo,className:"mt-1 flex-shrink-0"}),u.jsx("textarea",{value:F.text,onChange:q=>{N(F.id,{text:q.target.value}),I(q.target)},onInput:q=>I(q.target),className:"flex-1 text-sm bg-transparent focus:outline-none resize-none min-h-[24px] leading-relaxed",placeholder:"Answer text...",rows:1,style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word"},onFocus:Q,onKeyDown:Q}),u.jsx("input",{type:"number",value:F.score,onChange:q=>N(F.id,{score:Number(q.target.value)}),className:"w-12 text-xs text-center bg-gray-50 rounded px-1 py-1 focus:outline-none focus:bg-white border border-gray-200 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield] flex-shrink-0",placeholder:"0",title:"Score",min:"-999",max:"999",onFocus:Q,onKeyDown:Q,onWheel:q=>{q.currentTarget.blur(),q.stopPropagation()},onClick:Q,onMouseDown:Q}),A.length>1&&u.jsx("button",{onClick:q=>{q.stopPropagation(),$(F.id)},className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors flex-shrink-0",children:u.jsx(Fu,{size:12})})]}),F.additionalInfo&&u.jsxs("div",{className:"mt-2 text-xs text-gray-500 italic truncate bg-blue-50 px-2 py-1 rounded",children:["Info: ",F.additionalInfo]})]}),p==="multiple"&&u.jsx(Mt,{type:"source",position:le.Right,id:`variant-${Z}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:K?"#fb923c":"#22c55e",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:q=>{q.stopPropagation(),L(`variant-${Z}`)}})]},F.id)})}),p==="combinations"&&A.length>1&&u.jsx("div",{className:"space-y-3 border-t pt-3",children:u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-yellow-100 px-2 py-1 rounded",onClick:F=>{F.stopPropagation(),g(!v)},children:[u.jsx("div",{className:"text-xs text-yellow-700",children:"All combinations are active. Connect them to questions:"}),v?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]}),!v&&u.jsx("div",{className:"space-y-2",children:z().map(F=>{const Z=D().some(K=>K.id===F.id),ee=B().some(K=>K.id===F.id);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`flex items-center space-x-2 bg-white rounded-lg p-2 shadow-sm border transition-colors ${ee?"border-green-300 bg-green-50":Z?"border-orange-300 bg-orange-50":"border-gray-200"}`,onClick:Q,onMouseDown:Q,onDoubleClick:K=>R(F.id,K),children:[u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-xs font-normal text-gray-700",children:F.label})}),u.jsxs("div",{className:"flex items-center space-x-1",children:[ee&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Connected"}),Z&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"Orphaned"})]}),u.jsx("div",{className:"flex space-x-1",children:F.variantIndices.map(K=>u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:K},K))})]}),u.jsx(Mt,{type:"source",position:le.Right,id:`combination-${F.id}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:Z?"#fb923c":"#f59e0b",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:K=>{K.stopPropagation(),Y(F.id)}})]},F.id)})})]})}),u.jsxs("button",{onClick:F=>{F.stopPropagation(),U()},className:"w-full flex items-center justify-center space-x-2 p-2 border-2 border-dashed border-purple-300 rounded-lg text-sm text-purple-600 hover:border-purple-500 hover:bg-purple-50 transition-colors font-medium",children:[u.jsx(Sb,{size:14}),u.jsx("span",{children:"Add Answer"})]})]}),p==="single"&&u.jsx(Mt,{type:"source",position:le.Bottom,id:"default",className:"w-3 h-3 border-2 border-white cursor-pointer hover:scale-125 transition-transform",style:{background:(V=t.orphanedVariants)!=null&&V.includes("default")?"#fb923c":"#22c55e"},onClick:F=>{F.stopPropagation(),L("default")}}),C.isOpen&&C.variantId&&u.jsx(Pb,{isOpen:C.isOpen,onClose:j,onSave:O,currentInfo:((re=A.find(F=>F.id===C.variantId))==null?void 0:re.additionalInfo)||"",variantText:((oe=A.find(F=>F.id===C.variantId))==null?void 0:oe.text)||""})]})}function $b({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,pathDisplaysFolded:s}=Te(),[i,l]=P.useState(null),a=i!==null?i:s,c=()=>{r(e)},f=h=>{o(e,{recommendation:h.target.value})},d=h=>{h.stopPropagation()};return u.jsxs("div",{className:`
        bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-green-500 shadow-xl ring-2 ring-green-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:c,children:[u.jsx(Mt,{type:"target",position:le.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-green-600",children:"Outcome"})]}),u.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Final"})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),a?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]}),!a&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((h,p)=>u.jsx("div",{className:"text-xs pl-2",children:h},p))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathId}),a?u.jsx(En,{size:12}):u.jsx(tn,{size:12})]})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Recommendation"}),u.jsx("div",{onClick:d,onMouseDown:d,children:u.jsx("textarea",{value:t.recommendation||"",onChange:f,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:4,placeholder:"Enter recommendation text...",onFocus:d,onKeyDown:d})})]}),u.jsx("div",{className:"text-xs rounded px-2 py-1 text-center font-medium bg-green-50 text-green-600 border border-green-200",children:"🎯 Final Outcome"})]})]})}const Mb={question:jb,answer:Tb,outcome:$b},Ab={animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};function zb({shouldAutoOrganize:e=!1,onAutoOrganizeComplete:t}){const{nodes:n,edges:r,addEdge:o,updateNodePosition:s,deleteEdge:i,propagateTopicOnConnection:l,propagatePathIdOnConnection:a,selectedNodeId:c,selectedEdgeId:f,selectedNodeIds:d,setSelectedEdgeId:h,setSelectedNodeIds:p,clearSelection:x,setNodes:w,focusNodeId:S,clearFocusNode:m}=Te(),[g,y,v]=lE(n),[C,E,I]=aE(r),_=ml(),[b,T]=P.useState(null),[R,L]=P.useState(!1);P.useEffect(()=>{const A=re=>{re.key==="Shift"&&(console.log("Shift key pressed - entering selection mode"),L(!0))},V=re=>{re.key==="Shift"&&(console.log("Shift key released - exiting selection mode"),L(!1),b!=null&&b.isSelecting&&T(null))};return window.addEventListener("keydown",A),window.addEventListener("keyup",V),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",V)}},[b==null?void 0:b.isSelecting]);const U=H.useRef(!1),N=H.useRef(null);db(),H.useEffect(()=>{if(S&&_){const A=g.find(V=>V.id===S);A&&(_.fitView({nodes:[A],padding:.3,maxZoom:1.2,minZoom:.5,duration:800}),setTimeout(()=>{m()},100))}},[S,g,_,m]),H.useEffect(()=>{const{cleanupDuplicateEdges:A}=Te.getState();A()},[]),H.useEffect(()=>{y(A=>{if(U.current)return console.log("Bulk update detected - using store positions directly"),n;if(A.length===0)return n;const re=(()=>{const q=new Set,ie=new Set;return r.forEach(J=>{q.add(J.target),ie.add(J.source)}),n.filter(J=>{var ce;if(J.type==="question"&&((ce=J.data)!=null&&ce.isRoot))return!ie.has(J.id);if(J.type==="outcome")return!q.has(J.id);const G=q.has(J.id),ne=ie.has(J.id);return!G||!ne}).map(J=>J.id)})(),F=(()=>{const q=new Map;return n.forEach(ie=>{var J;if(ie.type==="answer"&&((J=ie.data)!=null&&J.variants)){const G=ie.data.variants,ne=ie.data.answerType||"single",ce=[];ne==="multiple"&&G.forEach((me,pe)=>{const ae=`variant-${pe}`;r.some(je=>je.source===ie.id&&je.sourceHandle===ae)||ce.push(ae)}),ne==="single"&&(r.some(pe=>pe.source===ie.id&&pe.sourceHandle==="default")||ce.push("default")),ce.length>0&&q.set(ie.id,ce)}}),q})(),Z=q=>{if(!q)return{parents:[],children:[]};const ie=r.filter(G=>G.target===q).map(G=>G.source),J=r.filter(G=>G.source===q).map(G=>G.target);return{parents:ie,children:J}},{parents:ee,children:K}=Z(c),te=new Map;return A.forEach(q=>{te.set(q.id,q.position)}),n.map(q=>{const ie=te.get(q.id);return{...q,position:ie||q.position,data:{...q.data,isOrphaned:re.includes(q.id),isParent:ee.includes(q.id),isChild:K.includes(q.id),isSelected:c===q.id,isMultiSelected:d.includes(q.id),orphanedVariants:F.get(q.id)||[]}}})})},[n,r,y,c,d]),H.useEffect(()=>{const A=r.map(V=>{let re="#9ca3af",oe={stroke:re,strokeWidth:2};return f===V.id?(re="#dc2626",oe={stroke:re,strokeWidth:3,filter:"drop-shadow(0 0 16px #dc2626cc)",opacity:1}):c&&(V.source===c||V.target===c)&&(re="#2563eb",oe={stroke:re,strokeWidth:2,filter:"drop-shadow(0 0 16px #2563ebcc)",opacity:1}),{...V,style:{...V.style,...oe}}});E(A)},[r,E,c,f]);const M=P.useCallback(A=>{var ee;if(!A.source||!A.target)return;console.log("Creating edge:",A);const V=n.find(K=>K.id===A.source),re=n.find(K=>K.id===A.target);if(!V||!re){console.log("Source or target node not found");return}if(V.type==="answer"&&re.type!=="question"&&re.type!=="outcome"){console.log("Answer nodes can only connect to Question nodes or Outcome nodes");return}if(V.type==="question"&&re.type!=="answer"){console.log("Question nodes can only connect to Answer nodes");return}if(V.type==="question"&&((ee=V.data)!=null&&ee.isRoot)&&n.filter(te=>{var q;return((q=te.data)==null?void 0:q.isRoot)&&te.id!==V.id&&te.data.topic===V.data.topic}).length>0){console.log(`Cannot create connection: Topic "${V.data.topic}" already exists on another root question. Please choose a different topic.`);return}if(V.type==="answer"&&r.find(te=>te.source===A.source&&te.sourceHandle===A.sourceHandle)){console.log("Answer variant already has a connection. Only one connection per variant is allowed.");return}if(V.type==="question"&&r.find(te=>te.source===A.source)){console.log("Question node already has a connection. Only one outgoing connection is allowed.");return}if(((K,te)=>{if(K===te)return!0;const q=new Set,ie=[te];for(;ie.length>0;){const J=ie.pop();if(q.has(J))continue;if(q.add(J),J===K)return!0;r.filter(ne=>ne.source===J).forEach(ne=>{q.has(ne.target)||ie.push(ne.target)})}return!1})(A.source,A.target)){console.log("Connection would create a loop, preventing connection");return}const F=lt.getInstance(),Z={...A,source:A.source,target:A.target,id:F.generateEdgeId(A.source,A.target,A.sourceHandle||void 0),animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};console.log("Generated edge:",Z),o(Z),l(A.source,A.target),a(A.source,A.target,A.sourceHandle||void 0)},[o,r,l,a,n]),j=P.useCallback((A,V)=>{Te.getState().setSelectedNodeId(V.id)},[]),O=P.useCallback((A,V)=>{h(V.id)},[h]),$=P.useCallback(()=>{Te.getState().setSelectedNodeId(null),h(null),x()},[h,x]),k=P.useCallback(A=>{if(A.target===A.currentTarget&&R){console.log("Starting selection box - Shift is pressed"),A.preventDefault(),A.stopPropagation();const V=A.currentTarget.getBoundingClientRect();T({startX:A.clientX-V.left,startY:A.clientY-V.top,endX:A.clientX-V.left,endY:A.clientY-V.top,isSelecting:!0})}},[R]),z=P.useCallback(A=>{if(b!=null&&b.isSelecting){A.preventDefault();const V=A.currentTarget.getBoundingClientRect();T(re=>re?{...re,endX:A.clientX-V.left,endY:A.clientY-V.top}:null)}},[b]),B=P.useCallback(()=>{if(b!=null&&b.isSelecting&&_){console.log("Finishing selection box");const A=Math.min(b.startX,b.endX),V=Math.max(b.startX,b.endX),re=Math.min(b.startY,b.endY),oe=Math.max(b.startY,b.endY),F=V-A,Z=oe-re;if(console.log(`Selection box size: ${F}x${Z}`),F>10&&Z>10){const ee=_.screenToFlowPosition({x:A,y:re}),K=_.screenToFlowPosition({x:V,y:oe}),te=g.filter(q=>{const ie=q.position.x,J=q.position.y;return ie<K.x&&ie+280>ee.x&&J<K.y&&J+150>ee.y});console.log(`Selected ${te.length} nodes:`,te.map(q=>q.id)),p(te.map(q=>q.id))}}T(null)},[b,_,g,p]),D=P.useCallback(A=>{if(v(A),U.current){console.log("Skipping position sync during bulk update");return}A.forEach(V=>{V.type==="position"&&V.position&&s&&s(V.id,V.position)})},[v,s]),Y=P.useCallback(A=>{I(A),A.forEach(V=>{V.type==="remove"&&V.id&&(console.log("Edge deleted:",V.id),i(V.id))})},[I,i]);H.useEffect(()=>(_&&(window.reactFlowInstance=_),()=>{window.reactFlowInstance===_&&delete window.reactFlowInstance}),[_]),H.useEffect(()=>(window.flowCanvasSetBulkUpdate=()=>{console.log("Setting bulk update flag"),U.current=!0,N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{console.log("Resetting bulk update flag"),U.current=!1,N.current=null},500)},()=>{N.current&&clearTimeout(N.current),delete window.flowCanvasSetBulkUpdate}),[]),P.useEffect(()=>{if(e&&_&&n.length>0){console.log("Auto-organizing nodes...");const A=setTimeout(()=>{W(),setTimeout(()=>{_.fitView({padding:.2,maxZoom:.8,minZoom:.1,duration:1e3}),t==null||t()},500)},1e3);return()=>clearTimeout(A)}},[e,_,n.length,t]);const W=()=>{if(console.log("Organizing nodes..."),n.length<2){console.log("Not enough nodes to organize");return}const A=400,V=420,re=150,oe=150,F=4,Z=new Map,ee=new Map,K=new Map;n.forEach(ae=>{Z.set(ae.id,[]),K.set(ae.id,0)}),r.forEach(ae=>{const ge=Z.get(ae.source)||[];ge.push(ae.target),Z.set(ae.source,ge),ee.set(ae.target,ae.source);const je=K.get(ae.target)||0;K.set(ae.target,je+1)});const te=n.filter(ae=>(K.get(ae.id)||0)===0);te.length===0&&n.length>0&&te.push(n[0]);const q=new Map,ie=new Map,J=new Set;let G=0;const ne=[];for(te.forEach(ae=>{ne.push({node:ae,level:0}),q.set(ae.id,0)});ne.length>0;){const{node:ae,level:ge}=ne.shift();if(J.has(ae.id))continue;J.add(ae.id),G=Math.max(G,ge);const je=ie.get(ge)||[];je.push(ae),ie.set(ge,je),(Z.get(ae.id)||[]).forEach(Ge=>{const Ze=n.find(Ot=>Ot.id===Ge);Ze&&!J.has(Ge)&&(ne.push({node:Ze,level:ge+1}),q.set(Ge,ge+1))})}const ce=[];for(let ae=0;ae<=G;ae++){const ge=ie.get(ae)||[];ce.push(...ge)}const me=n.filter(ae=>!J.has(ae.id));ce.push(...me);const pe=ce.map((ae,ge)=>{const je=Math.floor(ge/F),gt=ge%F,Ge=Math.min(ce.length,F),Ot=(Math.min(ce.length-je*F,F)-1)*A,Fn=(Ge-1)*A,st={x:re+(Fn-Ot)/2+gt*A,y:oe+je*V};return{...ae,position:st}});window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),setTimeout(()=>{w(pe),console.log("Organization complete!")},50)},Q=P.useCallback((A,V)=>{_&&_.setCenter(V.x,V.y,{zoom:_.getZoom()})},[_]);return u.jsx("div",{className:`w-full h-full bg-gradient-to-br from-gray-50 to-gray-100 ${R?"cursor-crosshair":""}`,children:u.jsxs(Fg,{nodes:g,edges:C,onNodesChange:D,onEdgesChange:Y,onConnect:M,onNodeClick:j,onPaneClick:$,onEdgeClick:O,onMouseDown:k,onMouseMove:z,onMouseUp:B,nodeTypes:Mb,connectionMode:Rn.Loose,defaultEdgeOptions:Ab,className:`bg-transparent ${R?"cursor-crosshair":""}`,nodesDraggable:!R,nodesConnectable:!0,elementsSelectable:!0,selectNodesOnDrag:!1,panOnDrag:!R,panOnScroll:!0,panOnScrollSpeed:.5,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!1,preventScrolling:!1,panActivationKeyCode:null,multiSelectionKeyCode:null,selectionKeyCode:null,deleteKeyCode:null,children:[u.jsx(TE,{variant:Et.Dots,gap:16,size:1,color:"#e5e7eb"}),u.jsx(kE,{className:"bg-white shadow-lg rounded-lg border border-gray-200"}),u.jsx(xE,{className:"bg-white shadow-lg rounded-lg border border-gray-200",nodeColor:A=>{var V;if((V=A.data)!=null&&V.isOrphaned)return"#fb923c";switch(A.type){case"question":return"#2563eb";case"answer":return"#8b5cf6";case"outcome":return"#22c55e";default:return"#9ca3af"}},maskColor:"rgba(255, 255, 255, 0.8)",pannable:!0,zoomable:!0,onClick:Q}),u.jsxs(fl,{position:"top-right",className:"bg-white p-3 rounded-lg shadow-lg",children:[u.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Flow Stats"}),u.jsxs("div",{className:"space-y-1 text-xs",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),u.jsxs("span",{children:["Questions: ",g.filter(A=>A.type==="question").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),u.jsxs("span",{children:["Answers: ",g.filter(A=>A.type==="answer").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),u.jsxs("span",{children:["Outcomes: ",g.filter(A=>A.type==="outcome").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),u.jsxs("span",{children:["Connections: ",C.length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),u.jsxs("span",{children:["Orphaned: ",g.filter(A=>!C.some(V=>V.source===A.id||V.target===A.id)).length]})]})]})]}),(b==null?void 0:b.isSelecting)&&u.jsx("div",{className:"absolute pointer-events-none border-2 border-blue-500 bg-blue-200 bg-opacity-20 z-10",style:{left:Math.min(b.startX,b.endX),top:Math.min(b.startY,b.endY),width:Math.abs(b.endX-b.startX),height:Math.abs(b.endY-b.startY)}})]})})}class _c{generateCombinationsForNode(t){const n=[],r=t.length;for(let o=1;o<Math.pow(2,r);o++){const s=[],i=[];for(let a=0;a<r;a++)o&1<<a&&(s.push(a+1),i.push(t[a].text||`Variant ${a+1}`));const l={id:`combo-${o}`,variantIndices:s,pathId:`PATH-V${s.join("+V")}`,label:i.join(" + ")};n.push(l)}return n}exportToJson(t,n){const r=t.filter(p=>p.type==="question"),o=t.filter(p=>p.type==="answer"),s=t.filter(p=>p.type==="outcome"),l=r.filter(p=>p.data.isRoot).map(p=>p.data.topic).filter(Boolean),c={topic:l.length>1?`Multi-Topic (${l.join(", ")})`:l[0]||"UNTITLED",version:"1.0.0",createdAt:new Date().toISOString(),totalQuestions:r.length},f={};r.forEach(p=>{f[p.id]={id:p.id,type:"question",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:p.data.questionText,level:p.data.questionLevel,position:p.position,topic:p.data.topic}}),o.forEach(p=>{var x,w;f[p.id]={id:p.id,type:"answer",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:`${((x=p.data.variants)==null?void 0:x.length)||0} variants`,level:0,position:p.position,topic:p.data.topic,answerType:p.data.answerType,variants:(w=p.data.variants)==null?void 0:w.map(S=>({id:S.id,text:S.text,score:S.score,allowsInput:S.allowsInput,inputValidation:S.inputValidation,additionalInfo:S.additionalInfo})),combinations:p.data.answerType==="combinations"?this.generateCombinationsForNode(p.data.variants||[]):void 0,combinationRules:p.data.combinationRules}}),s.forEach(p=>{f[p.id]={id:p.id,type:"outcome",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:p.data.recommendation||"No recommendation provided",level:0,position:p.position,topic:p.data.topic,recommendation:p.data.recommendation}});const d={},h={};return n.forEach(p=>{const x=t.find(S=>S.id===p.source),w=t.find(S=>S.id===p.target);!x||!w||(d[p.source]||(d[p.source]={}),p.sourceHandle&&p.sourceHandle.startsWith("variant-")?(d[p.source].variants||(d[p.source].variants={}),d[p.source].variants[p.sourceHandle]=w.data.pathId):p.sourceHandle&&p.sourceHandle.startsWith("combination-")?(d[p.source].combinations||(d[p.source].combinations={}),d[p.source].combinations[p.sourceHandle]=w.data.pathId):d[p.source].default=w.data.pathId)}),o.forEach(p=>{(p.data.answerType==="multiple"||p.data.answerType==="combinations")&&p.data.combinationRules&&(h[p.id]=p.data.combinationRules.map((x,w)=>({condition:x.selectedVariants,nextNode:x.nextNode,priority:w+1})))}),{metadata:c,nodes:f,navigation:d,multipleChoiceRules:h}}exportToExcel(t){const n=this.convertToCSV(t);return new Blob([n],{type:"text/csv"})}convertToCSV(t){const r=[["Path ID","All Path IDs","Clean Path ID","Type","Content","Level","Variants","Scores","Next Path"]];return Object.values(t.nodes).forEach(o=>{var s,i;o.type==="question"?r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Question",o.content,o.level.toString(),"","",((s=t.navigation[o.id])==null?void 0:s.default)||""]):o.type==="answer"?((i=o.variants)==null||i.forEach((l,a)=>{var f,d;const c=((d=(f=t.navigation[o.id])==null?void 0:f.variants)==null?void 0:d[`variant-${a}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Answer",l.text,"0",l.text,l.score.toString(),c])}),o.answerType==="combinations"&&o.combinations&&o.combinations.forEach(l=>{var c,f;const a=((f=(c=t.navigation[o.id])==null?void 0:c.combinations)==null?void 0:f[`combination-${l.id}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Combination",l.label,"0",l.label,l.variantIndices.map(d=>{var h,p;return((p=(h=o.variants)==null?void 0:h[d])==null?void 0:p.score)||0}).reduce((d,h)=>d+h,0).toString(),a])})):o.type==="outcome"&&r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Outcome",o.recommendation||"No recommendation","0","","",""])}),r.map(o=>o.map(s=>`"${s.replace(/"/g,'""')}"`).join(",")).join(`
`)}cleanPathId(t){const n=t.split("-");return n.length<=2?t:n.slice(1).join("-")}importFromJson(t){const n=[],r=[];return Object.values(t.nodes).forEach((o,s)=>{const i=o.position||{x:200+s%3*400,y:200+Math.floor(s/3)*300};o.type==="question"?n.push({id:o.id,type:"question",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],topic:o.topic||"IMPORTED",isRoot:o.level===1,questionText:o.content,questionLevel:o.level,elementId:"IMPORTED",subElementId:"IMPORTED"}}):o.type==="answer"?n.push({id:o.id,type:"answer",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],answerType:o.answerType||"single",variants:o.variants||[],combinations:o.combinations,combinationRules:o.combinationRules,topic:o.topic||"IMPORTED"}}):o.type==="outcome"&&n.push({id:o.id,type:"outcome",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],recommendation:o.recommendation||"No recommendation provided",topic:o.topic||"IMPORTED"}})}),Object.entries(t.navigation).forEach(([o,s])=>{if(s.default){const i=n.find(l=>l.data.pathId===s.default);i&&r.push({id:`edge-${o}-${i.id}`,source:o,target:i.id,sourceHandle:"default",animated:!0})}s.variants&&Object.entries(s.variants).forEach(([i,l])=>{const a=n.find(c=>c.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})}),s.combinations&&Object.entries(s.combinations).forEach(([i,l])=>{const a=n.find(c=>c.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})})}),{nodes:n,edges:r}}testCombinationExportImport(){var r,o;console.log("Testing combination export/import functionality...");const t=[{id:"test-answer-1",type:"answer",position:{x:100,y:100},data:{pathId:"Test-A1",pathIds:["Test-A1"],answerType:"combinations",variants:[{id:"var1",text:"Option A",score:1},{id:"var2",text:"Option B",score:2}],topic:"Test"}},{id:"test-question-1",type:"question",position:{x:300,y:100},data:{pathId:"Test-A1-V0+V1-Q1",pathIds:["Test-A1-V0+V1-Q1"],questionText:"Test Question",questionLevel:2,topic:"Test",isRoot:!1,elementId:"E1",subElementId:"SE1"}}],n=[{id:"test-edge-1",source:"test-answer-1",target:"test-question-1",sourceHandle:"combination-combo-3",animated:!0}];try{const s=this.exportToJson(t,n);console.log("Export successful:",{hasNavigationCombinations:!!((r=s.navigation["test-answer-1"])!=null&&r.combinations),hasCombinationData:!!((o=s.nodes["test-answer-1"])!=null&&o.combinations)});const{nodes:i,edges:l}=this.importFromJson(s);return console.log("Import successful:",{nodeCount:i.length,edgeCount:l.length,hasCombinationHandle:l.some(a=>{var c;return(c=a.sourceHandle)==null?void 0:c.startsWith("combination-")})}),!0}catch(s){return console.error("Test failed:",s),!1}}}class Rb{static findAvailableSpace(t,n=400){if(t.length===0)return{x:200,y:200};const r=Math.max(...t.map(s=>s.position.x+300)),o=Math.min(...t.map(s=>s.position.y));return{x:r+n,y:o}}static generateUniqueId(t,n){let r=1,o=`${t}-imported`;for(;n.has(o);)o=`${t}-imported-${r}`,r++;return o}static adjustImportedPositions(t,n){if(t.length===0)return[];const r=Math.min(...t.map(l=>l.position.x)),o=Math.min(...t.map(l=>l.position.y)),s=n.x-r,i=n.y-o;return t.map(l=>({...l,position:{x:l.position.x+s,y:l.position.y+i}}))}static resolveConflicts(t,n,r,o){const s=[],i=new Set(t.map(d=>d.id)),l=new Set(n.map(d=>d.id)),a=new Map,c=r.map(d=>{if(i.has(d.id)){const h=this.generateUniqueId(d.id,i);return a.set(d.id,h),i.add(h),s.push({originalId:d.id,newId:h,type:"node",reason:`Node ID "${d.id}" already exists`}),{...d,id:h}}return i.add(d.id),d}),f=o.map(d=>{let h={...d};if(a.has(d.source)&&(h.source=a.get(d.source)),a.has(d.target)&&(h.target=a.get(d.target)),l.has(d.id)){const p=this.generateUniqueId(d.id,l);l.add(p),s.push({originalId:d.id,newId:p,type:"edge",reason:`Edge ID "${d.id}" already exists`}),h.id=p}else l.add(d.id);return h});return{resolvedNodes:c,resolvedEdges:f,conflicts:s}}static getTopicsFromNodes(t){const n=new Set;return t.forEach(r=>{var o;(o=r.data)!=null&&o.topic&&n.add(r.data.topic)}),Array.from(n).sort()}static performAdditiveImport(t,n,r,o){const s=this.findAvailableSpace(t),i=this.adjustImportedPositions(r,s),{resolvedNodes:l,resolvedEdges:a,conflicts:c}=this.resolveConflicts(t,n,i,o),f=[...t,...l],d=[...n,...a],h=this.getTopicsFromNodes(l),p=this.getTopicsFromNodes(f);return{nodes:f,edges:d,conflicts:c,statistics:{imported:{nodes:l.length,edges:a.length,topics:h},total:{nodes:f.length,edges:d.length,topics:p}}}}}function Db({isOpen:e,importResult:t,onAccept:n,onRevert:r,onClose:o}){if(!e||!t)return null;const{statistics:s,conflicts:i}=t;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Gf,{className:"w-6 h-6 text-green-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Successful"})]}),u.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(Fu,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-blue-900 mb-3 flex items-center",children:[u.jsx(xb,{className:"w-5 h-5 mr-2"}),"Imported Content"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Nodes:"}),u.jsx("span",{className:"font-medium text-blue-900",children:s.imported.nodes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Connections:"}),u.jsx("span",{className:"font-medium text-blue-900",children:s.imported.edges})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-blue-700",children:"Topics:"}),u.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.imported.topics.map(l=>u.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded",children:l},l))})]})]})]}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-green-900 mb-3 flex items-center",children:[u.jsx(Gf,{className:"w-5 h-5 mr-2"}),"Total Canvas"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Nodes:"}),u.jsx("span",{className:"font-medium text-green-900",children:s.total.nodes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Connections:"}),u.jsx("span",{className:"font-medium text-green-900",children:s.total.edges})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-green-700",children:"Topics:"}),u.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.total.topics.map(l=>u.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs rounded",children:l},l))})]})]})]})]}),i.length>0&&u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-yellow-900 mb-3 flex items-center",children:[u.jsx(_b,{className:"w-5 h-5 mr-2"}),"Conflicts Resolved (",i.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map((l,a)=>u.jsx("div",{className:"bg-yellow-100 rounded p-3 text-sm",children:u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"font-medium text-yellow-900",children:[l.type==="node"?"Node":"Edge"," ID Conflict"]}),u.jsx("div",{className:"text-yellow-700 mt-1",children:l.reason}),u.jsxs("div",{className:"text-yellow-600 mt-1",children:[u.jsx("span",{className:"font-mono",children:l.originalId}),u.jsx("span",{className:"mx-2",children:"→"}),u.jsx("span",{className:"font-mono",children:l.newId})]})]})})},a))})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Summary"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully imported ",s.imported.nodes," nodes and ",s.imported.edges," connections",i.length>0&&` with ${i.length} conflicts resolved`,". The imported content has been positioned to avoid overlap with existing nodes and is ready for use."]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[u.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Revert Import"}),u.jsx("button",{onClick:n,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept Import"})]})]})})}function Ob({onAddNode:e,onLoadDemo:t,onClearAll:n,onSetNodes:r,nodes:o=[]}){const{setEdges:s,edges:i,nodes:l,setNodes:a,propagatePathToAll:c,toggleAllMeta:f,pathDisplaysFolded:d,combinationSectionsFolded:h}=Te(),[p,x]=P.useState(!1),w=P.useRef(null);P.useEffect(()=>{const D=Y=>{w.current&&!w.current.contains(Y.target)&&x(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const S=o.length>0?o:l,[m,g]=P.useState(!1),[y,v]=P.useState(null),[C,E]=P.useState(null),I=()=>{const D=window.reactFlowInstance;let Y=400,W=300;if(D)try{const V=window.innerWidth,re=window.innerHeight,oe={x:V/2,y:re/2},F=D.screenToFlowPosition(oe);Y=F.x,W=F.y}catch(V){console.warn("Failed to get viewport center, using fallback position:",V)}if(S.length===0)return{x:Y,y:W};const Q=S.map(V=>V.position),A=100;for(let V=0;V<500;V+=A)for(let re=0;re<360;re+=45){const oe=re*Math.PI/180,F=Y+V*Math.cos(oe),Z=W+V*Math.sin(oe);if(!Q.some(K=>Math.sqrt(Math.pow(K.x-F,2)+Math.pow(K.y-Z,2))<A))return{x:F,y:Z}}return{x:Y+Math.random()*100-50,y:W+Math.random()*100-50}},_=D=>{const{nodes:Y}=Te.getState(),W=Y.filter(Q=>{var A;return(A=Q.data)==null?void 0:A.isRoot}).map(Q=>Q.data.topic).filter(Q=>Q);{let Q=1,A=`TOPIC-${Q}`;for(;W.includes(A);)Q++,A=`TOPIC-${Q}`;return A}},b=()=>{const D=lt.getInstance(),Y=I(),W=_(),Q=D.getNextQuestionNumber(null,W),A=D.generateQuestionPathId(null,Q,W),V={id:`q-${Date.now()}`,type:"question",position:Y,data:{pathId:A,topic:W,isRoot:!0,questionText:"New Root Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};D.registerNode(V.id,A),e==null||e(V),x(!1)},T=()=>{const D=lt.getInstance(),Y=I(),W=`STANDALONE-Q${Date.now()}`,Q={id:`q-${Date.now()}`,type:"question",position:Y,data:{pathId:W,topic:"STANDALONE",isRoot:!1,questionText:"New Regular Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};D.registerNode(Q.id,W),e==null||e(Q),x(!1)},R=()=>{const D=lt.getInstance(),Y=I(),Q=`STANDALONE-A${D.getNextAnswerNumber("STANDALONE")}`,A={id:`a-${Date.now()}`,type:"answer",position:Y,data:{pathId:Q,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}};e==null||e(A)},L=()=>{const D=lt.getInstance(),Y=I(),Q=`STANDALONE-E${D.getNextOutcomeNumber("STANDALONE")}`,A={id:`o-${Date.now()}`,type:"outcome",position:Y,data:{pathId:Q,recommendation:"Enter your recommendation here...",topic:"General"}};e==null||e(A)},U=()=>{const D=Te.getState(),W=new _c().exportToJson(S,D.edges),Q=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),A=URL.createObjectURL(Q),V=document.createElement("a");V.href=A,V.download=`flow-${W.metadata.topic}-${Date.now()}.json`,V.click(),URL.revokeObjectURL(A)},N=()=>{const D=document.createElement("input");D.type="file",D.accept=".json",D.onchange=Y=>{var Q;const W=(Q=Y.target.files)==null?void 0:Q[0];if(W){const A=new FileReader;A.onload=V=>{var re;try{const oe=JSON.parse((re=V.target)==null?void 0:re.result);let F=[],Z=[];if(oe.metadata&&oe.nodes&&oe.navigation){const te=new _c().importFromJson(oe);F=te.nodes,Z=te.edges}else if(oe.nodes&&oe.edges)F=oe.nodes,Z=oe.edges;else{console.error("Invalid file format");return}E({nodes:[...S],edges:[...i]});const ee=Rb.performAdditiveImport(S,i,F,Z);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),r==null||r(ee.nodes),s(ee.edges),v(ee),g(!0)}catch(oe){console.error("Error importing flow:",oe)}},A.readAsText(W)}},D.click()},M=()=>{t==null||t()},j=()=>{n==null||n()},O=()=>{c()},$=()=>{if(console.log("Organize button clicked!"),console.log("actualNodes:",S),console.log("actualNodes.length:",S.length),S.length<2){console.log("Not enough nodes to organize");return}console.log("Organizing",S.length,"nodes");const D=400,Y=420,W=150,Q=150,A=4,V=new Map,re=new Map,oe=new Map;S.forEach(ne=>{V.set(ne.id,[]),oe.set(ne.id,0)}),i.forEach(ne=>{const ce=V.get(ne.source)||[];ce.push(ne.target),V.set(ne.source,ce),re.set(ne.target,ne.source);const me=oe.get(ne.target)||0;oe.set(ne.target,me+1)}),console.log("Parent-child relationships:",{children:V,parents:re});const F=S.filter(ne=>(oe.get(ne.id)||0)===0);F.length===0&&S.length>0&&F.push(S[0]),console.log("Root nodes:",F.map(ne=>ne.id));const Z=new Map,ee=new Map,K=new Set;let te=0;const q=[];for(F.forEach(ne=>{q.push({node:ne,level:0}),Z.set(ne.id,0)});q.length>0;){const{node:ne,level:ce}=q.shift();if(K.has(ne.id))continue;K.add(ne.id),te=Math.max(te,ce);const me=ee.get(ce)||[];me.push(ne),ee.set(ce,me),(V.get(ne.id)||[]).forEach(ae=>{const ge=S.find(je=>je.id===ae);ge&&!K.has(ae)&&(q.push({node:ge,level:ce+1}),Z.set(ae,ce+1))})}console.log("Nodes by level:",ee);const ie=[];for(let ne=0;ne<=te;ne++){const ce=ee.get(ne)||[];ie.push(...ce)}const J=S.filter(ne=>!K.has(ne.id));ie.push(...J),console.log("Ordered nodes:",ie.map(ne=>ne.id));const G=ie.map((ne,ce)=>{const me=Math.floor(ce/A),pe=ce%A,ae=Math.min(ie.length,A),je=(Math.min(ie.length-me*A,A)-1)*D,gt=(ae-1)*D,Ze={x:W+(gt-je)/2+pe*D,y:Q+me*Y};return console.log(`Node ${ne.id} (index ${ce}): row ${me}, col ${pe} -> position ${Ze.x},${Ze.y}`),{...ne,position:Ze}});console.log("Updated nodes:",G),window.flowCanvasSetBulkUpdate?(window.flowCanvasSetBulkUpdate(),console.log("Bulk update flag set")):console.log("flowCanvasSetBulkUpdate not found on window"),setTimeout(()=>{console.log("About to call setNodes..."),a(G),console.log("setNodes called"),r&&(console.log("Also calling onSetNodes callback..."),r(G)),console.log("Organization complete!")},50)},k=()=>{g(!1),v(null),E(null)},z=()=>{C&&(r==null||r(C.nodes),s(C.edges),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate()),g(!1),v(null),E(null)},B=()=>{k()};return u.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:$,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Organize nodes in a hierarchical layout",children:[u.jsx(Nb,{size:16}),u.jsx("span",{children:"Organize"})]}),u.jsxs("button",{onClick:f,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Toggle visibility of path displays and combination sections",children:[d||h?u.jsx(a0,{size:16}):u.jsx(gb,{size:16}),u.jsx("span",{children:d||h?"Unfold Meta":"Fold Meta"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("div",{className:"relative",ref:w,children:[u.jsxs("button",{onClick:()=>x(!p),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(i0,{size:16}),u.jsx("span",{children:"Add Question"}),u.jsx(tn,{size:14})]}),p&&u.jsxs("div",{className:"absolute top-full left-0 mt-1 w-[140px] bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[u.jsx("button",{onClick:b,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"ROOT"}),u.jsx("button",{onClick:T,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-b-lg",children:"REGULAR"})]})]}),u.jsxs("button",{onClick:R,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(c0,{size:16}),u.jsx("span",{children:"Add Answer"})]}),u.jsxs("button",{onClick:L,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(u0,{size:16}),u.jsx("span",{children:"Add Outcome"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:U,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(l0,{size:16}),u.jsx("span",{children:"Export JSON"})]}),u.jsxs("button",{onClick:N,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(d0,{size:16}),u.jsx("span",{children:"Import JSON"})]}),u.jsxs("button",{onClick:O,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",title:"Propagate path IDs from root nodes to all connected nodes",children:[u.jsx(Eb,{size:16}),u.jsx("span",{children:"Propagate Path"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:M,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-slate-500 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(mb,{size:16}),u.jsx("span",{children:"Load Demo"})]}),u.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(kb,{size:16}),u.jsx("span",{children:"Clear All"})]})]}),u.jsx(Db,{isOpen:m,importResult:y,onAccept:k,onRevert:z,onClose:B})]})}function Lb({onEnterApp:e}){return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[u.jsxs("div",{className:"relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10"}),u.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"flex items-center justify-center mb-6",children:u.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:u.jsx(yb,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"Question Flow Builder"}),u.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Create interactive questionnaire flows with a powerful visual interface. Design complex decision trees, manage answer variants, and export your work seamlessly."}),u.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[u.jsx(tp,{className:"w-5 h-5 mr-2"}),"Start Building",u.jsx(ua,{className:"w-5 h-5 ml-2"})]})]})})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Everything you need to create professional questionnaire flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(wb,{className:"w-6 h-6 text-blue-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Visual Flow Builder"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop nodes to create complex questionnaire flows. Connect questions, answers, and outcomes with intuitive visual connections."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(ep,{className:"w-6 h-6 text-cyan-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),u.jsx("p",{className:"text-gray-600",children:"Double-click any node, answer variant, or combination to instantly focus on the next connected element. Navigate your flow with ease."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(vb,{className:"w-6 h-6 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Keyboard Shortcuts"}),u.jsx("p",{className:"text-gray-600",children:"Work efficiently with keyboard shortcuts: Tab to create nodes, Delete to remove, Cmd/Ctrl+Z for undo, and more."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(d0,{className:"w-3 h-3 text-purple-600"}),u.jsx(l0,{className:"w-3 h-3 text-purple-600"})]})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Import & Export"}),u.jsx("p",{className:"text-gray-600",children:"Import Excel files or JSON flows. Export your work to share or backup. Seamless integration with existing workflows."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(a0,{className:"w-6 h-6 text-orange-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Real-time Validation"}),u.jsx("p",{className:"text-gray-600",children:"Instant visual feedback for orphaned nodes, missing connections, and flow integrity issues. Orange highlights show problems."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(Zf,{className:"w-6 h-6 text-indigo-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path IDs"}),u.jsx("p",{className:"text-gray-600",children:"Automatic generation of hierarchical path IDs (Q1, Q2, A1, A2, E1, E2) for questions, answers, and outcomes. All paths visible on nodes."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(Jf,{className:"w-6 h-6 text-rose-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Answer Combinations"}),u.jsx("p",{className:"text-gray-600",children:"Create complex multi-select scenarios with combination logic. Generate paths like V1+V2, V1+V3 for sophisticated questionnaire flows."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(Cb,{className:"w-6 h-6 text-teal-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path Propagation"}),u.jsx("p",{className:"text-gray-600",children:"Intelligent path propagation across all answer types. Single, Multiple, and Combinations modes all generate correct variant paths."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(bb,{className:"w-6 h-6 text-emerald-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Undo/Redo System"}),u.jsx("p",{className:"text-gray-600",children:"50-state history with standard keyboard shortcuts. Never lose your work with comprehensive undo/redo functionality."})]})]})]}),u.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Demonstrations of Interactions"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Here are a few things you can do"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"group-hover:animate-pulse bg-white border-2 border-blue-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"Question"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"What's your level?"})]}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"group-hover:animate-bounce",children:u.jsx(ua,{className:"w-4 h-4 text-blue-500 transform group-hover:translate-x-2 transition-transform duration-500"})})}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Beginner"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Double-click any node to smoothly focus on the next connected element with zoom animation."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Main"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-200",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 1"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-300",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 2"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-400",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 3"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sibling Node Highlighting"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Single-click highlights all neighboring nodes in green for 3-5 seconds to show relationships."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700 mb-2",children:"Advanced"}),u.jsxs("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full group-hover:bg-green-100 group-hover:text-green-800 transition-colors duration-500",children:[u.jsx("span",{className:"group-hover:hidden",children:"Topic-Q1-A1"}),u.jsx("span",{className:"hidden group-hover:inline",children:"Topic-Q1-A1-E1"})]})]}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"w-0.5 h-6 bg-gray-300 group-hover:bg-green-500 transition-colors duration-500"})}),u.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:bg-gradient-to-br group-hover:from-green-50 group-hover:to-emerald-50 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full group-hover:bg-green-500 transition-colors duration-500"}),u.jsxs("span",{className:"text-xs font-semibold text-orange-600 group-hover:text-green-600 transition-colors duration-500",children:[u.jsx("span",{className:"group-hover:hidden",children:"Orphan"}),u.jsx("span",{className:"hidden group-hover:inline",children:"Outcome"})]})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Expert Path"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Orphan Node Connection"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connecting orphan nodes turns them green and updates their path IDs automatically."})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Answer Types & Modes"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Three powerful modes for different questionnaire scenarios"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Single Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Traditional single-choice questions where users select one answer from multiple options."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A1-E1"}),u.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A2-E2"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Multiple Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Multi-choice questions where each answer variant creates its own independent path."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V1-E1"}),u.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V2-E2"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(Jf,{className:"w-6 h-6 text-rose-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Combinations Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Advanced multi-select with combination logic. Each possible combination of answers creates unique paths."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V2-E1"}),u.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V3-E2"})]})]})]})]})}),u.jsx("div",{className:"bg-white py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Node Types & Visual Guide"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Understanding the visual language of your flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"Question"})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"What is your experience level?"}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q1"}),u.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q2"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(i0,{className:"w-5 h-5 inline mr-2 text-blue-500"}),"Question Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Blue theme • Single outgoing connection • Contains question text and level information • Shows all propagated path IDs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-purple-600",children:"Answer"})]}),u.jsxs("div",{className:"space-y-2 mb-3",children:[u.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"Yes (Score: 1)"}),u.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"No (Score: 0)"})]}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1"}),u.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(c0,{className:"w-5 h-5 inline mr-2 text-purple-500"}),"Answer Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Purple theme • Three modes: Single, Multiple, Combinations • Scoring system • Shows all propagated path IDs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-green-600",children:"Outcome"})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"You should explore visual tools..."}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-E1"}),u.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1-E1"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(u0,{className:"w-5 h-5 inline mr-2 text-green-500"}),"Outcome Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Green theme • End points • Contains recommendations • No outgoing connections • Shows all propagated path IDs"})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Navigation & Interaction"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Intuitive ways to navigate and interact with your flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:u.jsx(ep,{className:"w-8 h-8 text-cyan-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"Double-Click Navigation"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Question Nodes"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the connected answer node"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Answer Nodes (Single)"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the next connected node"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Answer Variants (Multiple)"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click individual variants to follow their path"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Combinations"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click combination items to navigate their unique paths"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:u.jsx(Zf,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"PathID Display System"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"All Nodes Show Multiple Paths"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Every node displays all propagated path IDs as badges, making it easy to track complex flows"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Automatic Propagation"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Path IDs automatically propagate through the flow, updating connected nodes when changes occur"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Smart Variant Generation"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Multiple and Combinations modes generate appropriate variant paths (V1, V2, V1+V2, etc.)"})]})]})]})]})]})}),u.jsx("div",{className:"bg-gray-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Visual Indicators & Alerts"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Understand what the colors and effects mean"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-orange-100 rounded-lg border-2 border-orange-300 ring-2 ring-orange-400 flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Orange Glow"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Orphaned nodes or variants missing connections"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-green-100 rounded-lg border-2 border-green-300 ring-2 ring-green-400 flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Green Glow"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Selected node and its connected parent/child nodes"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-1 bg-blue-500 rounded shadow-lg",style:{boxShadow:"0 0 8px rgba(37, 99, 235, 0.6)"}})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Blue Edges"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connections from selected nodes with blue glow effect"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Gray Edges"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Default connection lines between nodes"})]})]})]})}),u.jsx("div",{className:"bg-white py-16",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Keyboard Shortcuts"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Work faster with these essential shortcuts"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Navigation & Selection"}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Create linked question"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Tab"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Multi-select nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Shift + Drag"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Copy selected nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/⌘ + C"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Paste nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/⌘ + V"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Delete selected node"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Delete"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Deselect all"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Escape"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Undo & Redo"}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Undo (Windows)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Z"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Undo (Mac)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"⌘ + Z"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Redo (Windows)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Y"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Redo (Mac)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"⌘ + ⇧ + Z"})]})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 py-16",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Build Your First Flow?"}),u.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Start with our pre-loaded example or create your own from scratch"}),u.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[u.jsx(tp,{className:"w-5 h-5 mr-2"}),"Launch Flow Builder",u.jsx(ua,{className:"w-5 h-5 ml-2"})]})]})})]})}const Fb=[{id:"q1",type:"question",position:{x:100,y:100},data:{pathId:"TOPIC-1-Q1",topic:"TOPIC-1",isRoot:!0,questionText:"What is your experience level with React?",questionLevel:1,elementId:"TOPIC-1",subElementId:"REACT"}},{id:"a1",type:"answer",position:{x:100,y:250},data:{pathId:"TOPIC-1-Q1-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Beginner",score:1},{id:"var2",text:"Intermediate",score:2},{id:"var3",text:"Advanced",score:3}]}},{id:"q2",type:"question",position:{x:450,y:100},data:{pathId:"TOPIC-1-Q1-A1-Q2",topic:"TOPIC-1",isRoot:!1,questionText:"Do you prefer TypeScript over JavaScript?",questionLevel:2,elementId:"TOPIC-1",subElementId:"TYPESCRIPT"}},{id:"a2",type:"answer",position:{x:450,y:250},data:{pathId:"TOPIC-1-Q1-A1-Q2-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},{id:"q3",type:"question",position:{x:100,y:400},data:{pathId:"TOPIC-2-Q1",topic:"TOPIC-2",isRoot:!0,questionText:"What is your preferred development environment?",questionLevel:1,elementId:"TOPIC-2",subElementId:"DEVENV"}},{id:"a3",type:"answer",position:{x:100,y:550},data:{pathId:"TOPIC-2-Q1-A1",topic:"TOPIC-2",answerType:"multiple",variants:[{id:"var1",text:"VS Code",score:1},{id:"var2",text:"WebStorm",score:2},{id:"var3",text:"Vim/Neovim",score:3}]}},{id:"outcome1",type:"outcome",position:{x:800,y:300},data:{pathId:"CROSS-CONNECTED-E1",topic:"CROSS-CONNECTED",outcomeText:"Recommended Learning Path",outcomeType:"recommendation",score:0}}],Hb=[{id:"e1",source:"q1",target:"a1",animated:!0,type:"smoothstep"},{id:"e2",source:"a1",target:"q2",animated:!0,type:"smoothstep"},{id:"e3",source:"q2",target:"a2",animated:!0,type:"smoothstep"},{id:"e4",source:"q3",target:"a3",animated:!0,type:"smoothstep"},{id:"e5",source:"a2",target:"outcome1",animated:!0,type:"smoothstep"},{id:"e6",source:"a3",target:"outcome1",sourceHandle:"variant-0",animated:!0,type:"smoothstep"}],Nr={nodes:Fb,edges:Hb};function Vb(){const[e,t]=P.useState(!0),[n,r]=P.useState(!1),o=P.useRef(!1),{nodes:s,addNode:i,setNodes:l,setEdges:a,clearFlow:c}=Te(),f=P.useCallback(async()=>{try{const m=await fetch("/qnatool/flow-Topic-1752233651561.json");if(m.ok){const g=await m.json(),y=new _c,{nodes:v,edges:C}=y.importFromJson(g);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),l(v),a(C),console.log("Default flow loaded successfully")}else console.warn("Default flow not found, loading demo data instead"),l(Nr.nodes),a(Nr.edges)}catch(m){console.error("Error loading default flow:",m),l(Nr.nodes),a(Nr.edges)}t(!1),r(!0)},[l,a]),d=P.useCallback(m=>{i(m)},[i]),h=P.useCallback(()=>{r(!1),o.current=!0,console.log("Auto-organize completed")},[]),p=P.useCallback(()=>{l(Nr.nodes),a(Nr.edges),setTimeout(()=>{const{cleanupDuplicateEdges:m}=Te.getState();m()},100)},[l,a]),x=P.useCallback(()=>{c()},[c]),w=P.useCallback(m=>{l(m)},[l]),S=P.useCallback(()=>{t(!0)},[]);return e?u.jsx(Lb,{onEnterApp:f}):u.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:S,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"← Back to Home"}),u.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Question Flow Builder"})]}),u.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," nodes • Auto-loaded flow"]})]}),u.jsx(Ob,{onAddNode:d,onLoadDemo:p,onClearAll:x,onSetNodes:w,nodes:s}),u.jsx("div",{className:"flex-1",children:u.jsx(Ru,{children:u.jsx(zb,{shouldAutoOrganize:n&&!o.current,onAutoOrganizeComplete:h})})})]})}da.createRoot(document.getElementById("root")).render(u.jsx(H.StrictMode,{children:u.jsx(Vb,{})}));
