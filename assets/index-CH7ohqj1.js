var q0=Object.defineProperty;var Q0=(e,t,n)=>t in e?q0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fn=(e,t,n)=>Q0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Nh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sh={exports:{}},dl={},bh={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=Symbol.for("react.element"),Y0=Symbol.for("react.portal"),X0=Symbol.for("react.fragment"),K0=Symbol.for("react.strict_mode"),G0=Symbol.for("react.profiler"),Z0=Symbol.for("react.provider"),J0=Symbol.for("react.context"),ey=Symbol.for("react.forward_ref"),ty=Symbol.for("react.suspense"),ny=Symbol.for("react.memo"),ry=Symbol.for("react.lazy"),cd=Symbol.iterator;function oy(e){return e===null||typeof e!="object"?null:(e=cd&&e[cd]||e["@@iterator"],typeof e=="function"?e:null)}var Eh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kh=Object.assign,_h={};function Co(e,t,n){this.props=e,this.context=t,this.refs=_h,this.updater=n||Eh}Co.prototype.isReactComponent={};Co.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Co.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ch(){}Ch.prototype=Co.prototype;function Qc(e,t,n){this.props=e,this.context=t,this.refs=_h,this.updater=n||Eh}var Yc=Qc.prototype=new Ch;Yc.constructor=Qc;kh(Yc,Co.prototype);Yc.isPureReactComponent=!0;var ud=Array.isArray,Ih=Object.prototype.hasOwnProperty,Xc={current:null},jh={key:!0,ref:!0,__self:!0,__source:!0};function Th(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)Ih.call(t,r)&&!jh.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];o.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Ps,type:e,key:s,ref:i,props:o,_owner:Xc.current}}function sy(e,t){return{$$typeof:Ps,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ps}function iy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dd=/\/+/g;function Vl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iy(""+e.key):t.toString(36)}function hi(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ps:case Y0:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Vl(i,0):r,ud(o)?(n="",e!=null&&(n=e.replace(dd,"$&/")+"/"),hi(o,t,n,"",function(u){return u})):o!=null&&(Kc(o)&&(o=sy(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(dd,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",ud(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+Vl(s,l);i+=hi(s,t,n,a,o)}else if(a=oy(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+Vl(s,l++),i+=hi(s,t,n,a,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Hs(e,t,n){if(e==null)return e;var r=[],o=0;return hi(e,r,"","",function(s){return t.call(n,s,o++)}),r}function ly(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},pi={transition:null},ay={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:pi,ReactCurrentOwner:Xc};function $h(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Hs,forEach:function(e,t,n){Hs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hs(e,function(){t++}),t},toArray:function(e){return Hs(e,function(t){return t})||[]},only:function(e){if(!Kc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Le.Component=Co;Le.Fragment=X0;Le.Profiler=G0;Le.PureComponent=Qc;Le.StrictMode=K0;Le.Suspense=ty;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ay;Le.act=$h;Le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kh({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Xc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Ih.call(t,a)&&!jh.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ps,type:e.type,key:o,ref:s,props:r,_owner:i}};Le.createContext=function(e){return e={$$typeof:J0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Z0,_context:e},e.Consumer=e};Le.createElement=Th;Le.createFactory=function(e){var t=Th.bind(null,e);return t.type=e,t};Le.createRef=function(){return{current:null}};Le.forwardRef=function(e){return{$$typeof:ey,render:e}};Le.isValidElement=Kc;Le.lazy=function(e){return{$$typeof:ry,_payload:{_status:-1,_result:e},_init:ly}};Le.memo=function(e,t){return{$$typeof:ny,type:e,compare:t===void 0?null:t}};Le.startTransition=function(e){var t=pi.transition;pi.transition={};try{e()}finally{pi.transition=t}};Le.unstable_act=$h;Le.useCallback=function(e,t){return It.current.useCallback(e,t)};Le.useContext=function(e){return It.current.useContext(e)};Le.useDebugValue=function(){};Le.useDeferredValue=function(e){return It.current.useDeferredValue(e)};Le.useEffect=function(e,t){return It.current.useEffect(e,t)};Le.useId=function(){return It.current.useId()};Le.useImperativeHandle=function(e,t,n){return It.current.useImperativeHandle(e,t,n)};Le.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};Le.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};Le.useMemo=function(e,t){return It.current.useMemo(e,t)};Le.useReducer=function(e,t,n){return It.current.useReducer(e,t,n)};Le.useRef=function(e){return It.current.useRef(e)};Le.useState=function(e){return It.current.useState(e)};Le.useSyncExternalStore=function(e,t,n){return It.current.useSyncExternalStore(e,t,n)};Le.useTransition=function(){return It.current.useTransition()};Le.version="18.3.1";bh.exports=Le;var j=bh.exports;const V=Nh(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=j,uy=Symbol.for("react.element"),dy=Symbol.for("react.fragment"),fy=Object.prototype.hasOwnProperty,hy=cy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,py={key:!0,ref:!0,__self:!0,__source:!0};function Ph(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)fy.call(t,r)&&!py.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:uy,type:e,key:s,ref:i,props:o,_owner:hy.current}}dl.Fragment=dy;dl.jsx=Ph;dl.jsxs=Ph;Sh.exports=dl;var c=Sh.exports,Ta={},Mh={exports:{}},Bt={},Ah={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,k){var A=T.length;T.push(k);e:for(;0<A;){var B=A-1>>>1,z=T[B];if(0<o(z,k))T[B]=k,T[A]=z,A=B;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var k=T[0],A=T.pop();if(A!==k){T[0]=A;e:for(var B=0,z=T.length,W=z>>>1;B<W;){var U=2*(B+1)-1,q=T[U],X=U+1,re=T[X];if(0>o(q,A))X<z&&0>o(re,q)?(T[B]=re,T[X]=A,B=X):(T[B]=q,T[U]=A,B=U);else if(X<z&&0>o(re,A))T[B]=re,T[X]=A,B=X;else break e}}return k}function o(T,k){var A=T.sortIndex-k.sortIndex;return A!==0?A:T.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var a=[],u=[],f=1,d=null,p=3,h=!1,w=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=T)r(u),k.sortIndex=k.expirationTime,t(a,k);else break;k=n(u)}}function y(T){if(v=!1,x(T),!w)if(n(a)!==null)w=!0,I(_);else{var k=n(u);k!==null&&O(y,k.startTime-T)}}function _(T,k){w=!1,v&&(v=!1,m(M),M=-1),h=!0;var A=p;try{for(x(k),d=n(a);d!==null&&(!(d.expirationTime>k)||T&&!R());){var B=d.callback;if(typeof B=="function"){d.callback=null,p=d.priorityLevel;var z=B(d.expirationTime<=k);k=e.unstable_now(),typeof z=="function"?d.callback=z:d===n(a)&&r(a),x(k)}else r(a);d=n(a)}if(d!==null)var W=!0;else{var U=n(u);U!==null&&O(y,U.startTime-k),W=!1}return W}finally{d=null,p=A,h=!1}}var b=!1,C=null,M=-1,P=5,E=-1;function R(){return!(e.unstable_now()-E<P)}function D(){if(C!==null){var T=e.unstable_now();E=T;var k=!0;try{k=C(!0,T)}finally{k?L():(b=!1,C=null)}}else b=!1}var L;if(typeof g=="function")L=function(){g(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=D,L=function(){$.postMessage(null)}}else L=function(){S(D,0)};function I(T){C=T,b||(b=!0,L())}function O(T,k){M=S(function(){T(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||h||(w=!0,I(_))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var A=p;p=k;try{return T()}finally{p=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,k){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var A=p;p=T;try{return k()}finally{p=A}},e.unstable_scheduleCallback=function(T,k,A){var B=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?B+A:B):A=B,T){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=A+z,T={id:f++,callback:k,priorityLevel:T,startTime:A,expirationTime:z,sortIndex:-1},A>B?(T.sortIndex=A,t(u,T),n(a)===null&&T===n(u)&&(v?(m(M),M=-1):v=!0,O(y,A-B))):(T.sortIndex=z,t(a,T),w||h||(w=!0,I(_))),T},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(T){var k=p;return function(){var A=p;p=k;try{return T.apply(this,arguments)}finally{p=A}}}})(Rh);Ah.exports=Rh;var my=Ah.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy=j,Ot=my;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zh=new Set,ss={};function Dr(e,t){po(e,t),po(e+"Capture",t)}function po(e,t){for(ss[e]=t,e=0;e<t.length;e++)zh.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,yy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fd={},hd={};function xy(e){return $a.call(hd,e)?!0:$a.call(fd,e)?!1:yy.test(e)?hd[e]=!0:(fd[e]=!0,!1)}function vy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wy(e,t,n,r){if(t===null||typeof t>"u"||vy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wt[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gc=/[\-:]([a-z])/g;function Zc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gc,Zc);wt[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gc,Zc);wt[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gc,Zc);wt[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jc(e,t,n,r){var o=wt.hasOwnProperty(t)?wt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wy(t,n,o,r)&&(n=null),r||o===null?xy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var On=gy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),Pa=Symbol.for("react.profiler"),Dh=Symbol.for("react.provider"),Lh=Symbol.for("react.context"),tu=Symbol.for("react.forward_ref"),Ma=Symbol.for("react.suspense"),Aa=Symbol.for("react.suspense_list"),nu=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Oh=Symbol.for("react.offscreen"),pd=Symbol.iterator;function To(e){return e===null||typeof e!="object"?null:(e=pd&&e[pd]||e["@@iterator"],typeof e=="function"?e:null)}var st=Object.assign,Bl;function Bo(e){if(Bl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bl=t&&t[1]||""}return`
`+Bl+e}var Ul=!1;function Wl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var a=`
`+o[i].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=i&&0<=l);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bo(e):""}function Ny(e){switch(e.tag){case 5:return Bo(e.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return e=Wl(e.type,!1),e;case 11:return e=Wl(e.type.render,!1),e;case 1:return e=Wl(e.type,!0),e;default:return""}}function Ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case Wr:return"Portal";case Pa:return"Profiler";case eu:return"StrictMode";case Ma:return"Suspense";case Aa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lh:return(e.displayName||"Context")+".Consumer";case Dh:return(e._context.displayName||"Context")+".Provider";case tu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nu:return t=e.displayName||null,t!==null?t:Ra(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return Ra(e(t))}catch{}}return null}function Sy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ra(t);case 8:return t===eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function by(e){var t=Fh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bs(e){e._valueTracker||(e._valueTracker=by(e))}function Hh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Fh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function za(e,t){var n=t.checked;return st({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function md(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vh(e,t){t=t.checked,t!=null&&Jc(e,"checked",t,!1)}function Da(e,t){Vh(e,t);var n=ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?La(e,t.type,n):t.hasOwnProperty("defaultValue")&&La(e,t.type,ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function La(e,t,n){(t!=="number"||ji(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Uo=Array.isArray;function oo(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ar(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Oa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return st({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(Uo(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ar(n)}}function Bh(e,t){var n=ar(t.value),r=ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Us,Wh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ey=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(e){Ey.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ko[t]=Ko[e]})});function qh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ko.hasOwnProperty(e)&&Ko[e]?(""+t).trim():t+"px"}function Qh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=qh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var ky=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ha(e,t){if(t){if(ky[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Va(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function ru(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ua=null,so=null,io=null;function vd(e){if(e=Rs(e)){if(typeof Ua!="function")throw Error(K(280));var t=e.stateNode;t&&(t=gl(t),Ua(e.stateNode,e.type,t))}}function Yh(e){so?io?io.push(e):io=[e]:so=e}function Xh(){if(so){var e=so,t=io;if(io=so=null,vd(e),t)for(e=0;e<t.length;e++)vd(t[e])}}function Kh(e,t){return e(t)}function Gh(){}var ql=!1;function Zh(e,t,n){if(ql)return e(t,n);ql=!0;try{return Kh(e,t,n)}finally{ql=!1,(so!==null||io!==null)&&(Gh(),Xh())}}function ls(e,t){var n=e.stateNode;if(n===null)return null;var r=gl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var Wa=!1;if(Mn)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Wa=!1}function _y(e,t,n,r,o,s,i,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Go=!1,Ti=null,$i=!1,qa=null,Cy={onError:function(e){Go=!0,Ti=e}};function Iy(e,t,n,r,o,s,i,l,a){Go=!1,Ti=null,_y.apply(Cy,arguments)}function jy(e,t,n,r,o,s,i,l,a){if(Iy.apply(this,arguments),Go){if(Go){var u=Ti;Go=!1,Ti=null}else throw Error(K(198));$i||($i=!0,qa=u)}}function Lr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wd(e){if(Lr(e)!==e)throw Error(K(188))}function Ty(e){var t=e.alternate;if(!t){if(t=Lr(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return wd(o),e;if(s===r)return wd(o),t;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function ep(e){return e=Ty(e),e!==null?tp(e):null}function tp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tp(e);if(t!==null)return t;e=e.sibling}return null}var np=Ot.unstable_scheduleCallback,Nd=Ot.unstable_cancelCallback,$y=Ot.unstable_shouldYield,Py=Ot.unstable_requestPaint,ct=Ot.unstable_now,My=Ot.unstable_getCurrentPriorityLevel,ou=Ot.unstable_ImmediatePriority,rp=Ot.unstable_UserBlockingPriority,Pi=Ot.unstable_NormalPriority,Ay=Ot.unstable_LowPriority,op=Ot.unstable_IdlePriority,fl=null,wn=null;function Ry(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(fl,e,void 0,(e.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Ly,zy=Math.log,Dy=Math.LN2;function Ly(e){return e>>>=0,e===0?32:31-(zy(e)/Dy|0)|0}var Ws=64,qs=4194304;function Wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=Wo(l):(s&=i,s!==0&&(r=Wo(s)))}else i=n&~o,i!==0?r=Wo(i):s!==0&&(r=Wo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dn(t),o=1<<n,r|=e[n],t&=~o;return r}function Oy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-dn(s),l=1<<i,a=o[i];a===-1?(!(l&n)||l&r)&&(o[i]=Oy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sp(){var e=Ws;return Ws<<=1,!(Ws&4194240)&&(Ws=64),e}function Ql(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ms(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dn(t),e[t]=n}function Hy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-dn(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function su(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var qe=0;function ip(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lp,iu,ap,cp,up,Ya=!1,Qs=[],Zn=null,Jn=null,er=null,as=new Map,cs=new Map,Qn=[],Vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sd(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":as.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(t.pointerId)}}function Po(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Rs(t),t!==null&&iu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function By(e,t,n,r,o){switch(t){case"focusin":return Zn=Po(Zn,e,t,n,r,o),!0;case"dragenter":return Jn=Po(Jn,e,t,n,r,o),!0;case"mouseover":return er=Po(er,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return as.set(s,Po(as.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,cs.set(s,Po(cs.get(s)||null,e,t,n,r,o)),!0}return!1}function dp(e){var t=wr(e.target);if(t!==null){var n=Lr(t);if(n!==null){if(t=n.tag,t===13){if(t=Jh(n),t!==null){e.blockedOn=t,up(e.priority,function(){ap(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ba=r,n.target.dispatchEvent(r),Ba=null}else return t=Rs(n),t!==null&&iu(t),e.blockedOn=n,!1;t.shift()}return!0}function bd(e,t,n){mi(e)&&n.delete(t)}function Uy(){Ya=!1,Zn!==null&&mi(Zn)&&(Zn=null),Jn!==null&&mi(Jn)&&(Jn=null),er!==null&&mi(er)&&(er=null),as.forEach(bd),cs.forEach(bd)}function Mo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ya||(Ya=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Uy)))}function us(e){function t(o){return Mo(o,e)}if(0<Qs.length){Mo(Qs[0],e);for(var n=1;n<Qs.length;n++){var r=Qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&Mo(Zn,e),Jn!==null&&Mo(Jn,e),er!==null&&Mo(er,e),as.forEach(t),cs.forEach(t),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)dp(n),n.blockedOn===null&&Qn.shift()}var lo=On.ReactCurrentBatchConfig,Ai=!0;function Wy(e,t,n,r){var o=qe,s=lo.transition;lo.transition=null;try{qe=1,lu(e,t,n,r)}finally{qe=o,lo.transition=s}}function qy(e,t,n,r){var o=qe,s=lo.transition;lo.transition=null;try{qe=4,lu(e,t,n,r)}finally{qe=o,lo.transition=s}}function lu(e,t,n,r){if(Ai){var o=Xa(e,t,n,r);if(o===null)ra(e,t,r,Ri,n),Sd(e,r);else if(By(o,e,t,n,r))r.stopPropagation();else if(Sd(e,r),t&4&&-1<Vy.indexOf(e)){for(;o!==null;){var s=Rs(o);if(s!==null&&lp(s),s=Xa(e,t,n,r),s===null&&ra(e,t,r,Ri,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else ra(e,t,r,null,n)}}var Ri=null;function Xa(e,t,n,r){if(Ri=null,e=ru(r),e=wr(e),e!==null)if(t=Lr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ri=e,null}function fp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(My()){case ou:return 1;case rp:return 4;case Pi:case Ay:return 16;case op:return 536870912;default:return 16}default:return 16}}var Kn=null,au=null,gi=null;function hp(){if(gi)return gi;var e,t=au,n=t.length,r,o="value"in Kn?Kn.value:Kn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return gi=o.slice(e,1<r?1-r:void 0)}function yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function Ed(){return!1}function Ut(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ys:Ed,this.isPropagationStopped=Ed,this}return st(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),t}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Ut(Io),As=st({},Io,{view:0,detail:0}),Qy=Ut(As),Yl,Xl,Ao,hl=st({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ao&&(Ao&&e.type==="mousemove"?(Yl=e.screenX-Ao.screenX,Xl=e.screenY-Ao.screenY):Xl=Yl=0,Ao=e),Yl)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),kd=Ut(hl),Yy=st({},hl,{dataTransfer:0}),Xy=Ut(Yy),Ky=st({},As,{relatedTarget:0}),Kl=Ut(Ky),Gy=st({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),Zy=Ut(Gy),Jy=st({},Io,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ex=Ut(Jy),tx=st({},Io,{data:0}),_d=Ut(tx),nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ox={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ox[e])?!!t[e]:!1}function uu(){return sx}var ix=st({},As,{key:function(e){if(e.key){var t=nx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(e){return e.type==="keypress"?yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lx=Ut(ix),ax=st({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=Ut(ax),cx=st({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),ux=Ut(cx),dx=st({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),fx=Ut(dx),hx=st({},hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),px=Ut(hx),mx=[9,13,27,32],du=Mn&&"CompositionEvent"in window,Zo=null;Mn&&"documentMode"in document&&(Zo=document.documentMode);var gx=Mn&&"TextEvent"in window&&!Zo,pp=Mn&&(!du||Zo&&8<Zo&&11>=Zo),Id=" ",jd=!1;function mp(e,t){switch(e){case"keyup":return mx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function yx(e,t){switch(e){case"compositionend":return gp(t);case"keypress":return t.which!==32?null:(jd=!0,Id);case"textInput":return e=t.data,e===Id&&jd?null:e;default:return null}}function xx(e,t){if(Qr)return e==="compositionend"||!du&&mp(e,t)?(e=hp(),gi=au=Kn=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pp&&t.locale!=="ko"?null:t.data;default:return null}}var vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vx[e.type]:t==="textarea"}function yp(e,t,n,r){Yh(r),t=zi(t,"onChange"),0<t.length&&(n=new cu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jo=null,ds=null;function wx(e){Ip(e,0)}function pl(e){var t=Kr(e);if(Hh(t))return e}function Nx(e,t){if(e==="change")return t}var xp=!1;if(Mn){var Gl;if(Mn){var Zl="oninput"in document;if(!Zl){var $d=document.createElement("div");$d.setAttribute("oninput","return;"),Zl=typeof $d.oninput=="function"}Gl=Zl}else Gl=!1;xp=Gl&&(!document.documentMode||9<document.documentMode)}function Pd(){Jo&&(Jo.detachEvent("onpropertychange",vp),ds=Jo=null)}function vp(e){if(e.propertyName==="value"&&pl(ds)){var t=[];yp(t,ds,e,ru(e)),Zh(wx,t)}}function Sx(e,t,n){e==="focusin"?(Pd(),Jo=t,ds=n,Jo.attachEvent("onpropertychange",vp)):e==="focusout"&&Pd()}function bx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pl(ds)}function Ex(e,t){if(e==="click")return pl(t)}function kx(e,t){if(e==="input"||e==="change")return pl(t)}function _x(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:_x;function fs(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!$a.call(t,o)||!hn(e[o],t[o]))return!1}return!0}function Md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ad(e,t){var n=Md(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Md(n)}}function wp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Np(){for(var e=window,t=ji();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ji(e.document)}return t}function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cx(e){var t=Np(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wp(n.ownerDocument.documentElement,n)){if(r!==null&&fu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Ad(n,s);var i=Ad(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ix=Mn&&"documentMode"in document&&11>=document.documentMode,Yr=null,Ka=null,es=null,Ga=!1;function Rd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ga||Yr==null||Yr!==ji(r)||(r=Yr,"selectionStart"in r&&fu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&fs(es,r)||(es=r,r=zi(Ka,"onSelect"),0<r.length&&(t=new cu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yr)))}function Xs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xr={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},Jl={},Sp={};Mn&&(Sp=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function ml(e){if(Jl[e])return Jl[e];if(!Xr[e])return e;var t=Xr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sp)return Jl[e]=t[n];return e}var bp=ml("animationend"),Ep=ml("animationiteration"),kp=ml("animationstart"),_p=ml("transitionend"),Cp=new Map,zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){Cp.set(e,t),Dr(t,[e])}for(var ea=0;ea<zd.length;ea++){var ta=zd[ea],jx=ta.toLowerCase(),Tx=ta[0].toUpperCase()+ta.slice(1);dr(jx,"on"+Tx)}dr(bp,"onAnimationEnd");dr(Ep,"onAnimationIteration");dr(kp,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(_p,"onTransitionEnd");po("onMouseEnter",["mouseout","mouseover"]);po("onMouseLeave",["mouseout","mouseover"]);po("onPointerEnter",["pointerout","pointerover"]);po("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$x=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Dd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,jy(r,t,void 0,e),e.currentTarget=null}function Ip(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&o.isPropagationStopped())break e;Dd(o,l,u),s=a}else for(i=0;i<r.length;i++){if(l=r[i],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&o.isPropagationStopped())break e;Dd(o,l,u),s=a}}}if($i)throw e=qa,$i=!1,qa=null,e}function Je(e,t){var n=t[nc];n===void 0&&(n=t[nc]=new Set);var r=e+"__bubble";n.has(r)||(jp(t,e,2,!1),n.add(r))}function na(e,t,n){var r=0;t&&(r|=4),jp(n,e,r,t)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function hs(e){if(!e[Ks]){e[Ks]=!0,zh.forEach(function(n){n!=="selectionchange"&&($x.has(n)||na(n,!1,e),na(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ks]||(t[Ks]=!0,na("selectionchange",!1,t))}}function jp(e,t,n,r){switch(fp(t)){case 1:var o=Wy;break;case 4:o=qy;break;default:o=lu}n=o.bind(null,t,n,e),o=void 0,!Wa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ra(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;i=i.return}for(;l!==null;){if(i=wr(l),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Zh(function(){var u=s,f=ru(n),d=[];e:{var p=Cp.get(e);if(p!==void 0){var h=cu,w=e;switch(e){case"keypress":if(yi(n)===0)break e;case"keydown":case"keyup":h=lx;break;case"focusin":w="focus",h=Kl;break;case"focusout":w="blur",h=Kl;break;case"beforeblur":case"afterblur":h=Kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ux;break;case bp:case Ep:case kp:h=Zy;break;case _p:h=fx;break;case"scroll":h=Qy;break;case"wheel":h=px;break;case"copy":case"cut":case"paste":h=ex;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Cd}var v=(t&4)!==0,S=!v&&e==="scroll",m=v?p!==null?p+"Capture":null:p;v=[];for(var g=u,x;g!==null;){x=g;var y=x.stateNode;if(x.tag===5&&y!==null&&(x=y,m!==null&&(y=ls(g,m),y!=null&&v.push(ps(g,y,x)))),S)break;g=g.return}0<v.length&&(p=new h(p,w,null,n,f),d.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==Ba&&(w=n.relatedTarget||n.fromElement)&&(wr(w)||w[An]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(w=n.relatedTarget||n.toElement,h=u,w=w?wr(w):null,w!==null&&(S=Lr(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(h=null,w=u),h!==w)){if(v=kd,y="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=Cd,y="onPointerLeave",m="onPointerEnter",g="pointer"),S=h==null?p:Kr(h),x=w==null?p:Kr(w),p=new v(y,g+"leave",h,n,f),p.target=S,p.relatedTarget=x,y=null,wr(f)===u&&(v=new v(m,g+"enter",w,n,f),v.target=x,v.relatedTarget=S,y=v),S=y,h&&w)t:{for(v=h,m=w,g=0,x=v;x;x=Or(x))g++;for(x=0,y=m;y;y=Or(y))x++;for(;0<g-x;)v=Or(v),g--;for(;0<x-g;)m=Or(m),x--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=Or(v),m=Or(m)}v=null}else v=null;h!==null&&Ld(d,p,h,v,!1),w!==null&&S!==null&&Ld(d,S,w,v,!0)}}e:{if(p=u?Kr(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var _=Nx;else if(Td(p))if(xp)_=kx;else{_=bx;var b=Sx}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=Ex);if(_&&(_=_(e,u))){yp(d,_,n,f);break e}b&&b(e,p,u),e==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&La(p,"number",p.value)}switch(b=u?Kr(u):window,e){case"focusin":(Td(b)||b.contentEditable==="true")&&(Yr=b,Ka=u,es=null);break;case"focusout":es=Ka=Yr=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,Rd(d,n,f);break;case"selectionchange":if(Ix)break;case"keydown":case"keyup":Rd(d,n,f)}var C;if(du)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Qr?mp(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(pp&&n.locale!=="ko"&&(Qr||M!=="onCompositionStart"?M==="onCompositionEnd"&&Qr&&(C=hp()):(Kn=f,au="value"in Kn?Kn.value:Kn.textContent,Qr=!0)),b=zi(u,M),0<b.length&&(M=new _d(M,e,null,n,f),d.push({event:M,listeners:b}),C?M.data=C:(C=gp(n),C!==null&&(M.data=C)))),(C=gx?yx(e,n):xx(e,n))&&(u=zi(u,"onBeforeInput"),0<u.length&&(f=new _d("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}Ip(d,t)})}function ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zi(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=ls(e,n),s!=null&&r.unshift(ps(e,s,o)),s=ls(e,t),s!=null&&r.push(ps(e,s,o))),e=e.return}return r}function Or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ld(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,o?(a=ls(n,s),a!=null&&i.unshift(ps(n,a,l))):o||(a=ls(n,s),a!=null&&i.push(ps(n,a,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Px=/\r\n?/g,Mx=/\u0000|\uFFFD/g;function Od(e){return(typeof e=="string"?e:""+e).replace(Px,`
`).replace(Mx,"")}function Gs(e,t,n){if(t=Od(t),Od(e)!==t&&n)throw Error(K(425))}function Di(){}var Za=null,Ja=null;function ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,Ax=typeof clearTimeout=="function"?clearTimeout:void 0,Fd=typeof Promise=="function"?Promise:void 0,Rx=typeof queueMicrotask=="function"?queueMicrotask:typeof Fd<"u"?function(e){return Fd.resolve(null).then(e).catch(zx)}:tc;function zx(e){setTimeout(function(){throw e})}function oa(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),us(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);us(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jo=Math.random().toString(36).slice(2),xn="__reactFiber$"+jo,ms="__reactProps$"+jo,An="__reactContainer$"+jo,nc="__reactEvents$"+jo,Dx="__reactListeners$"+jo,Lx="__reactHandles$"+jo;function wr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hd(e);e!==null;){if(n=e[xn])return n;e=Hd(e)}return t}e=n,n=e.parentNode}return null}function Rs(e){return e=e[xn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function gl(e){return e[ms]||null}var rc=[],Gr=-1;function fr(e){return{current:e}}function et(e){0>Gr||(e.current=rc[Gr],rc[Gr]=null,Gr--)}function Ge(e,t){Gr++,rc[Gr]=e.current,e.current=t}var cr={},kt=fr(cr),Mt=fr(!1),jr=cr;function mo(e,t){var n=e.type.contextTypes;if(!n)return cr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function At(e){return e=e.childContextTypes,e!=null}function Li(){et(Mt),et(kt)}function Vd(e,t,n){if(kt.current!==cr)throw Error(K(168));Ge(kt,t),Ge(Mt,n)}function Tp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(K(108,Sy(e)||"Unknown",o));return st({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,jr=kt.current,Ge(kt,e),Ge(Mt,Mt.current),!0}function Bd(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=Tp(e,t,jr),r.__reactInternalMemoizedMergedChildContext=e,et(Mt),et(kt),Ge(kt,e)):et(Mt),Ge(Mt,n)}var _n=null,yl=!1,sa=!1;function $p(e){_n===null?_n=[e]:_n.push(e)}function Ox(e){yl=!0,$p(e)}function hr(){if(!sa&&_n!==null){sa=!0;var e=0,t=qe;try{var n=_n;for(qe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_n=null,yl=!1}catch(o){throw _n!==null&&(_n=_n.slice(e+1)),np(ou,hr),o}finally{qe=t,sa=!1}}return null}var Zr=[],Jr=0,Fi=null,Hi=0,Wt=[],qt=0,Tr=null,Cn=1,In="";function mr(e,t){Zr[Jr++]=Hi,Zr[Jr++]=Fi,Fi=e,Hi=t}function Pp(e,t,n){Wt[qt++]=Cn,Wt[qt++]=In,Wt[qt++]=Tr,Tr=e;var r=Cn;e=In;var o=32-dn(r)-1;r&=~(1<<o),n+=1;var s=32-dn(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Cn=1<<32-dn(t)+o|n<<o|r,In=s+e}else Cn=1<<s|n<<o|r,In=e}function hu(e){e.return!==null&&(mr(e,1),Pp(e,1,0))}function pu(e){for(;e===Fi;)Fi=Zr[--Jr],Zr[Jr]=null,Hi=Zr[--Jr],Zr[Jr]=null;for(;e===Tr;)Tr=Wt[--qt],Wt[qt]=null,In=Wt[--qt],Wt[qt]=null,Cn=Wt[--qt],Wt[qt]=null}var Lt=null,Dt=null,tt=!1,ln=null;function Mp(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ud(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Dt=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Tr!==null?{id:Cn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,Dt=null,!0):!1;default:return!1}}function oc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sc(e){if(tt){var t=Dt;if(t){var n=t;if(!Ud(e,t)){if(oc(e))throw Error(K(418));t=tr(n.nextSibling);var r=Lt;t&&Ud(e,t)?Mp(r,n):(e.flags=e.flags&-4097|2,tt=!1,Lt=e)}}else{if(oc(e))throw Error(K(418));e.flags=e.flags&-4097|2,tt=!1,Lt=e}}}function Wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function Zs(e){if(e!==Lt)return!1;if(!tt)return Wd(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ec(e.type,e.memoizedProps)),t&&(t=Dt)){if(oc(e))throw Ap(),Error(K(418));for(;t;)Mp(e,t),t=tr(t.nextSibling)}if(Wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dt=tr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=Lt?tr(e.stateNode.nextSibling):null;return!0}function Ap(){for(var e=Dt;e;)e=tr(e.nextSibling)}function go(){Dt=Lt=null,tt=!1}function mu(e){ln===null?ln=[e]:ln.push(e)}var Fx=On.ReactCurrentBatchConfig;function Ro(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function Js(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qd(e){var t=e._init;return t(e._payload)}function Rp(e){function t(m,g){if(e){var x=m.deletions;x===null?(m.deletions=[g],m.flags|=16):x.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=sr(m,g),m.index=0,m.sibling=null,m}function s(m,g,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<g?(m.flags|=2,g):x):(m.flags|=2,g)):(m.flags|=1048576,g)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,x,y){return g===null||g.tag!==6?(g=fa(x,m.mode,y),g.return=m,g):(g=o(g,x),g.return=m,g)}function a(m,g,x,y){var _=x.type;return _===qr?f(m,g,x.props.children,y,x.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bn&&qd(_)===g.type)?(y=o(g,x.props),y.ref=Ro(m,g,x),y.return=m,y):(y=Ei(x.type,x.key,x.props,null,m.mode,y),y.ref=Ro(m,g,x),y.return=m,y)}function u(m,g,x,y){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=ha(x,m.mode,y),g.return=m,g):(g=o(g,x.children||[]),g.return=m,g)}function f(m,g,x,y,_){return g===null||g.tag!==7?(g=_r(x,m.mode,y,_),g.return=m,g):(g=o(g,x),g.return=m,g)}function d(m,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=fa(""+g,m.mode,x),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vs:return x=Ei(g.type,g.key,g.props,null,m.mode,x),x.ref=Ro(m,null,g),x.return=m,x;case Wr:return g=ha(g,m.mode,x),g.return=m,g;case Bn:var y=g._init;return d(m,y(g._payload),x)}if(Uo(g)||To(g))return g=_r(g,m.mode,x,null),g.return=m,g;Js(m,g)}return null}function p(m,g,x,y){var _=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:l(m,g,""+x,y);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vs:return x.key===_?a(m,g,x,y):null;case Wr:return x.key===_?u(m,g,x,y):null;case Bn:return _=x._init,p(m,g,_(x._payload),y)}if(Uo(x)||To(x))return _!==null?null:f(m,g,x,y,null);Js(m,x)}return null}function h(m,g,x,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(x)||null,l(g,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:return m=m.get(y.key===null?x:y.key)||null,a(g,m,y,_);case Wr:return m=m.get(y.key===null?x:y.key)||null,u(g,m,y,_);case Bn:var b=y._init;return h(m,g,x,b(y._payload),_)}if(Uo(y)||To(y))return m=m.get(x)||null,f(g,m,y,_,null);Js(g,y)}return null}function w(m,g,x,y){for(var _=null,b=null,C=g,M=g=0,P=null;C!==null&&M<x.length;M++){C.index>M?(P=C,C=null):P=C.sibling;var E=p(m,C,x[M],y);if(E===null){C===null&&(C=P);break}e&&C&&E.alternate===null&&t(m,C),g=s(E,g,M),b===null?_=E:b.sibling=E,b=E,C=P}if(M===x.length)return n(m,C),tt&&mr(m,M),_;if(C===null){for(;M<x.length;M++)C=d(m,x[M],y),C!==null&&(g=s(C,g,M),b===null?_=C:b.sibling=C,b=C);return tt&&mr(m,M),_}for(C=r(m,C);M<x.length;M++)P=h(C,m,M,x[M],y),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?M:P.key),g=s(P,g,M),b===null?_=P:b.sibling=P,b=P);return e&&C.forEach(function(R){return t(m,R)}),tt&&mr(m,M),_}function v(m,g,x,y){var _=To(x);if(typeof _!="function")throw Error(K(150));if(x=_.call(x),x==null)throw Error(K(151));for(var b=_=null,C=g,M=g=0,P=null,E=x.next();C!==null&&!E.done;M++,E=x.next()){C.index>M?(P=C,C=null):P=C.sibling;var R=p(m,C,E.value,y);if(R===null){C===null&&(C=P);break}e&&C&&R.alternate===null&&t(m,C),g=s(R,g,M),b===null?_=R:b.sibling=R,b=R,C=P}if(E.done)return n(m,C),tt&&mr(m,M),_;if(C===null){for(;!E.done;M++,E=x.next())E=d(m,E.value,y),E!==null&&(g=s(E,g,M),b===null?_=E:b.sibling=E,b=E);return tt&&mr(m,M),_}for(C=r(m,C);!E.done;M++,E=x.next())E=h(C,m,M,E.value,y),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?M:E.key),g=s(E,g,M),b===null?_=E:b.sibling=E,b=E);return e&&C.forEach(function(D){return t(m,D)}),tt&&mr(m,M),_}function S(m,g,x,y){if(typeof x=="object"&&x!==null&&x.type===qr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Vs:e:{for(var _=x.key,b=g;b!==null;){if(b.key===_){if(_=x.type,_===qr){if(b.tag===7){n(m,b.sibling),g=o(b,x.props.children),g.return=m,m=g;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bn&&qd(_)===b.type){n(m,b.sibling),g=o(b,x.props),g.ref=Ro(m,b,x),g.return=m,m=g;break e}n(m,b);break}else t(m,b);b=b.sibling}x.type===qr?(g=_r(x.props.children,m.mode,y,x.key),g.return=m,m=g):(y=Ei(x.type,x.key,x.props,null,m.mode,y),y.ref=Ro(m,g,x),y.return=m,m=y)}return i(m);case Wr:e:{for(b=x.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(m,g.sibling),g=o(g,x.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=ha(x,m.mode,y),g.return=m,m=g}return i(m);case Bn:return b=x._init,S(m,g,b(x._payload),y)}if(Uo(x))return w(m,g,x,y);if(To(x))return v(m,g,x,y);Js(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,x),g.return=m,m=g):(n(m,g),g=fa(x,m.mode,y),g.return=m,m=g),i(m)):n(m,g)}return S}var yo=Rp(!0),zp=Rp(!1),Vi=fr(null),Bi=null,eo=null,gu=null;function yu(){gu=eo=Bi=null}function xu(e){var t=Vi.current;et(Vi),e._currentValue=t}function ic(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ao(e,t){Bi=e,gu=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($t=!0),e.firstContext=null)}function en(e){var t=e._currentValue;if(gu!==e)if(e={context:e,memoizedValue:t,next:null},eo===null){if(Bi===null)throw Error(K(308));eo=e,Bi.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return t}var Nr=null;function vu(e){Nr===null?Nr=[e]:Nr.push(e)}function Dp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,vu(t)):(n.next=o.next,o.next=n),t.interleaved=n,Rn(e,r)}function Rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Un=!1;function wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $n(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Rn(e,n)}return o=r.interleaved,o===null?(t.next=t,vu(r)):(t.next=o.next,o.next=t),r.interleaved=t,Rn(e,n)}function xi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,su(e,n)}}function Qd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ui(e,t,n,r){var o=e.updateQueue;Un=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var a=l,u=a.next;a.next=null,i===null?s=u:i.next=u,i=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var d=o.baseState;i=0,f=u=a=null,l=s;do{var p=l.lane,h=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,v=l;switch(p=t,h=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){d=w.call(h,d,p);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(h,d,p):w,p==null)break e;d=st({},d,p);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=h,a=d):f=f.next=h,i|=p;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;p=l,l=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(f===null&&(a=d),o.baseState=a,o.firstBaseUpdate=u,o.lastBaseUpdate=f,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Pr|=i,e.lanes=i,e.memoizedState=d}}function Yd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(K(191,o));o.call(r)}}}var zs={},Nn=fr(zs),gs=fr(zs),ys=fr(zs);function Sr(e){if(e===zs)throw Error(K(174));return e}function Nu(e,t){switch(Ge(ys,t),Ge(gs,e),Ge(Nn,zs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fa(t,e)}et(Nn),Ge(Nn,t)}function xo(){et(Nn),et(gs),et(ys)}function Op(e){Sr(ys.current);var t=Sr(Nn.current),n=Fa(t,e.type);t!==n&&(Ge(gs,e),Ge(Nn,n))}function Su(e){gs.current===e&&(et(Nn),et(gs))}var rt=fr(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function bu(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var vi=On.ReactCurrentDispatcher,la=On.ReactCurrentBatchConfig,$r=0,ot=null,dt=null,pt=null,qi=!1,ts=!1,xs=0,Hx=0;function St(){throw Error(K(321))}function Eu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hn(e[n],t[n]))return!1;return!0}function ku(e,t,n,r,o,s){if($r=s,ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vi.current=e===null||e.memoizedState===null?Wx:qx,e=n(r,o),ts){s=0;do{if(ts=!1,xs=0,25<=s)throw Error(K(301));s+=1,pt=dt=null,t.updateQueue=null,vi.current=Qx,e=n(r,o)}while(ts)}if(vi.current=Qi,t=dt!==null&&dt.next!==null,$r=0,pt=dt=ot=null,qi=!1,t)throw Error(K(300));return e}function _u(){var e=xs!==0;return xs=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?ot.memoizedState=pt=e:pt=pt.next=e,pt}function tn(){if(dt===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=pt===null?ot.memoizedState:pt.next;if(t!==null)pt=t,dt=e;else{if(e===null)throw Error(K(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},pt===null?ot.memoizedState=pt=e:pt=pt.next=e}return pt}function vs(e,t){return typeof t=="function"?t(e):t}function aa(e){var t=tn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=dt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,a=null,u=s;do{var f=u.lane;if(($r&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,i=r):a=a.next=d,ot.lanes|=f,Pr|=f}u=u.next}while(u!==null&&u!==s);a===null?i=r:a.next=l,hn(r,t.memoizedState)||($t=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,ot.lanes|=s,Pr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ca(e){var t=tn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);hn(s,t.memoizedState)||($t=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Fp(){}function Hp(e,t){var n=ot,r=tn(),o=t(),s=!hn(r.memoizedState,o);if(s&&(r.memoizedState=o,$t=!0),r=r.queue,Cu(Up.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,ws(9,Bp.bind(null,n,r,o,t),void 0,null),mt===null)throw Error(K(349));$r&30||Vp(n,t,o)}return o}function Vp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ot.updateQueue,t===null?(t={lastEffect:null,stores:null},ot.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bp(e,t,n,r){t.value=n,t.getSnapshot=r,Wp(t)&&qp(e)}function Up(e,t,n){return n(function(){Wp(t)&&qp(e)})}function Wp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hn(e,n)}catch{return!0}}function qp(e){var t=Rn(e,1);t!==null&&fn(t,e,1,-1)}function Xd(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ux.bind(null,ot,e),[t.memoizedState,e]}function ws(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ot.updateQueue,t===null?(t={lastEffect:null,stores:null},ot.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qp(){return tn().memoizedState}function wi(e,t,n,r){var o=yn();ot.flags|=e,o.memoizedState=ws(1|t,n,void 0,r===void 0?null:r)}function xl(e,t,n,r){var o=tn();r=r===void 0?null:r;var s=void 0;if(dt!==null){var i=dt.memoizedState;if(s=i.destroy,r!==null&&Eu(r,i.deps)){o.memoizedState=ws(t,n,s,r);return}}ot.flags|=e,o.memoizedState=ws(1|t,n,s,r)}function Kd(e,t){return wi(8390656,8,e,t)}function Cu(e,t){return xl(2048,8,e,t)}function Yp(e,t){return xl(4,2,e,t)}function Xp(e,t){return xl(4,4,e,t)}function Kp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gp(e,t,n){return n=n!=null?n.concat([e]):null,xl(4,4,Kp.bind(null,t,e),n)}function Iu(){}function Zp(e,t){var n=tn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jp(e,t){var n=tn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function em(e,t,n){return $r&21?(hn(n,t)||(n=sp(),ot.lanes|=n,Pr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$t=!0),e.memoizedState=n)}function Vx(e,t){var n=qe;qe=n!==0&&4>n?n:4,e(!0);var r=la.transition;la.transition={};try{e(!1),t()}finally{qe=n,la.transition=r}}function tm(){return tn().memoizedState}function Bx(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nm(e))rm(t,n);else if(n=Dp(e,t,n,r),n!==null){var o=Ct();fn(n,e,r,o),om(n,t,r)}}function Ux(e,t,n){var r=or(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nm(e))rm(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,hn(l,i)){var a=t.interleaved;a===null?(o.next=o,vu(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}finally{}n=Dp(e,t,o,r),n!==null&&(o=Ct(),fn(n,e,r,o),om(n,t,r))}}function nm(e){var t=e.alternate;return e===ot||t!==null&&t===ot}function rm(e,t){ts=qi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function om(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,su(e,n)}}var Qi={readContext:en,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Wx={readContext:en,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:en,useEffect:Kd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wi(4194308,4,Kp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return wi(4,2,e,t)},useMemo:function(e,t){var n=yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Bx.bind(null,ot,e),[r.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:Xd,useDebugValue:Iu,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=Xd(!1),t=e[0];return e=Vx.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ot,o=yn();if(tt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),mt===null)throw Error(K(349));$r&30||Vp(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Kd(Up.bind(null,r,s,e),[e]),r.flags|=2048,ws(9,Bp.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=yn(),t=mt.identifierPrefix;if(tt){var n=In,r=Cn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Hx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qx={readContext:en,useCallback:Zp,useContext:en,useEffect:Cu,useImperativeHandle:Gp,useInsertionEffect:Yp,useLayoutEffect:Xp,useMemo:Jp,useReducer:aa,useRef:Qp,useState:function(){return aa(vs)},useDebugValue:Iu,useDeferredValue:function(e){var t=tn();return em(t,dt.memoizedState,e)},useTransition:function(){var e=aa(vs)[0],t=tn().memoizedState;return[e,t]},useMutableSource:Fp,useSyncExternalStore:Hp,useId:tm,unstable_isNewReconciler:!1},Qx={readContext:en,useCallback:Zp,useContext:en,useEffect:Cu,useImperativeHandle:Gp,useInsertionEffect:Yp,useLayoutEffect:Xp,useMemo:Jp,useReducer:ca,useRef:Qp,useState:function(){return ca(vs)},useDebugValue:Iu,useDeferredValue:function(e){var t=tn();return dt===null?t.memoizedState=e:em(t,dt.memoizedState,e)},useTransition:function(){var e=ca(vs)[0],t=tn().memoizedState;return[e,t]},useMutableSource:Fp,useSyncExternalStore:Hp,useId:tm,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=st({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:st({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vl={isMounted:function(e){return(e=e._reactInternals)?Lr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ct(),o=or(e),s=$n(r,o);s.payload=t,n!=null&&(s.callback=n),t=nr(e,s,o),t!==null&&(fn(t,e,o,r),xi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ct(),o=or(e),s=$n(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=nr(e,s,o),t!==null&&(fn(t,e,o,r),xi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ct(),r=or(e),o=$n(n,r);o.tag=2,t!=null&&(o.callback=t),t=nr(e,o,r),t!==null&&(fn(t,e,r,n),xi(t,e,r))}};function Gd(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!fs(n,r)||!fs(o,s):!0}function sm(e,t,n){var r=!1,o=cr,s=t.contextType;return typeof s=="object"&&s!==null?s=en(s):(o=At(t)?jr:kt.current,r=t.contextTypes,s=(r=r!=null)?mo(e,o):cr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Zd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vl.enqueueReplaceState(t,t.state,null)}function ac(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},wu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=en(s):(s=At(t)?jr:kt.current,o.context=mo(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(lc(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&vl.enqueueReplaceState(o,o.state,null),Ui(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do n+=Ny(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yx=typeof WeakMap=="function"?WeakMap:Map;function im(e,t,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xi||(Xi=!0,vc=r),cc(e,t)},n}function lm(e,t,n){n=$n(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){cc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cc(e,t),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Jd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Yx;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=av.bind(null,e,t,n),t.then(e,e))}function ef(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tf(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$n(-1,1),t.tag=2,nr(n,t,1))),n.lanes|=1),e)}var Xx=On.ReactCurrentOwner,$t=!1;function _t(e,t,n,r){t.child=e===null?zp(t,null,n,r):yo(t,e.child,n,r)}function nf(e,t,n,r,o){n=n.render;var s=t.ref;return ao(t,o),r=ku(e,t,n,r,s,o),n=_u(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zn(e,t,o)):(tt&&n&&hu(t),t.flags|=1,_t(e,t,r,o),t.child)}function rf(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!zu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,am(e,t,s,r,o)):(e=Ei(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:fs,n(i,r)&&e.ref===t.ref)return zn(e,t,o)}return t.flags|=1,e=sr(s,r),e.ref=t.ref,e.return=t,t.child=e}function am(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(fs(s,r)&&e.ref===t.ref)if($t=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&($t=!0);else return t.lanes=e.lanes,zn(e,t,o)}return uc(e,t,n,r,o)}function cm(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(no,zt),zt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(no,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ge(no,zt),zt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ge(no,zt),zt|=r;return _t(e,t,o,n),t.child}function um(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uc(e,t,n,r,o){var s=At(n)?jr:kt.current;return s=mo(t,s),ao(t,o),n=ku(e,t,n,r,s,o),r=_u(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zn(e,t,o)):(tt&&r&&hu(t),t.flags|=1,_t(e,t,n,o),t.child)}function of(e,t,n,r,o){if(At(n)){var s=!0;Oi(t)}else s=!1;if(ao(t,o),t.stateNode===null)Ni(e,t),sm(t,n,r),ac(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var a=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=en(u):(u=At(n)?jr:kt.current,u=mo(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Zd(t,i,r,u),Un=!1;var p=t.memoizedState;i.state=p,Ui(t,r,i,o),a=t.memoizedState,l!==r||p!==a||Mt.current||Un?(typeof f=="function"&&(lc(t,n,f,r),a=t.memoizedState),(l=Un||Gd(t,n,l,r,p,a,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),i.props=r,i.state=a,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Lp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:rn(t.type,l),i.props=u,d=t.pendingProps,p=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=en(a):(a=At(n)?jr:kt.current,a=mo(t,a));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||p!==a)&&Zd(t,i,r,a),Un=!1,p=t.memoizedState,i.state=p,Ui(t,r,i,o);var w=t.memoizedState;l!==d||p!==w||Mt.current||Un?(typeof h=="function"&&(lc(t,n,h,r),w=t.memoizedState),(u=Un||Gd(t,n,u,r,p,w,a)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,a)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=a,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return dc(e,t,n,r,s,o)}function dc(e,t,n,r,o,s){um(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Bd(t,n,!1),zn(e,t,s);r=t.stateNode,Xx.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=yo(t,e.child,null,s),t.child=yo(t,null,l,s)):_t(e,t,l,s),t.memoizedState=r.state,o&&Bd(t,n,!0),t.child}function dm(e){var t=e.stateNode;t.pendingContext?Vd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vd(e,t.context,!1),Nu(e,t.containerInfo)}function sf(e,t,n,r,o){return go(),mu(o),t.flags|=256,_t(e,t,n,r),t.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function fm(e,t,n){var r=t.pendingProps,o=rt.current,s=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ge(rt,o&1),e===null)return sc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Sl(i,r,0,null),e=_r(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hc(n),t.memoizedState=fc,e):ju(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Kx(e,t,i,r,l,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,l=o.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=sr(o,a),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=sr(l,s):(s=_r(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?hc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=fc,r}return s=e.child,e=s.sibling,r=sr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ju(e,t){return t=Sl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ei(e,t,n,r){return r!==null&&mu(r),yo(t,e.child,null,n),e=ju(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kx(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=ua(Error(K(422))),ei(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Sl({mode:"visible",children:r.children},o,0,null),s=_r(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&yo(t,e.child,null,i),t.child.memoizedState=hc(i),t.memoizedState=fc,s);if(!(t.mode&1))return ei(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(K(419)),r=ua(s,r,void 0),ei(e,t,i,r)}if(l=(i&e.childLanes)!==0,$t||l){if(r=mt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Rn(e,o),fn(r,e,o,-1))}return Ru(),r=ua(Error(K(421))),ei(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=cv.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Dt=tr(o.nextSibling),Lt=t,tt=!0,ln=null,e!==null&&(Wt[qt++]=Cn,Wt[qt++]=In,Wt[qt++]=Tr,Cn=e.id,In=e.overflow,Tr=t),t=ju(t,r.children),t.flags|=4096,t)}function lf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ic(e.return,t,n)}function da(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function hm(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(_t(e,t,r.children,n),r=rt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lf(e,n,t);else if(e.tag===19)lf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ge(rt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Wi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),da(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Wi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}da(t,!0,n,null,s);break;case"together":da(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ni(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Gx(e,t,n){switch(t.tag){case 3:dm(t),go();break;case 5:Op(t);break;case 1:At(t.type)&&Oi(t);break;case 4:Nu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ge(Vi,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ge(rt,rt.current&1),t.flags|=128,null):n&t.child.childLanes?fm(e,t,n):(Ge(rt,rt.current&1),e=zn(e,t,n),e!==null?e.sibling:null);Ge(rt,rt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hm(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ge(rt,rt.current),r)break;return null;case 22:case 23:return t.lanes=0,cm(e,t,n)}return zn(e,t,n)}var pm,pc,mm,gm;pm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};mm=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Sr(Nn.current);var s=null;switch(n){case"input":o=za(e,o),r=za(e,r),s=[];break;case"select":o=st({},o,{value:void 0}),r=st({},r,{value:void 0}),s=[];break;case"textarea":o=Oa(e,o),r=Oa(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Di)}Ha(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ss.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&l[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ss.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Je("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};gm=function(e,t,n,r){n!==r&&(t.flags|=4)};function zo(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zx(e,t,n){var r=t.pendingProps;switch(pu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return At(t.type)&&Li(),bt(t),null;case 3:return r=t.stateNode,xo(),et(Mt),et(kt),bu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(Sc(ln),ln=null))),pc(e,t),bt(t),null;case 5:Su(t);var o=Sr(ys.current);if(n=t.type,e!==null&&t.stateNode!=null)mm(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return bt(t),null}if(e=Sr(Nn.current),Zs(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[xn]=t,r[ms]=s,e=(t.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(o=0;o<qo.length;o++)Je(qo[o],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":md(r,s),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Je("invalid",r);break;case"textarea":yd(r,s),Je("invalid",r)}Ha(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,l,e),o=["children",""+l]):ss.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Je("scroll",r)}switch(n){case"input":Bs(r),gd(r,s,!0);break;case"textarea":Bs(r),xd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Di)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[xn]=t,e[ms]=r,pm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Va(n,r),n){case"dialog":Je("cancel",e),Je("close",e),o=r;break;case"iframe":case"object":case"embed":Je("load",e),o=r;break;case"video":case"audio":for(o=0;o<qo.length;o++)Je(qo[o],e);o=r;break;case"source":Je("error",e),o=r;break;case"img":case"image":case"link":Je("error",e),Je("load",e),o=r;break;case"details":Je("toggle",e),o=r;break;case"input":md(e,r),o=za(e,r),Je("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=st({},r,{value:void 0}),Je("invalid",e);break;case"textarea":yd(e,r),o=Oa(e,r),Je("invalid",e);break;default:o=r}Ha(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Qh(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Wh(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&is(e,a):typeof a=="number"&&is(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ss.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Je("scroll",e):a!=null&&Jc(e,s,a,i))}switch(n){case"input":Bs(e),gd(e,r,!1);break;case"textarea":Bs(e),xd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ar(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?oo(e,!!r.multiple,s,!1):r.defaultValue!=null&&oo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Di)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(e&&t.stateNode!=null)gm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Sr(ys.current),Sr(Nn.current),Zs(t)){if(r=t.stateNode,n=t.memoizedProps,r[xn]=t,(s=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:Gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=t,t.stateNode=r}return bt(t),null;case 13:if(et(rt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&Dt!==null&&t.mode&1&&!(t.flags&128))Ap(),go(),t.flags|=98560,s=!1;else if(s=Zs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(K(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[xn]=t}else go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bt(t),s=!1}else ln!==null&&(Sc(ln),ln=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||rt.current&1?ft===0&&(ft=3):Ru())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return xo(),pc(e,t),e===null&&hs(t.stateNode.containerInfo),bt(t),null;case 10:return xu(t.type._context),bt(t),null;case 17:return At(t.type)&&Li(),bt(t),null;case 19:if(et(rt),s=t.memoizedState,s===null)return bt(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)zo(s,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Wi(e),i!==null){for(t.flags|=128,zo(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ge(rt,rt.current&1|2),t.child}e=e.sibling}s.tail!==null&&ct()>wo&&(t.flags|=128,r=!0,zo(s,!1),t.lanes=4194304)}else{if(!r)if(e=Wi(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!tt)return bt(t),null}else 2*ct()-s.renderingStartTime>wo&&n!==1073741824&&(t.flags|=128,r=!0,zo(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ct(),t.sibling=null,n=rt.current,Ge(rt,r?n&1|2:n&1),t):(bt(t),null);case 22:case 23:return Au(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function Jx(e,t){switch(pu(t),t.tag){case 1:return At(t.type)&&Li(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xo(),et(Mt),et(kt),bu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Su(t),null;case 13:if(et(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(rt),null;case 4:return xo(),null;case 10:return xu(t.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var ti=!1,Et=!1,ev=typeof WeakSet=="function"?WeakSet:Set,fe=null;function to(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(e,t,r)}else n.current=null}function mc(e,t,n){try{n()}catch(r){it(e,t,r)}}var af=!1;function tv(e,t){if(Za=Ai,e=Np(),fu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,a=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(l=i+o),d!==s||r!==0&&d.nodeType!==3||(a=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++u===o&&(l=i),p===s&&++f===r&&(a=i),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ja={focusedElem:e,selectionRange:n},Ai=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,S=w.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:rn(t.type,v),S);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(y){it(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return w=af,af=!1,w}function ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&mc(t,n,s)}o=o.next}while(o!==r)}}function wl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ym(e){var t=e.alternate;t!==null&&(e.alternate=null,ym(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[ms],delete t[nc],delete t[Dx],delete t[Lx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xm(e){return e.tag===5||e.tag===3||e.tag===4}function cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Di));else if(r!==4&&(e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}function xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xc(e,t,n),e=e.sibling;e!==null;)xc(e,t,n),e=e.sibling}var xt=null,on=!1;function Hn(e,t,n){for(n=n.child;n!==null;)vm(e,t,n),n=n.sibling}function vm(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:Et||to(n,t);case 6:var r=xt,o=on;xt=null,Hn(e,t,n),xt=r,on=o,xt!==null&&(on?(e=xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(on?(e=xt,n=n.stateNode,e.nodeType===8?oa(e.parentNode,n):e.nodeType===1&&oa(e,n),us(e)):oa(xt,n.stateNode));break;case 4:r=xt,o=on,xt=n.stateNode.containerInfo,on=!0,Hn(e,t,n),xt=r,on=o;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&mc(n,t,i),o=o.next}while(o!==r)}Hn(e,t,n);break;case 1:if(!Et&&(to(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){it(n,t,l)}Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,Hn(e,t,n),Et=r):Hn(e,t,n);break;default:Hn(e,t,n)}}function uf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ev),t.forEach(function(r){var o=uv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,on=!1;break e;case 3:xt=l.stateNode.containerInfo,on=!0;break e;case 4:xt=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(xt===null)throw Error(K(160));vm(s,i,o),xt=null,on=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(u){it(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wm(t,e),t=t.sibling}function wm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),gn(e),r&4){try{ns(3,e,e.return),wl(3,e)}catch(v){it(e,e.return,v)}try{ns(5,e,e.return)}catch(v){it(e,e.return,v)}}break;case 1:nn(t,e),gn(e),r&512&&n!==null&&to(n,n.return);break;case 5:if(nn(t,e),gn(e),r&512&&n!==null&&to(n,n.return),e.flags&32){var o=e.stateNode;try{is(o,"")}catch(v){it(e,e.return,v)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Vh(o,s),Va(l,i);var u=Va(l,s);for(i=0;i<a.length;i+=2){var f=a[i],d=a[i+1];f==="style"?Qh(o,d):f==="dangerouslySetInnerHTML"?Wh(o,d):f==="children"?is(o,d):Jc(o,f,d,u)}switch(l){case"input":Da(o,s);break;case"textarea":Bh(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?oo(o,!!s.multiple,h,!1):p!==!!s.multiple&&(s.defaultValue!=null?oo(o,!!s.multiple,s.defaultValue,!0):oo(o,!!s.multiple,s.multiple?[]:"",!1))}o[ms]=s}catch(v){it(e,e.return,v)}}break;case 6:if(nn(t,e),gn(e),r&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(v){it(e,e.return,v)}}break;case 3:if(nn(t,e),gn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(v){it(e,e.return,v)}break;case 4:nn(t,e),gn(e);break;case 13:nn(t,e),gn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Pu=ct())),r&4&&uf(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Et=(u=Et)||f,nn(t,e),Et=u):nn(t,e),gn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(fe=e,f=e.child;f!==null;){for(d=fe=f;fe!==null;){switch(p=fe,h=p.child,p.tag){case 0:case 11:case 14:case 15:ns(4,p,p.return);break;case 1:to(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){it(r,n,v)}}break;case 5:to(p,p.return);break;case 22:if(p.memoizedState!==null){ff(d);continue}}h!==null?(h.return=p,fe=h):ff(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{o=d.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=qh("display",i))}catch(v){it(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){it(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nn(t,e),gn(e),r&4&&uf(e);break;case 21:break;default:nn(t,e),gn(e)}}function gn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xm(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(is(o,""),r.flags&=-33);var s=cf(e);xc(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=cf(e);yc(e,l,i);break;default:throw Error(K(161))}}catch(a){it(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nv(e,t,n){fe=e,Nm(e)}function Nm(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var o=fe,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ti;if(!i){var l=o.alternate,a=l!==null&&l.memoizedState!==null||Et;l=ti;var u=Et;if(ti=i,(Et=a)&&!u)for(fe=o;fe!==null;)i=fe,a=i.child,i.tag===22&&i.memoizedState!==null?hf(o):a!==null?(a.return=i,fe=a):hf(o);for(;s!==null;)fe=s,Nm(s),s=s.sibling;fe=o,ti=l,Et=u}df(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,fe=s):df(e)}}function df(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||wl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Et)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Yd(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yd(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&us(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Et||t.flags&512&&gc(t)}catch(p){it(t,t.return,p)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function ff(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function hf(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wl(4,t)}catch(a){it(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(a){it(t,o,a)}}var s=t.return;try{gc(t)}catch(a){it(t,s,a)}break;case 5:var i=t.return;try{gc(t)}catch(a){it(t,i,a)}}}catch(a){it(t,t.return,a)}if(t===e){fe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,fe=l;break}fe=t.return}}var rv=Math.ceil,Yi=On.ReactCurrentDispatcher,Tu=On.ReactCurrentOwner,Zt=On.ReactCurrentBatchConfig,Ue=0,mt=null,ut=null,vt=0,zt=0,no=fr(0),ft=0,Ns=null,Pr=0,Nl=0,$u=0,rs=null,Tt=null,Pu=0,wo=1/0,kn=null,Xi=!1,vc=null,rr=null,ni=!1,Gn=null,Ki=0,os=0,wc=null,Si=-1,bi=0;function Ct(){return Ue&6?ct():Si!==-1?Si:Si=ct()}function or(e){return e.mode&1?Ue&2&&vt!==0?vt&-vt:Fx.transition!==null?(bi===0&&(bi=sp()),bi):(e=qe,e!==0||(e=window.event,e=e===void 0?16:fp(e.type)),e):1}function fn(e,t,n,r){if(50<os)throw os=0,wc=null,Error(K(185));Ms(e,n,r),(!(Ue&2)||e!==mt)&&(e===mt&&(!(Ue&2)&&(Nl|=n),ft===4&&Yn(e,vt)),Rt(e,r),n===1&&Ue===0&&!(t.mode&1)&&(wo=ct()+500,yl&&hr()))}function Rt(e,t){var n=e.callbackNode;Fy(e,t);var r=Mi(e,e===mt?vt:0);if(r===0)n!==null&&Nd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nd(n),t===1)e.tag===0?Ox(pf.bind(null,e)):$p(pf.bind(null,e)),Rx(function(){!(Ue&6)&&hr()}),n=null;else{switch(ip(r)){case 1:n=ou;break;case 4:n=rp;break;case 16:n=Pi;break;case 536870912:n=op;break;default:n=Pi}n=jm(n,Sm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sm(e,t){if(Si=-1,bi=0,Ue&6)throw Error(K(327));var n=e.callbackNode;if(co()&&e.callbackNode!==n)return null;var r=Mi(e,e===mt?vt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gi(e,r);else{t=r;var o=Ue;Ue|=2;var s=Em();(mt!==e||vt!==t)&&(kn=null,wo=ct()+500,kr(e,t));do try{iv();break}catch(l){bm(e,l)}while(!0);yu(),Yi.current=s,Ue=o,ut!==null?t=0:(mt=null,vt=0,t=ft)}if(t!==0){if(t===2&&(o=Qa(e),o!==0&&(r=o,t=Nc(e,o))),t===1)throw n=Ns,kr(e,0),Yn(e,r),Rt(e,ct()),n;if(t===6)Yn(e,r);else{if(o=e.current.alternate,!(r&30)&&!ov(o)&&(t=Gi(e,r),t===2&&(s=Qa(e),s!==0&&(r=s,t=Nc(e,s))),t===1))throw n=Ns,kr(e,0),Yn(e,r),Rt(e,ct()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:gr(e,Tt,kn);break;case 3:if(Yn(e,r),(r&130023424)===r&&(t=Pu+500-ct(),10<t)){if(Mi(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ct(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=tc(gr.bind(null,e,Tt,kn),t);break}gr(e,Tt,kn);break;case 4:if(Yn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-dn(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rv(r/1960))-r,10<r){e.timeoutHandle=tc(gr.bind(null,e,Tt,kn),r);break}gr(e,Tt,kn);break;case 5:gr(e,Tt,kn);break;default:throw Error(K(329))}}}return Rt(e,ct()),e.callbackNode===n?Sm.bind(null,e):null}function Nc(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(kr(e,t).flags|=256),e=Gi(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Sc(t)),e}function Sc(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function ov(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!hn(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~$u,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dn(t),r=1<<n;e[n]=-1,t&=~r}}function pf(e){if(Ue&6)throw Error(K(327));co();var t=Mi(e,0);if(!(t&1))return Rt(e,ct()),null;var n=Gi(e,t);if(e.tag!==0&&n===2){var r=Qa(e);r!==0&&(t=r,n=Nc(e,r))}if(n===1)throw n=Ns,kr(e,0),Yn(e,t),Rt(e,ct()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,Tt,kn),Rt(e,ct()),null}function Mu(e,t){var n=Ue;Ue|=1;try{return e(t)}finally{Ue=n,Ue===0&&(wo=ct()+500,yl&&hr())}}function Mr(e){Gn!==null&&Gn.tag===0&&!(Ue&6)&&co();var t=Ue;Ue|=1;var n=Zt.transition,r=qe;try{if(Zt.transition=null,qe=1,e)return e()}finally{qe=r,Zt.transition=n,Ue=t,!(Ue&6)&&hr()}}function Au(){zt=no.current,et(no)}function kr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ax(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Li();break;case 3:xo(),et(Mt),et(kt),bu();break;case 5:Su(r);break;case 4:xo();break;case 13:et(rt);break;case 19:et(rt);break;case 10:xu(r.type._context);break;case 22:case 23:Au()}n=n.return}if(mt=e,ut=e=sr(e.current,null),vt=zt=t,ft=0,Ns=null,$u=Nl=Pr=0,Tt=rs=null,Nr!==null){for(t=0;t<Nr.length;t++)if(n=Nr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Nr=null}return e}function bm(e,t){do{var n=ut;try{if(yu(),vi.current=Qi,qi){for(var r=ot.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qi=!1}if($r=0,pt=dt=ot=null,ts=!1,xs=0,Tu.current=null,n===null||n.return===null){ft=1,Ns=t,ut=null;break}e:{var s=e,i=n.return,l=n,a=t;if(t=vt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=ef(i);if(h!==null){h.flags&=-257,tf(h,i,l,s,t),h.mode&1&&Jd(s,u,t),t=h,a=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(a),t.updateQueue=v}else w.add(a);break e}else{if(!(t&1)){Jd(s,u,t),Ru();break e}a=Error(K(426))}}else if(tt&&l.mode&1){var S=ef(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),tf(S,i,l,s,t),mu(vo(a,l));break e}}s=a=vo(a,l),ft!==4&&(ft=2),rs===null?rs=[s]:rs.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=im(s,a,t);Qd(s,m);break e;case 1:l=a;var g=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rr===null||!rr.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var y=lm(s,l,t);Qd(s,y);break e}}s=s.return}while(s!==null)}_m(n)}catch(_){t=_,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function Em(){var e=Yi.current;return Yi.current=Qi,e===null?Qi:e}function Ru(){(ft===0||ft===3||ft===2)&&(ft=4),mt===null||!(Pr&268435455)&&!(Nl&268435455)||Yn(mt,vt)}function Gi(e,t){var n=Ue;Ue|=2;var r=Em();(mt!==e||vt!==t)&&(kn=null,kr(e,t));do try{sv();break}catch(o){bm(e,o)}while(!0);if(yu(),Ue=n,Yi.current=r,ut!==null)throw Error(K(261));return mt=null,vt=0,ft}function sv(){for(;ut!==null;)km(ut)}function iv(){for(;ut!==null&&!$y();)km(ut)}function km(e){var t=Im(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?_m(e):ut=t,Tu.current=null}function _m(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Jx(n,t),n!==null){n.flags&=32767,ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,ut=null;return}}else if(n=Zx(n,t,zt),n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);ft===0&&(ft=5)}function gr(e,t,n){var r=qe,o=Zt.transition;try{Zt.transition=null,qe=1,lv(e,t,n,r)}finally{Zt.transition=o,qe=r}return null}function lv(e,t,n,r){do co();while(Gn!==null);if(Ue&6)throw Error(K(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Hy(e,s),e===mt&&(ut=mt=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ni||(ni=!0,jm(Pi,function(){return co(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var i=qe;qe=1;var l=Ue;Ue|=4,Tu.current=null,tv(e,n),wm(n,e),Cx(Ja),Ai=!!Za,Ja=Za=null,e.current=n,nv(n),Py(),Ue=l,qe=i,Zt.transition=s}else e.current=n;if(ni&&(ni=!1,Gn=e,Ki=o),s=e.pendingLanes,s===0&&(rr=null),Ry(n.stateNode),Rt(e,ct()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Xi)throw Xi=!1,e=vc,vc=null,e;return Ki&1&&e.tag!==0&&co(),s=e.pendingLanes,s&1?e===wc?os++:(os=0,wc=e):os=0,hr(),null}function co(){if(Gn!==null){var e=ip(Ki),t=Zt.transition,n=qe;try{if(Zt.transition=null,qe=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,Ki=0,Ue&6)throw Error(K(331));var o=Ue;for(Ue|=4,fe=e.current;fe!==null;){var s=fe,i=s.child;if(fe.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(fe=u;fe!==null;){var f=fe;switch(f.tag){case 0:case 11:case 15:ns(8,f,s)}var d=f.child;if(d!==null)d.return=f,fe=d;else for(;fe!==null;){f=fe;var p=f.sibling,h=f.return;if(ym(f),f===u){fe=null;break}if(p!==null){p.return=h,fe=p;break}fe=h}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}fe=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,fe=i;else e:for(;fe!==null;){if(s=fe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ns(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,fe=m;break e}fe=s.return}}var g=e.current;for(fe=g;fe!==null;){i=fe;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,fe=x;else e:for(i=g;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wl(9,l)}}catch(_){it(l,l.return,_)}if(l===i){fe=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,fe=y;break e}fe=l.return}}if(Ue=o,hr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(fl,e)}catch{}r=!0}return r}finally{qe=n,Zt.transition=t}}return!1}function mf(e,t,n){t=vo(n,t),t=im(e,t,1),e=nr(e,t,1),t=Ct(),e!==null&&(Ms(e,1,t),Rt(e,t))}function it(e,t,n){if(e.tag===3)mf(e,e,n);else for(;t!==null;){if(t.tag===3){mf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){e=vo(n,e),e=lm(t,e,1),t=nr(t,e,1),e=Ct(),t!==null&&(Ms(t,1,e),Rt(t,e));break}}t=t.return}}function av(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&n,mt===e&&(vt&n)===n&&(ft===4||ft===3&&(vt&130023424)===vt&&500>ct()-Pu?kr(e,0):$u|=n),Rt(e,t)}function Cm(e,t){t===0&&(e.mode&1?(t=qs,qs<<=1,!(qs&130023424)&&(qs=4194304)):t=1);var n=Ct();e=Rn(e,t),e!==null&&(Ms(e,t,n),Rt(e,n))}function cv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cm(e,n)}function uv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),Cm(e,n)}var Im;Im=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)$t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $t=!1,Gx(e,t,n);$t=!!(e.flags&131072)}else $t=!1,tt&&t.flags&1048576&&Pp(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ni(e,t),e=t.pendingProps;var o=mo(t,kt.current);ao(t,n),o=ku(null,t,r,e,o,n);var s=_u();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(s=!0,Oi(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,wu(t),o.updater=vl,t.stateNode=o,o._reactInternals=t,ac(t,r,e,n),t=dc(null,t,r,!0,s,n)):(t.tag=0,tt&&s&&hu(t),_t(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ni(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=fv(r),e=rn(r,e),o){case 0:t=uc(null,t,r,e,n);break e;case 1:t=of(null,t,r,e,n);break e;case 11:t=nf(null,t,r,e,n);break e;case 14:t=rf(null,t,r,rn(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),uc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),of(e,t,r,o,n);case 3:e:{if(dm(t),e===null)throw Error(K(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Lp(e,t),Ui(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=vo(Error(K(423)),t),t=sf(e,t,r,n,o);break e}else if(r!==o){o=vo(Error(K(424)),t),t=sf(e,t,r,n,o);break e}else for(Dt=tr(t.stateNode.containerInfo.firstChild),Lt=t,tt=!0,ln=null,n=zp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===o){t=zn(e,t,n);break e}_t(e,t,r,n)}t=t.child}return t;case 5:return Op(t),e===null&&sc(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,ec(r,o)?i=null:s!==null&&ec(r,s)&&(t.flags|=32),um(e,t),_t(e,t,i,n),t.child;case 6:return e===null&&sc(t),null;case 13:return fm(e,t,n);case 4:return Nu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yo(t,null,r,n):_t(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),nf(e,t,r,o,n);case 7:return _t(e,t,t.pendingProps,n),t.child;case 8:return _t(e,t,t.pendingProps.children,n),t.child;case 12:return _t(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,Ge(Vi,r._currentValue),r._currentValue=i,s!==null)if(hn(s.value,i)){if(s.children===o.children&&!Mt.current){t=zn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=$n(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ic(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(K(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ic(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}_t(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ao(t,n),o=en(o),r=r(o),t.flags|=1,_t(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),rf(e,t,r,o,n);case 15:return am(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ni(e,t),t.tag=1,At(r)?(e=!0,Oi(t)):e=!1,ao(t,n),sm(t,r,o),ac(t,r,o,n),dc(null,t,r,!0,e,n);case 19:return hm(e,t,n);case 22:return cm(e,t,n)}throw Error(K(156,t.tag))};function jm(e,t){return np(e,t)}function dv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new dv(e,t,n,r)}function zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fv(e){if(typeof e=="function")return zu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tu)return 11;if(e===nu)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ei(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")zu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case qr:return _r(n.children,o,s,t);case eu:i=8,o|=8;break;case Pa:return e=Kt(12,n,t,o|2),e.elementType=Pa,e.lanes=s,e;case Ma:return e=Kt(13,n,t,o),e.elementType=Ma,e.lanes=s,e;case Aa:return e=Kt(19,n,t,o),e.elementType=Aa,e.lanes=s,e;case Oh:return Sl(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Dh:i=10;break e;case Lh:i=9;break e;case tu:i=11;break e;case nu:i=14;break e;case Bn:i=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Kt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function _r(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function Sl(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=Oh,e.lanes=n,e.stateNode={isHidden:!1},e}function fa(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function ha(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Du(e,t,n,r,o,s,i,l,a){return e=new hv(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Kt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(s),e}function pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Tm(e){if(!e)return cr;e=e._reactInternals;e:{if(Lr(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(At(n))return Tp(e,n,t)}return t}function $m(e,t,n,r,o,s,i,l,a){return e=Du(n,r,!0,e,o,s,i,l,a),e.context=Tm(null),n=e.current,r=Ct(),o=or(n),s=$n(r,o),s.callback=t??null,nr(n,s,o),e.current.lanes=o,Ms(e,o,r),Rt(e,r),e}function bl(e,t,n,r){var o=t.current,s=Ct(),i=or(o);return n=Tm(n),t.context===null?t.context=n:t.pendingContext=n,t=$n(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nr(o,t,i),e!==null&&(fn(e,o,i,s),xi(e,o,i)),i}function Zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lu(e,t){gf(e,t),(e=e.alternate)&&gf(e,t)}function mv(){return null}var Pm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ou(e){this._internalRoot=e}El.prototype.render=Ou.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));bl(e,t,null,null)};El.prototype.unmount=Ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mr(function(){bl(null,e,null,null)}),t[An]=null}};function El(e){this._internalRoot=e}El.prototype.unstable_scheduleHydration=function(e){if(e){var t=cp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qn.length&&t!==0&&t<Qn[n].priority;n++);Qn.splice(n,0,e),n===0&&dp(e)}};function Fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yf(){}function gv(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=Zi(i);s.call(u)}}var i=$m(t,r,e,0,null,!1,!1,"",yf);return e._reactRootContainer=i,e[An]=i.current,hs(e.nodeType===8?e.parentNode:e),Mr(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=Zi(a);l.call(u)}}var a=Du(e,0,!1,null,null,!1,!1,"",yf);return e._reactRootContainer=a,e[An]=a.current,hs(e.nodeType===8?e.parentNode:e),Mr(function(){bl(t,a,n,r)}),a}function _l(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var a=Zi(i);l.call(a)}}bl(t,i,e,o)}else i=gv(n,t,e,o,r);return Zi(i)}lp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wo(t.pendingLanes);n!==0&&(su(t,n|1),Rt(t,ct()),!(Ue&6)&&(wo=ct()+500,hr()))}break;case 13:Mr(function(){var r=Rn(e,1);if(r!==null){var o=Ct();fn(r,e,1,o)}}),Lu(e,1)}};iu=function(e){if(e.tag===13){var t=Rn(e,134217728);if(t!==null){var n=Ct();fn(t,e,134217728,n)}Lu(e,134217728)}};ap=function(e){if(e.tag===13){var t=or(e),n=Rn(e,t);if(n!==null){var r=Ct();fn(n,e,t,r)}Lu(e,t)}};cp=function(){return qe};up=function(e,t){var n=qe;try{return qe=e,t()}finally{qe=n}};Ua=function(e,t,n){switch(t){case"input":if(Da(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=gl(r);if(!o)throw Error(K(90));Hh(r),Da(r,o)}}}break;case"textarea":Bh(e,n);break;case"select":t=n.value,t!=null&&oo(e,!!n.multiple,t,!1)}};Kh=Mu;Gh=Mr;var yv={usingClientEntryPoint:!1,Events:[Rs,Kr,gl,Yh,Xh,Mu]},Do={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xv={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ep(e),e===null?null:e.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||mv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ri.isDisabled&&ri.supportsFiber)try{fl=ri.inject(xv),wn=ri}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yv;Bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fu(t))throw Error(K(200));return pv(e,t,null,n)};Bt.createRoot=function(e,t){if(!Fu(e))throw Error(K(299));var n=!1,r="",o=Pm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Du(e,1,!1,null,null,n,!1,r,o),e[An]=t.current,hs(e.nodeType===8?e.parentNode:e),new Ou(t)};Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=ep(t),e=e===null?null:e.stateNode,e};Bt.flushSync=function(e){return Mr(e)};Bt.hydrate=function(e,t,n){if(!kl(t))throw Error(K(200));return _l(null,e,t,!0,n)};Bt.hydrateRoot=function(e,t,n){if(!Fu(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Pm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=$m(t,null,e,1,n??null,o,!1,s,i),e[An]=t.current,hs(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new El(t)};Bt.render=function(e,t,n){if(!kl(t))throw Error(K(200));return _l(null,e,t,!1,n)};Bt.unmountComponentAtNode=function(e){if(!kl(e))throw Error(K(40));return e._reactRootContainer?(Mr(function(){_l(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};Bt.unstable_batchedUpdates=Mu;Bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kl(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return _l(e,t,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Mm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mm)}catch(e){console.error(e)}}Mm(),Mh.exports=Bt;var vv=Mh.exports,xf=vv;Ta.createRoot=xf.createRoot,Ta.hydrateRoot=xf.hydrateRoot;function Nt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Nt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Am={exports:{}},Rm={},zm={exports:{}},Dm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=j;function wv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nv=typeof Object.is=="function"?Object.is:wv,Sv=No.useState,bv=No.useEffect,Ev=No.useLayoutEffect,kv=No.useDebugValue;function _v(e,t){var n=t(),r=Sv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Ev(function(){o.value=n,o.getSnapshot=t,pa(o)&&s({inst:o})},[e,n,t]),bv(function(){return pa(o)&&s({inst:o}),e(function(){pa(o)&&s({inst:o})})},[e]),kv(n),n}function pa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nv(e,n)}catch{return!0}}function Cv(e,t){return t()}var Iv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cv:_v;Dm.useSyncExternalStore=No.useSyncExternalStore!==void 0?No.useSyncExternalStore:Iv;zm.exports=Dm;var jv=zm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=j,Tv=jv;function $v(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pv=typeof Object.is=="function"?Object.is:$v,Mv=Tv.useSyncExternalStore,Av=Cl.useRef,Rv=Cl.useEffect,zv=Cl.useMemo,Dv=Cl.useDebugValue;Rm.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Av(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=zv(function(){function a(h){if(!u){if(u=!0,f=h,h=r(h),o!==void 0&&i.hasValue){var w=i.value;if(o(w,h))return d=w}return d=h}if(w=d,Pv(f,h))return w;var v=r(h);return o!==void 0&&o(w,v)?(f=h,w):(f=h,d=v)}var u=!1,f,d,p=n===void 0?null:n;return[function(){return a(t())},p===null?void 0:function(){return a(p())}]},[t,n,r,o]);var l=Mv(e,s[0],s[1]);return Rv(function(){i.hasValue=!0,i.value=l},[l]),Dv(l),l};Am.exports=Rm;var Lv=Am.exports;const Lm=Nh(Lv),Ov={},vf=e=>{let t;const n=new Set,r=(f,d)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const h=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(w=>w(t,h))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Ov?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,a);return a},Om=e=>e?vf(e):vf,{useDebugValue:Fv}=V,{useSyncExternalStoreWithSelector:Hv}=Lm,Vv=e=>e;function Fm(e,t=Vv,n){const r=Hv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Fv(r),r}const wf=(e,t)=>{const n=Om(e),r=(o,s=t)=>Fm(n,o,s);return Object.assign(r,n),r},Bv=(e,t)=>e?wf(e,t):wf;function gt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Uv={value:()=>{}};function Il(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ki(n)}function ki(e){this._=e}function Wv(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ki.prototype=Il.prototype={constructor:ki,on:function(e,t){var n=this._,r=Wv(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=qv(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=Nf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Nf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ki(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function qv(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Nf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Uv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var bc="http://www.w3.org/1999/xhtml";const Sf={svg:"http://www.w3.org/2000/svg",xhtml:bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Sf.hasOwnProperty(t)?{space:Sf[t],local:e}:e}function Qv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bc&&t.documentElement.namespaceURI===bc?t.createElement(e):t.createElementNS(n,e)}}function Yv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hm(e){var t=jl(e);return(t.local?Yv:Qv)(t)}function Xv(){}function Hu(e){return e==null?Xv:function(){return this.querySelector(e)}}function Kv(e){typeof e!="function"&&(e=Hu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=new Array(i),a,u,f=0;f<i;++f)(a=s[f])&&(u=e.call(a,a.__data__,f,s))&&("__data__"in a&&(u.__data__=a.__data__),l[f]=u);return new Ft(r,this._parents)}function Gv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Zv(){return[]}function Vm(e){return e==null?Zv:function(){return this.querySelectorAll(e)}}function Jv(e){return function(){return Gv(e.apply(this,arguments))}}function ew(e){typeof e=="function"?e=Jv(e):e=Vm(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],l=i.length,a,u=0;u<l;++u)(a=i[u])&&(r.push(e.call(a,a.__data__,u,i)),o.push(a));return new Ft(r,o)}function Bm(e){return function(){return this.matches(e)}}function Um(e){return function(t){return t.matches(e)}}var tw=Array.prototype.find;function nw(e){return function(){return tw.call(this.children,e)}}function rw(){return this.firstElementChild}function ow(e){return this.select(e==null?rw:nw(typeof e=="function"?e:Um(e)))}var sw=Array.prototype.filter;function iw(){return Array.from(this.children)}function lw(e){return function(){return sw.call(this.children,e)}}function aw(e){return this.selectAll(e==null?iw:lw(typeof e=="function"?e:Um(e)))}function cw(e){typeof e!="function"&&(e=Bm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,u=0;u<i;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new Ft(r,this._parents)}function Wm(e){return new Array(e.length)}function uw(){return new Ft(this._enter||this._groups.map(Wm),this._parents)}function Ji(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ji.prototype={constructor:Ji,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dw(e){return function(){return e}}function fw(e,t,n,r,o,s){for(var i=0,l,a=t.length,u=s.length;i<u;++i)(l=t[i])?(l.__data__=s[i],r[i]=l):n[i]=new Ji(e,s[i]);for(;i<a;++i)(l=t[i])&&(o[i]=l)}function hw(e,t,n,r,o,s,i){var l,a,u=new Map,f=t.length,d=s.length,p=new Array(f),h;for(l=0;l<f;++l)(a=t[l])&&(p[l]=h=i.call(a,a.__data__,l,t)+"",u.has(h)?o[l]=a:u.set(h,a));for(l=0;l<d;++l)h=i.call(e,s[l],l,s)+"",(a=u.get(h))?(r[l]=a,a.__data__=s[l],u.delete(h)):n[l]=new Ji(e,s[l]);for(l=0;l<f;++l)(a=t[l])&&u.get(p[l])===a&&(o[l]=a)}function pw(e){return e.__data__}function mw(e,t){if(!arguments.length)return Array.from(this,pw);var n=t?hw:fw,r=this._parents,o=this._groups;typeof e!="function"&&(e=dw(e));for(var s=o.length,i=new Array(s),l=new Array(s),a=new Array(s),u=0;u<s;++u){var f=r[u],d=o[u],p=d.length,h=gw(e.call(f,f&&f.__data__,u,r)),w=h.length,v=l[u]=new Array(w),S=i[u]=new Array(w),m=a[u]=new Array(p);n(f,d,v,S,m,h,t);for(var g=0,x=0,y,_;g<w;++g)if(y=v[g]){for(g>=x&&(x=g+1);!(_=S[x])&&++x<w;);y._next=_||null}}return i=new Ft(i,r),i._enter=l,i._exit=a,i}function gw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yw(){return new Ft(this._exit||this._groups.map(Wm),this._parents)}function xw(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function vw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),l=new Array(o),a=0;a<i;++a)for(var u=n[a],f=r[a],d=u.length,p=l[a]=new Array(d),h,w=0;w<d;++w)(h=u[w]||f[w])&&(p[w]=h);for(;a<o;++a)l[a]=n[a];return new Ft(l,this._parents)}function ww(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Nw(e){e||(e=Sw);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],l=i.length,a=o[s]=new Array(l),u,f=0;f<l;++f)(u=i[f])&&(a[f]=u);a.sort(t)}return new Ft(o,this._parents).order()}function Sw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ew(){return Array.from(this)}function kw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function _w(){let e=0;for(const t of this)++e;return e}function Cw(){return!this.node()}function Iw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,l;s<i;++s)(l=o[s])&&e.call(l,l.__data__,s,o);return this}function jw(e){return function(){this.removeAttribute(e)}}function Tw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $w(e,t){return function(){this.setAttribute(e,t)}}function Pw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Mw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Aw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rw(e,t){var n=jl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Tw:jw:typeof t=="function"?n.local?Aw:Mw:n.local?Pw:$w)(n,t))}function qm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zw(e){return function(){this.style.removeProperty(e)}}function Dw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Lw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ow(e,t,n){return arguments.length>1?this.each((t==null?zw:typeof t=="function"?Lw:Dw)(e,t,n??"")):So(this.node(),e)}function So(e,t){return e.style.getPropertyValue(t)||qm(e).getComputedStyle(e,null).getPropertyValue(t)}function Fw(e){return function(){delete this[e]}}function Hw(e,t){return function(){this[e]=t}}function Vw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Bw(e,t){return arguments.length>1?this.each((t==null?Fw:typeof t=="function"?Vw:Hw)(e,t)):this.node()[e]}function Qm(e){return e.trim().split(/^|\s+/)}function Vu(e){return e.classList||new Ym(e)}function Ym(e){this._node=e,this._names=Qm(e.getAttribute("class")||"")}Ym.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xm(e,t){for(var n=Vu(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Km(e,t){for(var n=Vu(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Uw(e){return function(){Xm(this,e)}}function Ww(e){return function(){Km(this,e)}}function qw(e,t){return function(){(t.apply(this,arguments)?Xm:Km)(this,e)}}function Qw(e,t){var n=Qm(e+"");if(arguments.length<2){for(var r=Vu(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?qw:t?Uw:Ww)(n,t))}function Yw(){this.textContent=""}function Xw(e){return function(){this.textContent=e}}function Kw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gw(e){return arguments.length?this.each(e==null?Yw:(typeof e=="function"?Kw:Xw)(e)):this.node().textContent}function Zw(){this.innerHTML=""}function Jw(e){return function(){this.innerHTML=e}}function e1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function t1(e){return arguments.length?this.each(e==null?Zw:(typeof e=="function"?e1:Jw)(e)):this.node().innerHTML}function n1(){this.nextSibling&&this.parentNode.appendChild(this)}function r1(){return this.each(n1)}function o1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function s1(){return this.each(o1)}function i1(e){var t=typeof e=="function"?e:Hm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function l1(){return null}function a1(e,t){var n=typeof e=="function"?e:Hm(e),r=t==null?l1:typeof t=="function"?t:Hu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function c1(){var e=this.parentNode;e&&e.removeChild(this)}function u1(){return this.each(c1)}function d1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function f1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function h1(e){return this.select(e?f1:d1)}function p1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function m1(e){return function(t){e.call(this,t,this.__data__)}}function g1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function y1(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function x1(e,t,n){return function(){var r=this.__on,o,s=m1(t);if(r){for(var i=0,l=r.length;i<l;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function v1(e,t,n){var r=g1(e+""),o,s=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,f;a<u;++a)for(o=0,f=l[a];o<s;++o)if((i=r[o]).type===f.type&&i.name===f.name)return f.value}return}for(l=t?x1:y1,o=0;o<s;++o)this.each(l(r[o],t,n));return this}function Gm(e,t,n){var r=qm(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function w1(e,t){return function(){return Gm(this,e,t)}}function N1(e,t){return function(){return Gm(this,e,t.apply(this,arguments))}}function S1(e,t){return this.each((typeof t=="function"?N1:w1)(e,t))}function*b1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var Zm=[null];function Ft(e,t){this._groups=e,this._parents=t}function Ds(){return new Ft([[document.documentElement]],Zm)}function E1(){return this}Ft.prototype=Ds.prototype={constructor:Ft,select:Kv,selectAll:ew,selectChild:ow,selectChildren:aw,filter:cw,data:mw,enter:uw,exit:yw,join:xw,merge:vw,selection:E1,order:ww,sort:Nw,call:bw,nodes:Ew,node:kw,size:_w,empty:Cw,each:Iw,attr:Rw,style:Ow,property:Bw,classed:Qw,text:Gw,html:t1,raise:r1,lower:s1,append:i1,insert:a1,remove:u1,clone:h1,datum:p1,on:v1,dispatch:S1,[Symbol.iterator]:b1};function Qt(e){return typeof e=="string"?new Ft([[document.querySelector(e)]],[document.documentElement]):new Ft([[e]],Zm)}function k1(e){let t;for(;t=e.sourceEvent;)e=t;return e}function sn(e,t){if(e=k1(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const _1={passive:!1},Ss={capture:!0,passive:!1};function ma(e){e.stopImmediatePropagation()}function uo(e){e.preventDefault(),e.stopImmediatePropagation()}function Jm(e){var t=e.document.documentElement,n=Qt(e).on("dragstart.drag",uo,Ss);"onselectstart"in t?n.on("selectstart.drag",uo,Ss):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eg(e,t){var n=e.document.documentElement,r=Qt(e).on("dragstart.drag",null);t&&(r.on("click.drag",uo,Ss),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const oi=e=>()=>e;function Ec(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:l,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Ec.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function C1(e){return!e.ctrlKey&&!e.button}function I1(){return this.parentNode}function j1(e,t){return t??{x:e.x,y:e.y}}function T1(){return navigator.maxTouchPoints||"ontouchstart"in this}function $1(){var e=C1,t=I1,n=j1,r=T1,o={},s=Il("start","drag","end"),i=0,l,a,u,f,d=0;function p(y){y.on("mousedown.drag",h).filter(r).on("touchstart.drag",S).on("touchmove.drag",m,_1).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,_){if(!(f||!e.call(this,y,_))){var b=x(this,t.call(this,y,_),y,_,"mouse");b&&(Qt(y.view).on("mousemove.drag",w,Ss).on("mouseup.drag",v,Ss),Jm(y.view),ma(y),u=!1,l=y.clientX,a=y.clientY,b("start",y))}}function w(y){if(uo(y),!u){var _=y.clientX-l,b=y.clientY-a;u=_*_+b*b>d}o.mouse("drag",y)}function v(y){Qt(y.view).on("mousemove.drag mouseup.drag",null),eg(y.view,u),uo(y),o.mouse("end",y)}function S(y,_){if(e.call(this,y,_)){var b=y.changedTouches,C=t.call(this,y,_),M=b.length,P,E;for(P=0;P<M;++P)(E=x(this,C,y,_,b[P].identifier,b[P]))&&(ma(y),E("start",y,b[P]))}}function m(y){var _=y.changedTouches,b=_.length,C,M;for(C=0;C<b;++C)(M=o[_[C].identifier])&&(uo(y),M("drag",y,_[C]))}function g(y){var _=y.changedTouches,b=_.length,C,M;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),C=0;C<b;++C)(M=o[_[C].identifier])&&(ma(y),M("end",y,_[C]))}function x(y,_,b,C,M,P){var E=s.copy(),R=sn(P||b,_),D,L,N;if((N=n.call(y,new Ec("beforestart",{sourceEvent:b,target:p,identifier:M,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:E}),C))!=null)return D=N.x-R[0]||0,L=N.y-R[1]||0,function $(I,O,T){var k=R,A;switch(I){case"start":o[M]=$,A=i++;break;case"end":delete o[M],--i;case"drag":R=sn(T||O,_),A=i;break}E.call(I,y,new Ec(I,{sourceEvent:O,subject:N,target:p,identifier:M,active:A,x:R[0]+D,y:R[1]+L,dx:R[0]-k[0],dy:R[1]-k[1],dispatch:E}),C)}}return p.filter=function(y){return arguments.length?(e=typeof y=="function"?y:oi(!!y),p):e},p.container=function(y){return arguments.length?(t=typeof y=="function"?y:oi(y),p):t},p.subject=function(y){return arguments.length?(n=typeof y=="function"?y:oi(y),p):n},p.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:oi(!!y),p):r},p.on=function(){var y=s.on.apply(s,arguments);return y===s?p:y},p.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,p):Math.sqrt(d)},p}function Bu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ls(){}var bs=.7,el=1/bs,fo="\\s*([+-]?\\d+)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P1=/^#([0-9a-f]{3,8})$/,M1=new RegExp(`^rgb\\(${fo},${fo},${fo}\\)$`),A1=new RegExp(`^rgb\\(${Sn},${Sn},${Sn}\\)$`),R1=new RegExp(`^rgba\\(${fo},${fo},${fo},${Es}\\)$`),z1=new RegExp(`^rgba\\(${Sn},${Sn},${Sn},${Es}\\)$`),D1=new RegExp(`^hsl\\(${Es},${Sn},${Sn}\\)$`),L1=new RegExp(`^hsla\\(${Es},${Sn},${Sn},${Es}\\)$`),bf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bu(Ls,ks,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ef,formatHex:Ef,formatHex8:O1,formatHsl:F1,formatRgb:kf,toString:kf});function Ef(){return this.rgb().formatHex()}function O1(){return this.rgb().formatHex8()}function F1(){return ng(this).formatHsl()}function kf(){return this.rgb().formatRgb()}function ks(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=P1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_f(t):n===3?new Pt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?si(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?si(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=M1.exec(e))?new Pt(t[1],t[2],t[3],1):(t=A1.exec(e))?new Pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=R1.exec(e))?si(t[1],t[2],t[3],t[4]):(t=z1.exec(e))?si(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=D1.exec(e))?jf(t[1],t[2]/100,t[3]/100,1):(t=L1.exec(e))?jf(t[1],t[2]/100,t[3]/100,t[4]):bf.hasOwnProperty(e)?_f(bf[e]):e==="transparent"?new Pt(NaN,NaN,NaN,0):null}function _f(e){return new Pt(e>>16&255,e>>8&255,e&255,1)}function si(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pt(e,t,n,r)}function H1(e){return e instanceof Ls||(e=ks(e)),e?(e=e.rgb(),new Pt(e.r,e.g,e.b,e.opacity)):new Pt}function kc(e,t,n,r){return arguments.length===1?H1(e):new Pt(e,t,n,r??1)}function Pt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Bu(Pt,kc,tg(Ls,{brighter(e){return e=e==null?el:Math.pow(el,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bs:Math.pow(bs,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pt(Cr(this.r),Cr(this.g),Cr(this.b),tl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cf,formatHex:Cf,formatHex8:V1,formatRgb:If,toString:If}));function Cf(){return`#${br(this.r)}${br(this.g)}${br(this.b)}`}function V1(){return`#${br(this.r)}${br(this.g)}${br(this.b)}${br((isNaN(this.opacity)?1:this.opacity)*255)}`}function If(){const e=tl(this.opacity);return`${e===1?"rgb(":"rgba("}${Cr(this.r)}, ${Cr(this.g)}, ${Cr(this.b)}${e===1?")":`, ${e})`}`}function tl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function br(e){return e=Cr(e),(e<16?"0":"")+e.toString(16)}function jf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new an(e,t,n,r)}function ng(e){if(e instanceof an)return new an(e.h,e.s,e.l,e.opacity);if(e instanceof Ls||(e=ks(e)),!e)return new an;if(e instanceof an)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,l=s-o,a=(s+o)/2;return l?(t===s?i=(n-r)/l+(n<r)*6:n===s?i=(r-t)/l+2:i=(t-n)/l+4,l/=a<.5?s+o:2-s-o,i*=60):l=a>0&&a<1?0:i,new an(i,l,a,e.opacity)}function B1(e,t,n,r){return arguments.length===1?ng(e):new an(e,t,n,r??1)}function an(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Bu(an,B1,tg(Ls,{brighter(e){return e=e==null?el:Math.pow(el,e),new an(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bs:Math.pow(bs,e),new an(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pt(ga(e>=240?e-240:e+120,o,r),ga(e,o,r),ga(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new an(Tf(this.h),ii(this.s),ii(this.l),tl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tl(this.opacity);return`${e===1?"hsl(":"hsla("}${Tf(this.h)}, ${ii(this.s)*100}%, ${ii(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Tf(e){return e=(e||0)%360,e<0?e+360:e}function ii(e){return Math.max(0,Math.min(1,e||0))}function ga(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rg=e=>()=>e;function U1(e,t){return function(n){return e+n*t}}function W1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function q1(e){return(e=+e)==1?og:function(t,n){return n-t?W1(t,n,e):rg(isNaN(t)?n:t)}}function og(e,t){var n=t-e;return n?U1(e,n):rg(isNaN(e)?t:e)}const $f=function e(t){var n=q1(t);function r(o,s){var i=n((o=kc(o)).r,(s=kc(s)).r),l=n(o.g,s.g),a=n(o.b,s.b),u=og(o.opacity,s.opacity);return function(f){return o.r=i(f),o.g=l(f),o.b=a(f),o.opacity=u(f),o+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ya=new RegExp(_c.source,"g");function Q1(e){return function(){return e}}function Y1(e){return function(t){return e(t)+""}}function X1(e,t){var n=_c.lastIndex=ya.lastIndex=0,r,o,s,i=-1,l=[],a=[];for(e=e+"",t=t+"";(r=_c.exec(e))&&(o=ya.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(r=r[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,a.push({i,x:Wn(r,o)})),n=ya.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?a[0]?Y1(a[0].x):Q1(t):(t=a.length,function(u){for(var f=0,d;f<t;++f)l[(d=a[f]).i]=d.x(u);return l.join("")})}var Pf=180/Math.PI,Cc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sg(e,t,n,r,o,s){var i,l,a;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),e*r<t*n&&(e=-e,t=-t,a=-a,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Pf,skewX:Math.atan(a)*Pf,scaleX:i,scaleY:l}}var li;function K1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cc:sg(t.a,t.b,t.c,t.d,t.e,t.f)}function G1(e){return e==null||(li||(li=document.createElementNS("http://www.w3.org/2000/svg","g")),li.setAttribute("transform",e),!(e=li.transform.baseVal.consolidate()))?Cc:(e=e.matrix,sg(e.a,e.b,e.c,e.d,e.e,e.f))}function ig(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function s(u,f,d,p,h,w){if(u!==d||f!==p){var v=h.push("translate(",null,t,null,n);w.push({i:v-4,x:Wn(u,d)},{i:v-2,x:Wn(f,p)})}else(d||p)&&h.push("translate("+d+t+p+n)}function i(u,f,d,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Wn(u,f)})):f&&d.push(o(d)+"rotate("+f+r)}function l(u,f,d,p){u!==f?p.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Wn(u,f)}):f&&d.push(o(d)+"skewX("+f+r)}function a(u,f,d,p,h,w){if(u!==d||f!==p){var v=h.push(o(h)+"scale(",null,",",null,")");w.push({i:v-4,x:Wn(u,d)},{i:v-2,x:Wn(f,p)})}else(d!==1||p!==1)&&h.push(o(h)+"scale("+d+","+p+")")}return function(u,f){var d=[],p=[];return u=e(u),f=e(f),s(u.translateX,u.translateY,f.translateX,f.translateY,d,p),i(u.rotate,f.rotate,d,p),l(u.skewX,f.skewX,d,p),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,p),u=f=null,function(h){for(var w=-1,v=p.length,S;++w<v;)d[(S=p[w]).i]=S.x(h);return d.join("")}}}var Z1=ig(K1,"px, ","px)","deg)"),J1=ig(G1,", ",")",")"),eN=1e-12;function Mf(e){return((e=Math.exp(e))+1/e)/2}function tN(e){return((e=Math.exp(e))-1/e)/2}function nN(e){return((e=Math.exp(2*e))-1)/(e+1)}const rN=function e(t,n,r){function o(s,i){var l=s[0],a=s[1],u=s[2],f=i[0],d=i[1],p=i[2],h=f-l,w=d-a,v=h*h+w*w,S,m;if(v<eN)m=Math.log(p/u)/t,S=function(C){return[l+C*h,a+C*w,u*Math.exp(t*C*m)]};else{var g=Math.sqrt(v),x=(p*p-u*u+r*v)/(2*u*n*g),y=(p*p-u*u-r*v)/(2*p*n*g),_=Math.log(Math.sqrt(x*x+1)-x),b=Math.log(Math.sqrt(y*y+1)-y);m=(b-_)/t,S=function(C){var M=C*m,P=Mf(_),E=u/(n*g)*(P*nN(t*M+_)-tN(_));return[l+E*h,a+E*w,u*P/Mf(t*M+_)]}}return S.duration=m*1e3*t/Math.SQRT2,S}return o.rho=function(s){var i=Math.max(.001,+s),l=i*i,a=l*l;return e(i,l,a)},o}(Math.SQRT2,2,4);var bo=0,Qo=0,Lo=0,lg=1e3,nl,Yo,rl=0,Ar=0,Tl=0,_s=typeof performance=="object"&&performance.now?performance:Date,ag=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Uu(){return Ar||(ag(oN),Ar=_s.now()+Tl)}function oN(){Ar=0}function ol(){this._call=this._time=this._next=null}ol.prototype=cg.prototype={constructor:ol,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Uu():+n)+(t==null?0:+t),!this._next&&Yo!==this&&(Yo?Yo._next=this:nl=this,Yo=this),this._call=e,this._time=n,Ic()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ic())}};function cg(e,t,n){var r=new ol;return r.restart(e,t,n),r}function sN(){Uu(),++bo;for(var e=nl,t;e;)(t=Ar-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bo}function Af(){Ar=(rl=_s.now())+Tl,bo=Qo=0;try{sN()}finally{bo=0,lN(),Ar=0}}function iN(){var e=_s.now(),t=e-rl;t>lg&&(Tl-=t,rl=e)}function lN(){for(var e,t=nl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nl=n);Yo=e,Ic(r)}function Ic(e){if(!bo){Qo&&(Qo=clearTimeout(Qo));var t=e-Ar;t>24?(e<1/0&&(Qo=setTimeout(Af,e-_s.now()-Tl)),Lo&&(Lo=clearInterval(Lo))):(Lo||(rl=_s.now(),Lo=setInterval(iN,lg)),bo=1,ag(Af))}}function Rf(e,t,n){var r=new ol;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var aN=Il("start","end","cancel","interrupt"),cN=[],ug=0,zf=1,jc=2,_i=3,Df=4,Tc=5,Ci=6;function $l(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;uN(e,n,{name:t,index:r,group:o,on:aN,tween:cN,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ug})}function Wu(e,t){var n=pn(e,t);if(n.state>ug)throw new Error("too late; already scheduled");return n}function bn(e,t){var n=pn(e,t);if(n.state>_i)throw new Error("too late; already running");return n}function pn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uN(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=cg(s,0,n.time);function s(u){n.state=zf,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var f,d,p,h;if(n.state!==zf)return a();for(f in r)if(h=r[f],h.name===n.name){if(h.state===_i)return Rf(i);h.state===Df?(h.state=Ci,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[f]):+f<t&&(h.state=Ci,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[f])}if(Rf(function(){n.state===_i&&(n.state=Df,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=jc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jc){for(n.state=_i,o=new Array(p=n.tween.length),f=0,d=-1;f<p;++f)(h=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Tc,1),d=-1,p=o.length;++d<p;)o[d].call(e,f);n.state===Tc&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Ci,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ii(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>jc&&r.state<Tc,r.state=Ci,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function dN(e){return this.each(function(){Ii(this,e)})}function fN(e,t){var n,r;return function(){var o=bn(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function hN(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=bn(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var l={name:t,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===t){o[a]=l;break}a===u&&o.push(l)}s.tween=o}}function pN(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pn(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?fN:hN)(n,e,t))}function qu(e,t,n){var r=e._id;return e.each(function(){var o=bn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return pn(o,r).value[t]}}function dg(e,t){var n;return(typeof t=="number"?Wn:t instanceof ks?$f:(n=ks(t))?(t=n,$f):X1)(e,t)}function mN(e){return function(){this.removeAttribute(e)}}function gN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yN(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function xN(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function vN(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function wN(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function NN(e,t){var n=jl(e),r=n==="transform"?J1:dg;return this.attrTween(e,typeof t=="function"?(n.local?wN:vN)(n,r,qu(this,"attr."+e,t)):t==null?(n.local?gN:mN)(n):(n.local?xN:yN)(n,r,t))}function SN(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bN(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function EN(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&bN(e,s)),n}return o._value=t,o}function kN(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&SN(e,s)),n}return o._value=t,o}function _N(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=jl(e);return this.tween(n,(r.local?EN:kN)(r,t))}function CN(e,t){return function(){Wu(this,e).delay=+t.apply(this,arguments)}}function IN(e,t){return t=+t,function(){Wu(this,e).delay=t}}function jN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?CN:IN)(t,e)):pn(this.node(),t).delay}function TN(e,t){return function(){bn(this,e).duration=+t.apply(this,arguments)}}function $N(e,t){return t=+t,function(){bn(this,e).duration=t}}function PN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?TN:$N)(t,e)):pn(this.node(),t).duration}function MN(e,t){if(typeof t!="function")throw new Error;return function(){bn(this,e).ease=t}}function AN(e){var t=this._id;return arguments.length?this.each(MN(t,e)):pn(this.node(),t).ease}function RN(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;bn(this,e).ease=n}}function zN(e){if(typeof e!="function")throw new Error;return this.each(RN(this._id,e))}function DN(e){typeof e!="function"&&(e=Bm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,u=0;u<i;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new Dn(r,this._parents,this._name,this._id)}function LN(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),l=0;l<s;++l)for(var a=t[l],u=n[l],f=a.length,d=i[l]=new Array(f),p,h=0;h<f;++h)(p=a[h]||u[h])&&(d[h]=p);for(;l<r;++l)i[l]=t[l];return new Dn(i,this._parents,this._name,this._id)}function ON(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function FN(e,t,n){var r,o,s=ON(t)?Wu:bn;return function(){var i=s(this,e),l=i.on;l!==r&&(o=(r=l).copy()).on(t,n),i.on=o}}function HN(e,t){var n=this._id;return arguments.length<2?pn(this.node(),n).on.on(e):this.each(FN(n,e,t))}function VN(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function BN(){return this.on("end.remove",VN(this._id))}function UN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hu(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var l=r[i],a=l.length,u=s[i]=new Array(a),f,d,p=0;p<a;++p)(f=l[p])&&(d=e.call(f,f.__data__,p,l))&&("__data__"in f&&(d.__data__=f.__data__),u[p]=d,$l(u[p],t,n,p,u,pn(f,n)));return new Dn(s,this._parents,t,n)}function WN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Vm(e));for(var r=this._groups,o=r.length,s=[],i=[],l=0;l<o;++l)for(var a=r[l],u=a.length,f,d=0;d<u;++d)if(f=a[d]){for(var p=e.call(f,f.__data__,d,a),h,w=pn(f,n),v=0,S=p.length;v<S;++v)(h=p[v])&&$l(h,t,n,v,p,w);s.push(p),i.push(f)}return new Dn(s,i,t,n)}var qN=Ds.prototype.constructor;function QN(){return new qN(this._groups,this._parents)}function YN(e,t){var n,r,o;return function(){var s=So(this,e),i=(this.style.removeProperty(e),So(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function fg(e){return function(){this.style.removeProperty(e)}}function XN(e,t,n){var r,o=n+"",s;return function(){var i=So(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function KN(e,t,n){var r,o,s;return function(){var i=So(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),So(this,e))),i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l))}}function GN(e,t){var n,r,o,s="style."+t,i="end."+s,l;return function(){var a=bn(this,e),u=a.on,f=a.value[s]==null?l||(l=fg(t)):void 0;(u!==n||o!==f)&&(r=(n=u).copy()).on(i,o=f),a.on=r}}function ZN(e,t,n){var r=(e+="")=="transform"?Z1:dg;return t==null?this.styleTween(e,YN(e,r)).on("end.style."+e,fg(e)):typeof t=="function"?this.styleTween(e,KN(e,r,qu(this,"style."+e,t))).each(GN(this._id,e)):this.styleTween(e,XN(e,r,t),n).on("end.style."+e,null)}function JN(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function e2(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&JN(e,i,n)),r}return s._value=t,s}function t2(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,e2(e,t,n??""))}function n2(e){return function(){this.textContent=e}}function r2(e){return function(){var t=e(this);this.textContent=t??""}}function o2(e){return this.tween("text",typeof e=="function"?r2(qu(this,"text",e)):n2(e==null?"":e+""))}function s2(e){return function(t){this.textContent=e.call(this,t)}}function i2(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&s2(o)),t}return r._value=e,r}function l2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i2(e))}function a2(){for(var e=this._name,t=this._id,n=hg(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,u=0;u<l;++u)if(a=i[u]){var f=pn(a,t);$l(a,e,n,u,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Dn(r,this._parents,e,n)}function c2(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var l={value:i},a={value:function(){--o===0&&s()}};n.each(function(){var u=bn(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),u.on=t}),o===0&&s()})}var u2=0;function Dn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function hg(){return++u2}var En=Ds.prototype;Dn.prototype={constructor:Dn,select:UN,selectAll:WN,selectChild:En.selectChild,selectChildren:En.selectChildren,filter:DN,merge:LN,selection:QN,transition:a2,call:En.call,nodes:En.nodes,node:En.node,size:En.size,empty:En.empty,each:En.each,on:HN,attr:NN,attrTween:_N,style:ZN,styleTween:t2,text:o2,textTween:l2,remove:BN,tween:pN,delay:jN,duration:PN,ease:AN,easeVarying:zN,end:c2,[Symbol.iterator]:En[Symbol.iterator]};function d2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var f2={time:null,delay:0,duration:250,ease:d2};function h2(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function p2(e){var t,n;e instanceof Dn?(t=e._id,e=e._name):(t=hg(),(n=f2).time=Uu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,u=0;u<l;++u)(a=i[u])&&$l(a,e,t,u,i,n||h2(a,t));return new Dn(r,this._parents,e,t)}Ds.prototype.interrupt=dN;Ds.prototype.transition=p2;const ai=e=>()=>e;function m2(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function jn(e,t,n){this.k=e,this.x=t,this.y=n}jn.prototype={constructor:jn,scale:function(e){return e===1?this:new jn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new jn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pn=new jn(1,0,0);jn.prototype;function xa(e){e.stopImmediatePropagation()}function Oo(e){e.preventDefault(),e.stopImmediatePropagation()}function g2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function y2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Lf(){return this.__zoom||Pn}function x2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function v2(){return navigator.maxTouchPoints||"ontouchstart"in this}function w2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function pg(){var e=g2,t=y2,n=w2,r=x2,o=v2,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,a=rN,u=Il("start","zoom","end"),f,d,p,h=500,w=150,v=0,S=10;function m(N){N.property("__zoom",Lf).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",E).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(N,$,I,O){var T=N.selection?N.selection():N;T.property("__zoom",Lf),N!==T?_(N,$,I,O):T.interrupt().each(function(){b(this,arguments).event(O).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},m.scaleBy=function(N,$,I,O){m.scaleTo(N,function(){var T=this.__zoom.k,k=typeof $=="function"?$.apply(this,arguments):$;return T*k},I,O)},m.scaleTo=function(N,$,I,O){m.transform(N,function(){var T=t.apply(this,arguments),k=this.__zoom,A=I==null?y(T):typeof I=="function"?I.apply(this,arguments):I,B=k.invert(A),z=typeof $=="function"?$.apply(this,arguments):$;return n(x(g(k,z),A,B),T,i)},I,O)},m.translateBy=function(N,$,I,O){m.transform(N,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),i)},null,O)},m.translateTo=function(N,$,I,O,T){m.transform(N,function(){var k=t.apply(this,arguments),A=this.__zoom,B=O==null?y(k):typeof O=="function"?O.apply(this,arguments):O;return n(Pn.translate(B[0],B[1]).scale(A.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof I=="function"?-I.apply(this,arguments):-I),k,i)},O,T)};function g(N,$){return $=Math.max(s[0],Math.min(s[1],$)),$===N.k?N:new jn($,N.x,N.y)}function x(N,$,I){var O=$[0]-I[0]*N.k,T=$[1]-I[1]*N.k;return O===N.x&&T===N.y?N:new jn(N.k,O,T)}function y(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function _(N,$,I,O){N.on("start.zoom",function(){b(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(O).end()}).tween("zoom",function(){var T=this,k=arguments,A=b(T,k).event(O),B=t.apply(T,k),z=I==null?y(B):typeof I=="function"?I.apply(T,k):I,W=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),U=T.__zoom,q=typeof $=="function"?$.apply(T,k):$,X=a(U.invert(z).concat(W/U.k),q.invert(z).concat(W/q.k));return function(re){if(re===1)re=q;else{var be=X(re),de=W/be[2];re=new jn(de,z[0]-be[0]*de,z[1]-be[1]*de)}A.zoom(null,re)}})}function b(N,$,I){return!I&&N.__zooming||new C(N,$)}function C(N,$){this.that=N,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,$),this.taps=0}C.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,$){return this.mouse&&N!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var $=Qt(this.that).datum();u.call(N,this.that,new m2(N,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),$)}};function M(N,...$){if(!e.apply(this,arguments))return;var I=b(this,$).event(N),O=this.__zoom,T=Math.max(s[0],Math.min(s[1],O.k*Math.pow(2,r.apply(this,arguments)))),k=sn(N);if(I.wheel)(I.mouse[0][0]!==k[0]||I.mouse[0][1]!==k[1])&&(I.mouse[1]=O.invert(I.mouse[0]=k)),clearTimeout(I.wheel);else{if(O.k===T)return;I.mouse=[k,O.invert(k)],Ii(this),I.start()}Oo(N),I.wheel=setTimeout(A,w),I.zoom("mouse",n(x(g(O,T),I.mouse[0],I.mouse[1]),I.extent,i));function A(){I.wheel=null,I.end()}}function P(N,...$){if(p||!e.apply(this,arguments))return;var I=N.currentTarget,O=b(this,$,!0).event(N),T=Qt(N.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",W,!0),k=sn(N,I),A=N.clientX,B=N.clientY;Jm(N.view),xa(N),O.mouse=[k,this.__zoom.invert(k)],Ii(this),O.start();function z(U){if(Oo(U),!O.moved){var q=U.clientX-A,X=U.clientY-B;O.moved=q*q+X*X>v}O.event(U).zoom("mouse",n(x(O.that.__zoom,O.mouse[0]=sn(U,I),O.mouse[1]),O.extent,i))}function W(U){T.on("mousemove.zoom mouseup.zoom",null),eg(U.view,O.moved),Oo(U),O.event(U).end()}}function E(N,...$){if(e.apply(this,arguments)){var I=this.__zoom,O=sn(N.changedTouches?N.changedTouches[0]:N,this),T=I.invert(O),k=I.k*(N.shiftKey?.5:2),A=n(x(g(I,k),O,T),t.apply(this,$),i);Oo(N),l>0?Qt(this).transition().duration(l).call(_,A,O,N):Qt(this).call(m.transform,A,O,N)}}function R(N,...$){if(e.apply(this,arguments)){var I=N.touches,O=I.length,T=b(this,$,N.changedTouches.length===O).event(N),k,A,B,z;for(xa(N),A=0;A<O;++A)B=I[A],z=sn(B,this),z=[z,this.__zoom.invert(z),B.identifier],T.touch0?!T.touch1&&T.touch0[2]!==z[2]&&(T.touch1=z,T.taps=0):(T.touch0=z,k=!0,T.taps=1+!!f);f&&(f=clearTimeout(f)),k&&(T.taps<2&&(d=z[0],f=setTimeout(function(){f=null},h)),Ii(this),T.start())}}function D(N,...$){if(this.__zooming){var I=b(this,$).event(N),O=N.changedTouches,T=O.length,k,A,B,z;for(Oo(N),k=0;k<T;++k)A=O[k],B=sn(A,this),I.touch0&&I.touch0[2]===A.identifier?I.touch0[0]=B:I.touch1&&I.touch1[2]===A.identifier&&(I.touch1[0]=B);if(A=I.that.__zoom,I.touch1){var W=I.touch0[0],U=I.touch0[1],q=I.touch1[0],X=I.touch1[1],re=(re=q[0]-W[0])*re+(re=q[1]-W[1])*re,be=(be=X[0]-U[0])*be+(be=X[1]-U[1])*be;A=g(A,Math.sqrt(re/be)),B=[(W[0]+q[0])/2,(W[1]+q[1])/2],z=[(U[0]+X[0])/2,(U[1]+X[1])/2]}else if(I.touch0)B=I.touch0[0],z=I.touch0[1];else return;I.zoom("touch",n(x(A,B,z),I.extent,i))}}function L(N,...$){if(this.__zooming){var I=b(this,$).event(N),O=N.changedTouches,T=O.length,k,A;for(xa(N),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),k=0;k<T;++k)A=O[k],I.touch0&&I.touch0[2]===A.identifier?delete I.touch0:I.touch1&&I.touch1[2]===A.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(A=sn(A,this),Math.hypot(d[0]-A[0],d[1]-A[1])<S)){var B=Qt(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return m.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:ai(+N),m):r},m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:ai(!!N),m):e},m.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:ai(!!N),m):o},m.extent=function(N){return arguments.length?(t=typeof N=="function"?N:ai([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),m):t},m.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],m):[s[0],s[1]]},m.translateExtent=function(N){return arguments.length?(i[0][0]=+N[0][0],i[1][0]=+N[1][0],i[0][1]=+N[0][1],i[1][1]=+N[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(N){return arguments.length?(n=N,m):n},m.duration=function(N){return arguments.length?(l=+N,m):l},m.interpolate=function(N){return arguments.length?(a=N,m):a},m.on=function(){var N=u.on.apply(u,arguments);return N===u?m:N},m.clickDistance=function(N){return arguments.length?(v=(N=+N)*N,m):Math.sqrt(v)},m.tapDistance=function(N){return arguments.length?(S=+N,m):S},m}const Pl=j.createContext(null),N2=Pl.Provider,Ln={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},mg=Ln.error001();function Ze(e,t){const n=j.useContext(Pl);if(n===null)throw new Error(mg);return Fm(n,e,t)}const ht=()=>{const e=j.useContext(Pl);if(e===null)throw new Error(mg);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},S2=e=>e.userSelectionActive?"none":"all";function Ml({position:e,children:t,className:n,style:r,...o}){const s=Ze(S2),i=`${e}`.split("-");return V.createElement("div",{className:Nt(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function b2({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:V.createElement(Ml,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const E2=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:a,className:u,...f})=>{const d=j.useRef(null),[p,h]=j.useState({x:0,y:0,width:0,height:0}),w=Nt(["react-flow__edge-textwrapper",u]);return j.useEffect(()=>{if(d.current){const v=d.current.getBBox();h({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:V.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:w,visibility:p.width?"visible":"hidden",...f},o&&V.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),V.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:d,style:r},n),a)};var k2=j.memo(E2);const Qu=e=>({width:e.offsetWidth,height:e.offsetHeight}),Eo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Yu=(e={x:0,y:0},t)=>({x:Eo(e.x,t[0][0],t[1][0]),y:Eo(e.y,t[0][1],t[1][1])}),Of=(e,t,n)=>e<t?Eo(Math.abs(e-t),1,50)/50:e>n?-Eo(Math.abs(e-n),1,50)/50:0,gg=(e,t)=>{const n=Of(e.x,35,t.width-35)*20,r=Of(e.y,35,t.height-35)*20;return[n,r]},yg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},xg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Cs=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),vg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ff=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),_2=(e,t)=>vg(xg(Cs(e),Cs(t))),$c=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},C2=e=>Gt(e.width)&&Gt(e.height)&&Gt(e.x)&&Gt(e.y),Gt=e=>!isNaN(e)&&isFinite(e),lt=Symbol.for("internals"),wg=["Enter"," ","Escape"],I2=(e,t)=>{},j2=e=>"nativeEvent"in e;function Pc(e){var o,s;const t=j2(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Ng=e=>"clientX"in e,ir=(e,t)=>{var s,i;const n=Ng(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},sl=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Os=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,interactionWidth:h=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:p}),h&&V.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&Gt(n)&&Gt(r)?V.createElement(k2,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:u}):null);Os.displayName="BaseEdge";function Fo(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function Sg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[s,l,o,i]}function bg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:l}){const a=e*.125+o*.375+i*.375+n*.125,u=t*.125+s*.375+l*.375+r*.125,f=Math.abs(a-e),d=Math.abs(u-t);return[a,u,f,d]}var ur;(function(e){e.Strict="strict",e.Loose="loose"})(ur||(ur={}));var Er;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Er||(Er={}));var Is;(function(e){e.Partial="partial",e.Full="full"})(Is||(Is={}));var Xn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xn||(Xn={}));var il;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(il||(il={}));var xe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(xe||(xe={}));function Hf({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===xe.Left||e===xe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Eg({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:o,targetPosition:s=xe.Top}){const[i,l]=Hf({pos:n,x1:e,y1:t,x2:r,y2:o}),[a,u]=Hf({pos:s,x1:r,y1:o,x2:e,y2:t}),[f,d,p,h]=bg({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:a,targetControlY:u});return[`M${e},${t} C${i},${l} ${a},${u} ${r},${o}`,f,d,p,h]}const Xu=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=xe.Bottom,targetPosition:s=xe.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:w,interactionWidth:v})=>{const[S,m,g]=Eg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return V.createElement(Os,{path:S,labelX:m,labelY:g,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:w,interactionWidth:v})});Xu.displayName="SimpleBezierEdge";const Vf={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},T2=({source:e,sourcePosition:t=xe.Bottom,target:n})=>t===xe.Left||t===xe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Bf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function $2({source:e,sourcePosition:t=xe.Bottom,target:n,targetPosition:r=xe.Top,center:o,offset:s}){const i=Vf[t],l=Vf[r],a={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},f=T2({source:a,sourcePosition:t,target:u}),d=f.x!==0?"x":"y",p=f[d];let h=[],w,v;const S={x:0,y:0},m={x:0,y:0},[g,x,y,_]=Sg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*l[d]===-1){w=o.x??g,v=o.y??x;const C=[{x:w,y:a.y},{x:w,y:u.y}],M=[{x:a.x,y:v},{x:u.x,y:v}];i[d]===p?h=d==="x"?C:M:h=d==="x"?M:C}else{const C=[{x:a.x,y:u.y}],M=[{x:u.x,y:a.y}];if(d==="x"?h=i.x===p?M:C:h=i.y===p?C:M,t===r){const L=Math.abs(e[d]-n[d]);if(L<=s){const N=Math.min(s-1,s-L);i[d]===p?S[d]=(a[d]>e[d]?-1:1)*N:m[d]=(u[d]>n[d]?-1:1)*N}}if(t!==r){const L=d==="x"?"y":"x",N=i[d]===l[L],$=a[L]>u[L],I=a[L]<u[L];(i[d]===1&&(!N&&$||N&&I)||i[d]!==1&&(!N&&I||N&&$))&&(h=d==="x"?C:M)}const P={x:a.x+S.x,y:a.y+S.y},E={x:u.x+m.x,y:u.y+m.y},R=Math.max(Math.abs(P.x-h[0].x),Math.abs(E.x-h[0].x)),D=Math.max(Math.abs(P.y-h[0].y),Math.abs(E.y-h[0].y));R>=D?(w=(P.x+E.x)/2,v=h[0].y):(w=h[0].x,v=(P.y+E.y)/2)}return[[e,{x:a.x+S.x,y:a.y+S.y},...h,{x:u.x+m.x,y:u.y+m.y},n],w,v,y,_]}function P2(e,t,n,r){const o=Math.min(Bf(e,t)/2,Bf(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${s+o*u},${i}Q ${s},${i} ${s},${i+o*f}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*l},${i}`}function Mc({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:o,targetPosition:s=xe.Top,borderRadius:i=5,centerX:l,centerY:a,offset:u=20}){const[f,d,p,h,w]=$2({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:l,y:a},offset:u});return[f.reduce((S,m,g)=>{let x="";return g>0&&g<f.length-1?x=P2(f[g-1],m,f[g+1],i):x=`${g===0?"M":"L"}${m.x} ${m.y}`,S+=x,S},""),d,p,h,w]}const Al=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:u,style:f,sourcePosition:d=xe.Bottom,targetPosition:p=xe.Top,markerEnd:h,markerStart:w,pathOptions:v,interactionWidth:S})=>{const[m,g,x]=Mc({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:p,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return V.createElement(Os,{path:m,labelX:g,labelY:x,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:u,style:f,markerEnd:h,markerStart:w,interactionWidth:S})});Al.displayName="SmoothStepEdge";const Ku=j.memo(e=>{var t;return V.createElement(Al,{...e,pathOptions:j.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ku.displayName="StepEdge";function M2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,l]=Sg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,l]}const Gu=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,interactionWidth:h})=>{const[w,v,S]=M2({sourceX:e,sourceY:t,targetX:n,targetY:r});return V.createElement(Os,{path:w,labelX:v,labelY:S,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,interactionWidth:h})});Gu.displayName="StraightEdge";function ci(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Uf({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case xe.Left:return[t-ci(t-r,s),n];case xe.Right:return[t+ci(r-t,s),n];case xe.Top:return[t,n-ci(n-o,s)];case xe.Bottom:return[t,n+ci(o-n,s)]}}function kg({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:o,targetPosition:s=xe.Top,curvature:i=.25}){const[l,a]=Uf({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[u,f]=Uf({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[d,p,h,w]=bg({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${e},${t} C${l},${a} ${u},${f} ${r},${o}`,d,p,h,w]}const ll=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=xe.Bottom,targetPosition:s=xe.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:w,pathOptions:v,interactionWidth:S})=>{const[m,g,x]=kg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:v==null?void 0:v.curvature});return V.createElement(Os,{path:m,labelX:g,labelY:x,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:w,interactionWidth:S})});ll.displayName="BezierEdge";const Zu=j.createContext(null),A2=Zu.Provider;Zu.Consumer;const R2=()=>j.useContext(Zu),z2=e=>"id"in e&&"source"in e&&"target"in e,D2=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Ac=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,L2=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),O2=(e,t)=>{if(!e.source||!e.target)return t;let n;return z2(e)?n={...e}:n={...e,id:D2(e)},L2(n,t)?t:t.concat(n)},Rc=({x:e,y:t},[n,r,o],s,[i,l])=>{const a={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(a.x/i),y:l*Math.round(a.y/l)}:a},_g=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Ir=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Rl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=Ir(o,t).positionAbsolute;return xg(r,Cs({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return vg(n)},Cg=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const a={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(f=>{const{width:d,height:p,selectable:h=!0,hidden:w=!1}=f;if(i&&!h||w)return!1;const{positionAbsolute:v}=Ir(f,l),S={x:v.x,y:v.y,width:d||0,height:p||0},m=$c(a,S),g=typeof d>"u"||typeof p>"u"||d===null||p===null,x=s&&m>0,y=(d||0)*(p||0);(g||x||m>=y||f.dragging)&&u.push(f)}),u},Ig=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},jg=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),l=n/(e.height*(1+s)),a=Math.min(i,l),u=Eo(a,r,o),f=e.x+e.width/2,d=e.y+e.height/2,p=t/2-f*u,h=n/2-d*u;return{x:p,y:h,zoom:u}},yr=(e,t=0)=>e.transition().duration(t);function Wf(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,l;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),o},[])}function F2(e,t,n,r,o,s){const{x:i,y:l}=ir(e),u=t.elementsFromPoint(i,l).find(w=>w.classList.contains("react-flow__handle"));if(u){const w=u.getAttribute("data-nodeid");if(w){const v=Ju(void 0,u),S=u.getAttribute("data-handleid"),m=s({nodeId:w,id:S,type:v});if(m){const g=o.find(x=>x.nodeId===w&&x.type===v&&x.id===S);return{handle:{id:S,type:v,nodeId:w,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:m}}}}let f=[],d=1/0;if(o.forEach(w=>{const v=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(v<=r){const S=s(w);v<=d&&(v<d?f=[{handle:w,validHandleResult:S}]:v===d&&f.push({handle:w,validHandleResult:S}),d=v)}}),!f.length)return{handle:null,validHandleResult:Tg()};if(f.length===1)return f[0];const p=f.some(({validHandleResult:w})=>w.isValid),h=f.some(({handle:w})=>w.type==="target");return f.find(({handle:w,validHandleResult:v})=>h?w.type==="target":p?v.isValid:!0)||f[0]}const H2={source:null,target:null,sourceHandle:null,targetHandle:null},Tg=()=>({handleDomNode:null,isValid:!1,connection:H2,endHandle:null});function $g(e,t,n,r,o,s,i){const l=o==="target",a=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Tg(),handleDomNode:a};if(a){const f=Ju(void 0,a),d=a.getAttribute("data-nodeid"),p=a.getAttribute("data-handleid"),h=a.classList.contains("connectable"),w=a.classList.contains("connectableend"),v={source:l?d:n,sourceHandle:l?p:r,target:l?n:d,targetHandle:l?r:p};u.connection=v,h&&w&&(t===ur.Strict?l&&f==="source"||!l&&f==="target":d!==n||p!==r)&&(u.endHandle={nodeId:d,handleId:p,type:f},u.isValid=s(v))}return u}function V2({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[lt]){const{handleBounds:i}=s[lt];let l=[],a=[];i&&(l=Wf(s,i,"source",`${t}-${n}-${r}`),a=Wf(s,i,"target",`${t}-${n}-${r}`)),o.push(...l,...a)}return o},[])}function Ju(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function va(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function B2(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Pg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:a,onReconnectEnd:u}){const f=yg(e.target),{connectionMode:d,domNode:p,autoPanOnConnect:h,connectionRadius:w,onConnectStart:v,panBy:S,getNodes:m,cancelConnection:g}=s();let x=0,y;const{x:_,y:b}=ir(e),C=f==null?void 0:f.elementFromPoint(_,b),M=Ju(a,C),P=p==null?void 0:p.getBoundingClientRect();if(!P||!M)return;let E,R=ir(e,P),D=!1,L=null,N=!1,$=null;const I=V2({nodes:m(),nodeId:n,handleId:t,handleType:M}),O=()=>{if(!h)return;const[A,B]=gg(R,P);S({x:A,y:B}),x=requestAnimationFrame(O)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:M});function T(A){const{transform:B}=s();R=ir(A,P);const{handle:z,validHandleResult:W}=F2(A,f,Rc(R,B,!1,[1,1]),w,I,U=>$g(U,d,n,t,o?"target":"source",l,f));if(y=z,D||(O(),D=!0),$=W.handleDomNode,L=W.connection,N=W.isValid,i({connectionPosition:y&&N?_g({x:y.x,y:y.y},B):R,connectionStatus:B2(!!y,N),connectionEndHandle:W.endHandle}),!y&&!N&&!$)return va(E);L.source!==L.target&&$&&(va(E),E=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",N),$.classList.toggle("react-flow__handle-valid",N))}function k(A){var B,z;(y||$)&&L&&N&&(r==null||r(L)),(z=(B=s()).onConnectEnd)==null||z.call(B,A),a&&(u==null||u(A)),va(E),g(),cancelAnimationFrame(x),D=!1,N=!1,L=null,$=null,f.removeEventListener("mousemove",T),f.removeEventListener("mouseup",k),f.removeEventListener("touchmove",T),f.removeEventListener("touchend",k)}f.addEventListener("mousemove",T),f.addEventListener("mouseup",k),f.addEventListener("touchmove",T),f.addEventListener("touchend",k)}const qf=()=>!0,U2=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),W2=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Mg=j.forwardRef(({type:e="source",position:t=xe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:a,className:u,onMouseDown:f,onTouchStart:d,...p},h)=>{var P,E;const w=i||null,v=e==="target",S=ht(),m=R2(),{connectOnClick:g,noPanClassName:x}=Ze(U2,gt),{connecting:y,clickConnecting:_}=Ze(W2(m,w,e),gt);m||(E=(P=S.getState()).onError)==null||E.call(P,"010",Ln.error010());const b=R=>{const{defaultEdgeOptions:D,onConnect:L,hasDefaultEdges:N}=S.getState(),$={...D,...R};if(N){const{edges:I,setEdges:O}=S.getState();O(O2($,I))}L==null||L($),l==null||l($)},C=R=>{if(!m)return;const D=Ng(R);o&&(D&&R.button===0||!D)&&Pg({event:R,handleId:w,nodeId:m,onConnect:b,isTarget:v,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||qf}),D?f==null||f(R):d==null||d(R)},M=R=>{const{onClickConnectStart:D,onClickConnectEnd:L,connectionClickStartHandle:N,connectionMode:$,isValidConnection:I}=S.getState();if(!m||!N&&!o)return;if(!N){D==null||D(R,{nodeId:m,handleId:w,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:w}});return}const O=yg(R.target),T=n||I||qf,{connection:k,isValid:A}=$g({nodeId:m,id:w,type:e},$,N.nodeId,N.handleId||null,N.type,T,O);A&&b(k),L==null||L(R),S.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":w,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${w}-${e}`,className:Nt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,u,{source:!v,target:v,connectable:r,connectablestart:o,connectableend:s,connecting:_,connectionindicator:r&&(o&&!y||s&&y)}]),onMouseDown:C,onTouchStart:C,onClick:g?M:void 0,ref:h,...p},a)});Mg.displayName="Handle";var Yt=j.memo(Mg);const Ag=({data:e,isConnectable:t,targetPosition:n=xe.Top,sourcePosition:r=xe.Bottom})=>V.createElement(V.Fragment,null,V.createElement(Yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,V.createElement(Yt,{type:"source",position:r,isConnectable:t}));Ag.displayName="DefaultNode";var zc=j.memo(Ag);const Rg=({data:e,isConnectable:t,sourcePosition:n=xe.Bottom})=>V.createElement(V.Fragment,null,e==null?void 0:e.label,V.createElement(Yt,{type:"source",position:n,isConnectable:t}));Rg.displayName="InputNode";var zg=j.memo(Rg);const Dg=({data:e,isConnectable:t,targetPosition:n=xe.Top})=>V.createElement(V.Fragment,null,V.createElement(Yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Dg.displayName="OutputNode";var Lg=j.memo(Dg);const ed=()=>null;ed.displayName="GroupNode";const q2=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ui=e=>e.id;function Q2(e,t){return gt(e.selectedNodes.map(ui),t.selectedNodes.map(ui))&&gt(e.selectedEdges.map(ui),t.selectedEdges.map(ui))}const Og=j.memo(({onSelectionChange:e})=>{const t=ht(),{selectedNodes:n,selectedEdges:r}=Ze(q2,Q2);return j.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});Og.displayName="SelectionListener";const Y2=e=>!!e.onSelectionChange;function X2({onSelectionChange:e}){const t=Ze(Y2);return e||t?V.createElement(Og,{onSelectionChange:e}):null}const K2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Fr(e,t){j.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function De(e,t,n){j.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const G2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:a,nodesDraggable:u,nodesConnectable:f,nodesFocusable:d,edgesFocusable:p,edgesUpdatable:h,elevateNodesOnSelect:w,minZoom:v,maxZoom:S,nodeExtent:m,onNodesChange:g,onEdgesChange:x,elementsSelectable:y,connectionMode:_,snapGrid:b,snapToGrid:C,translateExtent:M,connectOnClick:P,defaultEdgeOptions:E,fitView:R,fitViewOptions:D,onNodesDelete:L,onEdgesDelete:N,onNodeDrag:$,onNodeDragStart:I,onNodeDragStop:O,onSelectionDrag:T,onSelectionDragStart:k,onSelectionDragStop:A,noPanClassName:B,nodeOrigin:z,rfId:W,autoPanOnConnect:U,autoPanOnNodeDrag:q,onError:X,connectionRadius:re,isValidConnection:be,nodeDragThreshold:de})=>{const{setNodes:H,setEdges:oe,setDefaultNodesAndEdges:Z,setMinZoom:G,setMaxZoom:ge,setTranslateExtent:ye,setNodeExtent:ze,reset:ue}=Ze(K2,gt),ne=ht();return j.useEffect(()=>{const Oe=r==null?void 0:r.map(F=>({...F,...E}));return Z(n,Oe),()=>{ue()}},[]),De("defaultEdgeOptions",E,ne.setState),De("connectionMode",_,ne.setState),De("onConnect",o,ne.setState),De("onConnectStart",s,ne.setState),De("onConnectEnd",i,ne.setState),De("onClickConnectStart",l,ne.setState),De("onClickConnectEnd",a,ne.setState),De("nodesDraggable",u,ne.setState),De("nodesConnectable",f,ne.setState),De("nodesFocusable",d,ne.setState),De("edgesFocusable",p,ne.setState),De("edgesUpdatable",h,ne.setState),De("elementsSelectable",y,ne.setState),De("elevateNodesOnSelect",w,ne.setState),De("snapToGrid",C,ne.setState),De("snapGrid",b,ne.setState),De("onNodesChange",g,ne.setState),De("onEdgesChange",x,ne.setState),De("connectOnClick",P,ne.setState),De("fitViewOnInit",R,ne.setState),De("fitViewOnInitOptions",D,ne.setState),De("onNodesDelete",L,ne.setState),De("onEdgesDelete",N,ne.setState),De("onNodeDrag",$,ne.setState),De("onNodeDragStart",I,ne.setState),De("onNodeDragStop",O,ne.setState),De("onSelectionDrag",T,ne.setState),De("onSelectionDragStart",k,ne.setState),De("onSelectionDragStop",A,ne.setState),De("noPanClassName",B,ne.setState),De("nodeOrigin",z,ne.setState),De("rfId",W,ne.setState),De("autoPanOnConnect",U,ne.setState),De("autoPanOnNodeDrag",q,ne.setState),De("onError",X,ne.setState),De("connectionRadius",re,ne.setState),De("isValidConnection",be,ne.setState),De("nodeDragThreshold",de,ne.setState),Fr(e,H),Fr(t,oe),Fr(v,G),Fr(S,ge),Fr(M,ye),Fr(m,ze),null},Qf={display:"none"},Z2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Fg="react-flow__node-desc",Hg="react-flow__edge-desc",J2="react-flow__aria-live",eS=e=>e.ariaLiveMessage;function tS({rfId:e}){const t=Ze(eS);return V.createElement("div",{id:`${J2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Z2},t)}function nS({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${Fg}-${e}`,style:Qf},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${Hg}-${e}`,style:Qf},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&V.createElement(tS,{rfId:e}))}var js=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=j.useState(!1),o=j.useRef(!1),s=j.useRef(new Set([])),[i,l]=j.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),f=u.reduce((d,p)=>d.concat(...p),[]);return[u,f]}return[[],[]]},[e]);return j.useEffect(()=>{const a=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||a;if(e!==null){const f=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Pc(h))return!1;const v=Xf(h.code,l);s.current.add(h[v]),Yf(i,s.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Pc(h))return!1;const v=Xf(h.code,l);Yf(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[v]),h.key==="Meta"&&s.current.clear(),o.current=!1},p=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",f),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",f),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",p)}}},[e,r]),n};function Yf(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Xf(e,t){return t.includes(e)?"code":"key"}function Vg(e,t,n,r){var l,a;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),i=Ir(s,r);return Vg(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=s[lt])==null?void 0:l.z)??0)>(n.z??0)?((a=s[lt])==null?void 0:a.z)??0:n.z??0},r)}function Bg(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:i,y:l,z:a}=Vg(r,e,{...r.position,z:((s=r[lt])==null?void 0:s.z)??0},t);r.positionAbsolute={x:i,y:l},r[lt].z=a,n!=null&&n[r.id]&&(r[lt].isParent=!0)}})}function wa(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(l=>{var h;const a=(Gt(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),f={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},d=l.parentNode||l.parentId;d&&(s[d]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(f,lt,{enumerable:!1,value:{handleBounds:p||(h=u==null?void 0:u[lt])==null?void 0:h.handleBounds,z:a}}),o.set(l.id,f)}),Bg(o,n,s),o}function Ug(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:a,fitViewOnInitDone:u,fitViewOnInit:f,nodeOrigin:d}=e(),p=t.initial&&!u&&f;if(l&&a&&(p||!t.initial)){const w=n().filter(S=>{var g;const m=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(g=t.nodes)!=null&&g.length?m&&t.nodes.some(x=>x.id===S.id):m}),v=w.every(S=>S.width&&S.height);if(w.length>0&&v){const S=Rl(w,d),{x:m,y:g,zoom:x}=jg(S,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),y=Pn.translate(m,g).scale(x);return typeof t.duration=="number"&&t.duration>0?l.transform(yr(a,t.duration),y):l.transform(a,y),!0}}return!1}function rS(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[lt]:r[lt],selected:n.selected})}),new Map(t)}function oS(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function di({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:a,hasDefaultEdges:u}=n();e!=null&&e.length&&(a&&r({nodeInternals:rS(e,o)}),i==null||i(e)),t!=null&&t.length&&(u&&r({edges:oS(t,s)}),l==null||l(t))}const Hr=()=>{},sS={zoomIn:Hr,zoomOut:Hr,zoomTo:Hr,getZoom:()=>1,setViewport:Hr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Hr,fitBounds:Hr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},iS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),lS=()=>{const e=ht(),{d3Zoom:t,d3Selection:n}=Ze(iS,gt);return j.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(yr(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(yr(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(yr(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,l,a]=e.getState().transform,u=Pn.translate(o.x??i,o.y??l).scale(o.zoom??a);t.transform(yr(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>Ug(e.getState,o),setCenter:(o,s,i)=>{const{width:l,height:a,maxZoom:u}=e.getState(),f=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,d=l/2-o*f,p=a/2-s*f,h=Pn.translate(d,p).scale(f);t.transform(yr(n,i==null?void 0:i.duration),h)},fitBounds:(o,s)=>{const{width:i,height:l,minZoom:a,maxZoom:u}=e.getState(),{x:f,y:d,zoom:p}=jg(o,i,l,a,u,(s==null?void 0:s.padding)??.1),h=Pn.translate(f,d).scale(p);t.transform(yr(n,s==null?void 0:s.duration),h)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Rc(o,s,i,l)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:a}=e.getState();if(!a)return o;const{x:u,y:f}=a.getBoundingClientRect(),d={x:o.x-u,y:o.y-f};return Rc(d,s,i,l)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:l,y:a}=i.getBoundingClientRect(),u=_g(o,s);return{x:u.x+l,y:u.y+a}},viewportInitialized:!0}:sS,[t,n])};function Fs(){const e=lS(),t=ht(),n=j.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),r=j.useCallback(v=>t.getState().nodeInternals.get(v),[]),o=j.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(S=>({...S}))},[]),s=j.useCallback(v=>{const{edges:S=[]}=t.getState();return S.find(m=>m.id===v)},[]),i=j.useCallback(v=>{const{getNodes:S,setNodes:m,hasDefaultNodes:g,onNodesChange:x}=t.getState(),y=S(),_=typeof v=="function"?v(y):v;if(g)m(_);else if(x){const b=_.length===0?y.map(C=>({type:"remove",id:C.id})):_.map(C=>({item:C,type:"reset"}));x(b)}},[]),l=j.useCallback(v=>{const{edges:S=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:x}=t.getState(),y=typeof v=="function"?v(S):v;if(g)m(y);else if(x){const _=y.length===0?S.map(b=>({type:"remove",id:b.id})):y.map(b=>({item:b,type:"reset"}));x(_)}},[]),a=j.useCallback(v=>{const S=Array.isArray(v)?v:[v],{getNodes:m,setNodes:g,hasDefaultNodes:x,onNodesChange:y}=t.getState();if(x){const b=[...m(),...S];g(b)}else if(y){const _=S.map(b=>({item:b,type:"add"}));y(_)}},[]),u=j.useCallback(v=>{const S=Array.isArray(v)?v:[v],{edges:m=[],setEdges:g,hasDefaultEdges:x,onEdgesChange:y}=t.getState();if(x)g([...m,...S]);else if(y){const _=S.map(b=>({item:b,type:"add"}));y(_)}},[]),f=j.useCallback(()=>{const{getNodes:v,edges:S=[],transform:m}=t.getState(),[g,x,y]=m;return{nodes:v().map(_=>({..._})),edges:S.map(_=>({..._})),viewport:{x:g,y:x,zoom:y}}},[]),d=j.useCallback(({nodes:v,edges:S})=>{const{nodeInternals:m,getNodes:g,edges:x,hasDefaultNodes:y,hasDefaultEdges:_,onNodesDelete:b,onEdgesDelete:C,onNodesChange:M,onEdgesChange:P}=t.getState(),E=(v||[]).map($=>$.id),R=(S||[]).map($=>$.id),D=g().reduce(($,I)=>{const O=I.parentNode||I.parentId,T=!E.includes(I.id)&&O&&$.find(A=>A.id===O);return(typeof I.deletable=="boolean"?I.deletable:!0)&&(E.includes(I.id)||T)&&$.push(I),$},[]),L=x.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),N=L.filter($=>R.includes($.id));if(D||N){const $=Ig(D,L),I=[...N,...$],O=I.reduce((T,k)=>(T.includes(k.id)||T.push(k.id),T),[]);if((_||y)&&(_&&t.setState({edges:x.filter(T=>!O.includes(T.id))}),y&&(D.forEach(T=>{m.delete(T.id)}),t.setState({nodeInternals:new Map(m)}))),O.length>0&&(C==null||C(I),P&&P(O.map(T=>({id:T,type:"remove"})))),D.length>0&&(b==null||b(D),M)){const T=D.map(k=>({id:k.id,type:"remove"}));M(T)}}},[]),p=j.useCallback(v=>{const S=C2(v),m=S?null:t.getState().nodeInternals.get(v.id);return!S&&!m?[null,null,S]:[S?v:Ff(m),m,S]},[]),h=j.useCallback((v,S=!0,m)=>{const[g,x,y]=p(v);return g?(m||t.getState().getNodes()).filter(_=>{if(!y&&(_.id===x.id||!_.positionAbsolute))return!1;const b=Ff(_),C=$c(b,g);return S&&C>0||C>=g.width*g.height}):[]},[]),w=j.useCallback((v,S,m=!0)=>{const[g]=p(v);if(!g)return!1;const x=$c(g,S);return m&&x>0||x>=g.width*g.height},[]);return j.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:l,addNodes:a,addEdges:u,toObject:f,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:w}),[e,n,r,o,s,i,l,a,u,f,d,h,w])}const aS={actInsideInputWithModifier:!1};var cS=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ht(),{deleteElements:r}=Fs(),o=js(e,aS),s=js(t);j.useEffect(()=>{if(o){const{edges:i,getNodes:l}=n.getState(),a=l().filter(f=>f.selected),u=i.filter(f=>f.selected);r({nodes:a,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),j.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function uS(e){const t=ht();j.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=Qu(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Ln.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const td={position:"absolute",width:"100%",height:"100%",top:0,left:0},dS=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,fi=e=>({x:e.x,y:e.y,zoom:e.k}),Vr=(e,t)=>e.target.closest(`.${t}`),Kf=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Gf=e=>{const t=e.ctrlKey&&sl()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},fS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),hS=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:a=Er.Free,zoomOnDoubleClick:u=!0,elementsSelectable:f,panOnDrag:d=!0,defaultViewport:p,translateExtent:h,minZoom:w,maxZoom:v,zoomActivationKeyCode:S,preventScrolling:m=!0,children:g,noWheelClassName:x,noPanClassName:y})=>{const _=j.useRef(),b=ht(),C=j.useRef(!1),M=j.useRef(!1),P=j.useRef(null),E=j.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:D,d3ZoomHandler:L,userSelectionActive:N}=Ze(fS,gt),$=js(S),I=j.useRef(0),O=j.useRef(!1),T=j.useRef();return uS(P),j.useEffect(()=>{if(P.current){const k=P.current.getBoundingClientRect(),A=pg().scaleExtent([w,v]).translateExtent(h),B=Qt(P.current).call(A),z=Pn.translate(p.x,p.y).scale(Eo(p.zoom,w,v)),W=[[0,0],[k.width,k.height]],U=A.constrain()(z,W,h);A.transform(B,U),A.wheelDelta(Gf),b.setState({d3Zoom:A,d3Selection:B,d3ZoomHandler:B.on("wheel.zoom"),transform:[U.x,U.y,U.k],domNode:P.current.closest(".react-flow")})}},[]),j.useEffect(()=>{D&&R&&(i&&!$&&!N?D.on("wheel.zoom",k=>{if(Vr(k,x))return!1;k.preventDefault(),k.stopImmediatePropagation();const A=D.property("__zoom").k||1;if(k.ctrlKey&&s){const be=sn(k),de=Gf(k),H=A*Math.pow(2,de);R.scaleTo(D,H,be,k);return}const B=k.deltaMode===1?20:1;let z=a===Er.Vertical?0:k.deltaX*B,W=a===Er.Horizontal?0:k.deltaY*B;!sl()&&k.shiftKey&&a!==Er.Vertical&&(z=k.deltaY*B,W=0),R.translateBy(D,-(z/A)*l,-(W/A)*l,{internal:!0});const U=fi(D.property("__zoom")),{onViewportChangeStart:q,onViewportChange:X,onViewportChangeEnd:re}=b.getState();clearTimeout(T.current),O.current||(O.current=!0,t==null||t(k,U),q==null||q(U)),O.current&&(e==null||e(k,U),X==null||X(U),T.current=setTimeout(()=>{n==null||n(k,U),re==null||re(U),O.current=!1},150))},{passive:!1}):typeof L<"u"&&D.on("wheel.zoom",function(k,A){if(!m&&k.type==="wheel"&&!k.ctrlKey||Vr(k,x))return null;k.preventDefault(),L.call(this,k,A)},{passive:!1}))},[N,i,a,D,R,L,$,s,m,x,t,e,n]),j.useEffect(()=>{R&&R.on("start",k=>{var z,W;if(!k.sourceEvent||k.sourceEvent.internal)return null;I.current=(z=k.sourceEvent)==null?void 0:z.button;const{onViewportChangeStart:A}=b.getState(),B=fi(k.transform);C.current=!0,E.current=B,((W=k.sourceEvent)==null?void 0:W.type)==="mousedown"&&b.setState({paneDragging:!0}),A==null||A(B),t==null||t(k.sourceEvent,B)})},[R,t]),j.useEffect(()=>{R&&(N&&!C.current?R.on("zoom",null):N||R.on("zoom",k=>{var B;const{onViewportChange:A}=b.getState();if(b.setState({transform:[k.transform.x,k.transform.y,k.transform.k]}),M.current=!!(r&&Kf(d,I.current??0)),(e||A)&&!((B=k.sourceEvent)!=null&&B.internal)){const z=fi(k.transform);A==null||A(z),e==null||e(k.sourceEvent,z)}}))},[N,R,e,d,r]),j.useEffect(()=>{R&&R.on("end",k=>{if(!k.sourceEvent||k.sourceEvent.internal)return null;const{onViewportChangeEnd:A}=b.getState();if(C.current=!1,b.setState({paneDragging:!1}),r&&Kf(d,I.current??0)&&!M.current&&r(k.sourceEvent),M.current=!1,(n||A)&&dS(E.current,k.transform)){const B=fi(k.transform);E.current=B,clearTimeout(_.current),_.current=setTimeout(()=>{A==null||A(B),n==null||n(k.sourceEvent,B)},i?150:0)}})},[R,i,d,n,r]),j.useEffect(()=>{R&&R.filter(k=>{const A=$||o,B=s&&k.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&k.button===1&&k.type==="mousedown"&&(Vr(k,"react-flow__node")||Vr(k,"react-flow__edge")))return!0;if(!d&&!A&&!i&&!u&&!s||N||!u&&k.type==="dblclick"||Vr(k,x)&&k.type==="wheel"||Vr(k,y)&&(k.type!=="wheel"||i&&k.type==="wheel"&&!$)||!s&&k.ctrlKey&&k.type==="wheel"||!A&&!i&&!B&&k.type==="wheel"||!d&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(d)&&!d.includes(k.button)&&k.type==="mousedown")return!1;const z=Array.isArray(d)&&d.includes(k.button)||!k.button||k.button<=1;return(!k.ctrlKey||k.type==="wheel")&&z})},[N,R,o,s,i,u,d,f,$]),V.createElement("div",{className:"react-flow__renderer",ref:P,style:td},g)},pS=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function mS(){const{userSelectionActive:e,userSelectionRect:t}=Ze(pS,gt);return e&&t?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Zf(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Wg(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(l=>l.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&Zf(r,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&Zf(r,i);break}case"remove":return r}return r.push(i),r},n)}function qg(e,t){return Wg(e,t)}function gS(e,t){return Wg(e,t)}const qn=(e,t)=>({id:e,type:"select",selected:t});function ro(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(qn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(qn(r.id,!1))),n},[])}const Na=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},yS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Qg=j.memo(({isSelecting:e,selectionMode:t=Is.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:a,onPaneMouseMove:u,onPaneMouseLeave:f,children:d})=>{const p=j.useRef(null),h=ht(),w=j.useRef(0),v=j.useRef(0),S=j.useRef(),{userSelectionActive:m,elementsSelectable:g,dragging:x}=Ze(yS,gt),y=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,v.current=0},_=L=>{s==null||s(L),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},b=L=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){L.preventDefault();return}i==null||i(L)},C=l?L=>l(L):void 0,M=L=>{const{resetSelectedElements:N,domNode:$}=h.getState();if(S.current=$==null?void 0:$.getBoundingClientRect(),!g||!e||L.button!==0||L.target!==p.current||!S.current)return;const{x:I,y:O}=ir(L,S.current);N(),h.setState({userSelectionRect:{width:0,height:0,startX:I,startY:O,x:I,y:O}}),r==null||r(L)},P=L=>{const{userSelectionRect:N,nodeInternals:$,edges:I,transform:O,onNodesChange:T,onEdgesChange:k,nodeOrigin:A,getNodes:B}=h.getState();if(!e||!S.current||!N)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=ir(L,S.current),W=N.startX??0,U=N.startY??0,q={...N,x:z.x<W?z.x:W,y:z.y<U?z.y:U,width:Math.abs(z.x-W),height:Math.abs(z.y-U)},X=B(),re=Cg($,q,O,t===Is.Partial,!0,A),be=Ig(re,I).map(H=>H.id),de=re.map(H=>H.id);if(w.current!==de.length){w.current=de.length;const H=ro(X,de);H.length&&(T==null||T(H))}if(v.current!==be.length){v.current=be.length;const H=ro(I,be);H.length&&(k==null||k(H))}h.setState({userSelectionRect:q})},E=L=>{if(L.button!==0)return;const{userSelectionRect:N}=h.getState();!m&&N&&L.target===p.current&&(_==null||_(L)),h.setState({nodesSelectionActive:w.current>0}),y(),o==null||o(L)},R=L=>{m&&(h.setState({nodesSelectionActive:w.current>0}),o==null||o(L)),y()},D=g&&(e||m);return V.createElement("div",{className:Nt(["react-flow__pane",{dragging:x,selection:e}]),onClick:D?void 0:Na(_,p),onContextMenu:Na(b,p),onWheel:Na(C,p),onMouseEnter:D?void 0:a,onMouseDown:D?M:void 0,onMouseMove:D?P:u,onMouseUp:D?E:void 0,onMouseLeave:D?R:f,ref:p,style:td},d,V.createElement(mS,null))});Qg.displayName="Pane";function Yg(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Yg(r,t):!1}function Jf(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function xS(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Yg(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function vS(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Xg(e,t,n,r,o=[0,0],s){const i=vS(e,e.extent||r);let l=i;const a=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(a&&e.width&&e.height){const d=n.get(a),{x:p,y:h}=Ir(d,o).positionAbsolute;l=d&&Gt(p)&&Gt(h)&&Gt(d.width)&&Gt(d.height)?[[p+e.width*o[0],h+e.height*o[1]],[p+d.width-e.width+e.width*o[0],h+d.height-e.height+e.height*o[1]]]:l}else s==null||s("005",Ln.error005()),l=i;else if(e.extent&&a&&e.extent!=="parent"){const d=n.get(a),{x:p,y:h}=Ir(d,o).positionAbsolute;l=[[e.extent[0][0]+p,e.extent[0][1]+h],[e.extent[1][0]+p,e.extent[1][1]+h]]}let u={x:0,y:0};if(a){const d=n.get(a);u=Ir(d,o).positionAbsolute}const f=l&&l!=="parent"?Yu(t,l):t;return{position:{x:f.x-u.x,y:f.y-u.y},positionAbsolute:f}}function Sa({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const eh=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),l={x:i.width*r[0],y:i.height*r[1]};return s.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/n,y:(u.top-i.top-l.y)/n,...Qu(a)}})};function Ho(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Dc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:a}=t.getState(),u=l.get(e);if(!u){a==null||a("012",Ln.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):o([e])}function wS(){const e=ht();return j.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,a={x:(i-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(a.x/o[0]):a.x,ySnapped:s?o[1]*Math.round(a.y/o[1]):a.y,...a}},[])}function ba(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Kg({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const l=ht(),[a,u]=j.useState(!1),f=j.useRef([]),d=j.useRef({x:null,y:null}),p=j.useRef(0),h=j.useRef(null),w=j.useRef({x:0,y:0}),v=j.useRef(null),S=j.useRef(!1),m=j.useRef(!1),g=j.useRef(!1),x=wS();return j.useEffect(()=>{if(e!=null&&e.current){const y=Qt(e.current),_=({x:M,y:P})=>{const{nodeInternals:E,onNodeDrag:R,onSelectionDrag:D,updateNodePositions:L,nodeExtent:N,snapGrid:$,snapToGrid:I,nodeOrigin:O,onError:T}=l.getState();d.current={x:M,y:P};let k=!1,A={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&N){const z=Rl(f.current,O);A=Cs(z)}if(f.current=f.current.map(z=>{const W={x:M-z.distance.x,y:P-z.distance.y};I&&(W.x=$[0]*Math.round(W.x/$[0]),W.y=$[1]*Math.round(W.y/$[1]));const U=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];f.current.length>1&&N&&!z.extent&&(U[0][0]=z.positionAbsolute.x-A.x+N[0][0],U[1][0]=z.positionAbsolute.x+(z.width??0)-A.x2+N[1][0],U[0][1]=z.positionAbsolute.y-A.y+N[0][1],U[1][1]=z.positionAbsolute.y+(z.height??0)-A.y2+N[1][1]);const q=Xg(z,W,E,U,O,T);return k=k||z.position.x!==q.position.x||z.position.y!==q.position.y,z.position=q.position,z.positionAbsolute=q.positionAbsolute,z}),!k)return;L(f.current,!0,!0),u(!0);const B=o?R:ba(D);if(B&&v.current){const[z,W]=Sa({nodeId:o,dragItems:f.current,nodeInternals:E});B(v.current,z,W)}},b=()=>{if(!h.current)return;const[M,P]=gg(w.current,h.current);if(M!==0||P!==0){const{transform:E,panBy:R}=l.getState();d.current.x=(d.current.x??0)-M/E[2],d.current.y=(d.current.y??0)-P/E[2],R({x:M,y:P})&&_(d.current)}p.current=requestAnimationFrame(b)},C=M=>{var O;const{nodeInternals:P,multiSelectionActive:E,nodesDraggable:R,unselectNodesAndEdges:D,onNodeDragStart:L,onSelectionDragStart:N}=l.getState();m.current=!0;const $=o?L:ba(N);(!i||!s)&&!E&&o&&((O=P.get(o))!=null&&O.selected||D()),o&&s&&i&&Dc({id:o,store:l,nodeRef:e});const I=x(M);if(d.current=I,f.current=xS(P,R,I,o),$&&f.current){const[T,k]=Sa({nodeId:o,dragItems:f.current,nodeInternals:P});$(M.sourceEvent,T,k)}};if(t)y.on(".drag",null);else{const M=$1().on("start",P=>{const{domNode:E,nodeDragThreshold:R}=l.getState();R===0&&C(P),g.current=!1;const D=x(P);d.current=D,h.current=(E==null?void 0:E.getBoundingClientRect())||null,w.current=ir(P.sourceEvent,h.current)}).on("drag",P=>{var L,N;const E=x(P),{autoPanOnNodeDrag:R,nodeDragThreshold:D}=l.getState();if(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1&&(g.current=!0),!g.current){if(!S.current&&m.current&&R&&(S.current=!0,b()),!m.current){const $=E.xSnapped-(((L=d==null?void 0:d.current)==null?void 0:L.x)??0),I=E.ySnapped-(((N=d==null?void 0:d.current)==null?void 0:N.y)??0);Math.sqrt($*$+I*I)>D&&C(P)}(d.current.x!==E.xSnapped||d.current.y!==E.ySnapped)&&f.current&&m.current&&(v.current=P.sourceEvent,w.current=ir(P.sourceEvent,h.current),_(E))}}).on("end",P=>{if(!(!m.current||g.current)&&(u(!1),S.current=!1,m.current=!1,cancelAnimationFrame(p.current),f.current)){const{updateNodePositions:E,nodeInternals:R,onNodeDragStop:D,onSelectionDragStop:L}=l.getState(),N=o?D:ba(L);if(E(f.current,!1,!1),N){const[$,I]=Sa({nodeId:o,dragItems:f.current,nodeInternals:R});N(P.sourceEvent,$,I)}}}).filter(P=>{const E=P.target;return!P.button&&(!n||!Jf(E,`.${n}`,e))&&(!r||Jf(E,r,e))});return y.call(M),()=>{y.on(".drag",null)}}}},[e,t,n,r,s,l,o,i,x]),a}function Gg(){const e=ht();return j.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:a,onError:u,nodesDraggable:f}=e.getState(),d=i().filter(g=>g.selected&&(g.draggable||f&&typeof g.draggable>"u")),p=l?a[0]:5,h=l?a[1]:5,w=n.isShiftPressed?4:1,v=n.x*p*w,S=n.y*h*w,m=d.map(g=>{if(g.positionAbsolute){const x={x:g.positionAbsolute.x+v,y:g.positionAbsolute.y+S};l&&(x.x=a[0]*Math.round(x.x/a[0]),x.y=a[1]*Math.round(x.y/a[1]));const{positionAbsolute:y,position:_}=Xg(g,x,r,o,void 0,u);g.position=_,g.positionAbsolute=y}return g});s(m,!0,!1)},[])}const ho={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Vo=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:a,selected:u,onClick:f,onMouseEnter:d,onMouseMove:p,onMouseLeave:h,onContextMenu:w,onDoubleClick:v,style:S,className:m,isDraggable:g,isSelectable:x,isConnectable:y,isFocusable:_,selectNodesOnDrag:b,sourcePosition:C,targetPosition:M,hidden:P,resizeObserver:E,dragHandle:R,zIndex:D,isParent:L,noDragClassName:N,noPanClassName:$,initialized:I,disableKeyboardA11y:O,ariaLabel:T,rfId:k,hasHandleBounds:A})=>{const B=ht(),z=j.useRef(null),W=j.useRef(null),U=j.useRef(C),q=j.useRef(M),X=j.useRef(r),re=x||g||f||d||p||h,be=Gg(),de=Ho(n,B.getState,d),H=Ho(n,B.getState,p),oe=Ho(n,B.getState,h),Z=Ho(n,B.getState,w),G=Ho(n,B.getState,v),ge=ue=>{const{nodeDragThreshold:ne}=B.getState();if(x&&(!b||!g||ne>0)&&Dc({id:n,store:B,nodeRef:z}),f){const Oe=B.getState().nodeInternals.get(n);Oe&&f(ue,{...Oe})}},ye=ue=>{if(!Pc(ue)&&!O)if(wg.includes(ue.key)&&x){const ne=ue.key==="Escape";Dc({id:n,store:B,unselect:ne,nodeRef:z})}else g&&u&&Object.prototype.hasOwnProperty.call(ho,ue.key)&&(B.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),be({x:ho[ue.key].x,y:ho[ue.key].y,isShiftPressed:ue.shiftKey}))};j.useEffect(()=>()=>{W.current&&(E==null||E.unobserve(W.current),W.current=null)},[]),j.useEffect(()=>{if(z.current&&!P){const ue=z.current;(!I||!A||W.current!==ue)&&(W.current&&(E==null||E.unobserve(W.current)),E==null||E.observe(ue),W.current=ue)}},[P,I,A]),j.useEffect(()=>{const ue=X.current!==r,ne=U.current!==C,Oe=q.current!==M;z.current&&(ue||ne||Oe)&&(ue&&(X.current=r),ne&&(U.current=C),Oe&&(q.current=M),B.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,r,C,M]);const ze=Kg({nodeRef:z,disabled:P||!g,noDragClassName:N,handleSelector:R,nodeId:n,isSelectable:x,selectNodesOnDrag:b});return P?null:V.createElement("div",{className:Nt(["react-flow__node",`react-flow__node-${r}`,{[$]:g},m,{selected:u,selectable:x,parent:L,dragging:ze}]),ref:z,style:{zIndex:D,transform:`translate(${l}px,${a}px)`,pointerEvents:re?"all":"none",visibility:I?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:de,onMouseMove:H,onMouseLeave:oe,onContextMenu:Z,onClick:ge,onDoubleClick:G,onKeyDown:_?ye:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":O?void 0:`${Fg}-${k}`,"aria-label":T},V.createElement(A2,{value:n},V.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:u,isConnectable:y,sourcePosition:C,targetPosition:M,dragging:ze,dragHandle:R,zIndex:D})))};return t.displayName="NodeWrapper",j.memo(t)};const NS=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Rl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function SS({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ht(),{width:o,height:s,x:i,y:l,transformString:a,userSelectionActive:u}=Ze(NS,gt),f=Gg(),d=j.useRef(null);if(j.useEffect(()=>{var w;n||(w=d.current)==null||w.focus({preventScroll:!0})},[n]),Kg({nodeRef:d}),u||!o||!s)return null;const p=e?w=>{const v=r.getState().getNodes().filter(S=>S.selected);e(w,v)}:void 0,h=w=>{Object.prototype.hasOwnProperty.call(ho,w.key)&&f({x:ho[w.key].x,y:ho[w.key].y,isShiftPressed:w.shiftKey})};return V.createElement("div",{className:Nt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a}},V.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:s,top:l,left:i}}))}var bS=j.memo(SS);const ES=e=>e.nodesSelectionActive,Zg=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:a,onMoveStart:u,onMoveEnd:f,selectionKeyCode:d,selectionOnDrag:p,selectionMode:h,onSelectionStart:w,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:x,zoomOnScroll:y,zoomOnPinch:_,panOnScroll:b,panOnScrollSpeed:C,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:E,defaultViewport:R,translateExtent:D,minZoom:L,maxZoom:N,preventScrolling:$,onSelectionContextMenu:I,noWheelClassName:O,noPanClassName:T,disableKeyboardA11y:k})=>{const A=Ze(ES),B=js(d),z=js(m),W=z||E,U=z||b,q=B||p&&W!==!0;return cS({deleteKeyCode:l,multiSelectionKeyCode:S}),V.createElement(hS,{onMove:a,onMoveStart:u,onMoveEnd:f,onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:y,zoomOnPinch:_,panOnScroll:U,panOnScrollSpeed:C,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:!B&&W,defaultViewport:R,translateExtent:D,minZoom:L,maxZoom:N,zoomActivationKeyCode:g,preventScrolling:$,noWheelClassName:O,noPanClassName:T},V.createElement(Qg,{onSelectionStart:w,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:W,isSelecting:!!q,selectionMode:h},e,A&&V.createElement(bS,{onSelectionContextMenu:I,noPanClassName:T,disableKeyboardA11y:k})))};Zg.displayName="FlowRenderer";var kS=j.memo(Zg);function _S(e){return Ze(j.useCallback(n=>e?Cg(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function CS(e){const t={input:Vo(e.input||zg),default:Vo(e.default||zc),output:Vo(e.output||Lg),group:Vo(e.group||ed)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=Vo(e[s]||zc),o),n);return{...t,...r}}const IS=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},jS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Jg=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=Ze(jS,gt),l=_S(e.onlyRenderVisibleElements),a=j.useRef(),u=j.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(d=>{const p=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(p)});return a.current=f,f},[]);return j.useEffect(()=>()=>{var f;(f=a==null?void 0:a.current)==null||f.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:td},l.map(f=>{var _,b,C;let d=f.type||"default";e.nodeTypes[d]||(i==null||i("003",Ln.error003(d)),d="default");const p=e.nodeTypes[d]||e.nodeTypes.default,h=!!(f.draggable||t&&typeof f.draggable>"u"),w=!!(f.selectable||o&&typeof f.selectable>"u"),v=!!(f.connectable||n&&typeof f.connectable>"u"),S=!!(f.focusable||r&&typeof f.focusable>"u"),m=e.nodeExtent?Yu(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,g=(m==null?void 0:m.x)??0,x=(m==null?void 0:m.y)??0,y=IS({x:g,y:x,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return V.createElement(p,{key:f.id,id:f.id,className:f.className,style:f.style,type:d,data:f.data,sourcePosition:f.sourcePosition||xe.Bottom,targetPosition:f.targetPosition||xe.Top,hidden:f.hidden,xPos:g,yPos:x,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:h,isSelectable:w,isConnectable:v,isFocusable:S,resizeObserver:u,dragHandle:f.dragHandle,zIndex:((_=f[lt])==null?void 0:_.z)??0,isParent:!!((b=f[lt])!=null&&b.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((C=f[lt])!=null&&C.handleBounds)})}))};Jg.displayName="NodeRenderer";var TS=j.memo(Jg);const $S=(e,t,n)=>n===xe.Left?e-t:n===xe.Right?e+t:e,PS=(e,t,n)=>n===xe.Top?e-t:n===xe.Bottom?e+t:e,th="react-flow__edgeupdater",nh=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:l})=>V.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:Nt([th,`${th}-${l}`]),cx:$S(t,r,e),cy:PS(n,r,e),r,stroke:"transparent",fill:"transparent"}),MS=()=>!0;var Br=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:l,selected:a,animated:u,label:f,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:w,labelBgBorderRadius:v,style:S,source:m,target:g,sourceX:x,sourceY:y,targetX:_,targetY:b,sourcePosition:C,targetPosition:M,elementsSelectable:P,hidden:E,sourceHandleId:R,targetHandleId:D,onContextMenu:L,onMouseEnter:N,onMouseMove:$,onMouseLeave:I,reconnectRadius:O,onReconnect:T,onReconnectStart:k,onReconnectEnd:A,markerEnd:B,markerStart:z,rfId:W,ariaLabel:U,isFocusable:q,isReconnectable:X,pathOptions:re,interactionWidth:be,disableKeyboardA11y:de})=>{const H=j.useRef(null),[oe,Z]=j.useState(!1),[G,ge]=j.useState(!1),ye=ht(),ze=j.useMemo(()=>`url('#${Ac(z,W)}')`,[z,W]),ue=j.useMemo(()=>`url('#${Ac(B,W)}')`,[B,W]);if(E)return null;const ne=Y=>{var ie;const{edges:se,addSelectedEdges:he,unselectNodesAndEdges:je,multiSelectionActive:we}=ye.getState(),Ne=se.find(pe=>pe.id===n);Ne&&(P&&(ye.setState({nodesSelectionActive:!1}),Ne.selected&&we?(je({nodes:[],edges:[Ne]}),(ie=H.current)==null||ie.blur()):he([n])),i&&i(Y,Ne))},Oe=Fo(n,ye.getState,l),F=Fo(n,ye.getState,L),Q=Fo(n,ye.getState,N),ae=Fo(n,ye.getState,$),ve=Fo(n,ye.getState,I),Fe=(Y,se)=>{if(Y.button!==0)return;const{edges:he,isValidConnection:je}=ye.getState(),we=se?g:m,Ne=(se?D:R)||null,ie=se?"target":"source",pe=je||MS,Ee=se,Pe=he.find(Me=>Me.id===n);ge(!0),k==null||k(Y,Pe,ie);const me=Me=>{ge(!1),A==null||A(Me,Pe,ie)};Pg({event:Y,handleId:Ne,nodeId:we,onConnect:Me=>T==null?void 0:T(Pe,Me),isTarget:Ee,getState:ye.getState,setState:ye.setState,isValidConnection:pe,edgeUpdaterType:ie,onReconnectEnd:me})},$e=Y=>Fe(Y,!0),He=Y=>Fe(Y,!1),te=()=>Z(!0),le=()=>Z(!1),J=!P&&!i,ee=Y=>{var se;if(!de&&wg.includes(Y.key)&&P){const{unselectNodesAndEdges:he,addSelectedEdges:je,edges:we}=ye.getState();Y.key==="Escape"?((se=H.current)==null||se.blur(),he({edges:[we.find(ie=>ie.id===n)]})):je([n])}};return V.createElement("g",{className:Nt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:a,animated:u,inactive:J,updating:oe}]),onClick:ne,onDoubleClick:Oe,onContextMenu:F,onMouseEnter:Q,onMouseMove:ae,onMouseLeave:ve,onKeyDown:q?ee:void 0,tabIndex:q?0:void 0,role:q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${m} to ${g}`,"aria-describedby":q?`${Hg}-${W}`:void 0,ref:H},!G&&V.createElement(e,{id:n,source:m,target:g,selected:a,animated:u,label:f,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:w,labelBgBorderRadius:v,data:s,style:S,sourceX:x,sourceY:y,targetX:_,targetY:b,sourcePosition:C,targetPosition:M,sourceHandleId:R,targetHandleId:D,markerStart:ze,markerEnd:ue,pathOptions:re,interactionWidth:be}),X&&V.createElement(V.Fragment,null,(X==="source"||X===!0)&&V.createElement(nh,{position:C,centerX:x,centerY:y,radius:O,onMouseDown:$e,onMouseEnter:te,onMouseOut:le,type:"source"}),(X==="target"||X===!0)&&V.createElement(nh,{position:M,centerX:_,centerY:b,radius:O,onMouseDown:He,onMouseEnter:te,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",j.memo(t)};function AS(e){const t={default:Br(e.default||ll),straight:Br(e.bezier||Gu),step:Br(e.step||Ku),smoothstep:Br(e.step||Al),simplebezier:Br(e.simplebezier||Xu)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=Br(e[s]||ll),o),n);return{...t,...r}}function rh(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case xe.Top:return{x:r+s/2,y:o};case xe.Right:return{x:r+s,y:o+i/2};case xe.Bottom:return{x:r+s/2,y:o+i};case xe.Left:return{x:r,y:o+i/2}}}function oh(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const RS=(e,t,n,r,o,s)=>{const i=rh(n,e,t),l=rh(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function zS({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:l,transform:a}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f=Cs({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:i/a[2],height:l/a[2]}),d=Math.max(0,Math.min(f.x2,u.x2)-Math.max(f.x,u.x)),p=Math.max(0,Math.min(f.y2,u.y2)-Math.max(f.y,u.y));return Math.ceil(d*p)>0}function sh(e){var r,o,s,i,l;const t=((r=e==null?void 0:e[lt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const DS=[{level:0,isMaxLevel:!0,edges:[]}];function LS(e,t,n=!1){let r=-1;const o=e.reduce((i,l)=>{var f,d;const a=Gt(l.zIndex);let u=a?l.zIndex:0;if(n){const p=t.get(l.target),h=t.get(l.source),w=l.selected||(p==null?void 0:p.selected)||(h==null?void 0:h.selected),v=Math.max(((f=h==null?void 0:h[lt])==null?void 0:f.z)||0,((d=p==null?void 0:p[lt])==null?void 0:d.z)||0,1e3);u=(a?l.zIndex:0)+(w?v:0)}return i[u]?i[u].push(l):i[u]=[l],r=u>r?u:r,i},{}),s=Object.entries(o).map(([i,l])=>{const a=+i;return{edges:l,level:a,isMaxLevel:a===r}});return s.length===0?DS:s}function OS(e,t,n){const r=Ze(j.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&zS({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return LS(r,t,n)}const FS=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),HS=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ih={[il.Arrow]:FS,[il.ArrowClosed]:HS};function VS(e){const t=ht();return j.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(ih,e)?ih[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",Ln.error009(e)),null)},[e])}const BS=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const a=VS(t);return a?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},V.createElement(a,{color:n,strokeWidth:i})):null},US=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=Ac(i,t);r.includes(l)||(o.push({id:l,color:i.color||e,...i}),r.push(l))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},e0=({defaultColor:e,rfId:t})=>{const n=Ze(j.useCallback(US({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return V.createElement("defs",null,n.map(r=>V.createElement(BS,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};e0.displayName="MarkerDefinitions";var WS=j.memo(e0);const qS=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),t0=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:a,onEdgeMouseLeave:u,onEdgeClick:f,onEdgeDoubleClick:d,onReconnect:p,onReconnectStart:h,onReconnectEnd:w,reconnectRadius:v,children:S,disableKeyboardA11y:m})=>{const{edgesFocusable:g,edgesUpdatable:x,elementsSelectable:y,width:_,height:b,connectionMode:C,nodeInternals:M,onError:P}=Ze(qS,gt),E=OS(t,M,n);return _?V.createElement(V.Fragment,null,E.map(({level:R,edges:D,isMaxLevel:L})=>V.createElement("svg",{key:R,style:{zIndex:R},width:_,height:b,className:"react-flow__edges react-flow__container"},L&&V.createElement(WS,{defaultColor:e,rfId:r}),V.createElement("g",null,D.map(N=>{const[$,I,O]=sh(M.get(N.source)),[T,k,A]=sh(M.get(N.target));if(!O||!A)return null;let B=N.type||"default";o[B]||(P==null||P("011",Ln.error011(B)),B="default");const z=o[B]||o.default,W=C===ur.Strict?k.target:(k.target??[]).concat(k.source??[]),U=oh(I.source,N.sourceHandle),q=oh(W,N.targetHandle),X=(U==null?void 0:U.position)||xe.Bottom,re=(q==null?void 0:q.position)||xe.Top,be=!!(N.focusable||g&&typeof N.focusable>"u"),de=N.reconnectable||N.updatable,H=typeof p<"u"&&(de||x&&typeof de>"u");if(!U||!q)return P==null||P("008",Ln.error008(U,N)),null;const{sourceX:oe,sourceY:Z,targetX:G,targetY:ge}=RS($,U,X,T,q,re);return V.createElement(z,{key:N.id,id:N.id,className:Nt([N.className,s]),type:B,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:oe,sourceY:Z,targetX:G,targetY:ge,sourcePosition:X,targetPosition:re,elementsSelectable:y,onContextMenu:i,onMouseEnter:l,onMouseMove:a,onMouseLeave:u,onClick:f,onEdgeDoubleClick:d,onReconnect:p,onReconnectStart:h,onReconnectEnd:w,reconnectRadius:v,rfId:r,ariaLabel:N.ariaLabel,isFocusable:be,isReconnectable:H,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:m})})))),S):null};t0.displayName="EdgeRenderer";var QS=j.memo(t0);const YS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function XS({children:e}){const t=Ze(YS);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function KS(e){const t=Fs(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const GS={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top},n0=({nodeId:e,handleType:t,style:n,type:r=Xn.Bezier,CustomComponent:o,connectionStatus:s})=>{var b,C,M;const{fromNode:i,handleId:l,toX:a,toY:u,connectionMode:f}=Ze(j.useCallback(P=>({fromNode:P.nodeInternals.get(e),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[e]),gt),d=(b=i==null?void 0:i[lt])==null?void 0:b.handleBounds;let p=d==null?void 0:d[t];if(f===ur.Loose&&(p=p||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!p)return null;const h=l?p.find(P=>P.id===l):p[0],w=h?h.x+h.width/2:(i.width??0)/2,v=h?h.y+h.height/2:i.height??0,S=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+w,m=(((M=i.positionAbsolute)==null?void 0:M.y)??0)+v,g=h==null?void 0:h.position,x=g?GS[g]:null;if(!g||!x)return null;if(o)return V.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:S,fromY:m,toX:a,toY:u,fromPosition:g,toPosition:x,connectionStatus:s});let y="";const _={sourceX:S,sourceY:m,sourcePosition:g,targetX:a,targetY:u,targetPosition:x};return r===Xn.Bezier?[y]=kg(_):r===Xn.Step?[y]=Mc({..._,borderRadius:0}):r===Xn.SmoothStep?[y]=Mc(_):r===Xn.SimpleBezier?[y]=Eg(_):y=`M${S},${m} ${a},${u}`,V.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};n0.displayName="ConnectionLine";const ZS=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function JS({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:l,height:a,connectionStatus:u}=Ze(ZS,gt);return!(o&&s&&l&&i)?null:V.createElement("svg",{style:e,width:l,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:Nt(["react-flow__connection",u])},V.createElement(n0,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function lh(e,t){return j.useRef(null),ht(),j.useMemo(()=>t(e),[e])}const r0=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:a,onEdgeDoubleClick:u,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:h,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:S,connectionLineType:m,connectionLineStyle:g,connectionLineComponent:x,connectionLineContainerStyle:y,selectionKeyCode:_,selectionOnDrag:b,selectionMode:C,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:E,deleteKeyCode:R,onlyRenderVisibleElements:D,elementsSelectable:L,selectNodesOnDrag:N,defaultViewport:$,translateExtent:I,minZoom:O,maxZoom:T,preventScrolling:k,defaultMarkerColor:A,zoomOnScroll:B,zoomOnPinch:z,panOnScroll:W,panOnScrollSpeed:U,panOnScrollMode:q,zoomOnDoubleClick:X,panOnDrag:re,onPaneClick:be,onPaneMouseEnter:de,onPaneMouseMove:H,onPaneMouseLeave:oe,onPaneScroll:Z,onPaneContextMenu:G,onEdgeContextMenu:ge,onEdgeMouseEnter:ye,onEdgeMouseMove:ze,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:Oe,onReconnectEnd:F,reconnectRadius:Q,noDragClassName:ae,noWheelClassName:ve,noPanClassName:Fe,elevateEdgesOnSelect:$e,disableKeyboardA11y:He,nodeOrigin:te,nodeExtent:le,rfId:J})=>{const ee=lh(e,CS),Y=lh(t,AS);return KS(s),V.createElement(kS,{onPaneClick:be,onPaneMouseEnter:de,onPaneMouseMove:H,onPaneMouseLeave:oe,onPaneContextMenu:G,onPaneScroll:Z,deleteKeyCode:R,selectionKeyCode:_,selectionOnDrag:b,selectionMode:C,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:E,elementsSelectable:L,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:B,zoomOnPinch:z,zoomOnDoubleClick:X,panOnScroll:W,panOnScrollSpeed:U,panOnScrollMode:q,panOnDrag:re,defaultViewport:$,translateExtent:I,minZoom:O,maxZoom:T,onSelectionContextMenu:w,preventScrolling:k,noDragClassName:ae,noWheelClassName:ve,noPanClassName:Fe,disableKeyboardA11y:He},V.createElement(XS,null,V.createElement(QS,{edgeTypes:Y,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:D,onEdgeContextMenu:ge,onEdgeMouseEnter:ye,onEdgeMouseMove:ze,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:Oe,onReconnectEnd:F,reconnectRadius:Q,defaultMarkerColor:A,noPanClassName:Fe,elevateEdgesOnSelect:!!$e,disableKeyboardA11y:He,rfId:J},V.createElement(JS,{style:g,type:m,component:x,containerStyle:y})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(TS,{nodeTypes:ee,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:h,selectNodesOnDrag:N,onlyRenderVisibleElements:D,noPanClassName:Fe,noDragClassName:ae,disableKeyboardA11y:He,nodeOrigin:te,nodeExtent:le,rfId:J})))};r0.displayName="GraphView";var eb=j.memo(r0);const Lc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Vn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Lc,nodeExtent:Lc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ur.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:I2,isValidConnection:void 0},tb=()=>Bv((e,t)=>({...Vn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:wa(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?wa(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:a,nodeOrigin:u}=t(),f=a==null?void 0:a.querySelector(".react-flow__viewport");if(!f)return;const d=window.getComputedStyle(f),{m22:p}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((v,S)=>{const m=o.get(S.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[lt]:{...m[lt],handleBounds:void 0}});else if(m){const g=Qu(S.nodeElement);!!(g.width&&g.height&&(m.width!==g.width||m.height!==g.height||S.forceUpdate))&&(o.set(m.id,{...m,[lt]:{...m[lt],handleBounds:{source:eh(".source",S.nodeElement,p,u),target:eh(".target",S.nodeElement,p,u)}},...g}),v.push({id:m.id,type:"dimensions",dimensions:g}))}return v},[]);Bg(o,u);const w=i||s&&!i&&Ug(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:w}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(l=>{const a={id:l.id,type:"position",dragging:o};return r&&(a.positionAbsolute=l.positionAbsolute,a.position=l.position),a});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:a}=t();if(n!=null&&n.length){if(s){const u=qg(n,l()),f=wa(u,o,i,a);e({nodeInternals:f})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>qn(a,!0)):(i=ro(s(),n),l=ro(o,[])),di({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>qn(a,!0)):(i=ro(o,n),l=ro(s(),[])),di({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),l=r||o,a=i.map(f=>(f.selected=!1,qn(f.id,!1))),u=l.map(f=>qn(f.id,!1));di({changedNodes:a,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(l=>l.selected).map(l=>qn(l.id,!1)),i=n.filter(l=>l.selected).map(l=>qn(l.id,!1));di({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Yu(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:l,translateExtent:a}=t();if(!i||!l||!n.x&&!n.y)return!1;const u=Pn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),f=[[0,0],[o,s]],d=i==null?void 0:i.constrain()(u,f,a);return i.transform(l,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Vn.connectionNodeId,connectionHandleId:Vn.connectionHandleId,connectionHandleType:Vn.connectionHandleType,connectionStatus:Vn.connectionStatus,connectionStartHandle:Vn.connectionStartHandle,connectionEndHandle:Vn.connectionEndHandle}),reset:()=>e({...Vn})}),Object.is),nd=({children:e})=>{const t=j.useRef(null);return t.current||(t.current=tb()),V.createElement(N2,{value:t.current},e)};nd.displayName="ReactFlowProvider";const o0=({children:e})=>j.useContext(Pl)?V.createElement(V.Fragment,null,e):V.createElement(nd,null,e);o0.displayName="ReactFlowWrapper";const nb={input:zg,default:zc,output:Lg,group:ed},rb={default:ll,straight:Gu,step:Ku,smoothstep:Al,simplebezier:Xu},ob=[0,0],sb=[15,15],ib={x:0,y:0,zoom:1},lb={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},s0=j.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=nb,edgeTypes:i=rb,onNodeClick:l,onEdgeClick:a,onInit:u,onMove:f,onMoveStart:d,onMoveEnd:p,onConnect:h,onConnectStart:w,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:m,onNodeMouseEnter:g,onNodeMouseMove:x,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:b,onNodeDragStart:C,onNodeDrag:M,onNodeDragStop:P,onNodesDelete:E,onEdgesDelete:R,onSelectionChange:D,onSelectionDragStart:L,onSelectionDrag:N,onSelectionDragStop:$,onSelectionContextMenu:I,onSelectionStart:O,onSelectionEnd:T,connectionMode:k=ur.Strict,connectionLineType:A=Xn.Bezier,connectionLineStyle:B,connectionLineComponent:z,connectionLineContainerStyle:W,deleteKeyCode:U="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:X=!1,selectionMode:re=Is.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:de=sl()?"Meta":"Control",zoomActivationKeyCode:H=sl()?"Meta":"Control",snapToGrid:oe=!1,snapGrid:Z=sb,onlyRenderVisibleElements:G=!1,selectNodesOnDrag:ge=!0,nodesDraggable:ye,nodesConnectable:ze,nodesFocusable:ue,nodeOrigin:ne=ob,edgesFocusable:Oe,edgesUpdatable:F,elementsSelectable:Q,defaultViewport:ae=ib,minZoom:ve=.5,maxZoom:Fe=2,translateExtent:$e=Lc,preventScrolling:He=!0,nodeExtent:te,defaultMarkerColor:le="#b1b1b7",zoomOnScroll:J=!0,zoomOnPinch:ee=!0,panOnScroll:Y=!1,panOnScrollSpeed:se=.5,panOnScrollMode:he=Er.Free,zoomOnDoubleClick:je=!0,panOnDrag:we=!0,onPaneClick:Ne,onPaneMouseEnter:ie,onPaneMouseMove:pe,onPaneMouseLeave:Ee,onPaneScroll:Pe,onPaneContextMenu:me,children:Se,onEdgeContextMenu:Me,onEdgeDoubleClick:Qe,onEdgeMouseEnter:We,onEdgeMouseMove:_e,onEdgeMouseLeave:Ve,onEdgeUpdate:Ce,onEdgeUpdateStart:Ye,onEdgeUpdateEnd:Ie,onReconnect:Re,onReconnectStart:ce,onReconnectEnd:Ke,reconnectRadius:ke=10,edgeUpdaterRadius:Ae=10,onNodesChange:Te,onEdgesChange:at,noDragClassName:nt="nodrag",noWheelClassName:yt="nowheel",noPanClassName:mn="nopan",fitView:Fl=!1,fitViewOptions:T0,connectOnClick:$0=!0,attributionPosition:P0,proOptions:M0,defaultEdgeOptions:A0,elevateNodesOnSelect:R0=!0,elevateEdgesOnSelect:z0=!1,disableKeyboardA11y:ld=!1,autoPanOnConnect:D0=!0,autoPanOnNodeDrag:L0=!0,connectionRadius:O0=20,isValidConnection:F0,onError:H0,style:V0,id:ad,nodeDragThreshold:B0,...U0},W0)=>{const Hl=ad||"1";return V.createElement("div",{...U0,style:{...V0,...lb},ref:W0,className:Nt(["react-flow",o]),"data-testid":"rf__wrapper",id:ad},V.createElement(o0,null,V.createElement(eb,{onInit:u,onMove:f,onMoveStart:d,onMoveEnd:p,onNodeClick:l,onEdgeClick:a,onNodeMouseEnter:g,onNodeMouseMove:x,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:b,nodeTypes:s,edgeTypes:i,connectionLineType:A,connectionLineStyle:B,connectionLineComponent:z,connectionLineContainerStyle:W,selectionKeyCode:q,selectionOnDrag:X,selectionMode:re,deleteKeyCode:U,multiSelectionKeyCode:de,panActivationKeyCode:be,zoomActivationKeyCode:H,onlyRenderVisibleElements:G,selectNodesOnDrag:ge,defaultViewport:ae,translateExtent:$e,minZoom:ve,maxZoom:Fe,preventScrolling:He,zoomOnScroll:J,zoomOnPinch:ee,zoomOnDoubleClick:je,panOnScroll:Y,panOnScrollSpeed:se,panOnScrollMode:he,panOnDrag:we,onPaneClick:Ne,onPaneMouseEnter:ie,onPaneMouseMove:pe,onPaneMouseLeave:Ee,onPaneScroll:Pe,onPaneContextMenu:me,onSelectionContextMenu:I,onSelectionStart:O,onSelectionEnd:T,onEdgeContextMenu:Me,onEdgeDoubleClick:Qe,onEdgeMouseEnter:We,onEdgeMouseMove:_e,onEdgeMouseLeave:Ve,onReconnect:Re??Ce,onReconnectStart:ce??Ye,onReconnectEnd:Ke??Ie,reconnectRadius:ke??Ae,defaultMarkerColor:le,noDragClassName:nt,noWheelClassName:yt,noPanClassName:mn,elevateEdgesOnSelect:z0,rfId:Hl,disableKeyboardA11y:ld,nodeOrigin:ne,nodeExtent:te}),V.createElement(G2,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:w,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:m,nodesDraggable:ye,nodesConnectable:ze,nodesFocusable:ue,edgesFocusable:Oe,edgesUpdatable:F,elementsSelectable:Q,elevateNodesOnSelect:R0,minZoom:ve,maxZoom:Fe,nodeExtent:te,onNodesChange:Te,onEdgesChange:at,snapToGrid:oe,snapGrid:Z,connectionMode:k,translateExtent:$e,connectOnClick:$0,defaultEdgeOptions:A0,fitView:Fl,fitViewOptions:T0,onNodesDelete:E,onEdgesDelete:R,onNodeDragStart:C,onNodeDrag:M,onNodeDragStop:P,onSelectionDrag:N,onSelectionDragStart:L,onSelectionDragStop:$,noPanClassName:mn,nodeOrigin:ne,rfId:Hl,autoPanOnConnect:D0,autoPanOnNodeDrag:L0,onError:H0,connectionRadius:O0,isValidConnection:F0,nodeDragThreshold:B0}),V.createElement(X2,{onSelectionChange:D}),Se,V.createElement(b2,{proOptions:M0,position:P0}),V.createElement(nS,{rfId:Hl,disableKeyboardA11y:ld})))});s0.displayName="ReactFlow";function i0(e){return t=>{const[n,r]=j.useState(t),o=j.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const ab=i0(qg),cb=i0(gS),l0=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:l,strokeWidth:a,className:u,borderRadius:f,shapeRendering:d,onClick:p,selected:h})=>{const{background:w,backgroundColor:v}=s||{},S=i||w||v;return V.createElement("rect",{className:Nt(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:f,ry:f,width:r,height:o,fill:S,stroke:l,strokeWidth:a,shapeRendering:d,onClick:p?m=>p(m,e):void 0})};l0.displayName="MiniMapNode";var ub=j.memo(l0);const db=e=>e.nodeOrigin,fb=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Ea=e=>e instanceof Function?e:()=>e;function hb({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:s=ub,onClick:i}){const l=Ze(fb,gt),a=Ze(db),u=Ea(t),f=Ea(e),d=Ea(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return V.createElement(V.Fragment,null,l.map(h=>{const{x:w,y:v}=Ir(h,a).positionAbsolute;return V.createElement(s,{key:h.id,x:w,y:v,width:h.width,height:h.height,style:h.style,selected:h.selected,className:d(h),color:u(h),borderRadius:r,strokeColor:f(h),strokeWidth:o,shapeRendering:p,onClick:i,id:h.id})}))}var pb=j.memo(hb);const mb=200,gb=150,yb=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?_2(Rl(t,e.nodeOrigin),n):n,rfId:e.rfId}},xb="react-flow__minimap-desc";function a0({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:f=1,position:d="bottom-right",onClick:p,onNodeClick:h,pannable:w=!1,zoomable:v=!1,ariaLabel:S="React Flow mini map",inversePan:m=!1,zoomStep:g=10,offsetScale:x=5}){const y=ht(),_=j.useRef(null),{boundingRect:b,viewBB:C,rfId:M}=Ze(yb,gt),P=(e==null?void 0:e.width)??mb,E=(e==null?void 0:e.height)??gb,R=b.width/P,D=b.height/E,L=Math.max(R,D),N=L*P,$=L*E,I=x*L,O=b.x-(N-b.width)/2-I,T=b.y-($-b.height)/2-I,k=N+I*2,A=$+I*2,B=`${xb}-${M}`,z=j.useRef(0);z.current=L,j.useEffect(()=>{if(_.current){const q=Qt(_.current),X=de=>{const{transform:H,d3Selection:oe,d3Zoom:Z}=y.getState();if(de.sourceEvent.type!=="wheel"||!oe||!Z)return;const G=-de.sourceEvent.deltaY*(de.sourceEvent.deltaMode===1?.05:de.sourceEvent.deltaMode?1:.002)*g,ge=H[2]*Math.pow(2,G);Z.scaleTo(oe,ge)},re=de=>{const{transform:H,d3Selection:oe,d3Zoom:Z,translateExtent:G,width:ge,height:ye}=y.getState();if(de.sourceEvent.type!=="mousemove"||!oe||!Z)return;const ze=z.current*Math.max(1,H[2])*(m?-1:1),ue={x:H[0]-de.sourceEvent.movementX*ze,y:H[1]-de.sourceEvent.movementY*ze},ne=[[0,0],[ge,ye]],Oe=Pn.translate(ue.x,ue.y).scale(H[2]),F=Z.constrain()(Oe,ne,G);Z.transform(oe,F)},be=pg().on("zoom",w?re:null).on("zoom.wheel",v?X:null);return q.call(be),()=>{q.on("zoom",null)}}},[w,v,m,g]);const W=p?q=>{const X=sn(q);p(q,{x:X[0],y:X[1]})}:void 0,U=h?(q,X)=>{const re=y.getState().nodeInternals.get(X);h(q,re)}:void 0;return V.createElement(Ml,{position:d,style:e,className:Nt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},V.createElement("svg",{width:P,height:E,viewBox:`${O} ${T} ${k} ${A}`,role:"img","aria-labelledby":B,ref:_,onClick:W},S&&V.createElement("title",{id:B},S),V.createElement(pb,{onClick:U,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:l}),V.createElement("path",{className:"react-flow__minimap-mask",d:`M${O-I},${T-I}h${k+I*2}v${A+I*2}h${-k-I*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fill:a,fillRule:"evenodd",stroke:u,strokeWidth:f,pointerEvents:"none"})))}a0.displayName="MiniMap";var vb=j.memo(a0);function wb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Nb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Sb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function bb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Eb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xo=({children:e,className:t,...n})=>V.createElement("button",{type:"button",className:Nt(["react-flow__controls-button",t]),...n},e);Xo.displayName="ControlButton";const kb=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),c0=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:a,className:u,children:f,position:d="bottom-left"})=>{const p=ht(),[h,w]=j.useState(!1),{isInteractive:v,minZoomReached:S,maxZoomReached:m}=Ze(kb,gt),{zoomIn:g,zoomOut:x,fitView:y}=Fs();if(j.useEffect(()=>{w(!0)},[]),!h)return null;const _=()=>{g(),s==null||s()},b=()=>{x(),i==null||i()},C=()=>{y(o),l==null||l()},M=()=>{p.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),a==null||a(!v)};return V.createElement(Ml,{className:Nt(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&V.createElement(V.Fragment,null,V.createElement(Xo,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},V.createElement(wb,null)),V.createElement(Xo,{onClick:b,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},V.createElement(Nb,null))),n&&V.createElement(Xo,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},V.createElement(Sb,null)),r&&V.createElement(Xo,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},v?V.createElement(Eb,null):V.createElement(bb,null)),f)};c0.displayName="Controls";var _b=j.memo(c0),Jt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Jt||(Jt={}));function Cb({color:e,dimensions:t,lineWidth:n}){return V.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Ib({color:e,radius:t}){return V.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const jb={[Jt.Dots]:"#91919a",[Jt.Lines]:"#eee",[Jt.Cross]:"#e2e2e2"},Tb={[Jt.Dots]:1,[Jt.Lines]:1,[Jt.Cross]:6},$b=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function u0({id:e,variant:t=Jt.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:i,style:l,className:a}){const u=j.useRef(null),{transform:f,patternId:d}=Ze($b,gt),p=i||jb[t],h=r||Tb[t],w=t===Jt.Dots,v=t===Jt.Cross,S=Array.isArray(n)?n:[n,n],m=[S[0]*f[2]||1,S[1]*f[2]||1],g=h*f[2],x=v?[g,g]:m,y=w?[g/s,g/s]:[x[0]/s,x[1]/s];return V.createElement("svg",{className:Nt(["react-flow__background",a]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},V.createElement("pattern",{id:d+e,x:f[0]%m[0],y:f[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},w?V.createElement(Ib,{color:p,radius:g/s}):V.createElement(Cb,{dimensions:x,color:p,lineWidth:o})),V.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}u0.displayName="Background";var Pb=j.memo(u0);const d0={},{useDebugValue:Mb}=V,{useSyncExternalStoreWithSelector:Ab}=Lm;let ah=!1;const Rb=e=>e;function zb(e,t=Rb,n){(d0?"production":void 0)!=="production"&&n&&!ah&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ah=!0);const r=Ab(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Mb(r),r}const Db=e=>{(d0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Om(e):e,n=(r,o)=>zb(t,r,o);return Object.assign(n,t),n},Lb=e=>Db;var f0=Symbol.for("immer-nothing"),ch=Symbol.for("immer-draftable"),Ht=Symbol.for("immer-state");function cn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ko=Object.getPrototypeOf;function _o(e){return!!e&&!!e[Ht]}function Rr(e){var t;return e?h0(e)||Array.isArray(e)||!!e[ch]||!!((t=e.constructor)!=null&&t[ch])||Dl(e)||Ll(e):!1}var Ob=Object.prototype.constructor.toString();function h0(e){if(!e||typeof e!="object")return!1;const t=ko(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ob}function al(e,t){zl(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function zl(e){const t=e[Ht];return t?t.type_:Array.isArray(e)?1:Dl(e)?2:Ll(e)?3:0}function Oc(e,t){return zl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function p0(e,t,n){const r=zl(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Fb(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dl(e){return e instanceof Map}function Ll(e){return e instanceof Set}function xr(e){return e.copy_||e.base_}function Fc(e,t){if(Dl(e))return new Map(e);if(Ll(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=h0(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ht];let o=Reflect.ownKeys(r);for(let s=0;s<o.length;s++){const i=o[s],l=r[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(ko(e),r)}else{const r=ko(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function rd(e,t=!1){return Ol(e)||_o(e)||!Rr(e)||(zl(e)>1&&(e.set=e.add=e.clear=e.delete=Hb),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>rd(r,!0))),e}function Hb(){cn(2)}function Ol(e){return Object.isFrozen(e)}var Vb={};function zr(e){const t=Vb[e];return t||cn(0,e),t}var Ts;function m0(){return Ts}function Bb(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uh(e,t){t&&(zr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hc(e){Vc(e),e.drafts_.forEach(Ub),e.drafts_=null}function Vc(e){e===Ts&&(Ts=e.parent_)}function dh(e){return Ts=Bb(Ts,e)}function Ub(e){const t=e[Ht];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fh(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ht].modified_&&(Hc(t),cn(4)),Rr(e)&&(e=cl(t,e),t.parent_||ul(t,e)),t.patches_&&zr("Patches").generateReplacementPatches_(n[Ht].base_,e,t.patches_,t.inversePatches_)):e=cl(t,n,[]),Hc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==f0?e:void 0}function cl(e,t,n){if(Ol(t))return t;const r=t[Ht];if(!r)return al(t,(o,s)=>hh(e,r,t,o,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ul(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let s=o,i=!1;r.type_===3&&(s=new Set(o),o.clear(),i=!0),al(s,(l,a)=>hh(e,r,o,l,a,n,i)),ul(e,o,!1),n&&e.patches_&&zr("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function hh(e,t,n,r,o,s,i){if(_o(o)){const l=s&&t&&t.type_!==3&&!Oc(t.assigned_,r)?s.concat(r):void 0,a=cl(e,o,l);if(p0(n,r,a),_o(a))e.canAutoFreeze_=!1;else return}else i&&n.add(o);if(Rr(o)&&!Ol(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;cl(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ul(e,o)}}function ul(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rd(t,n)}function Wb(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:m0(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,s=od;n&&(o=[r],s=$s);const{revoke:i,proxy:l}=Proxy.revocable(o,s);return r.draft_=l,r.revoke_=i,l}var od={get(e,t){if(t===Ht)return e;const n=xr(e);if(!Oc(n,t))return qb(e,n,t);const r=n[t];return e.finalized_||!Rr(r)?r:r===ka(e.base_,t)?(_a(e),e.copy_[t]=Uc(r,e)):r},has(e,t){return t in xr(e)},ownKeys(e){return Reflect.ownKeys(xr(e))},set(e,t,n){const r=g0(xr(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=ka(xr(e),t),s=o==null?void 0:o[Ht];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Fb(n,o)&&(n!==void 0||Oc(e.base_,t)))return!0;_a(e),Bc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ka(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_a(e),Bc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){cn(11)},getPrototypeOf(e){return ko(e.base_)},setPrototypeOf(){cn(12)}},$s={};al(od,(e,t)=>{$s[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$s.deleteProperty=function(e,t){return $s.set.call(this,e,t,void 0)};$s.set=function(e,t,n){return od.set.call(this,e[0],t,n,e[0])};function ka(e,t){const n=e[Ht];return(n?xr(n):e)[t]}function qb(e,t,n){var o;const r=g0(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function g0(e,t){if(!(t in e))return;let n=ko(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ko(n)}}function Bc(e){e.modified_||(e.modified_=!0,e.parent_&&Bc(e.parent_))}function _a(e){e.copy_||(e.copy_=Fc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Qb=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const i=this;return function(a=s,...u){return i.produce(a,f=>n.call(this,f,...u))}}typeof n!="function"&&cn(6),r!==void 0&&typeof r!="function"&&cn(7);let o;if(Rr(t)){const s=dh(this),i=Uc(t,void 0);let l=!0;try{o=n(i),l=!1}finally{l?Hc(s):Vc(s)}return uh(s,r),fh(o,s)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===f0&&(o=void 0),this.autoFreeze_&&rd(o,!0),r){const s=[],i=[];zr("Patches").generateReplacementPatches_(t,o,s,i),r(s,i)}return o}else cn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...l)=>this.produceWithPatches(i,a=>t(a,...l));let r,o;return[this.produce(t,n,(i,l)=>{r=i,o=l}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Rr(e)||cn(8),_o(e)&&(e=Yb(e));const t=dh(this),n=Uc(e,void 0);return n[Ht].isManual_=!0,Vc(t),n}finishDraft(e,t){const n=e&&e[Ht];(!n||!n.isManual_)&&cn(9);const{scope_:r}=n;return uh(r,t),fh(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=zr("Patches").applyPatches_;return _o(e)?r(e,t):this.produce(e,o=>r(o,t))}};function Uc(e,t){const n=Dl(e)?zr("MapSet").proxyMap_(e,t):Ll(e)?zr("MapSet").proxySet_(e,t):Wb(e,t);return(t?t.scope_:m0()).drafts_.push(n),n}function Yb(e){return _o(e)||cn(10,e),y0(e)}function y0(e){if(!Rr(e)||Ol(e))return e;const t=e[Ht];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Fc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Fc(e,!0);return al(n,(r,o)=>{p0(n,r,y0(o))}),t&&(t.finalized_=!1),n}var Vt=new Qb,Xb=Vt.produce;Vt.produceWithPatches.bind(Vt);Vt.setAutoFreeze.bind(Vt);Vt.setUseStrictShallowCopy.bind(Vt);Vt.applyPatches.bind(Vt);Vt.createDraft.bind(Vt);Vt.finishDraft.bind(Vt);const Kb=e=>(t,n,r)=>(r.setState=(o,s,...i)=>{const l=typeof o=="function"?Xb(o):o;return t(l,s,...i)},e(r.setState,n,r)),Gb=Kb,vr=class vr{constructor(){Fn(this,"counters",new Map);Fn(this,"pathRegistry",{nodeToPathsMap:new Map,pathToNodeMap:new Map})}static getInstance(){return vr.instance||(vr.instance=new vr),vr.instance}generateQuestionPathId(t,n,r){return t?`${t.pathId}-Q${n}`:`${r}-Q${n}`}generateAnswerPathId(t,n){return`${t.pathId}-A${n}`}generateOutcomePathId(t,n){return`${t.pathId}-E${n}`}generateVariantPathId(t,n){return`${t}-V${n+1}`}parseVariantFromPath(t){const n=t.match(/(.*-A\d+)-V(\d+)/);return n?{answerPath:n[1],variantNumber:parseInt(n[2])}:null}parsePathId(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];i.startsWith("Q")?o.push({type:"Q",number:parseInt(i.substring(1))}):i.startsWith("A")&&o.push({type:"A",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}parsePathIdWithVariants(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];if(i.startsWith("Q"))o.push({type:"Q",number:parseInt(i.substring(1))});else if(i.startsWith("A"))o.push({type:"A",number:parseInt(i.substring(1))});else if(i.startsWith("V")&&i.includes("+V")){const l=i.substring(1).split("+V").map(a=>parseInt(a));o.push({type:"VC",numbers:l})}else i.startsWith("V")?o.push({type:"V",number:parseInt(i.substring(1))}):i.startsWith("E")&&o.push({type:"E",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}getPathLevel(t){return this.parsePathId(t).segments.filter(r=>r.type==="Q").length}getParentPathId(t){const n=t.split("-");return n.length<=2?null:n.slice(0,-1).join("-")}generateEdgeId(t,n,r){const o=r?`-${r}`:"";return`edge-${t}-${n}${o}`}registerNode(t,n){this.pathRegistry.pathToNodeMap.set(n,t);const r=this.pathRegistry.nodeToPathsMap.get(t)||[];r.includes(n)||this.pathRegistry.nodeToPathsMap.set(t,[...r,n])}getNodePaths(t){return this.pathRegistry.nodeToPathsMap.get(t)||[]}getNodeForPath(t){return this.pathRegistry.pathToNodeMap.get(t)||null}recalculatePathIds(t,n,r){var h,w,v,S,m,g,x,y,_;const o={nodeToPathsMap:new Map,pathToNodeMap:new Map},s=new Map,i=new Map,l=new Map;t.forEach(b=>{s.set(b.id,b)}),n.forEach(b=>{const C=i.get(b.source)||[];C.push(b),i.set(b.source,C);const M=l.get(b.target)||[];M.push(b),l.set(b.target,M)});const a=t.filter(b=>{var C;return b.type==="question"&&((C=b.data)==null?void 0:C.isRoot)===!0});this.counters.clear();const u=new Map;t.forEach(b=>{var C;u.set(b.id,{...b,data:{...b.data,pathIds:[],topic:((C=b.data)==null?void 0:C.topic)||r}})});const f=[];a.forEach(b=>{var M;i.has(b.id)&&(((M=i.get(b.id))==null?void 0:M.length)||0)>0&&f.push({nodeId:b.id,parentPathId:null,level:1})});const d=new Set;for(;f.length>0;){const{nodeId:b,parentPathId:C,level:M}=f.shift(),P=u.get(b);if(!P)continue;let E;if(P.type==="question"){const $=this.getQuestionNumberForNode(P.id,C,t);C===null?E=`${((h=P.data)==null?void 0:h.topic)||r}-Q${$}`:E=`${C}-Q${$}`}else if(P.type==="answer"){const $=this.getAnswerNumberForNode(P.id,C||"STANDALONE",t);if(E=`${C||"STANDALONE"}-A${$}`,((w=P.data)==null?void 0:w.answerType)==="single"){const O=`${b}:${E}`;if(!d.has(O)){d.add(O);const T=u.get(b),k=T.data.pathIds||[];if(!k.includes(E)){u.set(b,{...T,data:{...T.data,pathId:E,primaryPathId:E,pathIds:[...k,E],isRoot:!1,questionLevel:M}}),o.pathToNodeMap.set(E,b);const A=o.nodeToPathsMap.get(b)||[];A.includes(E)||o.nodeToPathsMap.set(b,[...A,E])}}}else{const O=u.get(b),T=O.data.pathIds||[],k=[];if(((v=P.data)==null?void 0:v.answerType)==="multiple")(((S=P.data)==null?void 0:S.variants)||[]).forEach((z,W)=>{const U=`${E}-V${W+1}`;T.includes(U)||k.push(U)});else if(((m=P.data)==null?void 0:m.answerType)==="combinations"){const z=(((g=P.data)==null?void 0:g.variants)||[]).length;for(let W=1;W<Math.pow(2,z);W++){const U=[];for(let X=0;X<z;X++)W&1<<X&&U.push(X+1);const q=`${E}-V${U.join("+V")}`;T.includes(q)||k.push(q)}}const A=[...T,...k];u.set(b,{...O,data:{...O.data,pathId:E,pathIds:A,isRoot:!1,questionLevel:M}}),k.forEach(B=>{o.pathToNodeMap.set(B,b);const z=o.nodeToPathsMap.get(b)||[];z.includes(B)||o.nodeToPathsMap.set(b,[...z,B])})}const I=i.get(b)||[];((x=P.data)==null?void 0:x.answerType)==="single"?I.forEach(O=>{f.push({nodeId:O.target,parentPathId:E,level:M+1,sourceHandle:O.sourceHandle||void 0,sourceNodeId:b})}):((y=P.data)==null?void 0:y.answerType)==="multiple"?I.forEach(O=>{if(O.sourceHandle&&O.sourceHandle.startsWith("variant-")){const T=parseInt(O.sourceHandle.replace("variant-","")),k=`${E}-V${T+1}`;f.push({nodeId:O.target,parentPathId:k,level:M+1,sourceHandle:O.sourceHandle||void 0,sourceNodeId:b})}}):((_=P.data)==null?void 0:_.answerType)==="combinations"&&I.forEach(O=>{var T;if(O.sourceHandle&&O.sourceHandle.startsWith("combination-")){const k=O.sourceHandle.replace("combination-",""),A=((T=P.data)==null?void 0:T.variants)||[],B=[],z=A.length;for(let U=1;U<Math.pow(2,z);U++){const q=[];for(let re=0;re<z;re++)U&1<<re&&q.push(re+1);const X={id:`combo-${U}`,variantIndices:q};B.push(X)}const W=B.find(U=>U.id===k);if(W){const U=`${E}-V${W.variantIndices.join("+V")}`;f.push({nodeId:O.target,parentPathId:U,level:M+1,sourceHandle:O.sourceHandle||void 0,sourceNodeId:b})}}});continue}else if(P.type==="outcome"){const $=this.getOutcomeNumberForNode(P.id,C||"STANDALONE",t);E=`${C||"STANDALONE"}-E${$}`}else E=`${C||"STANDALONE"}-NODE`;const R=`${b}:${E}`;if(d.has(R))continue;d.add(R);const D=u.get(b),L=D.data.pathIds||[];if(!L.includes(E)){const $=[...L,E],I=D.data.primaryPathId,O=!I||E.length<(I||"").length;u.set(b,{...D,data:{...D.data,pathId:O?E:D.data.pathId||E,primaryPathId:O?E:I||E,pathIds:$,isRoot:D.data.isRoot||!1,questionLevel:M,topic:(D.data.isRoot&&D.data.topic,D.data.topic)}})}o.pathToNodeMap.set(E,b);const N=o.nodeToPathsMap.get(b)||[];N.includes(E)||o.nodeToPathsMap.set(b,[...N,E]),P.type!=="answer"&&(i.get(b)||[]).forEach(I=>{if(u.get(I.target)){const T=P.type==="question"?M:M+1;f.push({nodeId:I.target,parentPathId:E,level:T,sourceHandle:I.sourceHandle||void 0,sourceNodeId:b})}})}return t.forEach(b=>{var P;const C=u.get(b.id);if(((P=b.data)==null?void 0:P.isRoot)===!0)return;let M=!1;if(C&&(!C.data.pathIds||C.data.pathIds.length===0)&&(M=!0),M){let E;b.type==="question"?E=`disconnected from root-Q${this.getQuestionNumberForNode(b.id,"disconnected from root",t)}`:b.type==="answer"?E=`disconnected from root-A${this.getAnswerNumberForNode(b.id,"disconnected from root",t)}`:b.type==="outcome"?E=`disconnected from root-E${this.getOutcomeNumberForNode(b.id,"disconnected from root",t)}`:E="disconnected from root-NODE";const R=`${b.id}:${E}`;if(!d.has(R)){d.add(R);const D=u.get(b.id);u.set(b.id,{...D,data:{...D.data,pathId:E,primaryPathId:E,pathIds:[E],isRoot:!1,questionLevel:1,topic:D.data.topic}}),o.pathToNodeMap.set(E,b.id),o.nodeToPathsMap.set(b.id,[E])}}}),this.pathRegistry=o,{nodes:Array.from(u.values()),registry:o}}getQuestionNumberForNode(t,n,r){var a;const o=r.find(u=>u.id===t);return n===null||((a=o==null?void 0:o.data)==null?void 0:a.isRoot)===!0?1:r.filter(u=>{var f;return u.type==="question"&&!((f=u.data)!=null&&f.isRoot)}).sort((u,f)=>u.id.localeCompare(f.id)).findIndex(u=>u.id===t)+2}getAnswerNumberForNode(t,n,r){return r.filter(l=>l.type==="answer").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getOutcomeNumberForNode(t,n,r){return r.filter(l=>l.type==="outcome").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getNextQuestionNumber(t,n){if(t===null)return 1;const r="Q-NEXT",o=this.counters.get(r)||0;return this.counters.set(r,o+1),o+1}getNextAnswerNumber(t){const n="A-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}getNextOutcomeNumber(t){const n="E-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}reset(){this.counters.clear(),this.pathRegistry={nodeToPathsMap:new Map,pathToNodeMap:new Map}}getRegistry(){return this.pathRegistry}getDisplayLabel(t,n){const r=this.parsePathId(t),o=[];switch(r.segments.forEach(s=>{s.type==="Q"&&o.push(s.number)}),n){case"question":return`Q${o.join(".")}`;case"answer":const s=r.segments.filter(i=>i.type==="A").pop();return`A${(s==null?void 0:s.number)||"?"}`;case"outcome":return`Outcome ${this.getPathLevel(t)}`;default:return t}}calculatePathScore(t,n){const r=this.parsePathIdWithVariants(t);let o=0,s=r.topic;for(let i=0;i<r.segments.length;i++){const l=r.segments[i];if(l.type==="Q")s+=`-Q${l.number}`;else if(l.type==="A")s+=`-A${l.number}`;else if(l.type==="V"&&l.number!==void 0){s+=`-V${l.number}`;const a=s.substring(0,s.lastIndexOf("-V")),u=this.getNodeForPath(a);if(u){const f=n.find(d=>d.id===u);if(f&&f.data.variants){const d=l.number-1,p=f.data.variants[d];p&&(o+=p.score||0)}}}else if(l.type==="VC"&&l.numbers){const a=`V${l.numbers.join("+V")}`;s+=`-${a}`;const u=s.substring(0,s.lastIndexOf("-V")),f=this.getNodeForPath(u);if(f){const d=n.find(p=>p.id===f);d&&d.data.variants&&l.numbers.forEach(p=>{const h=d.data.variants[p];h&&(o+=h.score||0)})}}else l.type==="E"&&l.number!==void 0&&(s+=`-E${l.number}`)}return o}getHumanReadablePath(t,n){const r=this.parsePathIdWithVariants(t),o=[];let s="";return r.segments.forEach((i,l)=>{if(i.type==="Q"&&i.number!==void 0){s=l===0?`${r.topic}-Q${i.number}`:s+`-Q${i.number}`;const a=this.getNodeForPath(s),u=n.find(f=>f.id===a);u&&o.push(`Q${i.number}: ${u.data.questionText||"Question"}`)}else if(i.type==="A"&&i.number!==void 0)s+=`-A${i.number}`,o.push(`Answer ${i.number}`);else if(i.type==="V"&&i.number!==void 0){const a=s;s+=`-V${i.number}`;const u=this.getNodeForPath(a),f=n.find(d=>d.id===u);if(f&&f.data.variants){const d=f.data.variants[i.number-1];d&&o.push(`→ "${d.text}"`)}}else if(i.type==="VC"&&i.numbers){const a=s,u=`V${i.numbers.join("+V")}`;s+=`-${u}`;const f=this.getNodeForPath(a),d=n.find(p=>p.id===f);if(d&&d.data.variants){const p=i.numbers.map(h=>{var w;return(w=d.data.variants[h])==null?void 0:w.text}).filter(Boolean);p.length>0&&o.push(`→ [${p.join(" + ")}]`)}}else i.type==="E"&&i.number!==void 0&&(s+=`-E${i.number}`,o.push(`Outcome ${i.number}`))}),o.join(" ")}printPathStructure(t){console.log("=== Path Structure Debug ==="),t.forEach(n=>{n.data.pathIds?(console.log(`Node ${n.id} (${n.type}):`),console.log(`  Primary: ${n.data.pathId||n.data.primaryPathId}`),console.log(`  All paths: ${n.data.pathIds.join(", ")}`)):n.data.pathId&&console.log(`Node ${n.id} (${n.type}): ${n.data.pathId}`)}),console.log("=== Counters ==="),this.counters.forEach((n,r)=>{console.log(`${r}: ${n}`)})}};Fn(vr,"instance");let Xt=vr;const Be=Lb()(Gb((e,t)=>{let n=null;const r=()=>{n&&clearTimeout(n),n=setTimeout(()=>{console.log("🔄 Auto-triggering path propagation after structural changes"),t().propagatePathToAll(),n=null},100)};return{nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,selectedNodeIds:[],copiedNodeIds:[],clipboard:{nodes:[],edges:[]},focusNodeId:null,pathDisplaysFolded:!1,combinationSectionsFolded:!1,history:[{nodes:[],edges:[]}],historyIndex:0,addNode:o=>{t().saveToHistory(),e(s=>{s.nodes.push(o)}),r()},updateNode:(o,s)=>e(i=>{const l=i.nodes.findIndex(a=>a.id===o);l!==-1&&(i.nodes[l].data={...i.nodes[l].data,...s})}),updateNodePosition:(o,s)=>e(i=>{const l=i.nodes.findIndex(a=>a.id===o);l!==-1&&(i.nodes[l].position=s)}),deleteNode:o=>{t().saveToHistory(),e(s=>{s.nodes=s.nodes.filter(l=>l.id!==o);const i=s.edges.filter(l=>l.source===o||l.target===o);s.edges=s.edges.filter(l=>l.source!==o&&l.target!==o),s.selectedNodeId===o&&(s.selectedNodeId=null),i.length>0&&console.log(`Cleaned up ${i.length} edges for deleted node ${o}`)}),r()},deleteNodes:o=>{t().saveToHistory(),e(s=>{s.nodes=s.nodes.filter(l=>!o.includes(l.id));const i=s.edges.filter(l=>o.includes(l.source)||o.includes(l.target));s.edges=s.edges.filter(l=>!o.includes(l.source)&&!o.includes(l.target)),o.includes(s.selectedNodeId||"")&&(s.selectedNodeId=null),s.selectedNodeIds=s.selectedNodeIds.filter(l=>!o.includes(l)),i.length>0&&console.log(`Cleaned up ${i.length} edges for ${o.length} deleted nodes`)}),r()},addEdge:o=>{t().saveToHistory(),e(s=>{s.edges.some(l=>l.source===o.source&&l.target===o.target&&l.sourceHandle===o.sourceHandle&&l.targetHandle===o.targetHandle)||(s.edges.push(o),console.log(`Added edge: ${o.source} -> ${o.target} (handle: ${o.sourceHandle})`))}),r()},deleteEdge:o=>{t().saveToHistory(),e(s=>{const i=s.edges.find(l=>l.id===o);if(i){console.log(`🗑️ Deleting edge: ${i.source} -> ${i.target}`);const l=s.nodes.findIndex(a=>a.id===i.target);if(l!==-1){const a=s.nodes[l];s.nodes[l].data={...a.data,pathId:`disconnected from root-${a.id}`,pathIds:[`disconnected from root-${a.id}`]},console.log(`🗑️ Marked target node ${i.target} as disconnected from root`)}}s.edges=s.edges.filter(l=>l.id!==o)}),r()},setNodes:o=>e(s=>{s.nodes=o}),setEdges:o=>e(s=>{s.edges=o}),setSelectedNodeId:o=>e(s=>{s.selectedNodeId=o,s.selectedEdgeId=null,o?s.selectedNodeIds=[o]:s.selectedNodeIds=[]}),setSelectedEdgeId:o=>e(s=>{s.selectedEdgeId=o,s.selectedNodeId=null}),setSelectedNodeIds:o=>e(s=>{s.selectedNodeIds=o}),addToSelection:o=>e(s=>{s.selectedNodeIds.includes(o)||s.selectedNodeIds.push(o)}),removeFromSelection:o=>e(s=>{s.selectedNodeIds=s.selectedNodeIds.filter(i=>i!==o)}),clearSelection:()=>e(o=>{o.selectedNodeId=null,o.selectedEdgeId=null,o.selectedNodeIds=[]}),markNodesAsCopied:o=>e(s=>{console.log("🟢 markNodesAsCopied() called with:",o);const i=o.filter(a=>s.copiedNodeIds.includes(a)),l=o.filter(a=>!s.copiedNodeIds.includes(a));i.length>0&&console.log("🟡 Some nodes already pulsing:",i),l.length>0?(console.log("🟢 Setting copiedNodeIds to:",[...s.copiedNodeIds,...l]),s.copiedNodeIds=[...s.copiedNodeIds,...l],setTimeout(()=>{console.log("🕒 Auto-clearing copiedNodeIds after 1 second for nodes:",l),e(a=>{a.copiedNodeIds=a.copiedNodeIds.filter(u=>!l.includes(u)),console.log("🕒 copiedNodeIds after clearing:",a.copiedNodeIds)})},1e3)):console.log("🟡 All nodes already pulsing, skipping")}),clearCopiedNodes:()=>e(o=>{o.copiedNodeIds=[]}),copySelectedNodes:()=>e(o=>{console.log("🔄 copySelectedNodes() called - selectedNodeIds:",o.selectedNodeIds);const s=o.nodes.filter(l=>o.selectedNodeIds.includes(l.id)),i=o.edges.filter(l=>o.selectedNodeIds.includes(l.source)&&o.selectedNodeIds.includes(l.target));console.log("🔄 copySelectedNodes() - filtered nodes:",s.length,"edges:",i.length),o.clipboard.nodes=s,o.clipboard.edges=i,console.log(`📋 CLIPBOARD OVERWRITTEN by copySelectedNodes() - ${s.length} nodes and ${i.length} edges to clipboard.`)}),pasteNodes:o=>e(s=>{if(s.clipboard.nodes.length===0){console.log("Clipboard is empty, nothing to paste.");return}const i=[],l=[],a=new Map,u=s.clipboard.nodes,f=Math.min(...u.map(y=>y.position.x)),d=Math.max(...u.map(y=>y.position.x)),p=Math.min(...u.map(y=>y.position.y)),h=Math.max(...u.map(y=>y.position.y)),w=(f+d)/2,v=(p+h)/2,S=(o==null?void 0:o.x)||0,m=(o==null?void 0:o.y)||0,g=S-w,x=m-v;console.log(`📍 Centering ${u.length} nodes at (${S}, ${m})`),console.log(`📐 Clipboard bounds: (${f}, ${p}) to (${d}, ${h}), center: (${w}, ${v})`),console.log(`🎯 Applying offset: (${g}, ${x})`),s.clipboard.nodes.forEach(y=>{const _=`pasted-${y.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.set(y.id,_);const b={...y,id:_,position:{x:y.position.x+g,y:y.position.y+x},data:{...y.data,pathId:y.data.pathId?`${y.data.pathId}-copy`:void 0,topic:y.data.topic?`${y.data.topic}-copy`:y.data.topic,isRoot:!1}};i.push(b)}),s.clipboard.edges.forEach(y=>{const _=a.get(y.source),b=a.get(y.target);if(_&&b){const C=`pasted-${y.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,M={...y,id:C,source:_,target:b,sourceHandle:y.sourceHandle,targetHandle:y.targetHandle,animated:!0};l.push(M)}}),s.nodes.push(...i),s.edges.push(...l),console.log(`Pasted ${i.length} nodes and ${l.length} edges. Original selection preserved.`),r()}),focusOnNode:o=>{e({focusNodeId:o})},clearFocusNode:()=>{e({focusNodeId:null})},togglePathDisplays:()=>{e(o=>({pathDisplaysFolded:!o.pathDisplaysFolded}))},toggleCombinationSections:()=>{e(o=>({combinationSectionsFolded:!o.combinationSectionsFolded}))},toggleAllMeta:()=>{e(o=>{const s=!o.pathDisplaysFolded||!o.combinationSectionsFolded;return{pathDisplaysFolded:s,combinationSectionsFolded:s}})},canUndo:()=>t().historyIndex>0,canRedo:()=>{const o=t();return o.historyIndex<o.history.length-1},cleanupDuplicateEdges:()=>e(o=>{const s=[],i=new Set;o.edges.forEach(a=>{const u=`${a.source}-${a.target}-${a.sourceHandle||""}-${a.targetHandle||""}`;i.has(u)||(i.add(u),s.push(a))});const l=o.edges.length-s.length;o.edges=s,l>0&&console.log(`Removed ${l} duplicate edges`)}),recalculateFlowIds:(o,s)=>e(i=>{var v;const l=Xt.getInstance(),a=i.nodes.find(S=>S.id===o);if(!a||!((v=a.data)!=null&&v.isRoot)){console.log(`Root node ${o} not found or is not a root node`);return}const u=i.nodes.findIndex(S=>S.id===o);u!==-1&&(i.nodes[u]={...i.nodes[u],data:{...i.nodes[u].data,topic:s}});const f=new Set,d=[o];for(f.add(o);d.length>0;){const S=d.shift();i.edges.filter(g=>g.source===S).forEach(g=>{f.has(g.target)||(f.add(g.target),d.push(g.target))})}const p=i.nodes.filter(S=>f.has(S.id)),h=i.edges.filter(S=>f.has(S.source)&&f.has(S.target));console.log(`Recalculating ${p.length} nodes for root "${o}" with topic "${s}"`);const w=l.recalculatePathIds(p,h,s);w.nodes.forEach(S=>{const m=i.nodes.findIndex(g=>g.id===S.id);m!==-1&&(i.nodes[m]=S)}),console.log(`Recalculated path IDs for topic: ${s} (${w.nodes.length} nodes updated)`)}),propagateTopicOnConnection:(o,s)=>e(i=>{var p,h;const l=i.nodes.find(w=>w.id===o),a=i.nodes.find(w=>w.id===s);if(!l||!a)return;if((p=a.data)!=null&&p.isRoot){console.log(`Target node ${s} is a root node - preserving its dedicated topic "${a.data.topic}"`);return}const u=(w,v=new Set)=>{var g,x,y;if(v.has(w))return null;v.add(w);const S=i.nodes.find(_=>_.id===w);if(!S)return null;if((g=S.data)!=null&&g.topic&&((x=S.data)!=null&&x.isRoot)||(y=S.data)!=null&&y.topic)return S.data.topic;const m=i.edges.find(_=>_.target===w);return m?u(m.source,v):null},f=u(o),d=u(s);if(d&&f&&d!==f){console.log(`Cross-topic connection: ${f} -> ${d} (preserving target topic)`);return}if(f&&(!((h=a.data)!=null&&h.topic)||a.data.topic!==f)){const w=i.nodes.findIndex(v=>v.id===s);w!==-1&&(i.nodes[w].data={...i.nodes[w].data,topic:f},console.log(`Propagated topic "${f}" to node ${s}`))}}),propagatePathIdOnConnection:(o,s,i)=>e(l=>{var w,v,S,m,g,x,y,_,b,C,M,P;const a=l.nodes.find(E=>E.id===o),u=l.nodes.find(E=>E.id===s);if(!a||!u)return;const f=Xt.getInstance();let d=[];if(((w=a.data)==null?void 0:w.answerType)==="multiple"&&(i!=null&&i.startsWith("variant-"))){const E=(v=a.data)==null?void 0:v.pathId;if(E&&!E.startsWith("disconnected from root-")){const D=`V${parseInt(i.replace("variant-",""))+1}`,L=`${E}-${D}`;d=[L],console.log(`Generated variant path for Multiple answer: ${L} from base ${E}`)}else{console.log(`Source node ${o} has invalid base path for Multiple variant connection`);return}}else if(((S=a.data)==null?void 0:S.answerType)==="combinations"&&(i!=null&&i.startsWith("combination-"))){const E=(m=a.data)==null?void 0:m.pathId;if(console.log(`🔍 Combination path propagation - Base path: ${E}, Source handle: ${i}`),E&&!E.startsWith("disconnected from root-")){const R=i.replace("combination-","");console.log(`🔍 Extracted combination ID: ${R}`);const D=((g=a.data)==null?void 0:g.combinations)||[];console.log("🔍 Available combinations:",D.map(N=>({id:N.id,variantIndices:N.variantIndices})));const L=D.find(N=>N.id===R);if(console.log("🔍 Found combination:",L),L&&L.variantIndices){const N=L.variantIndices.map(I=>`V${I}`).join("+"),$=`${E}-${N}`;d=[$],console.log(`✅ Generated combination path for Combinations answer: ${$} from base ${E}`)}else{console.log(`❌ Could not find combination data for ${R} or missing variantIndices`),console.log("❌ Combination found:",L);return}}else{console.log(`❌ Source node ${o} has invalid base path for Combinations connection: ${E}`);return}}else d=((x=a.data)==null?void 0:x.pathIds)||[(y=a.data)==null?void 0:y.pathId].filter(Boolean);if(d.length===0){console.log(`Source node ${o} has no valid path IDs for propagation`);return}const p=[];d.forEach(E=>{let R;if(u.type==="question"){const D=f.getQuestionNumberForNode(s,E,l.nodes);R=`${E}-Q${D}`}else if(u.type==="answer"){const D=f.getAnswerNumberForNode(s,E,l.nodes);R=`${E}-A${D}`}else if(u.type==="outcome"){const D=f.getOutcomeNumberForNode(s,E,l.nodes);R=`${E}-E${D}`}else R=`${E}-NODE`;p.push(R)});const h=l.nodes.findIndex(E=>E.id===s);if(h!==-1){const R=[...((_=l.nodes[h].data)==null?void 0:_.pathIds)||[(b=l.nodes[h].data)==null?void 0:b.pathId].filter(Boolean)];p.forEach(N=>{R.includes(N)||R.push(N)}),l.nodes[h].data={...l.nodes[h].data,pathId:R[0]||((C=l.nodes[h].data)==null?void 0:C.pathId),pathIds:R},console.log(`Updated ${u.type} node ${s} with ${p.length} new path IDs via handle "${i}". Total paths: ${R.length}`),console.log(`All path IDs for node ${s}:`,R);const D=(M=a.data)==null?void 0:M.topic,L=(P=u.data)==null?void 0:P.topic;D&&L&&D!==L&&console.log(`Cross-topic connection detected: ${D} -> ${L} for node ${s}`)}}),createLinkedQuestion:(o,s)=>e(i=>{var _,b,C,M,P,E,R;const l=i.nodes.find(D=>D.id===o);if(!l)return;const a=Xt.getInstance(),u=a.getNextQuestionNumber(((_=l.data)==null?void 0:_.pathId)||null),f=((b=l.data)==null?void 0:b.topic)||"NEW-TOPIC",d=(C=l.data)!=null&&C.pathId?{nodeId:l.id,pathId:l.data.pathId,parentPathId:null,level:((M=l.data)==null?void 0:M.questionLevel)||1,topic:f}:null,p=a.generateQuestionPathId(d,u,f),h=`q-${Date.now()}`,w={id:h,type:"question",position:s,data:{pathId:p,topic:f,questionText:"New Question",questionLevel:(((P=l.data)==null?void 0:P.questionLevel)||1)+1,elementId:"NEW",subElementId:"NEW"}},v=a.getNextAnswerNumber(p),S={nodeId:h,pathId:p,parentPathId:((E=l.data)==null?void 0:E.pathId)||null,level:(((R=l.data)==null?void 0:R.questionLevel)||1)+1,topic:f},m=a.generateAnswerPathId(S,v),g=`a-${Date.now()}`,x={id:g,type:"answer",position:{x:s.x,y:s.y+120},data:{pathId:m,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},y={id:a.generateEdgeId(h,g),source:h,target:g,animated:!0};i.nodes.push(w,x),i.edges.push(y),r()}),importFromExcel:o=>e(s=>{s.nodes=o.nodes,s.edges=o.edges,r()}),additiveImport:(o,s)=>e(i=>{i.nodes.push(...o),i.edges.push(...s),r()}),exportToFormat:o=>{const{nodes:s,edges:i}=t();return o==="json"?{nodes:s,edges:i}:null},validateTopicUniqueness:(o,s)=>t().nodes.filter(l=>{var a;return((a=l.data)==null?void 0:a.topic)===o&&l.id!==s}).length===0,generateUniqueTopicName:(o,s)=>{let i=o||"New Topic",l=1;for(;!t().validateTopicUniqueness(i,s);)i=`${o} ${l++}`;return i},clearFlow:()=>e(o=>{o.nodes=[],o.edges=[],o.selectedNodeId=null,o.focusNodeId=null,o.history=[{nodes:[],edges:[]}],o.historyIndex=0,Xt.getInstance().reset()}),saveToHistory:()=>e(o=>{const s={nodes:JSON.parse(JSON.stringify(o.nodes)),edges:JSON.parse(JSON.stringify(o.edges))};o.history=o.history.slice(0,o.historyIndex+1),o.history.push(s),o.historyIndex=o.history.length-1,o.history.length>50&&(o.history.shift(),o.historyIndex=o.history.length-1)}),undo:()=>e(o=>{if(o.historyIndex>0){o.historyIndex--;const s=o.history[o.historyIndex];o.nodes=JSON.parse(JSON.stringify(s.nodes)),o.edges=JSON.parse(JSON.stringify(s.edges)),console.log("Undo: Restored state from history index",o.historyIndex),r()}}),redo:()=>e(o=>{if(o.historyIndex<o.history.length-1){o.historyIndex++;const s=o.history[o.historyIndex];o.nodes=JSON.parse(JSON.stringify(s.nodes)),o.edges=JSON.parse(JSON.stringify(s.edges)),console.log("Redo: Restored state from history index",o.historyIndex),r()}}),propagatePathToAll:()=>{n&&(clearTimeout(n),n=null),t().saveToHistory(),e(o=>{const s=o.nodes.filter(l=>{var a,u;return((a=l.data)==null?void 0:a.isRoot)&&((u=l.data)==null?void 0:u.topic)});if(s.length===0){console.log("No root nodes with topics found");return}console.log(`Found ${s.length} root nodes with topics`);const i=Xt.getInstance();if(i.reset(),s.length===1){const l=s[0].data.topic;console.log(`Recalculating path IDs for single topic "${l}"`);const a=i.recalculatePathIds(o.nodes,o.edges,l);o.nodes=a.nodes,console.log(`Recalculated path IDs for topic "${l}"`)}else{console.log("Multiple root nodes detected - processing all nodes together to preserve individual topics and handle cross-connections");const l=i.recalculatePathIds(o.nodes,o.edges,"MULTI-ROOT");o.nodes=l.nodes,console.log(`Processed ${s.length} roots with cross-connection support`),console.log(`Processed ${s.length} roots with individual topic preservation`)}console.log("Path ID propagation completed - all nodes now have updated path IDs")})}}})),x0=["shift","alt","meta","mod","ctrl","control"],Zb={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function lr(e){return(Zb[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function v0(e){return x0.includes(e)}function Ca(e,t=","){return e.toLowerCase().split(t)}function Ia(e,t="+",n=">",r=!1,o){let s=[],i=!1;e.includes(n)?(i=!0,s=e.toLocaleLowerCase().split(n).map(u=>lr(u))):s=e.toLocaleLowerCase().split(t).map(u=>lr(u));const l={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:r},a=s.filter(u=>!x0.includes(u));return{...l,keys:a,description:o,isSequence:i}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&w0([lr(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&N0([lr(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Tn.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Tn.clear()},0)}));const Tn=new Set;function sd(e){return Array.isArray(e)}function Jb(e,t=","){return(sd(e)?e:e.split(t)).every(n=>Tn.has(n.trim().toLowerCase()))}function w0(e){const t=Array.isArray(e)?e:[e];Tn.has("meta")&&Tn.forEach(n=>!v0(n)&&Tn.delete(n.toLowerCase())),t.forEach(n=>Tn.add(n.toLowerCase()))}function N0(e){const t=Array.isArray(e)?e:[e];e==="meta"?Tn.clear():t.forEach(n=>Tn.delete(n.toLowerCase()))}function eE(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function tE(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function nE(e){return S0(e,["input","textarea","select"])}function S0(e,t=!1){const{target:n,composed:r}=e;let o;return rE(n)&&r?o=e.composedPath()[0]&&e.composedPath()[0].tagName:o=n&&n.tagName,sd(t)?!!(o&&t&&t.some(s=>s.toLowerCase()===o.toLowerCase())):!!(o&&t&&t)}function rE(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function oE(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(n=>t.includes(n))||e.includes("*"):!0}const sE=(e,t,n=!1)=>{const{alt:r,meta:o,mod:s,shift:i,ctrl:l,keys:a,useKey:u}=t,{code:f,key:d,ctrlKey:p,metaKey:h,shiftKey:w,altKey:v}=e,S=lr(f);if(u&&(a==null?void 0:a.length)===1&&a.includes(d))return!0;if(!(a!=null&&a.includes(S))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(S))return!1;if(!n){if(r!==v&&S!=="alt"||i!==w&&S!=="shift")return!1;if(s){if(!h&&!p)return!1}else if(o!==h&&S!=="meta"&&S!=="os"||l!==p&&S!=="ctrl"&&S!=="control")return!1}return a&&a.length===1&&a.includes(S)?!0:a?Jb(a):!a},iE=j.createContext(void 0),lE=()=>j.useContext(iE);function b0(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((n,r)=>n&&b0(e[r],t[r]),!0):e===t}const aE=j.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),cE=()=>j.useContext(aE);function uE(e){const t=j.useRef(void 0);return b0(t.current,e)||(t.current=e),t.current}const ph=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},dE=typeof window<"u"?j.useLayoutEffect:j.useEffect;function pr(e,t,n,r){const o=j.useRef(null),s=j.useRef(!1),i=n instanceof Array?r instanceof Array?void 0:r:n,l=sd(e)?e.join(i==null?void 0:i.delimiter):e,a=n instanceof Array?n:r instanceof Array?r:void 0,u=j.useCallback(t,a??[]),f=j.useRef(u);a?f.current=u:f.current=t;const d=uE(i),{activeScopes:p}=cE(),h=lE();return dE(()=>{if((d==null?void 0:d.enabled)===!1||!oE(p,d==null?void 0:d.scopes))return;let w=[],v;const S=(y,_=!1)=>{var b;if(!(nE(y)&&!S0(y,d==null?void 0:d.enableOnFormTags))){if(o.current!==null){const C=o.current.getRootNode();if((C instanceof Document||C instanceof ShadowRoot)&&C.activeElement!==o.current&&!o.current.contains(C.activeElement)){ph(y);return}}(b=y.target)!=null&&b.isContentEditable&&!(d!=null&&d.enableOnContentEditable)||Ca(l,d==null?void 0:d.delimiter).forEach(C=>{var M,P,E,R;if(C.includes((d==null?void 0:d.splitKey)??"+")&&C.includes((d==null?void 0:d.sequenceSplitKey)??">")){console.warn(`Hotkey ${C} contains both ${(d==null?void 0:d.splitKey)??"+"} and ${(d==null?void 0:d.sequenceSplitKey)??">"} which is not supported.`);return}const D=Ia(C,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description);if(D.isSequence){v=setTimeout(()=>{w=[]},(d==null?void 0:d.sequenceTimeoutMs)??1e3);const L=D.useKey?y.key:lr(y.code);if(v0(L.toLowerCase()))return;w.push(L);const N=(M=D.keys)==null?void 0:M[w.length-1];if(L!==N){w=[],v&&clearTimeout(v);return}w.length===((P=D.keys)==null?void 0:P.length)&&(f.current(y,D),v&&clearTimeout(v),w=[])}else if(sE(y,D,d==null?void 0:d.ignoreModifiers)||(E=D.keys)!=null&&E.includes("*")){if((R=d==null?void 0:d.ignoreEventWhen)!=null&&R.call(d,y)||_&&s.current)return;if(eE(y,D,d==null?void 0:d.preventDefault),!tE(y,D,d==null?void 0:d.enabled)){ph(y);return}f.current(y,D),_||(s.current=!0)}})}},m=y=>{y.code!==void 0&&(w0(lr(y.code)),((d==null?void 0:d.keydown)===void 0&&(d==null?void 0:d.keyup)!==!0||d!=null&&d.keydown)&&S(y))},g=y=>{y.code!==void 0&&(N0(lr(y.code)),s.current=!1,d!=null&&d.keyup&&S(y,!0))},x=o.current||(i==null?void 0:i.document)||document;return x.addEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),x.addEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),h&&Ca(l,d==null?void 0:d.delimiter).forEach(y=>h.addHotkey(Ia(y,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),()=>{x.removeEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),x.removeEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),h&&Ca(l,d==null?void 0:d.delimiter).forEach(y=>h.removeHotkey(Ia(y,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),w=[],v&&clearTimeout(v)}},[l,d,p]),o}function fE(){const e=Fs();pr("tab",t=>{t.preventDefault();const{selectedNodeId:n,nodes:r,createLinkedQuestion:o}=Be.getState();if(n){const s=r.find(i=>i.id===n);if(s){const i={x:s.position.x+300,y:s.position.y};o(n,i)}}},{enableOnFormTags:!1}),pr("delete, backspace",()=>{const{selectedEdgeId:t,selectedNodeIds:n,selectedNodeId:r,deleteNode:o,deleteNodes:s,deleteEdge:i}=Be.getState();t?i(t):n.length>0?s(n):r&&o(r)},{enableOnFormTags:!1}),pr("ctrl+c, cmd+c",t=>{t.preventDefault();const{selectedNodeIds:n,copySelectedNodes:r}=Be.getState();console.log("Copy shortcut pressed, selectedNodeIds:",n),n.length>0?(r(),console.log(`✅ Copied ${n.length} node(s) to clipboard`)):console.log("⚠️ No nodes selected for copying")},{enableOnFormTags:!1}),pr("ctrl+v, cmd+v",t=>{t.preventDefault();const{clipboard:n,pasteNodes:r}=Be.getState();if(console.log("Paste shortcut pressed"),console.log("📋 Clipboard contents:",n),console.log("📋 Clipboard nodes count:",n.nodes.length),console.log("📋 Clipboard edges count:",n.edges.length),n.nodes.length>0){const o=e.getViewport(),s=(-o.x+window.innerWidth/2)/o.zoom,i=(-o.y+window.innerHeight/2)/o.zoom;console.log(`📍 Pasting at viewport center: (${s}, ${i})`),r({x:s,y:i}),console.log(`✅ Pasted ${n.nodes.length} node(s) from clipboard at viewport center`)}else console.log("⚠️ Clipboard is empty - nothing to paste"),console.log("⚠️ Full clipboard object:",JSON.stringify(n,null,2))},{enableOnFormTags:!1}),pr("ctrl+z, cmd+z",t=>{t.preventDefault();const{undo:n}=Be.getState();n()},{enableOnFormTags:!1}),pr("ctrl+y, cmd+shift+z",t=>{t.preventDefault();const{redo:n}=Be.getState();n()},{enableOnFormTags:!1}),pr("escape",()=>{const{setSelectedNodeId:t,setSelectedEdgeId:n,clearSelection:r}=Be.getState();t(null),n(null),r()},{enableOnFormTags:!1})}/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E0=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},a)=>j.createElement("svg",{ref:a,...pE,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:E0("lucide",o),...l},[...i.map(([u,f])=>j.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const n=j.forwardRef(({className:r,...o},s)=>j.createElement(mE,{ref:s,iconNode:t,className:E0(`lucide-${hE(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Xe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=Xe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Xe("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Xe("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Xe("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Xe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=Xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function CE({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,recalculateFlowIds:s,propagateTopicOnConnection:i,propagatePathIdOnConnection:l,focusOnNode:a,edges:u,pathDisplaysFolded:f,nodes:d}=Be(),[p,h]=j.useState(null),[w,v]=j.useState(null),S=p!==null?p:f,m=R=>R.trim()?d.filter(L=>{var N;return((N=L.data)==null?void 0:N.isRoot)&&L.id!==e&&L.data.topic===R.trim()}).length===0:!1,g=R=>{const D=[],L=d.filter($=>{var I;return((I=$.data)==null?void 0:I.isRoot)&&$.id!==e}).map($=>$.data.topic).filter($=>$);for(let $=1;$<=5;$++){const I=`${R}-${$}`;L.includes(I)||D.push(I)}return["NEW","ALT","BRANCH","FLOW","PATH"].forEach($=>{const I=`${$}-${R}`;!L.includes(I)&&D.length<8&&D.push(I)}),D.slice(0,5)},x=()=>{r(e)},y=R=>{const D=R.target;if(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.closest("input")||D.closest("textarea"))return;const L=u.find(N=>N.source===e);L&&a(L.target)},_=R=>{o(e,{questionText:R.target.value})},b=R=>{const D=R.target.value;if(v(null),o(e,{topic:D}),t.isRoot&&D.trim()&&!m(D)){v(`Topic "${D}" already exists. Please choose a different name.`);return}t.isRoot&&D.trim()&&s(e,D)},C=R=>{if(!R.target.value.trim()&&t.isRoot){const L=d.filter(I=>{var O;return((O=I.data)==null?void 0:O.isRoot)&&I.id!==e}).map(I=>I.data.topic).filter(I=>I);let N=1,$=`TOPIC-${N}`;for(;L.includes($);)N++,$=`TOPIC-${N}`;o(e,{topic:$}),s(e,$),v(null)}},M=R=>{o(e,{topic:R}),v(null),t.isRoot&&s(e,R)},P=R=>{R.stopPropagation()},E=()=>{if(t.isRoot&&w){console.log("Cannot create connection: Topic validation failed. Please fix the topic first.");return}const{nodes:R,addNode:D,addEdge:L,edges:N}=Be.getState();if(console.log("🔧 Creating linked answer - preventing node sync interference"),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),N.find(A=>A.source===e)){console.log("This question already has a connection. Only one outgoing connection is allowed.");return}const I=R.find(A=>A.id===e);if(!I)return;const O=`answer-${Date.now()}`,T={id:O,type:"answer",position:{x:I.position.x+150,y:I.position.y+150},data:{pathId:"path-id-will-be-generated",pathIds:[],answerType:"single",topic:t.topic,variants:[{id:`var-${Date.now()}`,text:"Answer option",score:0}]}};D(T);const k={id:`edge-${e}-${O}`,source:e,target:O,sourceHandle:null,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};L(k),i(e,O),l(e,O)};return c.jsxs("div",{className:`
        bg-white rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-blue-500 shadow-xl ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:x,onDoubleClick:y,children:[!t.isRoot&&c.jsx(Yt,{type:"target",position:xe.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-blue-600",children:t.isRoot?"Root Question":"Question"})]}),c.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Level ",t.questionLevel]})]}),c.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),h(!S)},children:[c.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),S?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}),!S&&c.jsx("div",{className:"space-y-1",children:t.pathIds.map((R,D)=>c.jsx("div",{className:"text-xs pl-2",children:R},D))})]}):c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),h(!S)},children:[c.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathIds[0]}),S?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}):c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),h(!S)},children:[c.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathId}),S?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]})}),t.isRoot&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Topic"}),c.jsxs("div",{onClick:P,onMouseDown:P,children:[c.jsx("input",{type:"text",value:t.topic||"",onChange:b,onBlur:C,className:`w-full p-2 border rounded text-sm font-semibold focus:outline-none focus:ring-2 focus:border-transparent ${w?"border-red-300 focus:ring-red-500":"border-gray-200 focus:ring-blue-500"}`,placeholder:"Enter topic...",onFocus:P,onKeyDown:P}),w&&c.jsxs("div",{className:"mt-1 space-y-2",children:[c.jsx("p",{className:"text-xs text-red-600",children:w}),t.topic&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Suggestions:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:g(t.topic).map((R,D)=>c.jsx("button",{onClick:()=>M(R),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:R},D))})]})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Question"}),c.jsx("div",{onClick:P,onMouseDown:P,children:c.jsx("textarea",{value:t.questionText,onChange:_,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:3,placeholder:"Enter your question here...",onFocus:P,onKeyDown:P})})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.elementId}),c.jsx("span",{className:"text-gray-400",children:"|"}),c.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.subElementId})]})]}),c.jsx(Yt,{type:"source",position:xe.Bottom,className:"w-3 h-3 bg-green-500 border-2 border-white cursor-pointer hover:bg-green-600 transition-colors",style:{background:"#22c55e"},onClick:R=>{R.stopPropagation(),E()}})]})}const IE=({onClick:e,hasInfo:t,className:n=""})=>c.jsx("button",{onClick:e,className:`
        w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold
        transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-300
        ${t?"bg-blue-500 text-white shadow-sm hover:bg-blue-600":"bg-gray-300 text-gray-600 hover:bg-gray-400 hover:text-gray-700"}
        ${n}
      `,title:t?"Has additional info - click to edit":"Add additional info",type:"button",children:"i"}),jE=({isOpen:e,onClose:t,onSave:n,currentInfo:r,variantText:o})=>{const[s,i]=j.useState(r),[l,a]=j.useState(o);j.useEffect(()=>{i(r),a(o)},[r,o,e]);const u=()=>{n(l,s),t()},f=d=>{d.key==="Escape"?t():d.key==="Enter"&&(d.ctrlKey||d.metaKey)&&u()};return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",onKeyDown:f,children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",title:"Close",children:c.jsx(id,{size:20,className:"text-gray-500"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Answer Variant:"}),c.jsx("textarea",{value:l,onChange:d=>a(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter answer variant text...",style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word"}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Additional Information:"}),c.jsx("textarea",{value:s,onChange:d=>i(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter additional information that will be stored with this answer variant...",autoFocus:!0})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"This information will be saved with the answer variant but won't be displayed as part of the answer text."})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),c.jsx("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save"})]})]})}):null};function TE({id:e,data:t,selected:n}){var re,be,de;const{setSelectedNodeId:r,updateNode:o,nodes:s,edges:i,addNode:l,addEdge:a,propagateTopicOnConnection:u,focusOnNode:f,pathDisplaysFolded:d,combinationSectionsFolded:p}=Be(),[h,w]=j.useState(t.answerType||"single"),[v,S]=j.useState(null),[m,g]=j.useState(null),x=v!==null?v:d,y=m!==null?m:p,[_,b]=j.useState({isOpen:!1,variantId:null}),C=H=>{H.style.height="auto",H.style.height=H.scrollHeight+"px"};j.useEffect(()=>{(()=>{setTimeout(()=>{document.querySelectorAll(`[data-node-id="${e}"] textarea`).forEach(Z=>{Z instanceof HTMLTextAreaElement&&C(Z)})},10)})()},[t.variants,e]),j.useEffect(()=>{w(t.answerType||"single")},[t.answerType]);const M=()=>{r(e)},P=H=>{if(h!=="single")return;const oe=H.target;if(oe.tagName==="INPUT"||oe.tagName==="TEXTAREA"||oe.closest("input")||oe.closest("textarea")||oe.closest("button"))return;const Z=i.find(G=>G.source===e&&G.sourceHandle==="default");Z&&f(Z.target)},E=(H,oe)=>{if(h!=="multiple")return;const Z=oe.target;if(Z.tagName==="INPUT"||Z.tagName==="TEXTAREA"||Z.closest("input")||Z.closest("textarea")||Z.closest("button"))return;const G=`variant-${H}`,ge=i.find(ye=>ye.source===e&&ye.sourceHandle===G);ge&&f(ge.target)},R=(H,oe)=>{if(h!=="combinations")return;const Z=oe.target;if(Z.tagName==="INPUT"||Z.tagName==="TEXTAREA"||Z.closest("input")||Z.closest("textarea")||Z.closest("button"))return;const G=`combination-${H}`,ge=i.find(ye=>ye.source===e&&ye.sourceHandle===G);ge&&f(ge.target)},D=H=>{console.log("🔧 Creating linked question - preventing node sync interference"),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate();const{edges:oe}=Be.getState();if(oe.find(ne=>ne.source===e&&ne.sourceHandle===(H||"default"))){console.log("This answer variant already has a connection. Only one connection per variant is allowed.");return}const G=s.find(ne=>ne.id===e);if(!G)return;let ge=t.topic;if(!ge){const ne=Oe=>{var ae;const F=s.find(ve=>ve.id===Oe);if(!F)return"Topic";if((ae=F.data)!=null&&ae.topic)return F.data.topic;const Q=Be.getState().edges.find(ve=>ve.target===Oe);return Q?ne(Q.source):"Topic"};ge=ne(e)}const ye=`question-${Date.now()}`,ze={id:ye,type:"question",position:{x:H==="default"?G.position.x:G.position.x+200,y:G.position.y+200},data:{pathId:"path-id-will-be-generated",topic:ge,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(ze);const ue={id:`edge-${e}-${ye}`,source:e,target:ye,sourceHandle:H||"default",targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(ue),u(e,ye)},L=()=>{const H={id:`var-${Date.now()}`,text:"New Answer",score:0},Z=[...t.variants||[],H];if(h==="combinations"){const G=k(Z);o(e,{variants:Z,combinations:G}),console.log(`🔄 Regenerated ${G.length} combinations after adding variant`)}else o(e,{variants:Z})},N=(H,oe)=>{const G=(t.variants||[]).map(ge=>ge.id===H?{...ge,...oe}:ge);if(h==="combinations"&&oe.text!==void 0){const ge=k(G);o(e,{variants:G,combinations:ge}),console.log(`🔄 Regenerated ${ge.length} combinations after updating variant text`)}else o(e,{variants:G})},$=H=>{b({isOpen:!0,variantId:H})},I=()=>{b({isOpen:!1,variantId:null})},O=(H,oe)=>{_.variantId&&N(_.variantId,{text:H,additionalInfo:oe}),I()},T=H=>{const oe=t.variants||[];if(oe.length>1){const Z=oe.filter(G=>G.id!==H);if(h==="combinations"){const G=Z.length>=2?k(Z):[];o(e,{variants:Z,combinations:G}),console.log(`🔄 Regenerated ${G.length} combinations after removing variant`)}else o(e,{variants:Z})}},k=H=>{const oe=[],Z=H.length;for(let G=1;G<Math.pow(2,Z);G++){const ge=[],ye=[];for(let ue=0;ue<Z;ue++)G&1<<ue&&(ge.push(ue+1),ye.push(H[ue].text||`Answer ${ue+1}`));const ze={id:`combo-${G}`,variantIndices:ge,pathId:`combination-${ge.join("-")}`,label:ye.join(" + ")};console.log("🔧 Generated combination:",{id:ze.id,variantIndices:ze.variantIndices,pathId:ze.pathId,label:ze.label}),oe.push(ze)}return oe},A=()=>{if(h!=="combinations")return[];const H=t.variants||[];if(H.length<2)return[];const oe=k(H),Z=t.combinations||[],G=Math.pow(2,H.length)-1;return Z.length!==G||Z.length===0?(console.log(`🔧 Combinations out of sync (stored: ${Z.length}, expected: ${G}). Regenerating...`),o(e,{combinations:oe}),oe):Z},B=()=>A().filter(oe=>{const Z=`combination-${oe.id}`;return i.some(G=>G.source===e&&G.sourceHandle===Z)}),z=()=>A().filter(oe=>{const Z=`combination-${oe.id}`;return!i.some(G=>G.source===e&&G.sourceHandle===Z)}),W=H=>{if(console.log("Creating linked question for combination:",H),console.log("🔧 Creating linked question for combination - preventing node sync interference"),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),i.find(ue=>ue.source===e&&ue.sourceHandle===`combination-${H}`)){console.log("This combination already has a connection. Only one connection per combination is allowed.");return}const Z=s.find(ue=>ue.id===e);if(!Z)return;let G=t.topic;if(!G){const ue=ne=>{var Q;const Oe=s.find(ae=>ae.id===ne);if(!Oe)return"Topic";if((Q=Oe.data)!=null&&Q.topic)return Oe.data.topic;const F=Be.getState().edges.find(ae=>ae.target===ne);return F?ue(F.source):"Topic"};G=ue(e)}const ge=`question-${Date.now()}`,ye={id:ge,type:"question",position:{x:Z.position.x+200,y:Z.position.y+200},data:{pathId:"path-id-will-be-generated",topic:G,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(ye);const ze={id:`edge-${e}-${ge}`,source:e,target:ge,sourceHandle:`combination-${H}`,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(ze),u(e,ge)},U=H=>{w(H);const oe={answerType:H};if(H==="combinations"){const ue=t.variants||[];if(ue.length>=2){const ne=k(ue);oe.combinations=ne,console.log(`🔄 Generated ${ne.length} combinations when switching to combinations mode`)}}else oe.combinations=[];o(e,oe);const{edges:Z,deleteEdge:G,nodes:ge,updateNode:ye}=Be.getState(),ze=Z.filter(ue=>ue.source===e);console.log(`Switching to ${H} mode: removing ${ze.length} outgoing edges and cleaning up pathIDs`),ze.forEach(ue=>{var Oe,F;const ne=ge.find(Q=>Q.id===ue.target);if(ne){const Q=((Oe=ne.data)==null?void 0:Oe.pathIds)||[(F=ne.data)==null?void 0:F.pathId].filter(Boolean),ae=t.pathId;if(ae){const ve=Q.filter(Fe=>!Fe.startsWith(ae));ye(ue.target,{pathId:ve.length>0?ve[0]:void 0,pathIds:ve.length>0?ve:[]}),console.log(`Cleaned pathIDs for target node ${ue.target}: removed paths starting with ${ae}`)}}}),ze.forEach(ue=>G(ue.id))},q=H=>{H.stopPropagation()},X=t.variants||[];return c.jsxs("div",{"data-node-id":e,className:`
        bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow-lg border-2 p-4 w-[350px]
        ${n?"border-purple-500 shadow-xl ring-2 ring-purple-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-100":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer relative
      `,onClick:M,onDoubleClick:P,children:[c.jsx(Yt,{type:"target",position:xe.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),t.answerLevel&&c.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:["Level ",t.answerLevel]}),c.jsxs("div",{className:"flex items-center space-x-2 text-xs",onClick:q,onMouseDown:q,children:[c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",value:"single",checked:h==="single",onChange:H=>U(H.target.value),className:"mr-1"}),"Single"]}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",value:"multiple",checked:h==="multiple",onChange:H=>U(H.target.value),className:"mr-1"}),"Multiple"]}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",value:"combinations",checked:h==="combinations",onChange:H=>U(H.target.value),className:"mr-1"}),"Combinations"]})]})]}),c.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:H=>{H.stopPropagation(),S(!x)},children:[c.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),x?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}),!x&&c.jsx("div",{className:"space-y-1",children:t.pathIds.map((H,oe)=>c.jsx("div",{className:"text-xs pl-2",children:H},oe))})]}):c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:H=>{H.stopPropagation(),S(!x)},children:[c.jsx("div",{className:"truncate",children:x?"Path: ...":t.pathIds[0]}),x?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}):c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:H=>{H.stopPropagation(),S(!x)},children:[c.jsx("div",{className:"truncate",children:x?"Path: ...":t.pathId||"No path"}),x?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]})}),c.jsx("div",{className:`text-xs rounded px-2 py-1 text-center font-medium ${h==="single"?"bg-blue-50 text-blue-600":h==="multiple"?"bg-green-50 text-green-600":"bg-yellow-50 text-yellow-600"}`,children:h==="single"?"↓ Single path (bottom)":h==="multiple"?"→ Multiple paths (variants)":"→ Combinations (variants)"}),c.jsx("div",{className:"space-y-2",children:X.map((H,oe)=>{var ge;const Z=`variant-${oe}`,G=(ge=t.orphanedVariants)==null?void 0:ge.includes(Z);return c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:`bg-white rounded-lg p-3 shadow-sm border ${h==="multiple"?"border-green-200 hover:border-green-300":"border-gray-100"} ${G?"ring-1 ring-orange-400 border-orange-300":""} transition-colors`,onClick:q,onMouseDown:q,onDoubleClick:ye=>E(oe,ye),children:[c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(IE,{onClick:()=>$(H.id),hasInfo:!!H.additionalInfo,className:"mt-1 flex-shrink-0"}),c.jsx("textarea",{value:H.text,onChange:ye=>{N(H.id,{text:ye.target.value}),C(ye.target)},onInput:ye=>C(ye.target),className:"flex-1 text-sm bg-transparent focus:outline-none resize-none min-h-[24px] leading-relaxed overflow-hidden",placeholder:"Answer text...",rows:1,style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",overflow:"hidden",boxSizing:"border-box"},onFocus:q,onKeyDown:q,ref:ye=>{ye&&setTimeout(()=>C(ye),0)}}),c.jsx("input",{type:"number",value:H.score,onChange:ye=>N(H.id,{score:Number(ye.target.value)}),className:"w-12 text-xs text-center bg-gray-50 rounded px-1 py-1 focus:outline-none focus:bg-white border border-gray-200 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield] flex-shrink-0",placeholder:"0",title:"Score",min:"-999",max:"999",onFocus:q,onKeyDown:q,onWheel:ye=>{ye.currentTarget.blur(),ye.stopPropagation()},onClick:q,onMouseDown:q}),X.length>1&&c.jsx("button",{onClick:ye=>{ye.stopPropagation(),T(H.id)},className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors flex-shrink-0",children:c.jsx(id,{size:12})})]}),H.additionalInfo&&c.jsxs("div",{className:"mt-2 text-xs text-gray-500 italic truncate bg-blue-50 px-2 py-1 rounded",children:["Info: ",H.additionalInfo]})]}),h==="multiple"&&c.jsx(Yt,{type:"source",position:xe.Right,id:`variant-${oe}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:G?"#fb923c":"#22c55e",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:ye=>{ye.stopPropagation(),D(`variant-${oe}`)}})]},H.id)})}),h==="combinations"&&X.length>1&&c.jsx("div",{className:"space-y-3 border-t pt-3",children:c.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-yellow-100 px-2 py-1 rounded",onClick:H=>{H.stopPropagation(),g(!y)},children:[c.jsx("div",{className:"text-xs text-yellow-700",children:"All combinations are active. Connect them to questions:"}),y?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}),!y&&c.jsx("div",{className:"space-y-2",children:A().map(H=>{const oe=z().some(G=>G.id===H.id),Z=B().some(G=>G.id===H.id);return c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:`group flex items-center space-x-2 bg-white rounded-lg p-2 shadow-sm border transition-colors hover:items-start ${Z?"border-green-300 bg-green-50":oe?"border-orange-300 bg-orange-50":"border-gray-200"}`,onClick:q,onMouseDown:q,onDoubleClick:G=>R(H.id,G),children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate group-hover:whitespace-normal group-hover:break-words group-hover:overflow-hidden",children:H.label})}),c.jsxs("div",{className:"flex items-center space-x-1",children:[Z&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Connected"}),oe&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"Orphaned"})]}),c.jsx("div",{className:"flex space-x-1",children:H.variantIndices.map(G=>c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:G},G))})]}),c.jsx(Yt,{type:"source",position:xe.Right,id:`combination-${H.id}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:oe?"#fb923c":"#f59e0b",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:G=>{G.stopPropagation(),W(H.id)}})]},H.id)})}),y&&A().map(H=>c.jsx(Yt,{type:"source",position:xe.Right,id:`combination-${H.id}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:"transparent",width:"10px",height:"10px",zIndex:10,cursor:"pointer",border:"none"},className:"",onClick:oe=>{oe.stopPropagation(),W(H.id)}},`folded-handle-${H.id}`))]})}),c.jsxs("button",{onClick:H=>{H.stopPropagation(),L()},className:"w-full flex items-center justify-center space-x-2 p-2 border-2 border-dashed border-purple-300 rounded-lg text-sm text-purple-600 hover:border-purple-500 hover:bg-purple-50 transition-colors font-medium",children:[c.jsx(SE,{size:14}),c.jsx("span",{children:"Add Answer"})]})]}),h==="single"&&c.jsx(Yt,{type:"source",position:xe.Bottom,id:"default",className:"w-3 h-3 border-2 border-white cursor-pointer hover:scale-125 transition-transform",style:{background:(re=t.orphanedVariants)!=null&&re.includes("default")?"#fb923c":"#22c55e"},onClick:H=>{H.stopPropagation(),D("default")}}),_.isOpen&&_.variantId&&c.jsx(jE,{isOpen:_.isOpen,onClose:I,onSave:O,currentInfo:((be=X.find(H=>H.id===_.variantId))==null?void 0:be.additionalInfo)||"",variantText:((de=X.find(H=>H.id===_.variantId))==null?void 0:de.text)||""})]})}function $E({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,pathDisplaysFolded:s}=Be(),[i,l]=j.useState(null),a=i!==null?i:s,u=()=>{r(e)},f=p=>{o(e,{recommendation:p.target.value})},d=p=>{p.stopPropagation()};return c.jsxs("div",{className:`
        bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-green-500 shadow-xl ring-2 ring-green-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:u,children:[c.jsx(Yt,{type:"target",position:xe.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-green-600",children:"Outcome"})]}),c.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Final"})]}),c.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:p=>{p.stopPropagation(),l(!a)},children:[c.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),a?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}),!a&&c.jsx("div",{className:"space-y-1",children:t.pathIds.map((p,h)=>c.jsx("div",{className:"text-xs pl-2",children:p},h))})]}):c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:p=>{p.stopPropagation(),l(!a)},children:[c.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathIds[0]}),a?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]}):c.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:p=>{p.stopPropagation(),l(!a)},children:[c.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathId}),a?c.jsx(vn,{size:12}):c.jsx(un,{size:12})]})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Recommendation"}),c.jsx("div",{onClick:d,onMouseDown:d,children:c.jsx("textarea",{value:t.recommendation||"",onChange:f,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:4,placeholder:"Enter recommendation text...",onFocus:d,onKeyDown:d})})]}),c.jsx("div",{className:"text-xs rounded px-2 py-1 text-center font-medium bg-green-50 text-green-600 border border-green-200",children:"🎯 Final Outcome"})]})]})}const PE={question:CE,answer:TE,outcome:$E},ME={animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};function AE({shouldAutoOrganize:e=!1,onAutoOrganizeComplete:t}){const{nodes:n,edges:r,addEdge:o,updateNodePosition:s,deleteEdge:i,propagateTopicOnConnection:l,propagatePathIdOnConnection:a,selectedNodeId:u,selectedEdgeId:f,selectedNodeIds:d,setSelectedEdgeId:p,setSelectedNodeIds:h,clearSelection:w,setNodes:v,focusNodeId:S,clearFocusNode:m,copiedNodeIds:g}=Be(),x=j.useMemo(()=>(console.log("🎭 Processing nodes for copied state:",{totalNodes:n.length,copiedNodeIds:g,copiedCount:g.length}),n.map(F=>(g.includes(F.id)&&console.log(`✨ Node ${F.id} will get inline animation styles`),{...F}))),[n,g]),[y,_,b]=ab(x),[C,M,P]=cb(r),E=Fs(),{upstreamSiblings:R,downstreamSiblings:D}=j.useMemo(()=>{if(d.length===0)return{upstreamSiblings:new Set,downstreamSiblings:new Set};const F=new Set,Q=new Set;return d.forEach(ae=>{C.forEach(ve=>{ve.target===ae&&!d.includes(ve.source)&&F.add(ve.source)}),C.forEach(ve=>{ve.source===ae&&!d.includes(ve.target)&&Q.add(ve.target)})}),{upstreamSiblings:F,downstreamSiblings:Q}},[d,C]);V.useEffect(()=>{console.log("🎨 Applying copied animation to DOM elements directly"),g.forEach(Q=>{const ae=document.querySelector(`[data-id="${Q}"]`);if(ae){console.log(`✨ Directly applying copied animation to DOM node ${Q}`),ae.classList.add("copied"),ae.style.animation="copiedNodePulse 2s ease-in-out 1";const ve=()=>{console.log(`🎬 Animation ended for node ${Q}, cleaning up`),ae.classList.remove("copied"),ae.style.animation="",ae.removeEventListener("animationend",ve)};ae.addEventListener("animationend",ve)}else console.log(`❌ Could not find DOM element for copied node ${Q}`)}),document.querySelectorAll(".react-flow__node").forEach(Q=>{const ae=Q.getAttribute("data-id");if(ae&&!g.includes(ae)){const ve=Q;ve.classList.contains("copied")&&(console.log(`🧹 Removing copied animation from DOM node ${ae} (fallback cleanup)`),ve.classList.remove("copied"),ve.style.animation="")}}),_(x)},[x,g,_]);const[L,N]=j.useState(null),[$,I]=j.useState(!1),[O,T]=j.useState(!1),k=$&&!O,A=$&&O,B=k||A,z=j.useRef(!1),W=j.useRef(!1),U=j.useRef(!1);j.useEffect(()=>{console.log("🔧 Setting up enhanced keyboard event listeners");const F=He=>{He.key==="Shift"&&(z.current=!0,I(!0),console.log("✅ Shift key pressed - entering selection mode",{isDPressed:O,isShiftDeleteMode:O}),console.log(O?"🗑️ Shift+D mode - entering delete selection mode":"📋 Shift mode - entering copy selection mode")),(He.key==="d"||He.key==="D")&&(W.current=!0,T(!0),console.log("🔧 D key pressed",{isShiftPressed:$,isShiftSelectMode:$}),$&&console.log("🗑️ Shift+D mode - entering delete selection mode"))},Q=He=>{if(He.key==="Shift"){console.log("⬆️ Shift key released - checking context"),z.current=!1;const te=Be.getState().selectedNodeIds;te.length>0&&(console.log(`✨ Shift released with ${te.length} selected nodes - triggering pulse as fallback`),Be.getState().markNodesAsCopied(te)),I(!1),U.current=!1,console.log("✅ Shift state cleared - selection mode disabled")}(He.key==="d"||He.key==="D")&&(console.log("⬆️ D key released"),W.current=!1,T(!1))},ae=()=>{console.log("🔍 Window lost focus - checking Shift state"),(z.current||$)&&(console.log("⚠️ Window lost focus while Shift was pressed - marking for recovery"),U.current=!0)},ve=()=>{console.log("🔍 Window gained focus - checking for stuck states"),U.current&&(console.log("🔧 Recovering from focus loss - checking current Shift state"),setTimeout(()=>{$&&!z.current&&(console.log("🚨 Detected stuck Shift state - forcing reset"),I(!1),T(!1),U.current=!1)},100))},Fe=He=>{$&&!He.shiftKey&&(console.log("🚨 Detected Shift key mismatch via mouse event - forcing reset"),z.current=!1,I(!1),T(!1),U.current=!1)},$e=()=>{L!=null&&L.isSelecting&&(console.log("🖱️ Global mouse up - ending selection"),ge())};return window.addEventListener("keydown",F),window.addEventListener("keyup",Q),window.addEventListener("blur",ae),window.addEventListener("focus",ve),window.addEventListener("mousemove",Fe,{passive:!0}),window.addEventListener("mouseup",$e),()=>{console.log("🧹 Cleaning up enhanced keyboard event listeners"),window.removeEventListener("keydown",F),window.removeEventListener("keyup",Q),window.removeEventListener("blur",ae),window.removeEventListener("focus",ve),window.removeEventListener("mousemove",Fe),window.removeEventListener("mouseup",$e)}},[L==null?void 0:L.isSelecting]),j.useEffect(()=>{const F=setInterval(()=>{if($){const Q=ae=>{!ae.shiftKey&&$&&(console.log("🚨 Periodic check detected stuck Shift state - forcing reset"),I(!1),T(!1),z.current=!1,W.current=!1,U.current=!1),window.removeEventListener("keydown",Q),window.removeEventListener("keyup",Q)};window.addEventListener("keydown",Q),window.addEventListener("keyup",Q),setTimeout(()=>{window.removeEventListener("keydown",Q),window.removeEventListener("keyup",Q)},1e3)}},2e3);return()=>{clearInterval(F)}},[$]);const q=j.useCallback(()=>{console.log("🚨 Emergency reset triggered"),I(!1),T(!1),z.current=!1,W.current=!1,U.current=!1,N(null)},[]);j.useEffect(()=>(window.emergencyResetKeyboardState=q,console.log("🔧 Emergency reset function available as window.emergencyResetKeyboardState()"),()=>{delete window.emergencyResetKeyboardState}),[q]);const X=V.useRef(!1),re=V.useRef(null);fE(),V.useEffect(()=>{if(S&&E){const F=y.find(Q=>Q.id===S);F&&(E.fitView({nodes:[F],padding:.3,maxZoom:1.2,minZoom:.5,duration:800}),setTimeout(()=>{m()},100))}},[S,y,E,m]),V.useEffect(()=>{const{cleanupDuplicateEdges:F}=Be.getState();F()},[]),V.useEffect(()=>{_(F=>{if(X.current)return console.log("Bulk update detected - using store positions directly"),n;if(F.length===0)return n;const ae=(()=>{const J=new Set,ee=new Set;return r.forEach(Y=>{J.add(Y.target),ee.add(Y.source)}),n.filter(Y=>{var je;if(Y.type==="question"&&((je=Y.data)!=null&&je.isRoot))return!ee.has(Y.id);if(Y.type==="outcome")return!J.has(Y.id);const se=J.has(Y.id),he=ee.has(Y.id);return!se||!he}).map(Y=>Y.id)})(),Fe=(()=>{const J=new Map;return n.forEach(ee=>{var Y;if(ee.type==="answer"&&((Y=ee.data)!=null&&Y.variants)){const se=ee.data.variants,he=ee.data.answerType||"single",je=[];he==="multiple"&&se.forEach((we,Ne)=>{const ie=`variant-${Ne}`;r.some(Ee=>Ee.source===ee.id&&Ee.sourceHandle===ie)||je.push(ie)}),he==="single"&&(r.some(Ne=>Ne.source===ee.id&&Ne.sourceHandle==="default")||je.push("default")),je.length>0&&J.set(ee.id,je)}}),J})(),$e=J=>{if(!J)return{parents:[],children:[]};const ee=r.filter(se=>se.target===J).map(se=>se.source),Y=r.filter(se=>se.source===J).map(se=>se.target);return{parents:ee,children:Y}},{parents:He,children:te}=$e(u),le=new Map;return F.forEach(J=>{le.set(J.id,J.position)}),n.map(J=>{const ee=le.get(J.id),Y=F.find(se=>se.id===J.id);return{...J,position:ee||J.position,selected:(Y==null?void 0:Y.selected)||d.includes(J.id),data:{...J.data,isOrphaned:ae.includes(J.id),isParent:He.includes(J.id),isChild:te.includes(J.id),isSelected:u===J.id,isMultiSelected:d.includes(J.id),orphanedVariants:Fe.get(J.id)||[]}}})})},[n,r,_,u,d]),V.useEffect(()=>{const F=r.map(Q=>{let ae="#9ca3af",ve={stroke:ae,strokeWidth:2};return f===Q.id?(ae="#dc2626",ve={stroke:ae,strokeWidth:3,filter:"drop-shadow(0 0 16px #dc2626cc)",opacity:1}):u&&(Q.source===u||Q.target===u)&&(ae="#2563eb",ve={stroke:ae,strokeWidth:2,filter:"drop-shadow(0 0 16px #2563ebcc)",opacity:1}),{...Q,style:{...Q.style,...ve}}});M(F)},[r,M,u,f]);const be=j.useCallback(F=>{var He,te,le,J;if(!F.source||!F.target)return;console.log("Creating edge:",F),X.current=!0,console.log("🔧 Connection bulk update flag set - preventing node sync interference");const Q=n.find(ee=>ee.id===F.source),ae=n.find(ee=>ee.id===F.target);if(!Q||!ae){console.log("Source or target node not found");return}if(F.sourceHandle&&Q.type==="answer"){const ee=(He=Q.data)==null?void 0:He.answerType,Y=((te=Q.data)==null?void 0:te.variants)||[],se=((le=Q.data)==null?void 0:le.combinations)||[];if(F.sourceHandle.startsWith("variant-")){const he=parseInt(F.sourceHandle.replace("variant-",""));if(ee!=="multiple"){console.error(`🚨 Handle validation failed: variant handle ${F.sourceHandle} used on non-multiple answer type (${ee})`);return}if(he>=Y.length||he<0){console.error(`🚨 Handle validation failed: variant-${he} handle does not exist (only ${Y.length} variants available)`);return}console.log(`✅ Handle validation passed: ${F.sourceHandle} exists on ${ee} answer with ${Y.length} variants`)}if(F.sourceHandle.startsWith("combination-")){const he=F.sourceHandle.replace("combination-","");if(ee!=="combinations"){console.error(`🚨 Handle validation failed: combination handle ${F.sourceHandle} used on non-combinations answer type (${ee})`);return}if(!se.some(we=>we.id===he)){console.error(`🚨 Handle validation failed: combination-${he} handle does not exist`);return}console.log(`✅ Handle validation passed: ${F.sourceHandle} exists on combinations answer`)}if(F.sourceHandle==="default"&&ee!=="single"){console.error(`🚨 Handle validation failed: default handle used on non-single answer type (${ee})`);return}}if(Q.type==="answer"&&ae.type!=="question"&&ae.type!=="outcome"){console.log("Answer nodes can only connect to Question nodes or Outcome nodes");return}if(Q.type==="question"&&ae.type!=="answer"){console.log("Question nodes can only connect to Answer nodes");return}if(Q.type==="question"&&((J=Q.data)!=null&&J.isRoot)&&n.filter(Y=>{var se;return((se=Y.data)==null?void 0:se.isRoot)&&Y.id!==Q.id&&Y.data.topic===Q.data.topic}).length>0){console.log(`Cannot create connection: Topic "${Q.data.topic}" already exists on another root question. Please choose a different topic.`);return}if(Q.type==="answer"&&r.find(Y=>Y.source===F.source&&Y.sourceHandle===F.sourceHandle)){console.log("Answer variant already has a connection. Only one connection per variant is allowed.");return}if(Q.type==="question"&&r.find(Y=>Y.source===F.source)){console.log("Question node already has a connection. Only one outgoing connection is allowed.");return}if(((ee,Y)=>{if(ee===Y)return!0;const se=new Set,he=[Y];for(;he.length>0;){const je=he.pop();if(se.has(je))continue;if(se.add(je),je===ee)return!0;r.filter(Ne=>Ne.source===je).forEach(Ne=>{se.has(Ne.target)||he.push(Ne.target)})}return!1})(F.source,F.target)){console.log("Connection would create a loop, preventing connection");return}const Fe=Xt.getInstance(),$e={...F,source:F.source,target:F.target,id:Fe.generateEdgeId(F.source,F.target,F.sourceHandle||void 0),animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};console.log("Generated edge:",$e),o($e),l(F.source,F.target),a(F.source,F.target,F.sourceHandle||void 0),setTimeout(()=>{X.current=!1,console.log("🔧 Connection bulk update flag cleared - nodes sync can resume")},100)},[o,r,l,a,n]),de=j.useCallback((F,Q)=>{Be.getState().setSelectedNodeId(Q.id)},[]),H=j.useCallback((F,Q)=>{p(Q.id)},[p]),oe=j.useCallback(()=>{Be.getState().setSelectedNodeId(null),p(null),w()},[p,w]),Z=j.useCallback(F=>{if(B&&!F.target.closest("button, input, textarea, select, .react-flow__handle, .react-flow__controls, .react-flow__minimap")){console.log(`Starting selection box - ${A?"Shift+D delete mode":"Shift copy mode"}`),F.preventDefault(),F.stopPropagation();const ve=F.currentTarget.getBoundingClientRect();N({start:{x:F.clientX-ve.left,y:F.clientY-ve.top},end:{x:F.clientX-ve.left,y:F.clientY-ve.top},isSelecting:!0})}},[$]),G=j.useCallback(F=>{if(L!=null&&L.isSelecting){F.preventDefault(),F.stopPropagation();const Q=F.currentTarget.getBoundingClientRect();N(ae=>ae?{...ae,end:{x:F.clientX-Q.left,y:F.clientY-Q.top}}:null)}},[L==null?void 0:L.isSelecting]),ge=j.useCallback(F=>{if(L&&E){F&&(F.preventDefault(),F.stopPropagation());const{x:Q,y:ae}=L.start,{x:ve,y:Fe}=L.end,$e=Math.min(Q,ve),He=Math.max(Q,ve),te=Math.min(ae,Fe),le=Math.max(ae,Fe);if(Math.abs(He-$e)>5||Math.abs(le-te)>5){const J=E.screenToFlowPosition({x:$e,y:te}),ee=E.screenToFlowPosition({x:He,y:le});console.log("Selection box coordinates:",{startFlow:J,endFlow:ee});const Y=y.filter(he=>{const je=he.position.x,we=he.position.y,Ne=he.width||280,ie=he.height||150,pe=je<ee.x&&je+Ne>J.x&&we<ee.y&&we+ie>J.y;return pe&&console.log(`Node ${he.id} overlaps: pos(${je}, ${we}) size(${Ne}, ${ie})`),pe});console.log(`Selected ${Y.length} nodes:`,Y.map(he=>he.id));const se=Y.map(he=>he.id);if(Be.setState(he=>(he.selectedNodeIds=se,he)),console.log(`🎯 Updated selection: store=${se.length} nodes`),se.length>0)if(A)console.log(`🗑️ Deleting ${se.length} nodes in Shift+D mode`),Be.getState().deleteNodes(se),console.log(`✅ Successfully deleted ${se.length} nodes`);else{const he=Y,je=C.filter(we=>se.includes(we.source)&&se.includes(we.target));Be.setState(we=>(we.clipboard.nodes=he,we.clipboard.edges=je,console.log("📋 CLIPBOARD UPDATED - Nodes:",we.clipboard.nodes.length,"Edges:",we.clipboard.edges.length),we)),console.log(`🎯 Auto-copied ${he.length} nodes and ${je.length} edges to clipboard`),console.log(`✨ Triggering immediate pulse for ${se.length} selected nodes`),Be.getState().markNodesAsCopied(se),setTimeout(()=>{se.forEach(we=>{const Ne=document.querySelector(`[data-id="${we}"]`);Ne?(console.log(`🔍 DOM node ${we} classes:`,Ne.className),console.log(`🔍 DOM node ${we} inline style:`,Ne.style.animation),console.log(`🔍 DOM node ${we} inline boxShadow:`,Ne.style.boxShadow),console.log(`🔍 DOM node ${we} computed animation:`,window.getComputedStyle(Ne).animation)):console.log(`❌ Could not find DOM element for node ${we}`)})},100),setTimeout(()=>{const we=Be.getState().clipboard;console.log("📋 CLIPBOARD CHECK (100ms later):",we.nodes.length,"nodes,",we.edges.length,"edges")},100)}h(se),se.length>0&&E.setNodes(he=>he.map(je=>({...je,selected:se.includes(je.id)})))}}N(null)},[L,E,y,C,A]),ye=j.useCallback(({nodes:F})=>{const Q=F.map($e=>$e.id);console.log("React Flow selection changed:",Q);const ae=Be.getState().selectedNodeIds,ve=[...Q].sort(),Fe=[...ae].sort();JSON.stringify(ve)!==JSON.stringify(Fe)&&Be.setState($e=>($e.selectedNodeIds=Q,$e))},[]),ze=j.useCallback(F=>{if(b(F),X.current){console.log("Skipping position sync during bulk update");return}F.forEach(Q=>{Q.type==="position"&&Q.position&&s&&s(Q.id,Q.position)})},[b,s]),ue=j.useCallback(F=>{P(F),F.forEach(Q=>{Q.type==="remove"&&Q.id&&(console.log("Edge deleted:",Q.id),i(Q.id))})},[P,i]);V.useEffect(()=>(E&&(window.reactFlowInstance=E),()=>{window.reactFlowInstance===E&&delete window.reactFlowInstance}),[E]),V.useEffect(()=>(window.flowCanvasSetBulkUpdate=()=>{console.log("Setting bulk update flag"),X.current=!0,re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{console.log("Resetting bulk update flag"),X.current=!1,re.current=null},500)},()=>{re.current&&clearTimeout(re.current),delete window.flowCanvasSetBulkUpdate}),[]),j.useEffect(()=>{if(e&&E&&n.length>0&&!X.current){console.log("Auto-organizing nodes...");const F=setTimeout(()=>{X.current?(console.log("🔧 Skipping auto-organize due to bulk update (import operation)"),t==null||t()):(ne(),setTimeout(()=>{t==null||t()},100))},1e3);return()=>clearTimeout(F)}},[e,E,n.length,t]);const ne=()=>{if(console.log("🎯 PowerPoint-Style Auto-Organize: Starting distribution and alignment..."),n.length<2){console.log("Not enough nodes to organize");return}X.current=!0,console.log("🔧 Bulk update flag set - preventing position overwrite"),console.log("🎯 Auto-organizing",n.length,"nodes with HARD CONSTRAINT overlap prevention");class F{constructor(){Fn(this,"grid",new Set);Fn(this,"cellSize",50)}getRectangleCells(pe,Ee,Pe,me){const Se=[],Me=Math.floor(pe/this.cellSize),Qe=Math.floor((pe+Pe)/this.cellSize),We=Math.floor(Ee/this.cellSize),_e=Math.floor((Ee+me)/this.cellSize);for(let Ve=Me;Ve<=Qe;Ve++)for(let Ce=We;Ce<=_e;Ce++)Se.push(`${Ve},${Ce}`);return Se}isPositionFree(pe,Ee,Pe,me){return!this.getRectangleCells(pe,Ee,Pe,me).some(Me=>this.grid.has(Me))}occupyPosition(pe,Ee,Pe,me){this.getRectangleCells(pe,Ee,Pe,me).forEach(Me=>this.grid.add(Me))}findNearestFreePosition(pe,Ee,Pe,me,Se=0,Me=0,Qe=2e3){if(pe>=Se&&Ee>=Me&&this.isPositionFree(pe,Ee,Pe,me))return{x:pe,y:Ee};const We=25;for(let Ce=We;Ce<=Qe;Ce+=We)for(let Ye=-Ce;Ye<=Ce;Ye+=We)for(let Ie=-Ce;Ie<=Ce;Ie+=We){if(Math.abs(Ye)!==Ce&&Math.abs(Ie)!==Ce)continue;const Re=pe+Ye,ce=Ee+Ie;if(!(Re<Se||ce<Me)&&this.isPositionFree(Re,ce,Pe,me))return{x:Re,y:ce}}console.warn("⚠️ Spiral search failed, using fallback positioning");for(let Ce=Me;Ce<Me+Qe;Ce+=We)for(let Ye=Se;Ye<Se+Qe;Ye+=We)if(this.isPositionFree(Ye,Ce,Pe,me))return{x:Ye,y:Ce};const _e=Se+Qe+100,Ve=Me+Math.random()*500;return console.error("🚨 All placement strategies failed, using ultimate fallback"),{x:_e,y:Ve}}}const ae=(()=>{const Pe=Math.max(n.length*300,1200),me=800;if(n.length<=3)return{x:150,y:150};const Se=[];n.forEach(ke=>{var nt;const Te=ke.type==="answer"&&((nt=ke.data)==null?void 0:nt.answerType)==="combinations"?400:150,at=100;Se.push({x:ke.position.x-at,y:ke.position.y-at,width:300+2*at,height:Te+2*at})});const Me=(ke,Ae,Te,at)=>!Se.some(nt=>ke<nt.x+nt.width&&ke+Te>nt.x&&Ae<nt.y+nt.height&&Ae+at>nt.y);let Qe=150,We=150,_e=150,Ve=150;n.length>0&&(Qe=Math.min(...n.map(ke=>ke.position.x)),We=Math.max(...n.map(ke=>ke.position.x+300)),_e=Math.min(...n.map(ke=>ke.position.y)),Ve=Math.max(...n.map(ke=>ke.position.y+150)));const Ce=We+200;if(Me(Ce,150,Pe,me))return console.log("📍 Found empty space to the right of existing content"),{x:Ce,y:150};const Ye=Ve+200;if(Me(150,Ye,Pe,me))return console.log("📍 Found empty space below existing content"),{x:150,y:Ye};const Ie=_e-me-200;if(Ie>=150&&Me(150,Ie,Pe,me))return console.log("📍 Found empty space above existing content"),{x:150,y:Ie};const Re=Qe-Pe-200;if(Re>=150&&Me(Re,150,Pe,me))return console.log("📍 Found empty space to the left of existing content"),{x:Re,y:150};for(let ke=150;ke<2150;ke+=500)for(let Ae=150;Ae<3150;Ae+=500)if(Me(Ae,ke,Pe,me))return console.log(`📍 Found empty space via grid search at (${Ae}, ${ke})`),{x:Ae,y:ke};const ce=We+500,Ke=150;return console.log("📍 Using fallback position - placing far to the right"),{x:ce,y:Ke}})(),ve=400,Fe=200,$e=ae.x,He=ae.y,te=new F,le=ie=>{var Pe,me,Se;let Ee=120;if(ie.type==="answer"&&((Pe=ie.data)==null?void 0:Pe.answerType)==="combinations"){const Me=((me=ie.data)==null?void 0:me.combinations)||[],Qe=((Se=ie.data)==null?void 0:Se.variants)||[];if(Me.length>0){const We=Qe.length*50,_e=Me.length*70;Ee=200+We+_e}}return{width:300,height:Ee}},J=new Map,ee=new Map;n.forEach(ie=>{J.set(ie.id,[]),ee.set(ie.id,[])}),r.forEach(ie=>{const pe=J.get(ie.source)||[];pe.push(ie.target),J.set(ie.source,pe);const Ee=ee.get(ie.target)||[];Ee.push(ie.source),ee.set(ie.target,Ee)});const Y=[],se=new Set,he=ie=>{const pe=[],Ee=[ie],Pe=new Set;for(;Ee.length>0;){const me=Ee.pop();if(Pe.has(me.id))continue;Pe.add(me.id),se.add(me.id),pe.push(me);const Se=J.get(me.id)||[],Me=ee.get(me.id)||[];[...Se,...Me].forEach(Qe=>{const We=n.find(_e=>_e.id===Qe);We&&!Pe.has(Qe)&&Ee.push(We)})}return pe};n.forEach(ie=>{if(!se.has(ie.id)){const pe=he(ie);pe.length>0&&Y.push(pe)}}),console.log("🎯 Components found:",Y.length);const je=(ie,pe)=>{const Ee=new Set(ie.map(Ie=>Ie.id)),me=(()=>{const Ie=ie.filter(ce=>(ee.get(ce.id)||[]).filter(ke=>Ee.has(ke)).length===0);if(Ie.length===0)return[ie[0]];let Re=[];for(const ce of Ie){const Ke=[];let ke=ce;const Ae=new Set;for(;ke&&!Ae.has(ke.id);){Ae.add(ke.id),Ke.push(ke);const at=(J.get(ke.id)||[]).map(nt=>ie.find(yt=>yt.id===nt)).filter(nt=>nt!==void 0&&Ee.has(nt.id)&&!Ae.has(nt.id));if(at.length===0){ke=null;break}ke=at.reduce((nt,yt)=>{const mn=(J.get(yt.id)||[]).length+(ee.get(yt.id)||[]).length,Fl=(J.get(nt.id)||[]).length+(ee.get(nt.id)||[]).length;return mn>Fl?yt:nt})}Ke.length>Re.length&&(Re=Ke)}return Re})(),Se=new Set(me.map(Ie=>Ie.id)),Me=me.length*ve+800,Qe=600;let We,_e;if(pe===0)We=$e,_e=He;else{const Ie=$e,Re=He+pe*400,ce=te.findNearestFreePosition(Ie,Re,Me,Qe,$e,He,3e3);We=ce.x,_e=ce.y,console.log(`📍 Component ${pe} positioned at (${We}, ${_e}) - estimated size: ${Me}×${Qe}px`)}const Ve=[],Ce=new Map;me.forEach((Ie,Re)=>{const{width:ce,height:Ke}=le(Ie),ke=We+Re*ve,Ae=_e,Te=te.findNearestFreePosition(ke,Ae,ce,Ke,$e,He);te.occupyPosition(Te.x,Te.y,ce,Ke),Ce.set(Ie.id,Te),Ve.push({...Ie,position:Te}),console.log(`📍 Main path ${Re}: ${Ie.id} at (${Te.x}, ${Te.y}) [${ce}x${Ke}]`)});const Ye=ie.filter(Ie=>!Se.has(Ie.id));for(const Ie of Ye){const{width:Re,height:ce}=le(Ie),Ke=ee.get(Ie.id)||[],ke=J.get(Ie.id)||[];let Ae=null;for(const Te of Ke)if(Se.has(Te)){Ae=me.find(at=>at.id===Te)||null;break}if(!Ae){for(const Te of ke)if(Se.has(Te)){Ae=me.find(at=>at.id===Te)||null;break}}if(!Ae&&me.length>0&&(Ae=me[0]),Ae){const Te=Ce.get(Ae.id),at=le(Ae).height,nt=[{x:Te.x,y:Te.y-ce-Fe},{x:Te.x,y:Te.y+at+Fe},{x:Te.x-Re-100,y:Te.y},{x:Te.x+300+100,y:Te.y},{x:Te.x-Re-100,y:Te.y-ce-Fe},{x:Te.x+300+100,y:Te.y-ce-Fe},{x:Te.x-Re-100,y:Te.y+at+Fe},{x:Te.x+300+100,y:Te.y+at+Fe}];let yt=null;for(const mn of nt)if(mn.x>=$e&&mn.y>=He&&te.isPositionFree(mn.x,mn.y,Re,ce)){yt=mn;break}yt||(yt=te.findNearestFreePosition(Te.x,Te.y-ce-Fe,Re,ce,$e,He)),te.occupyPosition(yt.x,yt.y,Re,ce),Ce.set(Ie.id,yt),Ve.push({...Ie,position:yt}),console.log(`📍 Branch: ${Ie.id} at (${yt.x}, ${yt.y}) [${Re}x${ce}] connected to ${Ae.id}`)}}return Ve},we=[];Y.forEach((ie,pe)=>{const Ee=je(ie,pe);we.push(...Ee)}),n.filter(ie=>!we.some(pe=>pe.id===ie.id)).forEach(ie=>{const{width:pe,height:Ee}=le(ie),Pe=$e,me=He+Y.length*300,Se=te.findNearestFreePosition(Pe,me,pe,Ee,$e,He);te.occupyPosition(Se.x,Se.y,pe,Ee),we.push({...ie,position:Se}),console.log(`📍 Isolated: ${ie.id} at (${Se.x}, ${Se.y}) [${pe}x${Ee}]`)}),console.log("🎯 PowerPoint-style layout with HARD CONSTRAINTS complete. Nodes positioned:",we.length),console.log("🔒 GUARANTEE: Zero overlaps enforced by spatial grid system"),v(we),t==null||t()},Oe=j.useCallback((F,Q)=>{E&&E.setCenter(Q.x,Q.y,{zoom:E.getZoom()})},[E]);return c.jsx("div",{className:`w-full h-full bg-gradient-to-br from-gray-50 to-gray-100 ${B?"cursor-crosshair":""}`,children:c.jsxs(s0,{nodes:y,edges:C,onNodesChange:ze,onEdgesChange:ue,onConnect:be,onNodeClick:de,onPaneClick:oe,onEdgeClick:H,onMouseDown:Z,onMouseMove:G,onMouseUp:ge,onSelectionChange:ye,nodeTypes:PE,connectionMode:ur.Loose,defaultEdgeOptions:ME,className:`bg-transparent ${B?"selection-mode":""}`,nodesDraggable:!B,nodesConnectable:!0,elementsSelectable:!0,selectNodesOnDrag:!1,panOnDrag:!B,panOnScroll:!0,panOnScrollSpeed:.5,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!1,preventScrolling:!1,panActivationKeyCode:null,multiSelectionKeyCode:null,selectionKeyCode:null,deleteKeyCode:null,children:[c.jsx(Pb,{variant:Jt.Dots,gap:16,size:1,color:"#e5e7eb"}),c.jsx(_b,{className:"bg-white shadow-lg rounded-lg border border-gray-200"}),c.jsx(vb,{className:"bg-white shadow-lg rounded-lg border border-gray-200",nodeColor:F=>{var Q;if(d.includes(F.id))switch(F.type){case"question":return"#1e40af";case"answer":return"#6b21a8";case"outcome":return"#15803d";default:return"#374151"}if(R.has(F.id))switch(F.type){case"question":return"#ea580c";case"answer":return"#dc2626";case"outcome":return"#f59e0b";default:return"#f97316"}if(D.has(F.id))switch(F.type){case"question":return"#7c3aed";case"answer":return"#9333ea";case"outcome":return"#a855f7";default:return"#8b5cf6"}if((Q=F.data)!=null&&Q.isOrphaned)return"#fb923c";switch(F.type){case"question":return"#94a3b8";case"answer":return"#cbd5e1";case"outcome":return"#d1d5db";default:return"#e5e7eb"}},maskColor:"rgba(255, 255, 255, 0.9)",pannable:!0,zoomable:!0,onClick:Oe}),c.jsxs(Ml,{position:"top-right",className:"bg-white p-3 rounded-lg shadow-lg",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Flow Stats"}),c.jsxs("div",{className:"space-y-1 text-xs",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),c.jsxs("span",{children:["Questions: ",y.filter(F=>F.type==="question").length]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),c.jsxs("span",{children:["Answers: ",y.filter(F=>F.type==="answer").length]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),c.jsxs("span",{children:["Outcomes: ",y.filter(F=>F.type==="outcome").length]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),c.jsxs("span",{children:["Connections: ",C.length]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),c.jsxs("span",{children:["Orphaned: ",y.filter(F=>{var Q;return(Q=F.data)==null?void 0:Q.isOrphaned}).length]}),y.filter(F=>{var Q;return(Q=F.data)==null?void 0:Q.isOrphaned}).length>0&&c.jsx("button",{className:"ml-2 px-2 py-1 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors",onClick:()=>{const F=y.filter(Fe=>{var $e;return($e=Fe.data)==null?void 0:$e.isOrphaned});if(F.length===0)return;const ae=((window.__orphanCycleIndex||0)+1)%F.length;window.__orphanCycleIndex=ae;const ve=F[ae];console.log(`🎯 Cycling to orphaned node ${ve.id} (${ae+1}/${F.length})`),E.setCenter(ve.position.x,ve.position.y,{zoom:Math.max(E.getZoom(),.8),duration:800})},title:`Cycle through ${y.filter(F=>{var Q;return(Q=F.data)==null?void 0:Q.isOrphaned}).length} orphaned nodes`,children:"→"})]})]})]}),(L==null?void 0:L.isSelecting)&&c.jsx("div",{className:"absolute pointer-events-none border-2 border-blue-500 bg-blue-200 bg-opacity-20 z-10",style:{left:Math.min(L.start.x,L.end.x),top:Math.min(L.start.y,L.end.y),width:Math.abs(L.end.x-L.start.x),height:Math.abs(L.end.y-L.start.y)}})]})})}class qc{generateCombinationsForNode(t){const n=[],r=t.length;for(let o=1;o<Math.pow(2,r);o++){const s=[],i=[];for(let a=0;a<r;a++)o&1<<a&&(s.push(a+1),i.push(t[a].text||`Variant ${a+1}`));const l={id:`combo-${o}`,variantIndices:s,pathId:`PATH-V${s.join("+V")}`,label:i.join(" + ")};n.push(l)}return n}exportToJson(t,n){const r=t.filter(h=>h.type==="question"),o=t.filter(h=>h.type==="answer"),s=t.filter(h=>h.type==="outcome"),l=r.filter(h=>h.data.isRoot).map(h=>h.data.topic).filter(Boolean),u={topic:l.length>1?`Multi-Topic (${l.join(", ")})`:l[0]||"UNTITLED",version:"1.0.0",createdAt:new Date().toISOString(),totalQuestions:r.length},f={};r.forEach(h=>{f[h.id]={id:h.id,type:"question",pathId:h.data.pathId,pathIds:h.data.pathIds&&h.data.pathIds.length>1?h.data.pathIds:void 0,content:h.data.questionText,level:h.data.questionLevel,position:h.position,topic:h.data.topic}}),o.forEach(h=>{var w,v;f[h.id]={id:h.id,type:"answer",pathId:h.data.pathId,pathIds:h.data.pathIds&&h.data.pathIds.length>1?h.data.pathIds:void 0,content:`${((w=h.data.variants)==null?void 0:w.length)||0} variants`,level:0,position:h.position,topic:h.data.topic,answerType:h.data.answerType,variants:(v=h.data.variants)==null?void 0:v.map(S=>({id:S.id,text:S.text,score:S.score,allowsInput:S.allowsInput,inputValidation:S.inputValidation,additionalInfo:S.additionalInfo})),combinations:h.data.answerType==="combinations"?this.generateCombinationsForNode(h.data.variants||[]):void 0,combinationRules:h.data.combinationRules}}),s.forEach(h=>{f[h.id]={id:h.id,type:"outcome",pathId:h.data.pathId,pathIds:h.data.pathIds&&h.data.pathIds.length>1?h.data.pathIds:void 0,content:h.data.recommendation||"No recommendation provided",level:0,position:h.position,topic:h.data.topic,recommendation:h.data.recommendation}});const d={},p={};return n.forEach(h=>{const w=t.find(S=>S.id===h.source),v=t.find(S=>S.id===h.target);!w||!v||(d[h.source]||(d[h.source]={}),h.sourceHandle&&h.sourceHandle.startsWith("variant-")?(d[h.source].variants||(d[h.source].variants={}),d[h.source].variants[h.sourceHandle]=v.data.pathId):h.sourceHandle&&h.sourceHandle.startsWith("combination-")?(d[h.source].combinations||(d[h.source].combinations={}),d[h.source].combinations[h.sourceHandle]=v.data.pathId):d[h.source].default=v.data.pathId)}),o.forEach(h=>{(h.data.answerType==="multiple"||h.data.answerType==="combinations")&&h.data.combinationRules&&(p[h.id]=h.data.combinationRules.map((w,v)=>({condition:w.selectedVariants,nextNode:w.nextNode,priority:v+1})))}),{metadata:u,nodes:f,navigation:d,multipleChoiceRules:p}}exportToExcel(t){const n=this.convertToCSV(t);return new Blob([n],{type:"text/csv"})}convertToCSV(t){const r=[["Path ID","All Path IDs","Clean Path ID","Type","Content","Level","Variants","Scores","Next Path"]];return Object.values(t.nodes).forEach(o=>{var s,i;o.type==="question"?r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Question",o.content,o.level.toString(),"","",((s=t.navigation[o.id])==null?void 0:s.default)||""]):o.type==="answer"?((i=o.variants)==null||i.forEach((l,a)=>{var f,d;const u=((d=(f=t.navigation[o.id])==null?void 0:f.variants)==null?void 0:d[`variant-${a}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Answer",l.text,"0",l.text,l.score.toString(),u])}),o.answerType==="combinations"&&o.combinations&&o.combinations.forEach(l=>{var u,f;const a=((f=(u=t.navigation[o.id])==null?void 0:u.combinations)==null?void 0:f[`combination-${l.id}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Combination",l.label,"0",l.label,l.variantIndices.map(d=>{var p,h;return((h=(p=o.variants)==null?void 0:p[d])==null?void 0:h.score)||0}).reduce((d,p)=>d+p,0).toString(),a])})):o.type==="outcome"&&r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Outcome",o.recommendation||"No recommendation","0","","",""])}),r.map(o=>o.map(s=>`"${s.replace(/"/g,'""')}"`).join(",")).join(`
`)}cleanPathId(t){const n=t.split("-");return n.length<=2?t:n.slice(1).join("-")}importFromJson(t){const n=[],r=[];return Object.values(t.nodes).forEach((o,s)=>{const i=o.position||{x:200+s%3*400,y:200+Math.floor(s/3)*300};o.type==="question"?n.push({id:o.id,type:"question",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],topic:o.topic||"IMPORTED",isRoot:o.level===1,questionText:o.content,questionLevel:o.level,elementId:"IMPORTED",subElementId:"IMPORTED"}}):o.type==="answer"?n.push({id:o.id,type:"answer",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],answerType:o.answerType||"single",variants:o.variants||[],combinations:o.combinations,combinationRules:o.combinationRules,topic:o.topic||"IMPORTED"}}):o.type==="outcome"&&n.push({id:o.id,type:"outcome",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],recommendation:o.recommendation||"No recommendation provided",topic:o.topic||"IMPORTED"}})}),Object.entries(t.navigation).forEach(([o,s])=>{if(s.default){const i=n.find(l=>l.data.pathId===s.default);i&&r.push({id:`edge-${o}-${i.id}`,source:o,target:i.id,sourceHandle:"default",animated:!0})}s.variants&&Object.entries(s.variants).forEach(([i,l])=>{const a=n.find(u=>u.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})}),s.combinations&&Object.entries(s.combinations).forEach(([i,l])=>{const a=n.find(u=>u.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})})}),{nodes:n,edges:r}}testCombinationExportImport(){var r,o;console.log("Testing combination export/import functionality...");const t=[{id:"test-answer-1",type:"answer",position:{x:100,y:100},data:{pathId:"Test-A1",pathIds:["Test-A1"],answerType:"combinations",variants:[{id:"var1",text:"Option A",score:1},{id:"var2",text:"Option B",score:2}],topic:"Test"}},{id:"test-question-1",type:"question",position:{x:300,y:100},data:{pathId:"Test-A1-V0+V1-Q1",pathIds:["Test-A1-V0+V1-Q1"],questionText:"Test Question",questionLevel:2,topic:"Test",isRoot:!1,elementId:"E1",subElementId:"SE1"}}],n=[{id:"test-edge-1",source:"test-answer-1",target:"test-question-1",sourceHandle:"combination-combo-3",animated:!0}];try{const s=this.exportToJson(t,n);console.log("Export successful:",{hasNavigationCombinations:!!((r=s.navigation["test-answer-1"])!=null&&r.combinations),hasCombinationData:!!((o=s.nodes["test-answer-1"])!=null&&o.combinations)});const{nodes:i,edges:l}=this.importFromJson(s);return console.log("Import successful:",{nodeCount:i.length,edgeCount:l.length,hasCombinationHandle:l.some(a=>{var u;return(u=a.sourceHandle)==null?void 0:u.startsWith("combination-")})}),!0}catch(s){return console.error("Test failed:",s),!1}}}class RE{static findAvailableSpace(t,n=400){if(t.length===0)return{x:200,y:200};const r=Math.max(...t.map(s=>s.position.x+300)),o=Math.min(...t.map(s=>s.position.y));return{x:r+n,y:o}}static generateUniqueId(t,n){let r=1,o=`${t}-imported`;for(;n.has(o);)o=`${t}-imported-${r}`,r++;return o}static adjustImportedPositions(t,n){if(t.length===0)return[];const r=Math.min(...t.map(l=>l.position.x)),o=Math.min(...t.map(l=>l.position.y)),s=n.x-r,i=n.y-o;return t.map(l=>({...l,position:{x:l.position.x+s,y:l.position.y+i}}))}static resolveConflicts(t,n,r,o){const s=[],i=new Set(t.map(d=>d.id)),l=new Set(n.map(d=>d.id)),a=new Map,u=r.map(d=>{if(i.has(d.id)){const p=this.generateUniqueId(d.id,i);return a.set(d.id,p),i.add(p),s.push({originalId:d.id,newId:p,type:"node",reason:`Node ID "${d.id}" already exists`}),{...d,id:p}}return i.add(d.id),d}),f=o.map(d=>{let p={...d};if(a.has(d.source)&&(p.source=a.get(d.source)),a.has(d.target)&&(p.target=a.get(d.target)),l.has(d.id)){const h=this.generateUniqueId(d.id,l);l.add(h),s.push({originalId:d.id,newId:h,type:"edge",reason:`Edge ID "${d.id}" already exists`}),p.id=h}else l.add(d.id);return p});return{resolvedNodes:u,resolvedEdges:f,conflicts:s}}static getTopicsFromNodes(t){const n=new Set;return t.forEach(r=>{var o;(o=r.data)!=null&&o.topic&&n.add(r.data.topic)}),Array.from(n).sort()}static performAdditiveImport(t,n,r,o){const s=this.findAvailableSpace(t),i=this.adjustImportedPositions(r,s),{resolvedNodes:l,resolvedEdges:a,conflicts:u}=this.resolveConflicts(t,n,i,o),f=[...t,...l],d=[...n,...a],p=this.getTopicsFromNodes(l),h=this.getTopicsFromNodes(f);return{nodes:f,edges:d,conflicts:u,statistics:{imported:{nodes:l.length,edges:a.length,topics:p},total:{nodes:f.length,edges:d.length,topics:h}}}}}function zE({isOpen:e,importResult:t,onAccept:n,onRevert:r,onClose:o}){if(!e||!t)return null;const{statistics:s,conflicts:i}=t;return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(mh,{className:"w-6 h-6 text-green-500"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Successful"})]}),c.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(id,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-lg font-medium text-blue-900 mb-3 flex items-center",children:[c.jsx(xE,{className:"w-5 h-5 mr-2"}),"Imported Content"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-700",children:"Nodes:"}),c.jsx("span",{className:"font-medium text-blue-900",children:s.imported.nodes})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-700",children:"Connections:"}),c.jsx("span",{className:"font-medium text-blue-900",children:s.imported.edges})]}),c.jsxs("div",{className:"mt-3",children:[c.jsx("span",{className:"text-blue-700",children:"Topics:"}),c.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.imported.topics.map(l=>c.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded",children:l},l))})]})]})]}),c.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-lg font-medium text-green-900 mb-3 flex items-center",children:[c.jsx(mh,{className:"w-5 h-5 mr-2"}),"Total Canvas"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Nodes:"}),c.jsx("span",{className:"font-medium text-green-900",children:s.total.nodes})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Connections:"}),c.jsx("span",{className:"font-medium text-green-900",children:s.total.edges})]}),c.jsxs("div",{className:"mt-3",children:[c.jsx("span",{className:"text-green-700",children:"Topics:"}),c.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.total.topics.map(l=>c.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs rounded",children:l},l))})]})]})]})]}),i.length>0&&c.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-lg font-medium text-yellow-900 mb-3 flex items-center",children:[c.jsx(kE,{className:"w-5 h-5 mr-2"}),"Conflicts Resolved (",i.length,")"]}),c.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map((l,a)=>c.jsx("div",{className:"bg-yellow-100 rounded p-3 text-sm",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"font-medium text-yellow-900",children:[l.type==="node"?"Node":"Edge"," ID Conflict"]}),c.jsx("div",{className:"text-yellow-700 mt-1",children:l.reason}),c.jsxs("div",{className:"text-yellow-600 mt-1",children:[c.jsx("span",{className:"font-mono",children:l.originalId}),c.jsx("span",{className:"mx-2",children:"→"}),c.jsx("span",{className:"font-mono",children:l.newId})]})]})})},a))})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Summary"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully imported ",s.imported.nodes," nodes and ",s.imported.edges," connections",i.length>0&&` with ${i.length} conflicts resolved`,". The imported content has been positioned to avoid overlap with existing nodes and is ready for use."]})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[c.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Revert Import"}),c.jsx("button",{onClick:n,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept Import"})]})]})})}function DE({onAddNode:e,onLoadDemo:t,onClearAll:n,onSetNodes:r,nodes:o=[]}){const{setEdges:s,edges:i,nodes:l,setNodes:a,togglePathDisplays:u,toggleCombinationSections:f,pathDisplaysFolded:d,combinationSectionsFolded:p}=Be(),[h,w]=j.useState(!1),v=j.useRef(null);j.useEffect(()=>{const z=W=>{v.current&&!v.current.contains(W.target)&&w(!1)};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[]);const S=o.length>0?o:l,[m,g]=j.useState(!1),[x,y]=j.useState(null),[_,b]=j.useState(null),C=()=>{const z=window.reactFlowInstance;let W=400,U=300;if(z)try{const re=window.innerWidth,be=window.innerHeight,de={x:re/2,y:be/2},H=z.screenToFlowPosition(de);W=H.x,U=H.y}catch(re){console.warn("Failed to get viewport center, using fallback position:",re)}if(S.length===0)return{x:W,y:U};const q=S.map(re=>re.position),X=100;for(let re=0;re<500;re+=X)for(let be=0;be<360;be+=45){const de=be*Math.PI/180,H=W+re*Math.cos(de),oe=U+re*Math.sin(de);if(!q.some(G=>Math.sqrt(Math.pow(G.x-H,2)+Math.pow(G.y-oe,2))<X))return{x:H,y:oe}}return{x:W+Math.random()*100-50,y:U+Math.random()*100-50}},M=z=>{const{nodes:W}=Be.getState(),U=W.filter(q=>{var X;return(X=q.data)==null?void 0:X.isRoot}).map(q=>q.data.topic).filter(q=>q);{let q=1,X=`TOPIC-${q}`;for(;U.includes(X);)q++,X=`TOPIC-${q}`;return X}},P=()=>{const z=Xt.getInstance(),W=C(),U=M(),q=z.getNextQuestionNumber(null,U),X=z.generateQuestionPathId(null,q,U),re={id:`q-${Date.now()}`,type:"question",position:W,data:{pathId:X,topic:U,isRoot:!0,questionText:"New Root Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};z.registerNode(re.id,X),e==null||e(re),w(!1)},E=()=>{const z=Xt.getInstance(),W=C(),U=`STANDALONE-Q${Date.now()}`,q={id:`q-${Date.now()}`,type:"question",position:W,data:{pathId:U,topic:"STANDALONE",isRoot:!1,questionText:"New Regular Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};z.registerNode(q.id,U),e==null||e(q),w(!1)},R=()=>{const z=Xt.getInstance(),W=C(),q=`STANDALONE-A${z.getNextAnswerNumber("STANDALONE")}`,X={id:`a-${Date.now()}`,type:"answer",position:W,data:{pathId:q,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}};e==null||e(X)},D=()=>{const z=Xt.getInstance(),W=C(),q=`STANDALONE-E${z.getNextOutcomeNumber("STANDALONE")}`,X={id:`o-${Date.now()}`,type:"outcome",position:W,data:{pathId:q,recommendation:"Enter your recommendation here...",topic:"General"}};e==null||e(X)},L=()=>{const z=Be.getState(),U=new qc().exportToJson(S,z.edges),q=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),X=URL.createObjectURL(q),re=document.createElement("a");re.href=X,re.download=`flow-${U.metadata.topic}-${Date.now()}.json`,re.click(),URL.revokeObjectURL(X)},N=()=>{const z=document.createElement("input");z.type="file",z.accept=".json",z.onchange=W=>{var q;const U=(q=W.target.files)==null?void 0:q[0];if(U){const X=new FileReader;X.onload=re=>{var be;try{const de=JSON.parse((be=re.target)==null?void 0:be.result);let H=[],oe=[];if(de.metadata&&de.nodes&&de.navigation){const ge=new qc().importFromJson(de);H=ge.nodes,oe=ge.edges}else if(de.nodes&&de.edges)H=de.nodes,oe=de.edges;else{console.error("Invalid file format");return}b({nodes:[...S],edges:[...i]});const Z=RE.performAdditiveImport(S,i,H,oe);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),r==null||r(Z.nodes),s(Z.edges),y(Z),g(!0)}catch(de){console.error("Error importing flow:",de)}},X.readAsText(U)}},z.click()},$=()=>{t==null||t()},I=()=>{n==null||n()},O=()=>{console.log("🧹 Cleaning up invalid edges...");const z=i.filter(W=>{var X,re,be;const U=S.find(de=>de.id===W.source),q=S.find(de=>de.id===W.target);if(!U||!q)return console.log(`🗑️ Removing edge ${W.id}: missing source or target node`),!1;if(U.type==="answer"&&W.sourceHandle){const de=(X=U.data)==null?void 0:X.answerType,H=((re=U.data)==null?void 0:re.variants)||[],oe=((be=U.data)==null?void 0:be.combinations)||[];if(W.sourceHandle.startsWith("variant-")){const Z=parseInt(W.sourceHandle.replace("variant-",""));if(de!=="multiple")return console.log(`🗑️ Removing edge ${W.id}: variant handle on non-multiple answer`),!1;if(Z>=H.length||Z<0)return console.log(`🗑️ Removing edge ${W.id}: invalid variant index ${Z} (max: ${H.length-1})`),!1}if(W.sourceHandle.startsWith("combination-")){const Z=W.sourceHandle.replace("combination-","");if(de!=="combinations")return console.log(`🗑️ Removing edge ${W.id}: combination handle on non-combinations answer`),!1;if(!oe.some(ge=>ge.id===Z))return console.log(`🗑️ Removing edge ${W.id}: invalid combination ID ${Z}`),!1}if(W.sourceHandle==="default"&&de!=="single")return console.log(`🗑️ Removing edge ${W.id}: default handle on non-single answer`),!1}return!0});z.length!==i.length?(console.log(`🧹 Cleaned up ${i.length-z.length} invalid edges`),s(z)):console.log("✅ No invalid edges found")},T=()=>{if(console.log("🎯 PowerPoint-Style Organize: Starting smart placement..."),S.length<2){console.log("Not enough nodes to organize");return}O(),window.flowCanvasSetBulkUpdate&&(window.flowCanvasSetBulkUpdate(),console.log("🔧 Bulk update flag set - preventing position overwrite")),console.log("🎯 Organizing",S.length,"nodes with HARD CONSTRAINT overlap prevention"),console.log("🎯 Using organize mode: CLEAN");class W{constructor(le){Fn(this,"grid",new Set);Fn(this,"cellSize");this.cellSize=Math.max(25,Math.min(le,100)),console.log(`🔧 Using adaptive grid cell size: ${this.cellSize}px`)}getRectangleCells(le,J,ee,Y){const se=[],he=Math.floor(le/this.cellSize),je=Math.floor((le+ee)/this.cellSize),we=Math.floor(J/this.cellSize),Ne=Math.floor((J+Y)/this.cellSize);for(let ie=he;ie<=je;ie++)for(let pe=we;pe<=Ne;pe++)se.push(`${ie},${pe}`);return se}isPositionFree(le,J,ee,Y){return!this.getRectangleCells(le,J,ee,Y).some(he=>this.grid.has(he))}occupyPosition(le,J,ee,Y){this.getRectangleCells(le,J,ee,Y).forEach(he=>this.grid.add(he))}findNearestFreePosition(le,J,ee,Y,se=0,he=0,je=2e3){if(le>=se&&J>=he&&this.isPositionFree(le,J,ee,Y))return{x:le,y:J};const we=ee>400||Y>800,Ne=we?50:25,ie=we?Math.min(je,1e3):je;console.log(`🔍 Searching for position for ${ee}x${Y} node (${we?"large":"normal"} - step: ${Ne}px, max: ${ie}px)`);for(let me=Ne;me<=ie;me+=Ne)for(let Se=-me;Se<=me;Se+=Ne)for(let Me=-me;Me<=me;Me+=Ne){if(Math.abs(Se)!==me&&Math.abs(Me)!==me)continue;const Qe=le+Se,We=J+Me;if(!(Qe<se||We<he)&&this.isPositionFree(Qe,We,ee,Y))return{x:Qe,y:We}}if(console.warn("⚠️ Spiral search failed, using enhanced fallback positioning"),we){const me=se+3e3;for(let Se=he;Se<he+3e3;Se+=Ne*2)if(this.isPositionFree(me,Se,ee,Y))return console.log(`📍 Found large node area position: (${me}, ${Se})`),{x:me,y:Se}}const pe=Ne*2;for(let me=he;me<he+ie;me+=pe)for(let Se=se;Se<se+ie;Se+=pe)if(this.isPositionFree(Se,me,ee,Y))return{x:Se,y:me};const Ee=se+ie+Math.random()*500,Pe=he+Math.random()*1e3;return console.error(`🚨 All placement strategies failed for ${ee}x${Y} node, using ultimate fallback at (${Ee}, ${Pe})`),{x:Ee,y:Pe}}}const q=(console.log("📍 Using clean start position for fresh layout"),{x:150,y:150}),X=te=>{var Y,se,he,je,we;const le=document.querySelector(`[data-id="${te.id}"]`);if(le){const Ne=le.getBoundingClientRect();let ie=Math.max(Ne.width,280),pe=Math.max(Ne.height,100);const Ee=800,Pe=2e3;return ie>Ee&&(console.warn(`🚨 Node ${te.id} width ${ie}px exceeds reasonable limit, using fallback`),ie=Math.min(ie,Ee)),pe>Pe&&(console.warn(`🚨 Node ${te.id} height ${pe}px exceeds reasonable limit, using fallback`),pe=Math.min(pe,Pe)),console.log(`📏 Measured ${te.id}: ${ie}x${pe}px (actual DOM${ie===Ee||pe===Pe?" - clamped":""})`),{width:ie,height:pe}}let J=350,ee=150;if(te.type==="question"){const Ne=((Y=te.data)==null?void 0:Y.questionText)||"",ie=Math.min(Ne.length*8+80,500);J=Math.max(J,ie);const pe=Math.ceil(Ne.length/50);ee=Math.max(ee,Math.min(80+pe*25,400))}if(te.type==="answer"){const Ne=((se=te.data)==null?void 0:se.variants)||[],ie=((he=te.data)==null?void 0:he.combinations)||[];if(ee=180+Math.min(Ne.length*60,600),((je=te.data)==null?void 0:je.answerType)==="combinations"&&ie.length>0){const Ee=Math.min(ie.length*80,800);ee+=60+Ee;const Pe=ie.reduce((me,Se)=>{var Me;return Math.max(me,((Me=Se.label)==null?void 0:Me.length)||0)},0);J=Math.max(J,Math.min(Pe*7+150,600))}ee=Math.min(ee,1500)}if(te.type==="outcome"){const Ne=((we=te.data)==null?void 0:we.recommendation)||"",ie=Math.ceil(Ne.length/40);ee=Math.max(150,Math.min(80+ie*25,500)),J=Math.max(350,Math.min(Ne.length*6+100,600))}return console.log(`📏 Estimated ${te.id}: ${J}x${ee}px (content-based with caps)`),{width:J,height:ee}},re=new Map;let be=0,de=0;S.forEach(te=>{const le=X(te);re.set(te.id,le),be=Math.max(be,le.width),de=Math.max(de,le.height)});const H=Math.max(400,Math.min(be+100,600)),oe=Math.max(200,Math.min(de+100,800)),Z=Math.max(25,Math.min(Math.min(be,de)/6,100));console.log(`📐 Dynamic spacing: H=${H}px, V=${oe}px (capped for reasonable layout)`),console.log(`📐 Max node size: ${be}x${de}px, Adaptive cell: ${Z}px`);const G=new W(Z),ge=te=>re.get(te.id)||{width:300,height:120},ye=H,ze=oe,ue=q.x,ne=q.y,Oe=new Map,F=new Map;S.forEach(te=>{Oe.set(te.id,[]),F.set(te.id,[])}),i.forEach(te=>{const le=Oe.get(te.source)||[];le.push(te.target),Oe.set(te.source,le);const J=F.get(te.target)||[];J.push(te.source),F.set(te.target,J)});const Q=[],ae=new Set,ve=te=>{const le=[],J=[te],ee=new Set;for(;J.length>0;){const Y=J.pop();if(ee.has(Y.id))continue;ee.add(Y.id),ae.add(Y.id),le.push(Y);const se=Oe.get(Y.id)||[],he=F.get(Y.id)||[];[...se,...he].forEach(je=>{const we=S.find(Ne=>Ne.id===je);we&&!ee.has(je)&&J.push(we)})}return le};S.forEach(te=>{if(!ae.has(te.id)){const le=ve(te);le.length>0&&Q.push(le)}}),console.log("🎯 Components found:",Q.length);const Fe=(te,le)=>{const J=new Set(te.map(_e=>_e.id)),Y=(()=>{const _e=te.filter(Ce=>(F.get(Ce.id)||[]).filter(Ie=>J.has(Ie)).length===0);if(_e.length===0)return[te[0]];let Ve=[];for(const Ce of _e){const Ye=[];let Ie=Ce;const Re=new Set;for(;Ie&&!Re.has(Ie.id);){Re.add(Ie.id),Ye.push(Ie);const Ke=(Oe.get(Ie.id)||[]).map(ke=>te.find(Ae=>Ae.id===ke)).filter(ke=>ke!==void 0&&J.has(ke.id)&&!Re.has(ke.id));if(Ke.length===0){Ie=null;break}Ie=Ke.reduce((ke,Ae)=>{const Te=(Oe.get(Ae.id)||[]).length+(F.get(Ae.id)||[]).length,at=(Oe.get(ke.id)||[]).length+(F.get(ke.id)||[]).length;return Te>at?Ae:ke})}Ye.length>Ve.length&&(Ve=Ye)}return Ve})(),se=new Set(Y.map(_e=>_e.id)),he=te.map(_e=>ge(_e)),je=he.reduce((_e,Ve)=>_e+Ve.width,0),we=Math.max(...he.map(_e=>_e.height)),Ne=Y.length*ye,ie=te.filter(_e=>!se.has(_e.id)),pe=Math.ceil(ie.length/Math.max(Y.length,1)),Ee=Math.max(Ne+400,je/Math.max(Y.length,1)+200),Pe=Math.max(we+pe*(we+ze)+200,600);console.log(`📦 Component ${le} estimated size: ${Ee}x${Pe}px (${te.length} nodes, ${pe} branch levels)`);let me,Se;if(le===0)me=ue,Se=ne;else{const _e=ue,Ve=ne+le*400,Ce=G.findNearestFreePosition(_e,Ve,Ee,Pe,ue,ne,3e3);me=Ce.x,Se=Ce.y,console.log(`📍 Component ${le} positioned at (${me}, ${Se}) - estimated size: ${Ee}×${Pe}px`)}const Me=[],Qe=new Map;Y.forEach((_e,Ve)=>{const{width:Ce,height:Ye}=ge(_e),Ie=me+Ve*ye,Re=Se,ce=G.findNearestFreePosition(Ie,Re,Ce,Ye,ue,ne);G.occupyPosition(ce.x,ce.y,Ce,Ye),Qe.set(_e.id,ce),Me.push({..._e,position:ce}),console.log(`📍 Main path ${Ve}: ${_e.id} at (${ce.x}, ${ce.y}) [${Ce}x${Ye}]`)});const We=te.filter(_e=>!se.has(_e.id));for(const _e of We){const{width:Ve,height:Ce}=ge(_e),Ye=F.get(_e.id)||[],Ie=Oe.get(_e.id)||[];let Re=null;for(const ce of Ye)if(se.has(ce)){Re=Y.find(Ke=>Ke.id===ce)||null;break}if(!Re){for(const ce of Ie)if(se.has(ce)){Re=Y.find(Ke=>Ke.id===ce)||null;break}}if(!Re&&Y.length>0&&(Re=Y[0]),Re){const ce=Qe.get(Re.id),Ke=ge(Re).height,ke=[{x:ce.x,y:ce.y-Ce-ze},{x:ce.x,y:ce.y+Ke+ze},{x:ce.x-Ve-150,y:ce.y},{x:ce.x+400,y:ce.y},{x:ce.x-Ve-150,y:ce.y-Ce-ze},{x:ce.x+400,y:ce.y-Ce-ze},{x:ce.x-Ve-150,y:ce.y+Ke+ze},{x:ce.x+400,y:ce.y+Ke+ze},{x:ce.x,y:ce.y+Ke+ze*2},{x:ce.x,y:ce.y-Ce-ze*2},{x:ce.x+600,y:ce.y},{x:ce.x-Ve-300,y:ce.y}];let Ae=null;for(const Te of ke)if(Te.x>=ue&&Te.y>=ne&&G.isPositionFree(Te.x,Te.y,Ve,Ce)){Ae=Te;break}Ae||(Ae=G.findNearestFreePosition(ce.x,ce.y-Ce-ze,Ve,Ce,ue,ne)),G.occupyPosition(Ae.x,Ae.y,Ve,Ce),Qe.set(_e.id,Ae),Me.push({..._e,position:Ae}),console.log(`📍 Branch: ${_e.id} at (${Ae.x}, ${Ae.y}) [${Ve}x${Ce}] connected to ${Re.id}`)}}return Me},$e=[];Q.forEach((te,le)=>{const J=Fe(te,le);$e.push(...J)}),S.filter(te=>!$e.some(le=>le.id===te.id)).forEach(te=>{const{width:le,height:J}=ge(te),ee=ue,Y=ne+Q.length*300,se=G.findNearestFreePosition(ee,Y,le,J,ue,ne);G.occupyPosition(se.x,se.y,le,J),$e.push({...te,position:se}),console.log(`📍 Isolated: ${te.id} at (${se.x}, ${se.y}) [${le}x${J}]`)}),console.log("🎯 PowerPoint-style layout with HARD CONSTRAINTS complete. Nodes positioned:",$e.length),console.log("🔒 GUARANTEE: Zero overlaps enforced by spatial grid system"),r&&$e.length>0?r($e):a($e),setTimeout(()=>{const te=window.reactFlowInstance;if(te&&$e.length>0){const le=$e.find(J=>{var ee;return(ee=J.data)==null?void 0:ee.isRoot})||$e[0];le&&(console.log(`📍 Focusing viewport on node ${le.id} at position (${le.position.x}, ${le.position.y})`),te.setCenter(le.position.x,le.position.y,{zoom:te.getZoom()}))}},200)},k=()=>{g(!1),y(null),b(null)},A=()=>{_&&(r==null||r(_.nodes),s(_.edges),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate()),g(!1),y(null),b(null)},B=()=>{k()};return c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("button",{onClick:T,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Organize nodes in a hierarchical layout",children:[c.jsx(NE,{size:16}),c.jsx("span",{children:"Organize"})]}),c.jsxs("button",{onClick:u,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Toggle visibility of path displays in nodes",children:[d?c.jsx(Wc,{size:16}):c.jsx(gh,{size:16}),c.jsx("span",{children:d?"Unfold Path":"Fold Path"})]}),c.jsxs("button",{onClick:f,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Toggle visibility of combination sections in answer nodes",children:[p?c.jsx(Wc,{size:16}):c.jsx(gh,{size:16}),c.jsx("span",{children:p?"Unfold Combo":"Fold Combo"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("div",{className:"relative",ref:v,children:[c.jsxs("button",{onClick:()=>w(!h),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(k0,{size:16}),c.jsx("span",{children:"Add Question"}),c.jsx(un,{size:14})]}),h&&c.jsxs("div",{className:"absolute top-full left-0 mt-1 w-[140px] bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[c.jsx("button",{onClick:P,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"ROOT"}),c.jsx("button",{onClick:E,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-b-lg",children:"REGULAR"})]})]}),c.jsxs("button",{onClick:R,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(C0,{size:16}),c.jsx("span",{children:"Add Answer"})]}),c.jsxs("button",{onClick:D,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(I0,{size:16}),c.jsx("span",{children:"Add Outcome"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("button",{onClick:L,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(_0,{size:16}),c.jsx("span",{children:"Export JSON"})]}),c.jsxs("button",{onClick:N,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(j0,{size:16}),c.jsx("span",{children:"Import JSON"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("button",{onClick:$,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-slate-500 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(gE,{size:16}),c.jsx("span",{children:"Load Demo"})]}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium w-[140px] h-10",children:[c.jsx(EE,{size:16}),c.jsx("span",{children:"Clear All"})]})]}),c.jsx(zE,{isOpen:m,importResult:x,onAccept:k,onRevert:A,onClose:B})]})}function LE({onEnterApp:e}){return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[c.jsxs("div",{className:"relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10"}),c.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:c.jsx(yE,{className:"w-8 h-8 text-white"})})}),c.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"Question Flow Builder"}),c.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Create interactive questionnaire flows with a powerful visual interface. Design complex decision trees, manage answer variants, and export your work seamlessly."}),c.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[c.jsx(wh,{className:"w-5 h-5 mr-2"}),"Start Building",c.jsx(ja,{className:"w-5 h-5 ml-2"})]})]})})]}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Everything you need to create professional questionnaire flows"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(wE,{className:"w-6 h-6 text-blue-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Visual Flow Builder"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop nodes to create complex questionnaire flows. Connect questions, answers, and outcomes with intuitive visual connections."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(vh,{className:"w-6 h-6 text-cyan-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),c.jsx("p",{className:"text-gray-600",children:"Double-click any node, answer variant, or combination to instantly focus on the next connected element. Navigate your flow with ease."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(vE,{className:"w-6 h-6 text-green-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Keyboard Shortcuts"}),c.jsx("p",{className:"text-gray-600",children:"Work efficiently with keyboard shortcuts: Tab to create nodes, Delete to remove, Cmd/Ctrl+Z for undo, and more."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(j0,{className:"w-3 h-3 text-purple-600"}),c.jsx(_0,{className:"w-3 h-3 text-purple-600"})]})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Import & Export"}),c.jsx("p",{className:"text-gray-600",children:"Import Excel files or JSON flows. Export your work to share or backup. Seamless integration with existing workflows."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(Wc,{className:"w-6 h-6 text-orange-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Real-time Validation"}),c.jsx("p",{className:"text-gray-600",children:"Instant visual feedback for orphaned nodes, missing connections, and flow integrity issues. Orange highlights show problems."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(yh,{className:"w-6 h-6 text-indigo-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path IDs"}),c.jsx("p",{className:"text-gray-600",children:"Automatic generation of hierarchical path IDs (Q1, Q2, A1, A2, E1, E2) for questions, answers, and outcomes. All paths visible on nodes."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(xh,{className:"w-6 h-6 text-rose-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Answer Combinations"}),c.jsx("p",{className:"text-gray-600",children:"Create complex multi-select scenarios with combination logic. Generate paths like V1+V2, V1+V3 for sophisticated questionnaire flows."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(_E,{className:"w-6 h-6 text-teal-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path Propagation"}),c.jsx("p",{className:"text-gray-600",children:"Intelligent path propagation across all answer types. Single, Multiple, and Combinations modes all generate correct variant paths."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(bE,{className:"w-6 h-6 text-emerald-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Undo/Redo System"}),c.jsx("p",{className:"text-gray-600",children:"50-state history with standard keyboard shortcuts. Never lose your work with comprehensive undo/redo functionality."})]})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Demonstrations of Interactions"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Here are a few things you can do"})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[c.jsx("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg mb-4 overflow-hidden",children:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"group-hover:animate-pulse bg-white border-2 border-blue-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"Question"})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"What's your level?"})]}),c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"group-hover:animate-bounce",children:c.jsx(ja,{className:"w-4 h-4 text-blue-500 transform group-hover:translate-x-2 transition-transform duration-500"})})}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"Beginner"})]})]})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Double-click any node to smoothly focus on the next connected element with zoom animation."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[c.jsx("div",{className:"relative h-48 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg mb-4 overflow-hidden",children:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[c.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"Main"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-200",children:[c.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 1"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-300",children:[c.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 2"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-400",children:[c.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 3"})]})]})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sibling Node Highlighting"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Single-click highlights all neighboring nodes in green for 3-5 seconds to show relationships."})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[c.jsx("div",{className:"relative h-48 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg mb-4 overflow-hidden",children:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),c.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),c.jsx("div",{className:"text-xs text-gray-700 mb-2",children:"Advanced"}),c.jsxs("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full group-hover:bg-green-100 group-hover:text-green-800 transition-colors duration-500",children:[c.jsx("span",{className:"group-hover:hidden",children:"Topic-Q1-A1"}),c.jsx("span",{className:"hidden group-hover:inline",children:"Topic-Q1-A1-E1"})]})]}),c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"w-0.5 h-6 bg-gray-300 group-hover:bg-green-500 transition-colors duration-500"})}),c.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:bg-gradient-to-br group-hover:from-green-50 group-hover:to-emerald-50 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-500",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full group-hover:bg-green-500 transition-colors duration-500"}),c.jsxs("span",{className:"text-xs font-semibold text-orange-600 group-hover:text-green-600 transition-colors duration-500",children:[c.jsx("span",{className:"group-hover:hidden",children:"Orphan"}),c.jsx("span",{className:"hidden group-hover:inline",children:"Outcome"})]})]}),c.jsx("div",{className:"text-xs text-gray-700",children:"Expert Path"})]})]})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Orphan Node Connection"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Connecting orphan nodes turns them green and updates their path IDs automatically."})]})]})]})}),c.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Answer Types & Modes"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Three powerful modes for different questionnaire scenarios"})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Single Mode"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Traditional single-choice questions where users select one answer from multiple options."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),c.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A1-E1"}),c.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A2-E2"})]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Multiple Mode"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Multi-choice questions where each answer variant creates its own independent path."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),c.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V1-E1"}),c.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V2-E2"})]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(xh,{className:"w-6 h-6 text-rose-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Combinations Mode"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Advanced multi-select with combination logic. Each possible combination of answers creates unique paths."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),c.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V2-E1"}),c.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V3-E2"})]})]})]})]})}),c.jsx("div",{className:"bg-white py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Node Types & Visual Guide"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Understanding the visual language of your flows"})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),c.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"Question"})]}),c.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"What is your experience level?"}),c.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[c.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q1"}),c.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q2"})]})]}),c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[c.jsx(k0,{className:"w-5 h-5 inline mr-2 text-blue-500"}),"Question Nodes"]}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Blue theme • Single outgoing connection • Contains question text and level information • Shows all propagated path IDs"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),c.jsx("span",{className:"text-sm font-semibold text-purple-600",children:"Answer"})]}),c.jsxs("div",{className:"space-y-2 mb-3",children:[c.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"Yes (Score: 1)"}),c.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"No (Score: 0)"})]}),c.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[c.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1"}),c.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1"})]})]}),c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[c.jsx(C0,{className:"w-5 h-5 inline mr-2 text-purple-500"}),"Answer Nodes"]}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Purple theme • Three modes: Single, Multiple, Combinations • Scoring system • Shows all propagated path IDs"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-sm font-semibold text-green-600",children:"Outcome"})]}),c.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"You should explore visual tools..."}),c.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[c.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-E1"}),c.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1-E1"})]})]}),c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[c.jsx(I0,{className:"w-5 h-5 inline mr-2 text-green-500"}),"Outcome Nodes"]}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Green theme • End points • Contains recommendations • No outgoing connections • Shows all propagated path IDs"})]})]})]})}),c.jsx("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Navigation & Interaction"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Intuitive ways to navigate and interact with your flows"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-16 h-16 bg-cyan-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:c.jsx(vh,{className:"w-8 h-8 text-cyan-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"Double-Click Navigation"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Question Nodes"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the connected answer node"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Answer Nodes (Single)"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the next connected node"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Answer Variants (Multiple)"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Double-click individual variants to follow their path"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full mt-2"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Combinations"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Double-click combination items to navigate their unique paths"})]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:c.jsx(yh,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"PathID Display System"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"All Nodes Show Multiple Paths"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Every node displays all propagated path IDs as badges, making it easy to track complex flows"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Automatic Propagation"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Path IDs automatically propagate through the flow, updating connected nodes when changes occur"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Smart Variant Generation"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Multiple and Combinations modes generate appropriate variant paths (V1, V2, V1+V2, etc.)"})]})]})]})]})]})}),c.jsx("div",{className:"bg-gray-50 py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Visual Indicators & Alerts"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Understand what the colors and effects mean"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-orange-100 rounded-lg border-2 border-orange-300 ring-2 ring-orange-400 flex items-center justify-center",children:c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"})}),c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Orange Glow"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Orphaned nodes or variants missing connections"})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-green-100 rounded-lg border-2 border-green-300 ring-2 ring-green-400 flex items-center justify-center",children:c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}),c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Green Glow"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Selected node and its connected parent/child nodes"})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"w-12 h-1 bg-blue-500 rounded shadow-lg",style:{boxShadow:"0 0 8px rgba(37, 99, 235, 0.6)"}})}),c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Blue Edges"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Connections from selected nodes with blue glow effect"})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded"})}),c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Gray Edges"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Default connection lines between nodes"})]})]})]})}),c.jsx("div",{className:"bg-white py-16",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Keyboard Shortcuts"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Work faster with these essential shortcuts"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Navigation & Selection"}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Create linked question"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Tab"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Multi-select nodes"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Shift + Drag"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Copy selected nodes"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/⌘ + C"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Paste nodes"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/⌘ + V"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Delete selected node"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Delete"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Deselect all"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Escape"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Undo & Redo"}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Undo (Windows)"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Z"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Undo (Mac)"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"⌘ + Z"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Redo (Windows)"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Y"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:"Redo (Mac)"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"⌘ + ⇧ + Z"})]})]})]})]})}),c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 py-16",children:c.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Build Your First Flow?"}),c.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Start with our pre-loaded example or create your own from scratch"}),c.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[c.jsx(wh,{className:"w-5 h-5 mr-2"}),"Launch Flow Builder",c.jsx(ja,{className:"w-5 h-5 ml-2"})]})]})})]})}const OE=[{id:"q1",type:"question",position:{x:100,y:100},data:{pathId:"TOPIC-1-Q1",topic:"TOPIC-1",isRoot:!0,questionText:"What is your experience level with React?",questionLevel:1,elementId:"TOPIC-1",subElementId:"REACT"}},{id:"a1",type:"answer",position:{x:100,y:250},data:{pathId:"TOPIC-1-Q1-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Beginner",score:1},{id:"var2",text:"Intermediate",score:2},{id:"var3",text:"Advanced",score:3}]}},{id:"q2",type:"question",position:{x:450,y:100},data:{pathId:"TOPIC-1-Q1-A1-Q2",topic:"TOPIC-1",isRoot:!1,questionText:"Do you prefer TypeScript over JavaScript?",questionLevel:2,elementId:"TOPIC-1",subElementId:"TYPESCRIPT"}},{id:"a2",type:"answer",position:{x:450,y:250},data:{pathId:"TOPIC-1-Q1-A1-Q2-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},{id:"q3",type:"question",position:{x:100,y:400},data:{pathId:"TOPIC-2-Q1",topic:"TOPIC-2",isRoot:!0,questionText:"What is your preferred development environment?",questionLevel:1,elementId:"TOPIC-2",subElementId:"DEVENV"}},{id:"a3",type:"answer",position:{x:100,y:550},data:{pathId:"TOPIC-2-Q1-A1",topic:"TOPIC-2",answerType:"multiple",variants:[{id:"var1",text:"VS Code",score:1},{id:"var2",text:"WebStorm",score:2},{id:"var3",text:"Vim/Neovim",score:3}]}},{id:"outcome1",type:"outcome",position:{x:800,y:300},data:{pathId:"CROSS-CONNECTED-E1",topic:"CROSS-CONNECTED",outcomeText:"Recommended Learning Path",outcomeType:"recommendation",score:0}}],FE=[{id:"e1",source:"q1",target:"a1",animated:!0,type:"smoothstep"},{id:"e2",source:"a1",target:"q2",animated:!0,type:"smoothstep"},{id:"e3",source:"q2",target:"a2",animated:!0,type:"smoothstep"},{id:"e4",source:"q3",target:"a3",animated:!0,type:"smoothstep"},{id:"e5",source:"a2",target:"outcome1",animated:!0,type:"smoothstep"},{id:"e6",source:"a3",target:"outcome1",sourceHandle:"variant-0",animated:!0,type:"smoothstep"}],Ur={nodes:OE,edges:FE};function HE(){const[e,t]=j.useState(!0),[n,r]=j.useState(!1),o=j.useRef(!1),{nodes:s,addNode:i,setNodes:l,setEdges:a,clearFlow:u}=Be(),f=j.useCallback(async()=>{try{const m=await fetch("/qnatool/flow-Topic-1752233651561.json");if(m.ok){const g=await m.json(),x=new qc,{nodes:y,edges:_}=x.importFromJson(g);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),l(y),a(_),console.log("Default flow loaded successfully")}else console.warn("Default flow not found, loading demo data instead"),l(Ur.nodes),a(Ur.edges)}catch(m){console.error("Error loading default flow:",m),l(Ur.nodes),a(Ur.edges)}t(!1),r(!0)},[l,a]),d=j.useCallback(m=>{i(m)},[i]),p=j.useCallback(()=>{r(!1),o.current=!0,console.log("Auto-organize completed")},[]),h=j.useCallback(()=>{l(Ur.nodes),a(Ur.edges),setTimeout(()=>{const{cleanupDuplicateEdges:m}=Be.getState();m()},100)},[l,a]),w=j.useCallback(()=>{u()},[u]),v=j.useCallback(m=>{l(m)},[l]),S=j.useCallback(()=>{t(!0)},[]);return e?c.jsx(LE,{onEnterApp:f}):c.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:S,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"← Back to Home"}),c.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Question Flow Builder"})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," nodes • Auto-loaded flow"]})]}),c.jsx(DE,{onAddNode:d,onLoadDemo:h,onClearAll:w,onSetNodes:v,nodes:s}),c.jsx("div",{className:"flex-1",children:c.jsx(nd,{children:c.jsx(AE,{shouldAutoOrganize:n&&!o.current,onAutoOrganizeComplete:p})})})]})}Ta.createRoot(document.getElementById("root")).render(c.jsx(V.StrictMode,{children:c.jsx(HE,{})}));
