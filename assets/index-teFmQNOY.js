var W0=Object.defineProperty;var Y0=(e,t,n)=>t in e?W0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fn=(e,t,n)=>Y0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function vp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wp={exports:{}},dl={},Np={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),Q0=Symbol.for("react.portal"),q0=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),Z0=Symbol.for("react.context"),J0=Symbol.for("react.forward_ref"),ey=Symbol.for("react.suspense"),ty=Symbol.for("react.memo"),ny=Symbol.for("react.lazy"),ad=Symbol.iterator;function ry(e){return e===null||typeof e!="object"?null:(e=ad&&e[ad]||e["@@iterator"],typeof e=="function"?e:null)}var Sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ep=Object.assign,bp={};function Co(e,t,n){this.props=e,this.context=t,this.refs=bp,this.updater=n||Sp}Co.prototype.isReactComponent={};Co.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Co.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kp(){}kp.prototype=Co.prototype;function Yc(e,t,n){this.props=e,this.context=t,this.refs=bp,this.updater=n||Sp}var Qc=Yc.prototype=new kp;Qc.constructor=Yc;Ep(Qc,Co.prototype);Qc.isPureReactComponent=!0;var cd=Array.isArray,_p=Object.prototype.hasOwnProperty,qc={current:null},Cp={key:!0,ref:!0,__self:!0,__source:!0};function Ip(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)_p.call(t,r)&&!Cp.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];o.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:$s,type:e,key:s,ref:i,props:o,_owner:qc.current}}function oy(e,t){return{$$typeof:$s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xc(e){return typeof e=="object"&&e!==null&&e.$$typeof===$s}function sy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ud=/\/+/g;function Vl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sy(""+e.key):t.toString(36)}function pi(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case $s:case Q0:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Vl(i,0):r,cd(o)?(n="",e!=null&&(n=e.replace(ud,"$&/")+"/"),pi(o,t,n,"",function(c){return c})):o!=null&&(Xc(o)&&(o=oy(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(ud,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",cd(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+Vl(s,l);i+=pi(s,t,n,a,o)}else if(a=ry(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+Vl(s,l++),i+=pi(s,t,n,a,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Hs(e,t,n){if(e==null)return e;var r=[],o=0;return pi(e,r,"","",function(s){return t.call(n,s,o++)}),r}function iy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},hi={transition:null},ly={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:hi,ReactCurrentOwner:qc};function jp(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Hs,forEach:function(e,t,n){Hs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hs(e,function(){t++}),t},toArray:function(e){return Hs(e,function(t){return t})||[]},only:function(e){if(!Xc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$e.Component=Co;$e.Fragment=q0;$e.Profiler=K0;$e.PureComponent=Yc;$e.StrictMode=X0;$e.Suspense=ey;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ly;$e.act=jp;$e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ep({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=qc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)_p.call(t,a)&&!Cp.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:$s,type:e.type,key:o,ref:s,props:r,_owner:i}};$e.createContext=function(e){return e={$$typeof:Z0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:G0,_context:e},e.Consumer=e};$e.createElement=Ip;$e.createFactory=function(e){var t=Ip.bind(null,e);return t.type=e,t};$e.createRef=function(){return{current:null}};$e.forwardRef=function(e){return{$$typeof:J0,render:e}};$e.isValidElement=Xc;$e.lazy=function(e){return{$$typeof:ny,_payload:{_status:-1,_result:e},_init:iy}};$e.memo=function(e,t){return{$$typeof:ty,type:e,compare:t===void 0?null:t}};$e.startTransition=function(e){var t=hi.transition;hi.transition={};try{e()}finally{hi.transition=t}};$e.unstable_act=jp;$e.useCallback=function(e,t){return _t.current.useCallback(e,t)};$e.useContext=function(e){return _t.current.useContext(e)};$e.useDebugValue=function(){};$e.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};$e.useEffect=function(e,t){return _t.current.useEffect(e,t)};$e.useId=function(){return _t.current.useId()};$e.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};$e.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};$e.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};$e.useMemo=function(e,t){return _t.current.useMemo(e,t)};$e.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};$e.useRef=function(e){return _t.current.useRef(e)};$e.useState=function(e){return _t.current.useState(e)};$e.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};$e.useTransition=function(){return _t.current.useTransition()};$e.version="18.3.1";Np.exports=$e;var j=Np.exports;const V=vp(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=j,cy=Symbol.for("react.element"),uy=Symbol.for("react.fragment"),dy=Object.prototype.hasOwnProperty,fy=ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,py={key:!0,ref:!0,__self:!0,__source:!0};function Tp(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)dy.call(t,r)&&!py.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:cy,type:e,key:s,ref:i,props:o,_owner:fy.current}}dl.Fragment=uy;dl.jsx=Tp;dl.jsxs=Tp;wp.exports=dl;var u=wp.exports,Ta={},Pp={exports:{}},Bt={},$p={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,k){var T=P.length;P.push(k);e:for(;0<T;){var F=T-1>>>1,O=P[F];if(0<o(O,k))P[F]=k,P[T]=O,T=F;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var k=P[0],T=P.pop();if(T!==k){P[0]=T;e:for(var F=0,O=P.length,Y=O>>>1;F<Y;){var U=2*(F+1)-1,q=P[U],Z=U+1,J=P[Z];if(0>o(q,T))Z<O&&0>o(J,q)?(P[F]=J,P[Z]=T,F=Z):(P[F]=q,P[U]=T,F=U);else if(Z<O&&0>o(J,T))P[F]=J,P[Z]=T,F=Z;else break e}}return k}function o(P,k){var T=P.sortIndex-k.sortIndex;return T!==0?T:P.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var a=[],c=[],f=1,d=null,h=3,p=!1,w=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var k=n(c);k!==null;){if(k.callback===null)r(c);else if(k.startTime<=P)r(c),k.sortIndex=k.expirationTime,t(a,k);else break;k=n(c)}}function y(P){if(x=!1,v(P),!w)if(n(a)!==null)w=!0,C(_);else{var k=n(c);k!==null&&z(y,k.startTime-P)}}function _(P,k){w=!1,x&&(x=!1,m(M),M=-1),p=!0;var T=h;try{for(v(k),d=n(a);d!==null&&(!(d.expirationTime>k)||P&&!R());){var F=d.callback;if(typeof F=="function"){d.callback=null,h=d.priorityLevel;var O=F(d.expirationTime<=k);k=e.unstable_now(),typeof O=="function"?d.callback=O:d===n(a)&&r(a),v(k)}else r(a);d=n(a)}if(d!==null)var Y=!0;else{var U=n(c);U!==null&&z(y,U.startTime-k),Y=!1}return Y}finally{d=null,h=T,p=!1}}var E=!1,I=null,M=-1,A=5,b=-1;function R(){return!(e.unstable_now()-b<A)}function D(){if(I!==null){var P=e.unstable_now();b=P;var k=!0;try{k=I(!0,P)}finally{k?L():(E=!1,I=null)}}else E=!1}var L;if(typeof g=="function")L=function(){g(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=D,L=function(){$.postMessage(null)}}else L=function(){S(D,0)};function C(P){I=P,E||(E=!0,L())}function z(P,k){M=S(function(){P(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,C(_))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var T=h;h=k;try{return P()}finally{h=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var T=h;h=P;try{return k()}finally{h=T}},e.unstable_scheduleCallback=function(P,k,T){var F=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?F+T:F):T=F,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=T+O,P={id:f++,callback:k,priorityLevel:P,startTime:T,expirationTime:O,sortIndex:-1},T>F?(P.sortIndex=T,t(c,P),n(a)===null&&P===n(c)&&(x?(m(M),M=-1):x=!0,z(y,T-F))):(P.sortIndex=O,t(a,P),w||p||(w=!0,C(_))),P},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(P){var k=h;return function(){var T=h;h=k;try{return P.apply(this,arguments)}finally{h=T}}}})(Ap);$p.exports=Ap;var hy=$p.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my=j,Ot=hy;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mp=new Set,ss={};function Dr(e,t){ho(e,t),ho(e+"Capture",t)}function ho(e,t){for(ss[e]=t,e=0;e<t.length;e++)Mp.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=Object.prototype.hasOwnProperty,gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dd={},fd={};function yy(e){return Pa.call(fd,e)?!0:Pa.call(dd,e)?!1:gy.test(e)?fd[e]=!0:(dd[e]=!0,!1)}function xy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vy(e,t,n,r){if(t===null||typeof t>"u"||xy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Gc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kc,Gc);yt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kc,Gc);yt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kc,Gc);yt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zc(e,t,n,r){var o=yt.hasOwnProperty(t)?yt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vy(t,n,o,r)&&(n=null),r||o===null?yy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var On=my.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Jc=Symbol.for("react.strict_mode"),$a=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),zp=Symbol.for("react.context"),eu=Symbol.for("react.forward_ref"),Aa=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),tu=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Dp=Symbol.for("react.offscreen"),pd=Symbol.iterator;function To(e){return e===null||typeof e!="object"?null:(e=pd&&e[pd]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,Bl;function Bo(e){if(Bl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bl=t&&t[1]||""}return`
`+Bl+e}var Ul=!1;function Wl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var a=`
`+o[i].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=i&&0<=l);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bo(e):""}function wy(e){switch(e.tag){case 5:return Bo(e.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return e=Wl(e.type,!1),e;case 11:return e=Wl(e.type.render,!1),e;case 1:return e=Wl(e.type,!0),e;default:return""}}function Ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yr:return"Fragment";case Wr:return"Portal";case $a:return"Profiler";case Jc:return"StrictMode";case Aa:return"Suspense";case Ma:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zp:return(e.displayName||"Context")+".Consumer";case Rp:return(e._context.displayName||"Context")+".Provider";case eu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tu:return t=e.displayName||null,t!==null?t:Ra(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return Ra(e(t))}catch{}}return null}function Ny(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ra(t);case 8:return t===Jc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sy(e){var t=Lp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bs(e){e._valueTracker||(e._valueTracker=Sy(e))}function Op(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Lp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function za(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fp(e,t){t=t.checked,t!=null&&Zc(e,"checked",t,!1)}function Da(e,t){Fp(e,t);var n=ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?La(e,t.type,n):t.hasOwnProperty("defaultValue")&&La(e,t.type,ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function md(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function La(e,t,n){(t!=="number"||ji(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Uo=Array.isArray;function oo(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ar(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Oa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(Uo(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ar(n)}}function Hp(e,t){var n=ar(t.value),r=ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Us,Bp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ey=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(e){Ey.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ko[t]=Ko[e]})});function Up(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ko.hasOwnProperty(e)&&Ko[e]?(""+t).trim():t+"px"}function Wp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Up(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var by=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ha(e,t){if(t){if(by[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Va(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ua=null,so=null,io=null;function xd(e){if(e=Rs(e)){if(typeof Ua!="function")throw Error(K(280));var t=e.stateNode;t&&(t=gl(t),Ua(e.stateNode,e.type,t))}}function Yp(e){so?io?io.push(e):io=[e]:so=e}function Qp(){if(so){var e=so,t=io;if(io=so=null,xd(e),t)for(e=0;e<t.length;e++)xd(t[e])}}function qp(e,t){return e(t)}function Xp(){}var Yl=!1;function Kp(e,t,n){if(Yl)return e(t,n);Yl=!0;try{return qp(e,t,n)}finally{Yl=!1,(so!==null||io!==null)&&(Xp(),Qp())}}function ls(e,t){var n=e.stateNode;if(n===null)return null;var r=gl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var Wa=!1;if(An)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Wa=!1}function ky(e,t,n,r,o,s,i,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Go=!1,Ti=null,Pi=!1,Ya=null,_y={onError:function(e){Go=!0,Ti=e}};function Cy(e,t,n,r,o,s,i,l,a){Go=!1,Ti=null,ky.apply(_y,arguments)}function Iy(e,t,n,r,o,s,i,l,a){if(Cy.apply(this,arguments),Go){if(Go){var c=Ti;Go=!1,Ti=null}else throw Error(K(198));Pi||(Pi=!0,Ya=c)}}function Lr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vd(e){if(Lr(e)!==e)throw Error(K(188))}function jy(e){var t=e.alternate;if(!t){if(t=Lr(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return vd(o),e;if(s===r)return vd(o),t;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function Zp(e){return e=jy(e),e!==null?Jp(e):null}function Jp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jp(e);if(t!==null)return t;e=e.sibling}return null}var eh=Ot.unstable_scheduleCallback,wd=Ot.unstable_cancelCallback,Ty=Ot.unstable_shouldYield,Py=Ot.unstable_requestPaint,rt=Ot.unstable_now,$y=Ot.unstable_getCurrentPriorityLevel,ru=Ot.unstable_ImmediatePriority,th=Ot.unstable_UserBlockingPriority,$i=Ot.unstable_NormalPriority,Ay=Ot.unstable_LowPriority,nh=Ot.unstable_IdlePriority,fl=null,wn=null;function My(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(fl,e,void 0,(e.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Dy,Ry=Math.log,zy=Math.LN2;function Dy(e){return e>>>=0,e===0?32:31-(Ry(e)/zy|0)|0}var Ws=64,Ys=4194304;function Wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ai(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=Wo(l):(s&=i,s!==0&&(r=Wo(s)))}else i=n&~o,i!==0?r=Wo(i):s!==0&&(r=Wo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dn(t),o=1<<n,r|=e[n],t&=~o;return r}function Ly(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-dn(s),l=1<<i,a=o[i];a===-1?(!(l&n)||l&r)&&(o[i]=Ly(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rh(){var e=Ws;return Ws<<=1,!(Ws&4194240)&&(Ws=64),e}function Ql(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function As(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dn(t),e[t]=n}function Fy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-dn(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function ou(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Oe=0;function oh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sh,su,ih,lh,ah,qa=!1,Qs=[],Zn=null,Jn=null,er=null,as=new Map,cs=new Map,Qn=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nd(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":as.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(t.pointerId)}}function $o(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Rs(t),t!==null&&su(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Vy(e,t,n,r,o){switch(t){case"focusin":return Zn=$o(Zn,e,t,n,r,o),!0;case"dragenter":return Jn=$o(Jn,e,t,n,r,o),!0;case"mouseover":return er=$o(er,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return as.set(s,$o(as.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,cs.set(s,$o(cs.get(s)||null,e,t,n,r,o)),!0}return!1}function ch(e){var t=wr(e.target);if(t!==null){var n=Lr(t);if(n!==null){if(t=n.tag,t===13){if(t=Gp(n),t!==null){e.blockedOn=t,ah(e.priority,function(){ih(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ba=r,n.target.dispatchEvent(r),Ba=null}else return t=Rs(n),t!==null&&su(t),e.blockedOn=n,!1;t.shift()}return!0}function Sd(e,t,n){mi(e)&&n.delete(t)}function By(){qa=!1,Zn!==null&&mi(Zn)&&(Zn=null),Jn!==null&&mi(Jn)&&(Jn=null),er!==null&&mi(er)&&(er=null),as.forEach(Sd),cs.forEach(Sd)}function Ao(e,t){e.blockedOn===t&&(e.blockedOn=null,qa||(qa=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,By)))}function us(e){function t(o){return Ao(o,e)}if(0<Qs.length){Ao(Qs[0],e);for(var n=1;n<Qs.length;n++){var r=Qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&Ao(Zn,e),Jn!==null&&Ao(Jn,e),er!==null&&Ao(er,e),as.forEach(t),cs.forEach(t),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)ch(n),n.blockedOn===null&&Qn.shift()}var lo=On.ReactCurrentBatchConfig,Mi=!0;function Uy(e,t,n,r){var o=Oe,s=lo.transition;lo.transition=null;try{Oe=1,iu(e,t,n,r)}finally{Oe=o,lo.transition=s}}function Wy(e,t,n,r){var o=Oe,s=lo.transition;lo.transition=null;try{Oe=4,iu(e,t,n,r)}finally{Oe=o,lo.transition=s}}function iu(e,t,n,r){if(Mi){var o=Xa(e,t,n,r);if(o===null)ra(e,t,r,Ri,n),Nd(e,r);else if(Vy(o,e,t,n,r))r.stopPropagation();else if(Nd(e,r),t&4&&-1<Hy.indexOf(e)){for(;o!==null;){var s=Rs(o);if(s!==null&&sh(s),s=Xa(e,t,n,r),s===null&&ra(e,t,r,Ri,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else ra(e,t,r,null,n)}}var Ri=null;function Xa(e,t,n,r){if(Ri=null,e=nu(r),e=wr(e),e!==null)if(t=Lr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ri=e,null}function uh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($y()){case ru:return 1;case th:return 4;case $i:case Ay:return 16;case nh:return 536870912;default:return 16}default:return 16}}var Kn=null,lu=null,gi=null;function dh(){if(gi)return gi;var e,t=lu,n=t.length,r,o="value"in Kn?Kn.value:Kn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return gi=o.slice(e,1<r?1-r:void 0)}function yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function Ed(){return!1}function Ut(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qs:Ed,this.isPropagationStopped=Ed,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),t}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=Ut(Io),Ms=et({},Io,{view:0,detail:0}),Yy=Ut(Ms),ql,Xl,Mo,pl=et({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mo&&(Mo&&e.type==="mousemove"?(ql=e.screenX-Mo.screenX,Xl=e.screenY-Mo.screenY):Xl=ql=0,Mo=e),ql)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),bd=Ut(pl),Qy=et({},pl,{dataTransfer:0}),qy=Ut(Qy),Xy=et({},Ms,{relatedTarget:0}),Kl=Ut(Xy),Ky=et({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),Gy=Ut(Ky),Zy=et({},Io,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jy=Ut(Zy),ex=et({},Io,{data:0}),kd=Ut(ex),tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rx[e])?!!t[e]:!1}function cu(){return ox}var sx=et({},Ms,{key:function(e){if(e.key){var t=tx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(e){return e.type==="keypress"?yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ix=Ut(sx),lx=et({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=Ut(lx),ax=et({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),cx=Ut(ax),ux=et({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),dx=Ut(ux),fx=et({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),px=Ut(fx),hx=[9,13,27,32],uu=An&&"CompositionEvent"in window,Zo=null;An&&"documentMode"in document&&(Zo=document.documentMode);var mx=An&&"TextEvent"in window&&!Zo,fh=An&&(!uu||Zo&&8<Zo&&11>=Zo),Cd=" ",Id=!1;function ph(e,t){switch(e){case"keyup":return hx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function gx(e,t){switch(e){case"compositionend":return hh(t);case"keypress":return t.which!==32?null:(Id=!0,Cd);case"textInput":return e=t.data,e===Cd&&Id?null:e;default:return null}}function yx(e,t){if(Qr)return e==="compositionend"||!uu&&ph(e,t)?(e=dh(),gi=lu=Kn=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fh&&t.locale!=="ko"?null:t.data;default:return null}}var xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xx[e.type]:t==="textarea"}function mh(e,t,n,r){Yp(r),t=zi(t,"onChange"),0<t.length&&(n=new au("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jo=null,ds=null;function vx(e){_h(e,0)}function hl(e){var t=Kr(e);if(Op(t))return e}function wx(e,t){if(e==="change")return t}var gh=!1;if(An){var Gl;if(An){var Zl="oninput"in document;if(!Zl){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Zl=typeof Td.oninput=="function"}Gl=Zl}else Gl=!1;gh=Gl&&(!document.documentMode||9<document.documentMode)}function Pd(){Jo&&(Jo.detachEvent("onpropertychange",yh),ds=Jo=null)}function yh(e){if(e.propertyName==="value"&&hl(ds)){var t=[];mh(t,ds,e,nu(e)),Kp(vx,t)}}function Nx(e,t,n){e==="focusin"?(Pd(),Jo=t,ds=n,Jo.attachEvent("onpropertychange",yh)):e==="focusout"&&Pd()}function Sx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(ds)}function Ex(e,t){if(e==="click")return hl(t)}function bx(e,t){if(e==="input"||e==="change")return hl(t)}function kx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:kx;function fs(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Pa.call(t,o)||!pn(e[o],t[o]))return!1}return!0}function $d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ad(e,t){var n=$d(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$d(n)}}function xh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vh(){for(var e=window,t=ji();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ji(e.document)}return t}function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _x(e){var t=vh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xh(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Ad(n,s);var i=Ad(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cx=An&&"documentMode"in document&&11>=document.documentMode,qr=null,Ka=null,es=null,Ga=!1;function Md(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ga||qr==null||qr!==ji(r)||(r=qr,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&fs(es,r)||(es=r,r=zi(Ka,"onSelect"),0<r.length&&(t=new au("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qr)))}function Xs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xr={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},Jl={},wh={};An&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function ml(e){if(Jl[e])return Jl[e];if(!Xr[e])return e;var t=Xr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wh)return Jl[e]=t[n];return e}var Nh=ml("animationend"),Sh=ml("animationiteration"),Eh=ml("animationstart"),bh=ml("transitionend"),kh=new Map,Rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){kh.set(e,t),Dr(t,[e])}for(var ea=0;ea<Rd.length;ea++){var ta=Rd[ea],Ix=ta.toLowerCase(),jx=ta[0].toUpperCase()+ta.slice(1);dr(Ix,"on"+jx)}dr(Nh,"onAnimationEnd");dr(Sh,"onAnimationIteration");dr(Eh,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(bh,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function zd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Iy(r,t,void 0,e),e.currentTarget=null}function _h(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&o.isPropagationStopped())break e;zd(o,l,c),s=a}else for(i=0;i<r.length;i++){if(l=r[i],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&o.isPropagationStopped())break e;zd(o,l,c),s=a}}}if(Pi)throw e=Ya,Pi=!1,Ya=null,e}function Qe(e,t){var n=t[nc];n===void 0&&(n=t[nc]=new Set);var r=e+"__bubble";n.has(r)||(Ch(t,e,2,!1),n.add(r))}function na(e,t,n){var r=0;t&&(r|=4),Ch(n,e,r,t)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function ps(e){if(!e[Ks]){e[Ks]=!0,Mp.forEach(function(n){n!=="selectionchange"&&(Tx.has(n)||na(n,!1,e),na(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ks]||(t[Ks]=!0,na("selectionchange",!1,t))}}function Ch(e,t,n,r){switch(uh(t)){case 1:var o=Uy;break;case 4:o=Wy;break;default:o=iu}n=o.bind(null,t,n,e),o=void 0,!Wa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ra(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;i=i.return}for(;l!==null;){if(i=wr(l),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Kp(function(){var c=s,f=nu(n),d=[];e:{var h=kh.get(e);if(h!==void 0){var p=au,w=e;switch(e){case"keypress":if(yi(n)===0)break e;case"keydown":case"keyup":p=ix;break;case"focusin":w="focus",p=Kl;break;case"focusout":w="blur",p=Kl;break;case"beforeblur":case"afterblur":p=Kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cx;break;case Nh:case Sh:case Eh:p=Gy;break;case bh:p=dx;break;case"scroll":p=Yy;break;case"wheel":p=px;break;case"copy":case"cut":case"paste":p=Jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_d}var x=(t&4)!==0,S=!x&&e==="scroll",m=x?h!==null?h+"Capture":null:h;x=[];for(var g=c,v;g!==null;){v=g;var y=v.stateNode;if(v.tag===5&&y!==null&&(v=y,m!==null&&(y=ls(g,m),y!=null&&x.push(hs(g,y,v)))),S)break;g=g.return}0<x.length&&(h=new p(h,w,null,n,f),d.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Ba&&(w=n.relatedTarget||n.fromElement)&&(wr(w)||w[Mn]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?wr(w):null,w!==null&&(S=Lr(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(x=bd,y="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=_d,y="onPointerLeave",m="onPointerEnter",g="pointer"),S=p==null?h:Kr(p),v=w==null?h:Kr(w),h=new x(y,g+"leave",p,n,f),h.target=S,h.relatedTarget=v,y=null,wr(f)===c&&(x=new x(m,g+"enter",w,n,f),x.target=v,x.relatedTarget=S,y=x),S=y,p&&w)t:{for(x=p,m=w,g=0,v=x;v;v=Or(v))g++;for(v=0,y=m;y;y=Or(y))v++;for(;0<g-v;)x=Or(x),g--;for(;0<v-g;)m=Or(m),v--;for(;g--;){if(x===m||m!==null&&x===m.alternate)break t;x=Or(x),m=Or(m)}x=null}else x=null;p!==null&&Dd(d,h,p,x,!1),w!==null&&S!==null&&Dd(d,S,w,x,!0)}}e:{if(h=c?Kr(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=wx;else if(jd(h))if(gh)_=bx;else{_=Sx;var E=Nx}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Ex);if(_&&(_=_(e,c))){mh(d,_,n,f);break e}E&&E(e,h,c),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&La(h,"number",h.value)}switch(E=c?Kr(c):window,e){case"focusin":(jd(E)||E.contentEditable==="true")&&(qr=E,Ka=c,es=null);break;case"focusout":es=Ka=qr=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,Md(d,n,f);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":Md(d,n,f)}var I;if(uu)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Qr?ph(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(fh&&n.locale!=="ko"&&(Qr||M!=="onCompositionStart"?M==="onCompositionEnd"&&Qr&&(I=dh()):(Kn=f,lu="value"in Kn?Kn.value:Kn.textContent,Qr=!0)),E=zi(c,M),0<E.length&&(M=new kd(M,e,null,n,f),d.push({event:M,listeners:E}),I?M.data=I:(I=hh(n),I!==null&&(M.data=I)))),(I=mx?gx(e,n):yx(e,n))&&(c=zi(c,"onBeforeInput"),0<c.length&&(f=new kd("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=I))}_h(d,t)})}function hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zi(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=ls(e,n),s!=null&&r.unshift(hs(e,s,o)),s=ls(e,t),s!=null&&r.push(hs(e,s,o))),e=e.return}return r}function Or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dd(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,o?(a=ls(n,s),a!=null&&i.unshift(hs(n,a,l))):o||(a=ls(n,s),a!=null&&i.push(hs(n,a,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Px=/\r\n?/g,$x=/\u0000|\uFFFD/g;function Ld(e){return(typeof e=="string"?e:""+e).replace(Px,`
`).replace($x,"")}function Gs(e,t,n){if(t=Ld(t),Ld(e)!==t&&n)throw Error(K(425))}function Di(){}var Za=null,Ja=null;function ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,Ax=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,Mx=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(e){return Od.resolve(null).then(e).catch(Rx)}:tc;function Rx(e){setTimeout(function(){throw e})}function oa(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),us(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);us(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jo=Math.random().toString(36).slice(2),xn="__reactFiber$"+jo,ms="__reactProps$"+jo,Mn="__reactContainer$"+jo,nc="__reactEvents$"+jo,zx="__reactListeners$"+jo,Dx="__reactHandles$"+jo;function wr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fd(e);e!==null;){if(n=e[xn])return n;e=Fd(e)}return t}e=n,n=e.parentNode}return null}function Rs(e){return e=e[xn]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function gl(e){return e[ms]||null}var rc=[],Gr=-1;function fr(e){return{current:e}}function qe(e){0>Gr||(e.current=rc[Gr],rc[Gr]=null,Gr--)}function We(e,t){Gr++,rc[Gr]=e.current,e.current=t}var cr={},Et=fr(cr),At=fr(!1),jr=cr;function mo(e,t){var n=e.type.contextTypes;if(!n)return cr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mt(e){return e=e.childContextTypes,e!=null}function Li(){qe(At),qe(Et)}function Hd(e,t,n){if(Et.current!==cr)throw Error(K(168));We(Et,t),We(At,n)}function Ih(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(K(108,Ny(e)||"Unknown",o));return et({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,jr=Et.current,We(Et,e),We(At,At.current),!0}function Vd(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=Ih(e,t,jr),r.__reactInternalMemoizedMergedChildContext=e,qe(At),qe(Et),We(Et,e)):qe(At),We(At,n)}var _n=null,yl=!1,sa=!1;function jh(e){_n===null?_n=[e]:_n.push(e)}function Lx(e){yl=!0,jh(e)}function pr(){if(!sa&&_n!==null){sa=!0;var e=0,t=Oe;try{var n=_n;for(Oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_n=null,yl=!1}catch(o){throw _n!==null&&(_n=_n.slice(e+1)),eh(ru,pr),o}finally{Oe=t,sa=!1}}return null}var Zr=[],Jr=0,Fi=null,Hi=0,Wt=[],Yt=0,Tr=null,Cn=1,In="";function mr(e,t){Zr[Jr++]=Hi,Zr[Jr++]=Fi,Fi=e,Hi=t}function Th(e,t,n){Wt[Yt++]=Cn,Wt[Yt++]=In,Wt[Yt++]=Tr,Tr=e;var r=Cn;e=In;var o=32-dn(r)-1;r&=~(1<<o),n+=1;var s=32-dn(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Cn=1<<32-dn(t)+o|n<<o|r,In=s+e}else Cn=1<<s|n<<o|r,In=e}function fu(e){e.return!==null&&(mr(e,1),Th(e,1,0))}function pu(e){for(;e===Fi;)Fi=Zr[--Jr],Zr[Jr]=null,Hi=Zr[--Jr],Zr[Jr]=null;for(;e===Tr;)Tr=Wt[--Yt],Wt[Yt]=null,In=Wt[--Yt],Wt[Yt]=null,Cn=Wt[--Yt],Wt[Yt]=null}var Lt=null,Dt=null,Ke=!1,sn=null;function Ph(e,t){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Dt=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Tr!==null?{id:Cn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,Dt=null,!0):!1;default:return!1}}function oc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sc(e){if(Ke){var t=Dt;if(t){var n=t;if(!Bd(e,t)){if(oc(e))throw Error(K(418));t=tr(n.nextSibling);var r=Lt;t&&Bd(e,t)?Ph(r,n):(e.flags=e.flags&-4097|2,Ke=!1,Lt=e)}}else{if(oc(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ke=!1,Lt=e}}}function Ud(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function Zs(e){if(e!==Lt)return!1;if(!Ke)return Ud(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ec(e.type,e.memoizedProps)),t&&(t=Dt)){if(oc(e))throw $h(),Error(K(418));for(;t;)Ph(e,t),t=tr(t.nextSibling)}if(Ud(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dt=tr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=Lt?tr(e.stateNode.nextSibling):null;return!0}function $h(){for(var e=Dt;e;)e=tr(e.nextSibling)}function go(){Dt=Lt=null,Ke=!1}function hu(e){sn===null?sn=[e]:sn.push(e)}var Ox=On.ReactCurrentBatchConfig;function Ro(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function Js(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wd(e){var t=e._init;return t(e._payload)}function Ah(e){function t(m,g){if(e){var v=m.deletions;v===null?(m.deletions=[g],m.flags|=16):v.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=sr(m,g),m.index=0,m.sibling=null,m}function s(m,g,v){return m.index=v,e?(v=m.alternate,v!==null?(v=v.index,v<g?(m.flags|=2,g):v):(m.flags|=2,g)):(m.flags|=1048576,g)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,v,y){return g===null||g.tag!==6?(g=fa(v,m.mode,y),g.return=m,g):(g=o(g,v),g.return=m,g)}function a(m,g,v,y){var _=v.type;return _===Yr?f(m,g,v.props.children,y,v.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bn&&Wd(_)===g.type)?(y=o(g,v.props),y.ref=Ro(m,g,v),y.return=m,y):(y=bi(v.type,v.key,v.props,null,m.mode,y),y.ref=Ro(m,g,v),y.return=m,y)}function c(m,g,v,y){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=pa(v,m.mode,y),g.return=m,g):(g=o(g,v.children||[]),g.return=m,g)}function f(m,g,v,y,_){return g===null||g.tag!==7?(g=_r(v,m.mode,y,_),g.return=m,g):(g=o(g,v),g.return=m,g)}function d(m,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=fa(""+g,m.mode,v),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vs:return v=bi(g.type,g.key,g.props,null,m.mode,v),v.ref=Ro(m,null,g),v.return=m,v;case Wr:return g=pa(g,m.mode,v),g.return=m,g;case Bn:var y=g._init;return d(m,y(g._payload),v)}if(Uo(g)||To(g))return g=_r(g,m.mode,v,null),g.return=m,g;Js(m,g)}return null}function h(m,g,v,y){var _=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:l(m,g,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vs:return v.key===_?a(m,g,v,y):null;case Wr:return v.key===_?c(m,g,v,y):null;case Bn:return _=v._init,h(m,g,_(v._payload),y)}if(Uo(v)||To(v))return _!==null?null:f(m,g,v,y,null);Js(m,v)}return null}function p(m,g,v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(v)||null,l(g,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:return m=m.get(y.key===null?v:y.key)||null,a(g,m,y,_);case Wr:return m=m.get(y.key===null?v:y.key)||null,c(g,m,y,_);case Bn:var E=y._init;return p(m,g,v,E(y._payload),_)}if(Uo(y)||To(y))return m=m.get(v)||null,f(g,m,y,_,null);Js(g,y)}return null}function w(m,g,v,y){for(var _=null,E=null,I=g,M=g=0,A=null;I!==null&&M<v.length;M++){I.index>M?(A=I,I=null):A=I.sibling;var b=h(m,I,v[M],y);if(b===null){I===null&&(I=A);break}e&&I&&b.alternate===null&&t(m,I),g=s(b,g,M),E===null?_=b:E.sibling=b,E=b,I=A}if(M===v.length)return n(m,I),Ke&&mr(m,M),_;if(I===null){for(;M<v.length;M++)I=d(m,v[M],y),I!==null&&(g=s(I,g,M),E===null?_=I:E.sibling=I,E=I);return Ke&&mr(m,M),_}for(I=r(m,I);M<v.length;M++)A=p(I,m,M,v[M],y),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?M:A.key),g=s(A,g,M),E===null?_=A:E.sibling=A,E=A);return e&&I.forEach(function(R){return t(m,R)}),Ke&&mr(m,M),_}function x(m,g,v,y){var _=To(v);if(typeof _!="function")throw Error(K(150));if(v=_.call(v),v==null)throw Error(K(151));for(var E=_=null,I=g,M=g=0,A=null,b=v.next();I!==null&&!b.done;M++,b=v.next()){I.index>M?(A=I,I=null):A=I.sibling;var R=h(m,I,b.value,y);if(R===null){I===null&&(I=A);break}e&&I&&R.alternate===null&&t(m,I),g=s(R,g,M),E===null?_=R:E.sibling=R,E=R,I=A}if(b.done)return n(m,I),Ke&&mr(m,M),_;if(I===null){for(;!b.done;M++,b=v.next())b=d(m,b.value,y),b!==null&&(g=s(b,g,M),E===null?_=b:E.sibling=b,E=b);return Ke&&mr(m,M),_}for(I=r(m,I);!b.done;M++,b=v.next())b=p(I,m,M,b.value,y),b!==null&&(e&&b.alternate!==null&&I.delete(b.key===null?M:b.key),g=s(b,g,M),E===null?_=b:E.sibling=b,E=b);return e&&I.forEach(function(D){return t(m,D)}),Ke&&mr(m,M),_}function S(m,g,v,y){if(typeof v=="object"&&v!==null&&v.type===Yr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Vs:e:{for(var _=v.key,E=g;E!==null;){if(E.key===_){if(_=v.type,_===Yr){if(E.tag===7){n(m,E.sibling),g=o(E,v.props.children),g.return=m,m=g;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bn&&Wd(_)===E.type){n(m,E.sibling),g=o(E,v.props),g.ref=Ro(m,E,v),g.return=m,m=g;break e}n(m,E);break}else t(m,E);E=E.sibling}v.type===Yr?(g=_r(v.props.children,m.mode,y,v.key),g.return=m,m=g):(y=bi(v.type,v.key,v.props,null,m.mode,y),y.ref=Ro(m,g,v),y.return=m,m=y)}return i(m);case Wr:e:{for(E=v.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(m,g.sibling),g=o(g,v.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=pa(v,m.mode,y),g.return=m,m=g}return i(m);case Bn:return E=v._init,S(m,g,E(v._payload),y)}if(Uo(v))return w(m,g,v,y);if(To(v))return x(m,g,v,y);Js(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,v),g.return=m,m=g):(n(m,g),g=fa(v,m.mode,y),g.return=m,m=g),i(m)):n(m,g)}return S}var yo=Ah(!0),Mh=Ah(!1),Vi=fr(null),Bi=null,eo=null,mu=null;function gu(){mu=eo=Bi=null}function yu(e){var t=Vi.current;qe(Vi),e._currentValue=t}function ic(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ao(e,t){Bi=e,mu=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pt=!0),e.firstContext=null)}function Jt(e){var t=e._currentValue;if(mu!==e)if(e={context:e,memoizedValue:t,next:null},eo===null){if(Bi===null)throw Error(K(308));eo=e,Bi.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return t}var Nr=null;function xu(e){Nr===null?Nr=[e]:Nr.push(e)}function Rh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,xu(t)):(n.next=o.next,o.next=n),t.interleaved=n,Rn(e,r)}function Rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Un=!1;function vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Rn(e,n)}return o=r.interleaved,o===null?(t.next=t,xu(r)):(t.next=o.next,o.next=t),r.interleaved=t,Rn(e,n)}function xi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ou(e,n)}}function Yd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ui(e,t,n,r){var o=e.updateQueue;Un=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var a=l,c=a.next;a.next=null,i===null?s=c:i.next=c,i=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=o.baseState;i=0,f=c=a=null,l=s;do{var h=l.lane,p=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,x=l;switch(h=t,p=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){d=w.call(p,d,h);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,h=typeof w=="function"?w.call(p,d,h):w,h==null)break e;d=et({},d,h);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=p,a=d):f=f.next=p,i|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(a=d),o.baseState=a,o.firstBaseUpdate=c,o.lastBaseUpdate=f,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);$r|=i,e.lanes=i,e.memoizedState=d}}function Qd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(K(191,o));o.call(r)}}}var zs={},Nn=fr(zs),gs=fr(zs),ys=fr(zs);function Sr(e){if(e===zs)throw Error(K(174));return e}function wu(e,t){switch(We(ys,t),We(gs,e),We(Nn,zs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fa(t,e)}qe(Nn),We(Nn,t)}function xo(){qe(Nn),qe(gs),qe(ys)}function Dh(e){Sr(ys.current);var t=Sr(Nn.current),n=Fa(t,e.type);t!==n&&(We(gs,e),We(Nn,n))}function Nu(e){gs.current===e&&(qe(Nn),qe(gs))}var Ze=fr(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function Su(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var vi=On.ReactCurrentDispatcher,la=On.ReactCurrentBatchConfig,Pr=0,Je=null,lt=null,ut=null,Yi=!1,ts=!1,xs=0,Fx=0;function wt(){throw Error(K(321))}function Eu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function bu(e,t,n,r,o,s){if(Pr=s,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vi.current=e===null||e.memoizedState===null?Ux:Wx,e=n(r,o),ts){s=0;do{if(ts=!1,xs=0,25<=s)throw Error(K(301));s+=1,ut=lt=null,t.updateQueue=null,vi.current=Yx,e=n(r,o)}while(ts)}if(vi.current=Qi,t=lt!==null&&lt.next!==null,Pr=0,ut=lt=Je=null,Yi=!1,t)throw Error(K(300));return e}function ku(){var e=xs!==0;return xs=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Je.memoizedState=ut=e:ut=ut.next=e,ut}function en(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ut===null?Je.memoizedState:ut.next;if(t!==null)ut=t,lt=e;else{if(e===null)throw Error(K(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ut===null?Je.memoizedState=ut=e:ut=ut.next=e}return ut}function vs(e,t){return typeof t=="function"?t(e):t}function aa(e){var t=en(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,a=null,c=s;do{var f=c.lane;if((Pr&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,i=r):a=a.next=d,Je.lanes|=f,$r|=f}c=c.next}while(c!==null&&c!==s);a===null?i=r:a.next=l,pn(r,t.memoizedState)||(Pt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Je.lanes|=s,$r|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ca(e){var t=en(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);pn(s,t.memoizedState)||(Pt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Lh(){}function Oh(e,t){var n=Je,r=en(),o=t(),s=!pn(r.memoizedState,o);if(s&&(r.memoizedState=o,Pt=!0),r=r.queue,_u(Vh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,ws(9,Hh.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(K(349));Pr&30||Fh(n,t,o)}return o}function Fh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hh(e,t,n,r){t.value=n,t.getSnapshot=r,Bh(t)&&Uh(e)}function Vh(e,t,n){return n(function(){Bh(t)&&Uh(e)})}function Bh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function Uh(e){var t=Rn(e,1);t!==null&&fn(t,e,1,-1)}function qd(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Bx.bind(null,Je,e),[t.memoizedState,e]}function ws(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Wh(){return en().memoizedState}function wi(e,t,n,r){var o=yn();Je.flags|=e,o.memoizedState=ws(1|t,n,void 0,r===void 0?null:r)}function xl(e,t,n,r){var o=en();r=r===void 0?null:r;var s=void 0;if(lt!==null){var i=lt.memoizedState;if(s=i.destroy,r!==null&&Eu(r,i.deps)){o.memoizedState=ws(t,n,s,r);return}}Je.flags|=e,o.memoizedState=ws(1|t,n,s,r)}function Xd(e,t){return wi(8390656,8,e,t)}function _u(e,t){return xl(2048,8,e,t)}function Yh(e,t){return xl(4,2,e,t)}function Qh(e,t){return xl(4,4,e,t)}function qh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xh(e,t,n){return n=n!=null?n.concat([e]):null,xl(4,4,qh.bind(null,t,e),n)}function Cu(){}function Kh(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gh(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zh(e,t,n){return Pr&21?(pn(n,t)||(n=rh(),Je.lanes|=n,$r|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pt=!0),e.memoizedState=n)}function Hx(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var r=la.transition;la.transition={};try{e(!1),t()}finally{Oe=n,la.transition=r}}function Jh(){return en().memoizedState}function Vx(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},em(e))tm(t,n);else if(n=Rh(e,t,n,r),n!==null){var o=kt();fn(n,e,r,o),nm(n,t,r)}}function Bx(e,t,n){var r=or(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(em(e))tm(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,pn(l,i)){var a=t.interleaved;a===null?(o.next=o,xu(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}finally{}n=Rh(e,t,o,r),n!==null&&(o=kt(),fn(n,e,r,o),nm(n,t,r))}}function em(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function tm(e,t){ts=Yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ou(e,n)}}var Qi={readContext:Jt,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},Ux={readContext:Jt,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Xd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wi(4194308,4,qh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return wi(4,2,e,t)},useMemo:function(e,t){var n=yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vx.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:qd,useDebugValue:Cu,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=qd(!1),t=e[0];return e=Hx.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=yn();if(Ke){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),dt===null)throw Error(K(349));Pr&30||Fh(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Xd(Vh.bind(null,r,s,e),[e]),r.flags|=2048,ws(9,Hh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=yn(),t=dt.identifierPrefix;if(Ke){var n=In,r=Cn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wx={readContext:Jt,useCallback:Kh,useContext:Jt,useEffect:_u,useImperativeHandle:Xh,useInsertionEffect:Yh,useLayoutEffect:Qh,useMemo:Gh,useReducer:aa,useRef:Wh,useState:function(){return aa(vs)},useDebugValue:Cu,useDeferredValue:function(e){var t=en();return Zh(t,lt.memoizedState,e)},useTransition:function(){var e=aa(vs)[0],t=en().memoizedState;return[e,t]},useMutableSource:Lh,useSyncExternalStore:Oh,useId:Jh,unstable_isNewReconciler:!1},Yx={readContext:Jt,useCallback:Kh,useContext:Jt,useEffect:_u,useImperativeHandle:Xh,useInsertionEffect:Yh,useLayoutEffect:Qh,useMemo:Gh,useReducer:ca,useRef:Wh,useState:function(){return ca(vs)},useDebugValue:Cu,useDeferredValue:function(e){var t=en();return lt===null?t.memoizedState=e:Zh(t,lt.memoizedState,e)},useTransition:function(){var e=ca(vs)[0],t=en().memoizedState;return[e,t]},useMutableSource:Lh,useSyncExternalStore:Oh,useId:Jh,unstable_isNewReconciler:!1};function nn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vl={isMounted:function(e){return(e=e._reactInternals)?Lr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kt(),o=or(e),s=Pn(r,o);s.payload=t,n!=null&&(s.callback=n),t=nr(e,s,o),t!==null&&(fn(t,e,o,r),xi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kt(),o=or(e),s=Pn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=nr(e,s,o),t!==null&&(fn(t,e,o,r),xi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kt(),r=or(e),o=Pn(n,r);o.tag=2,t!=null&&(o.callback=t),t=nr(e,o,r),t!==null&&(fn(t,e,r,n),xi(t,e,r))}};function Kd(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!fs(n,r)||!fs(o,s):!0}function rm(e,t,n){var r=!1,o=cr,s=t.contextType;return typeof s=="object"&&s!==null?s=Jt(s):(o=Mt(t)?jr:Et.current,r=t.contextTypes,s=(r=r!=null)?mo(e,o):cr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vl.enqueueReplaceState(t,t.state,null)}function ac(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},vu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Jt(s):(s=Mt(t)?jr:Et.current,o.context=mo(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(lc(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&vl.enqueueReplaceState(o,o.state,null),Ui(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do n+=wy(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qx=typeof WeakMap=="function"?WeakMap:Map;function om(e,t,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xi||(Xi=!0,vc=r),cc(e,t)},n}function sm(e,t,n){n=Pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){cc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cc(e,t),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Zd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qx;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=lv.bind(null,e,t,n),t.then(e,e))}function Jd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ef(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pn(-1,1),t.tag=2,nr(n,t,1))),n.lanes|=1),e)}var qx=On.ReactCurrentOwner,Pt=!1;function bt(e,t,n,r){t.child=e===null?Mh(t,null,n,r):yo(t,e.child,n,r)}function tf(e,t,n,r,o){n=n.render;var s=t.ref;return ao(t,o),r=bu(e,t,n,r,s,o),n=ku(),e!==null&&!Pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zn(e,t,o)):(Ke&&n&&fu(t),t.flags|=1,bt(e,t,r,o),t.child)}function nf(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Ru(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,im(e,t,s,r,o)):(e=bi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:fs,n(i,r)&&e.ref===t.ref)return zn(e,t,o)}return t.flags|=1,e=sr(s,r),e.ref=t.ref,e.return=t,t.child=e}function im(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(fs(s,r)&&e.ref===t.ref)if(Pt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Pt=!0);else return t.lanes=e.lanes,zn(e,t,o)}return uc(e,t,n,r,o)}function lm(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(no,zt),zt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(no,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(no,zt),zt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,We(no,zt),zt|=r;return bt(e,t,o,n),t.child}function am(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uc(e,t,n,r,o){var s=Mt(n)?jr:Et.current;return s=mo(t,s),ao(t,o),n=bu(e,t,n,r,s,o),r=ku(),e!==null&&!Pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zn(e,t,o)):(Ke&&r&&fu(t),t.flags|=1,bt(e,t,n,o),t.child)}function rf(e,t,n,r,o){if(Mt(n)){var s=!0;Oi(t)}else s=!1;if(ao(t,o),t.stateNode===null)Ni(e,t),rm(t,n,r),ac(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Jt(c):(c=Mt(n)?jr:Et.current,c=mo(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Gd(t,i,r,c),Un=!1;var h=t.memoizedState;i.state=h,Ui(t,r,i,o),a=t.memoizedState,l!==r||h!==a||At.current||Un?(typeof f=="function"&&(lc(t,n,f,r),a=t.memoizedState),(l=Un||Kd(t,n,l,r,h,a,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),i.props=r,i.state=a,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,zh(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:nn(t.type,l),i.props=c,d=t.pendingProps,h=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Jt(a):(a=Mt(n)?jr:Et.current,a=mo(t,a));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Gd(t,i,r,a),Un=!1,h=t.memoizedState,i.state=h,Ui(t,r,i,o);var w=t.memoizedState;l!==d||h!==w||At.current||Un?(typeof p=="function"&&(lc(t,n,p,r),w=t.memoizedState),(c=Un||Kd(t,n,c,r,h,w,a)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,a)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return dc(e,t,n,r,s,o)}function dc(e,t,n,r,o,s){am(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Vd(t,n,!1),zn(e,t,s);r=t.stateNode,qx.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=yo(t,e.child,null,s),t.child=yo(t,null,l,s)):bt(e,t,l,s),t.memoizedState=r.state,o&&Vd(t,n,!0),t.child}function cm(e){var t=e.stateNode;t.pendingContext?Hd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hd(e,t.context,!1),wu(e,t.containerInfo)}function of(e,t,n,r,o){return go(),hu(o),t.flags|=256,bt(e,t,n,r),t.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function pc(e){return{baseLanes:e,cachePool:null,transitions:null}}function um(e,t,n){var r=t.pendingProps,o=Ze.current,s=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),We(Ze,o&1),e===null)return sc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Sl(i,r,0,null),e=_r(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=pc(n),t.memoizedState=fc,e):Iu(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Xx(e,t,i,r,l,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,l=o.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=sr(o,a),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=sr(l,s):(s=_r(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?pc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=fc,r}return s=e.child,e=s.sibling,r=sr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Iu(e,t){return t=Sl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ei(e,t,n,r){return r!==null&&hu(r),yo(t,e.child,null,n),e=Iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xx(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=ua(Error(K(422))),ei(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Sl({mode:"visible",children:r.children},o,0,null),s=_r(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&yo(t,e.child,null,i),t.child.memoizedState=pc(i),t.memoizedState=fc,s);if(!(t.mode&1))return ei(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(K(419)),r=ua(s,r,void 0),ei(e,t,i,r)}if(l=(i&e.childLanes)!==0,Pt||l){if(r=dt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Rn(e,o),fn(r,e,o,-1))}return Mu(),r=ua(Error(K(421))),ei(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=av.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Dt=tr(o.nextSibling),Lt=t,Ke=!0,sn=null,e!==null&&(Wt[Yt++]=Cn,Wt[Yt++]=In,Wt[Yt++]=Tr,Cn=e.id,In=e.overflow,Tr=t),t=Iu(t,r.children),t.flags|=4096,t)}function sf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ic(e.return,t,n)}function da(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function dm(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(bt(e,t,r.children,n),r=Ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sf(e,n,t);else if(e.tag===19)sf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Ze,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Wi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),da(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Wi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}da(t,!0,n,null,s);break;case"together":da(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ni(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Kx(e,t,n){switch(t.tag){case 3:cm(t),go();break;case 5:Dh(t);break;case 1:Mt(t.type)&&Oi(t);break;case 4:wu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;We(Vi,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Ze,Ze.current&1),t.flags|=128,null):n&t.child.childLanes?um(e,t,n):(We(Ze,Ze.current&1),e=zn(e,t,n),e!==null?e.sibling:null);We(Ze,Ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dm(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),We(Ze,Ze.current),r)break;return null;case 22:case 23:return t.lanes=0,lm(e,t,n)}return zn(e,t,n)}var fm,hc,pm,hm;fm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hc=function(){};pm=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Sr(Nn.current);var s=null;switch(n){case"input":o=za(e,o),r=za(e,r),s=[];break;case"select":o=et({},o,{value:void 0}),r=et({},r,{value:void 0}),s=[];break;case"textarea":o=Oa(e,o),r=Oa(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Di)}Ha(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ss.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&l[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ss.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Qe("scroll",e),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};hm=function(e,t,n,r){n!==r&&(t.flags|=4)};function zo(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gx(e,t,n){var r=t.pendingProps;switch(pu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Mt(t.type)&&Li(),Nt(t),null;case 3:return r=t.stateNode,xo(),qe(At),qe(Et),Su(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sn!==null&&(Sc(sn),sn=null))),hc(e,t),Nt(t),null;case 5:Nu(t);var o=Sr(ys.current);if(n=t.type,e!==null&&t.stateNode!=null)pm(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return Nt(t),null}if(e=Sr(Nn.current),Zs(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[xn]=t,r[ms]=s,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(o=0;o<Yo.length;o++)Qe(Yo[o],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":hd(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":gd(r,s),Qe("invalid",r)}Ha(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,l,e),o=["children",""+l]):ss.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Qe("scroll",r)}switch(n){case"input":Bs(r),md(r,s,!0);break;case"textarea":Bs(r),yd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Di)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[xn]=t,e[ms]=r,fm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Va(n,r),n){case"dialog":Qe("cancel",e),Qe("close",e),o=r;break;case"iframe":case"object":case"embed":Qe("load",e),o=r;break;case"video":case"audio":for(o=0;o<Yo.length;o++)Qe(Yo[o],e);o=r;break;case"source":Qe("error",e),o=r;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),o=r;break;case"details":Qe("toggle",e),o=r;break;case"input":hd(e,r),o=za(e,r),Qe("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=et({},r,{value:void 0}),Qe("invalid",e);break;case"textarea":gd(e,r),o=Oa(e,r),Qe("invalid",e);break;default:o=r}Ha(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Wp(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Bp(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&is(e,a):typeof a=="number"&&is(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ss.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Qe("scroll",e):a!=null&&Zc(e,s,a,i))}switch(n){case"input":Bs(e),md(e,r,!1);break;case"textarea":Bs(e),yd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ar(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?oo(e,!!r.multiple,s,!1):r.defaultValue!=null&&oo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Di)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nt(t),null;case 6:if(e&&t.stateNode!=null)hm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Sr(ys.current),Sr(Nn.current),Zs(t)){if(r=t.stateNode,n=t.memoizedProps,r[xn]=t,(s=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:Gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=t,t.stateNode=r}return Nt(t),null;case 13:if(qe(Ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Dt!==null&&t.mode&1&&!(t.flags&128))$h(),go(),t.flags|=98560,s=!1;else if(s=Zs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(K(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[xn]=t}else go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nt(t),s=!1}else sn!==null&&(Sc(sn),sn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ze.current&1?at===0&&(at=3):Mu())),t.updateQueue!==null&&(t.flags|=4),Nt(t),null);case 4:return xo(),hc(e,t),e===null&&ps(t.stateNode.containerInfo),Nt(t),null;case 10:return yu(t.type._context),Nt(t),null;case 17:return Mt(t.type)&&Li(),Nt(t),null;case 19:if(qe(Ze),s=t.memoizedState,s===null)return Nt(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)zo(s,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Wi(e),i!==null){for(t.flags|=128,zo(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Ze,Ze.current&1|2),t.child}e=e.sibling}s.tail!==null&&rt()>wo&&(t.flags|=128,r=!0,zo(s,!1),t.lanes=4194304)}else{if(!r)if(e=Wi(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ke)return Nt(t),null}else 2*rt()-s.renderingStartTime>wo&&n!==1073741824&&(t.flags|=128,r=!0,zo(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rt(),t.sibling=null,n=Ze.current,We(Ze,r?n&1|2:n&1),t):(Nt(t),null);case 22:case 23:return Au(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function Zx(e,t){switch(pu(t),t.tag){case 1:return Mt(t.type)&&Li(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xo(),qe(At),qe(Et),Su(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nu(t),null;case 13:if(qe(Ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Ze),null;case 4:return xo(),null;case 10:return yu(t.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var ti=!1,St=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,de=null;function to(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function mc(e,t,n){try{n()}catch(r){tt(e,t,r)}}var lf=!1;function ev(e,t){if(Za=Mi,e=vh(),du(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,a=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||o!==0&&d.nodeType!==3||(l=i+o),d!==s||r!==0&&d.nodeType!==3||(a=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===o&&(l=i),h===s&&++f===r&&(a=i),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ja={focusedElem:e,selectionRange:n},Mi=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,S=w.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:nn(t.type,x),S);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(y){tt(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return w=lf,lf=!1,w}function ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&mc(t,n,s)}o=o.next}while(o!==r)}}function wl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mm(e){var t=e.alternate;t!==null&&(e.alternate=null,mm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[ms],delete t[nc],delete t[zx],delete t[Dx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gm(e){return e.tag===5||e.tag===3||e.tag===4}function af(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Di));else if(r!==4&&(e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}function xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xc(e,t,n),e=e.sibling;e!==null;)xc(e,t,n),e=e.sibling}var mt=null,rn=!1;function Hn(e,t,n){for(n=n.child;n!==null;)ym(e,t,n),n=n.sibling}function ym(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:St||to(n,t);case 6:var r=mt,o=rn;mt=null,Hn(e,t,n),mt=r,rn=o,mt!==null&&(rn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(rn?(e=mt,n=n.stateNode,e.nodeType===8?oa(e.parentNode,n):e.nodeType===1&&oa(e,n),us(e)):oa(mt,n.stateNode));break;case 4:r=mt,o=rn,mt=n.stateNode.containerInfo,rn=!0,Hn(e,t,n),mt=r,rn=o;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&mc(n,t,i),o=o.next}while(o!==r)}Hn(e,t,n);break;case 1:if(!St&&(to(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tt(n,t,l)}Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,Hn(e,t,n),St=r):Hn(e,t,n);break;default:Hn(e,t,n)}}function cf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Jx),t.forEach(function(r){var o=cv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function tn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,rn=!1;break e;case 3:mt=l.stateNode.containerInfo,rn=!0;break e;case 4:mt=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(mt===null)throw Error(K(160));ym(s,i,o),mt=null,rn=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(c){tt(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xm(t,e),t=t.sibling}function xm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tn(t,e),gn(e),r&4){try{ns(3,e,e.return),wl(3,e)}catch(x){tt(e,e.return,x)}try{ns(5,e,e.return)}catch(x){tt(e,e.return,x)}}break;case 1:tn(t,e),gn(e),r&512&&n!==null&&to(n,n.return);break;case 5:if(tn(t,e),gn(e),r&512&&n!==null&&to(n,n.return),e.flags&32){var o=e.stateNode;try{is(o,"")}catch(x){tt(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Fp(o,s),Va(l,i);var c=Va(l,s);for(i=0;i<a.length;i+=2){var f=a[i],d=a[i+1];f==="style"?Wp(o,d):f==="dangerouslySetInnerHTML"?Bp(o,d):f==="children"?is(o,d):Zc(o,f,d,c)}switch(l){case"input":Da(o,s);break;case"textarea":Hp(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?oo(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?oo(o,!!s.multiple,s.defaultValue,!0):oo(o,!!s.multiple,s.multiple?[]:"",!1))}o[ms]=s}catch(x){tt(e,e.return,x)}}break;case 6:if(tn(t,e),gn(e),r&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(x){tt(e,e.return,x)}}break;case 3:if(tn(t,e),gn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(x){tt(e,e.return,x)}break;case 4:tn(t,e),gn(e);break;case 13:tn(t,e),gn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Pu=rt())),r&4&&cf(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(St=(c=St)||f,tn(t,e),St=c):tn(t,e),gn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(de=e,f=e.child;f!==null;){for(d=de=f;de!==null;){switch(h=de,p=h.child,h.tag){case 0:case 11:case 14:case 15:ns(4,h,h.return);break;case 1:to(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){tt(r,n,x)}}break;case 5:to(h,h.return);break;case 22:if(h.memoizedState!==null){df(d);continue}}p!==null?(p.return=h,de=p):df(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Up("display",i))}catch(x){tt(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){tt(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tn(t,e),gn(e),r&4&&cf(e);break;case 21:break;default:tn(t,e),gn(e)}}function gn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gm(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(is(o,""),r.flags&=-33);var s=af(e);xc(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=af(e);yc(e,l,i);break;default:throw Error(K(161))}}catch(a){tt(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tv(e,t,n){de=e,vm(e)}function vm(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var o=de,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ti;if(!i){var l=o.alternate,a=l!==null&&l.memoizedState!==null||St;l=ti;var c=St;if(ti=i,(St=a)&&!c)for(de=o;de!==null;)i=de,a=i.child,i.tag===22&&i.memoizedState!==null?ff(o):a!==null?(a.return=i,de=a):ff(o);for(;s!==null;)de=s,vm(s),s=s.sibling;de=o,ti=l,St=c}uf(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,de=s):uf(e)}}function uf(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||wl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:nn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Qd(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qd(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&us(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}St||t.flags&512&&gc(t)}catch(h){tt(t,t.return,h)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function df(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function ff(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wl(4,t)}catch(a){tt(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(a){tt(t,o,a)}}var s=t.return;try{gc(t)}catch(a){tt(t,s,a)}break;case 5:var i=t.return;try{gc(t)}catch(a){tt(t,i,a)}}}catch(a){tt(t,t.return,a)}if(t===e){de=null;break}var l=t.sibling;if(l!==null){l.return=t.return,de=l;break}de=t.return}}var nv=Math.ceil,qi=On.ReactCurrentDispatcher,ju=On.ReactCurrentOwner,Gt=On.ReactCurrentBatchConfig,ze=0,dt=null,ot=null,gt=0,zt=0,no=fr(0),at=0,Ns=null,$r=0,Nl=0,Tu=0,rs=null,Tt=null,Pu=0,wo=1/0,kn=null,Xi=!1,vc=null,rr=null,ni=!1,Gn=null,Ki=0,os=0,wc=null,Si=-1,Ei=0;function kt(){return ze&6?rt():Si!==-1?Si:Si=rt()}function or(e){return e.mode&1?ze&2&&gt!==0?gt&-gt:Ox.transition!==null?(Ei===0&&(Ei=rh()),Ei):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:uh(e.type)),e):1}function fn(e,t,n,r){if(50<os)throw os=0,wc=null,Error(K(185));As(e,n,r),(!(ze&2)||e!==dt)&&(e===dt&&(!(ze&2)&&(Nl|=n),at===4&&qn(e,gt)),Rt(e,r),n===1&&ze===0&&!(t.mode&1)&&(wo=rt()+500,yl&&pr()))}function Rt(e,t){var n=e.callbackNode;Oy(e,t);var r=Ai(e,e===dt?gt:0);if(r===0)n!==null&&wd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&wd(n),t===1)e.tag===0?Lx(pf.bind(null,e)):jh(pf.bind(null,e)),Mx(function(){!(ze&6)&&pr()}),n=null;else{switch(oh(r)){case 1:n=ru;break;case 4:n=th;break;case 16:n=$i;break;case 536870912:n=nh;break;default:n=$i}n=Cm(n,wm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wm(e,t){if(Si=-1,Ei=0,ze&6)throw Error(K(327));var n=e.callbackNode;if(co()&&e.callbackNode!==n)return null;var r=Ai(e,e===dt?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gi(e,r);else{t=r;var o=ze;ze|=2;var s=Sm();(dt!==e||gt!==t)&&(kn=null,wo=rt()+500,kr(e,t));do try{sv();break}catch(l){Nm(e,l)}while(!0);gu(),qi.current=s,ze=o,ot!==null?t=0:(dt=null,gt=0,t=at)}if(t!==0){if(t===2&&(o=Qa(e),o!==0&&(r=o,t=Nc(e,o))),t===1)throw n=Ns,kr(e,0),qn(e,r),Rt(e,rt()),n;if(t===6)qn(e,r);else{if(o=e.current.alternate,!(r&30)&&!rv(o)&&(t=Gi(e,r),t===2&&(s=Qa(e),s!==0&&(r=s,t=Nc(e,s))),t===1))throw n=Ns,kr(e,0),qn(e,r),Rt(e,rt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:gr(e,Tt,kn);break;case 3:if(qn(e,r),(r&130023424)===r&&(t=Pu+500-rt(),10<t)){if(Ai(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){kt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=tc(gr.bind(null,e,Tt,kn),t);break}gr(e,Tt,kn);break;case 4:if(qn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-dn(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nv(r/1960))-r,10<r){e.timeoutHandle=tc(gr.bind(null,e,Tt,kn),r);break}gr(e,Tt,kn);break;case 5:gr(e,Tt,kn);break;default:throw Error(K(329))}}}return Rt(e,rt()),e.callbackNode===n?wm.bind(null,e):null}function Nc(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(kr(e,t).flags|=256),e=Gi(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Sc(t)),e}function Sc(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function rv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!pn(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qn(e,t){for(t&=~Tu,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dn(t),r=1<<n;e[n]=-1,t&=~r}}function pf(e){if(ze&6)throw Error(K(327));co();var t=Ai(e,0);if(!(t&1))return Rt(e,rt()),null;var n=Gi(e,t);if(e.tag!==0&&n===2){var r=Qa(e);r!==0&&(t=r,n=Nc(e,r))}if(n===1)throw n=Ns,kr(e,0),qn(e,t),Rt(e,rt()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,Tt,kn),Rt(e,rt()),null}function $u(e,t){var n=ze;ze|=1;try{return e(t)}finally{ze=n,ze===0&&(wo=rt()+500,yl&&pr())}}function Ar(e){Gn!==null&&Gn.tag===0&&!(ze&6)&&co();var t=ze;ze|=1;var n=Gt.transition,r=Oe;try{if(Gt.transition=null,Oe=1,e)return e()}finally{Oe=r,Gt.transition=n,ze=t,!(ze&6)&&pr()}}function Au(){zt=no.current,qe(no)}function kr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ax(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Li();break;case 3:xo(),qe(At),qe(Et),Su();break;case 5:Nu(r);break;case 4:xo();break;case 13:qe(Ze);break;case 19:qe(Ze);break;case 10:yu(r.type._context);break;case 22:case 23:Au()}n=n.return}if(dt=e,ot=e=sr(e.current,null),gt=zt=t,at=0,Ns=null,Tu=Nl=$r=0,Tt=rs=null,Nr!==null){for(t=0;t<Nr.length;t++)if(n=Nr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Nr=null}return e}function Nm(e,t){do{var n=ot;try{if(gu(),vi.current=Qi,Yi){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Yi=!1}if(Pr=0,ut=lt=Je=null,ts=!1,xs=0,ju.current=null,n===null||n.return===null){at=1,Ns=t,ot=null;break}e:{var s=e,i=n.return,l=n,a=t;if(t=gt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Jd(i);if(p!==null){p.flags&=-257,ef(p,i,l,s,t),p.mode&1&&Zd(s,c,t),t=p,a=c;var w=t.updateQueue;if(w===null){var x=new Set;x.add(a),t.updateQueue=x}else w.add(a);break e}else{if(!(t&1)){Zd(s,c,t),Mu();break e}a=Error(K(426))}}else if(Ke&&l.mode&1){var S=Jd(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),ef(S,i,l,s,t),hu(vo(a,l));break e}}s=a=vo(a,l),at!==4&&(at=2),rs===null?rs=[s]:rs.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=om(s,a,t);Yd(s,m);break e;case 1:l=a;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(rr===null||!rr.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var y=sm(s,l,t);Yd(s,y);break e}}s=s.return}while(s!==null)}bm(n)}catch(_){t=_,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function Sm(){var e=qi.current;return qi.current=Qi,e===null?Qi:e}function Mu(){(at===0||at===3||at===2)&&(at=4),dt===null||!($r&268435455)&&!(Nl&268435455)||qn(dt,gt)}function Gi(e,t){var n=ze;ze|=2;var r=Sm();(dt!==e||gt!==t)&&(kn=null,kr(e,t));do try{ov();break}catch(o){Nm(e,o)}while(!0);if(gu(),ze=n,qi.current=r,ot!==null)throw Error(K(261));return dt=null,gt=0,at}function ov(){for(;ot!==null;)Em(ot)}function sv(){for(;ot!==null&&!Ty();)Em(ot)}function Em(e){var t=_m(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?bm(e):ot=t,ju.current=null}function bm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Zx(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,ot=null;return}}else if(n=Gx(n,t,zt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);at===0&&(at=5)}function gr(e,t,n){var r=Oe,o=Gt.transition;try{Gt.transition=null,Oe=1,iv(e,t,n,r)}finally{Gt.transition=o,Oe=r}return null}function iv(e,t,n,r){do co();while(Gn!==null);if(ze&6)throw Error(K(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fy(e,s),e===dt&&(ot=dt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ni||(ni=!0,Cm($i,function(){return co(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var i=Oe;Oe=1;var l=ze;ze|=4,ju.current=null,ev(e,n),xm(n,e),_x(Ja),Mi=!!Za,Ja=Za=null,e.current=n,tv(n),Py(),ze=l,Oe=i,Gt.transition=s}else e.current=n;if(ni&&(ni=!1,Gn=e,Ki=o),s=e.pendingLanes,s===0&&(rr=null),My(n.stateNode),Rt(e,rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Xi)throw Xi=!1,e=vc,vc=null,e;return Ki&1&&e.tag!==0&&co(),s=e.pendingLanes,s&1?e===wc?os++:(os=0,wc=e):os=0,pr(),null}function co(){if(Gn!==null){var e=oh(Ki),t=Gt.transition,n=Oe;try{if(Gt.transition=null,Oe=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,Ki=0,ze&6)throw Error(K(331));var o=ze;for(ze|=4,de=e.current;de!==null;){var s=de,i=s.child;if(de.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(de=c;de!==null;){var f=de;switch(f.tag){case 0:case 11:case 15:ns(8,f,s)}var d=f.child;if(d!==null)d.return=f,de=d;else for(;de!==null;){f=de;var h=f.sibling,p=f.return;if(mm(f),f===c){de=null;break}if(h!==null){h.return=p,de=h;break}de=p}}}var w=s.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}de=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,de=i;else e:for(;de!==null;){if(s=de,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ns(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,de=m;break e}de=s.return}}var g=e.current;for(de=g;de!==null;){i=de;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,de=v;else e:for(i=g;de!==null;){if(l=de,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wl(9,l)}}catch(_){tt(l,l.return,_)}if(l===i){de=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,de=y;break e}de=l.return}}if(ze=o,pr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(fl,e)}catch{}r=!0}return r}finally{Oe=n,Gt.transition=t}}return!1}function hf(e,t,n){t=vo(n,t),t=om(e,t,1),e=nr(e,t,1),t=kt(),e!==null&&(As(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)hf(e,e,n);else for(;t!==null;){if(t.tag===3){hf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){e=vo(n,e),e=sm(t,e,1),t=nr(t,e,1),e=kt(),t!==null&&(As(t,1,e),Rt(t,e));break}}t=t.return}}function lv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(gt&n)===n&&(at===4||at===3&&(gt&130023424)===gt&&500>rt()-Pu?kr(e,0):Tu|=n),Rt(e,t)}function km(e,t){t===0&&(e.mode&1?(t=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):t=1);var n=kt();e=Rn(e,t),e!==null&&(As(e,t,n),Rt(e,n))}function av(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),km(e,n)}function cv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),km(e,n)}var _m;_m=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||At.current)Pt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pt=!1,Kx(e,t,n);Pt=!!(e.flags&131072)}else Pt=!1,Ke&&t.flags&1048576&&Th(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ni(e,t),e=t.pendingProps;var o=mo(t,Et.current);ao(t,n),o=bu(null,t,r,e,o,n);var s=ku();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(s=!0,Oi(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,vu(t),o.updater=vl,t.stateNode=o,o._reactInternals=t,ac(t,r,e,n),t=dc(null,t,r,!0,s,n)):(t.tag=0,Ke&&s&&fu(t),bt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ni(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=dv(r),e=nn(r,e),o){case 0:t=uc(null,t,r,e,n);break e;case 1:t=rf(null,t,r,e,n);break e;case 11:t=tf(null,t,r,e,n);break e;case 14:t=nf(null,t,r,nn(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:nn(r,o),uc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:nn(r,o),rf(e,t,r,o,n);case 3:e:{if(cm(t),e===null)throw Error(K(387));r=t.pendingProps,s=t.memoizedState,o=s.element,zh(e,t),Ui(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=vo(Error(K(423)),t),t=of(e,t,r,n,o);break e}else if(r!==o){o=vo(Error(K(424)),t),t=of(e,t,r,n,o);break e}else for(Dt=tr(t.stateNode.containerInfo.firstChild),Lt=t,Ke=!0,sn=null,n=Mh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===o){t=zn(e,t,n);break e}bt(e,t,r,n)}t=t.child}return t;case 5:return Dh(t),e===null&&sc(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,ec(r,o)?i=null:s!==null&&ec(r,s)&&(t.flags|=32),am(e,t),bt(e,t,i,n),t.child;case 6:return e===null&&sc(t),null;case 13:return um(e,t,n);case 4:return wu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yo(t,null,r,n):bt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:nn(r,o),tf(e,t,r,o,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,We(Vi,r._currentValue),r._currentValue=i,s!==null)if(pn(s.value,i)){if(s.children===o.children&&!At.current){t=zn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Pn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ic(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(K(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ic(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}bt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ao(t,n),o=Jt(o),r=r(o),t.flags|=1,bt(e,t,r,n),t.child;case 14:return r=t.type,o=nn(r,t.pendingProps),o=nn(r.type,o),nf(e,t,r,o,n);case 15:return im(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:nn(r,o),Ni(e,t),t.tag=1,Mt(r)?(e=!0,Oi(t)):e=!1,ao(t,n),rm(t,r,o),ac(t,r,o,n),dc(null,t,r,!0,e,n);case 19:return dm(e,t,n);case 22:return lm(e,t,n)}throw Error(K(156,t.tag))};function Cm(e,t){return eh(e,t)}function uv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,n,r){return new uv(e,t,n,r)}function Ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dv(e){if(typeof e=="function")return Ru(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eu)return 11;if(e===tu)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=Xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bi(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")Ru(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Yr:return _r(n.children,o,s,t);case Jc:i=8,o|=8;break;case $a:return e=Xt(12,n,t,o|2),e.elementType=$a,e.lanes=s,e;case Aa:return e=Xt(13,n,t,o),e.elementType=Aa,e.lanes=s,e;case Ma:return e=Xt(19,n,t,o),e.elementType=Ma,e.lanes=s,e;case Dp:return Sl(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rp:i=10;break e;case zp:i=9;break e;case eu:i=11;break e;case tu:i=14;break e;case Bn:i=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Xt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function _r(e,t,n,r){return e=Xt(7,e,r,t),e.lanes=n,e}function Sl(e,t,n,r){return e=Xt(22,e,r,t),e.elementType=Dp,e.lanes=n,e.stateNode={isHidden:!1},e}function fa(e,t,n){return e=Xt(6,e,null,t),e.lanes=n,e}function pa(e,t,n){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,o,s,i,l,a){return e=new fv(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Xt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vu(s),e}function pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Im(e){if(!e)return cr;e=e._reactInternals;e:{if(Lr(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Mt(n))return Ih(e,n,t)}return t}function jm(e,t,n,r,o,s,i,l,a){return e=zu(n,r,!0,e,o,s,i,l,a),e.context=Im(null),n=e.current,r=kt(),o=or(n),s=Pn(r,o),s.callback=t??null,nr(n,s,o),e.current.lanes=o,As(e,o,r),Rt(e,r),e}function El(e,t,n,r){var o=t.current,s=kt(),i=or(o);return n=Im(n),t.context===null?t.context=n:t.pendingContext=n,t=Pn(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nr(o,t,i),e!==null&&(fn(e,o,i,s),xi(e,o,i)),i}function Zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Du(e,t){mf(e,t),(e=e.alternate)&&mf(e,t)}function hv(){return null}var Tm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lu(e){this._internalRoot=e}bl.prototype.render=Lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));El(e,t,null,null)};bl.prototype.unmount=Lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ar(function(){El(null,e,null,null)}),t[Mn]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=lh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qn.length&&t!==0&&t<Qn[n].priority;n++);Qn.splice(n,0,e),n===0&&ch(e)}};function Ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gf(){}function mv(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Zi(i);s.call(c)}}var i=jm(t,r,e,0,null,!1,!1,"",gf);return e._reactRootContainer=i,e[Mn]=i.current,ps(e.nodeType===8?e.parentNode:e),Ar(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=Zi(a);l.call(c)}}var a=zu(e,0,!1,null,null,!1,!1,"",gf);return e._reactRootContainer=a,e[Mn]=a.current,ps(e.nodeType===8?e.parentNode:e),Ar(function(){El(t,a,n,r)}),a}function _l(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var a=Zi(i);l.call(a)}}El(t,i,e,o)}else i=mv(n,t,e,o,r);return Zi(i)}sh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wo(t.pendingLanes);n!==0&&(ou(t,n|1),Rt(t,rt()),!(ze&6)&&(wo=rt()+500,pr()))}break;case 13:Ar(function(){var r=Rn(e,1);if(r!==null){var o=kt();fn(r,e,1,o)}}),Du(e,1)}};su=function(e){if(e.tag===13){var t=Rn(e,134217728);if(t!==null){var n=kt();fn(t,e,134217728,n)}Du(e,134217728)}};ih=function(e){if(e.tag===13){var t=or(e),n=Rn(e,t);if(n!==null){var r=kt();fn(n,e,t,r)}Du(e,t)}};lh=function(){return Oe};ah=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}};Ua=function(e,t,n){switch(t){case"input":if(Da(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=gl(r);if(!o)throw Error(K(90));Op(r),Da(r,o)}}}break;case"textarea":Hp(e,n);break;case"select":t=n.value,t!=null&&oo(e,!!n.multiple,t,!1)}};qp=$u;Xp=Ar;var gv={usingClientEntryPoint:!1,Events:[Rs,Kr,gl,Yp,Qp,$u]},Do={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yv={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zp(e),e===null?null:e.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ri.isDisabled&&ri.supportsFiber)try{fl=ri.inject(yv),wn=ri}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv;Bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(t))throw Error(K(200));return pv(e,t,null,n)};Bt.createRoot=function(e,t){if(!Ou(e))throw Error(K(299));var n=!1,r="",o=Tm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=zu(e,1,!1,null,null,n,!1,r,o),e[Mn]=t.current,ps(e.nodeType===8?e.parentNode:e),new Lu(t)};Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Zp(t),e=e===null?null:e.stateNode,e};Bt.flushSync=function(e){return Ar(e)};Bt.hydrate=function(e,t,n){if(!kl(t))throw Error(K(200));return _l(null,e,t,!0,n)};Bt.hydrateRoot=function(e,t,n){if(!Ou(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Tm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=jm(t,null,e,1,n??null,o,!1,s,i),e[Mn]=t.current,ps(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new bl(t)};Bt.render=function(e,t,n){if(!kl(t))throw Error(K(200));return _l(null,e,t,!1,n)};Bt.unmountComponentAtNode=function(e){if(!kl(e))throw Error(K(40));return e._reactRootContainer?(Ar(function(){_l(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1};Bt.unstable_batchedUpdates=$u;Bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kl(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return _l(e,t,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Pm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pm)}catch(e){console.error(e)}}Pm(),Pp.exports=Bt;var xv=Pp.exports,yf=xv;Ta.createRoot=yf.createRoot,Ta.hydrateRoot=yf.hydrateRoot;function xt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=xt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var $m={exports:{}},Am={},Mm={exports:{}},Rm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=j;function vv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wv=typeof Object.is=="function"?Object.is:vv,Nv=No.useState,Sv=No.useEffect,Ev=No.useLayoutEffect,bv=No.useDebugValue;function kv(e,t){var n=t(),r=Nv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Ev(function(){o.value=n,o.getSnapshot=t,ha(o)&&s({inst:o})},[e,n,t]),Sv(function(){return ha(o)&&s({inst:o}),e(function(){ha(o)&&s({inst:o})})},[e]),bv(n),n}function ha(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wv(e,n)}catch{return!0}}function _v(e,t){return t()}var Cv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_v:kv;Rm.useSyncExternalStore=No.useSyncExternalStore!==void 0?No.useSyncExternalStore:Cv;Mm.exports=Rm;var Iv=Mm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=j,jv=Iv;function Tv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pv=typeof Object.is=="function"?Object.is:Tv,$v=jv.useSyncExternalStore,Av=Cl.useRef,Mv=Cl.useEffect,Rv=Cl.useMemo,zv=Cl.useDebugValue;Am.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Av(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Rv(function(){function a(p){if(!c){if(c=!0,f=p,p=r(p),o!==void 0&&i.hasValue){var w=i.value;if(o(w,p))return d=w}return d=p}if(w=d,Pv(f,p))return w;var x=r(p);return o!==void 0&&o(w,x)?(f=p,w):(f=p,d=x)}var c=!1,f,d,h=n===void 0?null:n;return[function(){return a(t())},h===null?void 0:function(){return a(h())}]},[t,n,r,o]);var l=$v(e,s[0],s[1]);return Mv(function(){i.hasValue=!0,i.value=l},[l]),zv(l),l};$m.exports=Am;var Dv=$m.exports;const zm=vp(Dv),Lv={},xf=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(w=>w(t,p))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Lv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,a);return a},Dm=e=>e?xf(e):xf,{useDebugValue:Ov}=V,{useSyncExternalStoreWithSelector:Fv}=zm,Hv=e=>e;function Lm(e,t=Hv,n){const r=Fv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ov(r),r}const vf=(e,t)=>{const n=Dm(e),r=(o,s=t)=>Lm(n,o,s);return Object.assign(r,n),r},Vv=(e,t)=>e?vf(e,t):vf;function ft(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Bv={value:()=>{}};function Il(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ki(n)}function ki(e){this._=e}function Uv(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ki.prototype=Il.prototype={constructor:ki,on:function(e,t){var n=this._,r=Uv(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=Wv(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=wf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=wf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ki(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function Wv(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function wf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Bv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ec="http://www.w3.org/1999/xhtml";const Nf={svg:"http://www.w3.org/2000/svg",xhtml:Ec,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nf.hasOwnProperty(t)?{space:Nf[t],local:e}:e}function Yv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ec&&t.documentElement.namespaceURI===Ec?t.createElement(e):t.createElementNS(n,e)}}function Qv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Om(e){var t=jl(e);return(t.local?Qv:Yv)(t)}function qv(){}function Fu(e){return e==null?qv:function(){return this.querySelector(e)}}function Xv(e){typeof e!="function"&&(e=Fu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=new Array(i),a,c,f=0;f<i;++f)(a=s[f])&&(c=e.call(a,a.__data__,f,s))&&("__data__"in a&&(c.__data__=a.__data__),l[f]=c);return new Ft(r,this._parents)}function Kv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Gv(){return[]}function Fm(e){return e==null?Gv:function(){return this.querySelectorAll(e)}}function Zv(e){return function(){return Kv(e.apply(this,arguments))}}function Jv(e){typeof e=="function"?e=Zv(e):e=Fm(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&(r.push(e.call(a,a.__data__,c,i)),o.push(a));return new Ft(r,o)}function Hm(e){return function(){return this.matches(e)}}function Vm(e){return function(t){return t.matches(e)}}var ew=Array.prototype.find;function tw(e){return function(){return ew.call(this.children,e)}}function nw(){return this.firstElementChild}function rw(e){return this.select(e==null?nw:tw(typeof e=="function"?e:Vm(e)))}var ow=Array.prototype.filter;function sw(){return Array.from(this.children)}function iw(e){return function(){return ow.call(this.children,e)}}function lw(e){return this.selectAll(e==null?sw:iw(typeof e=="function"?e:Vm(e)))}function aw(e){typeof e!="function"&&(e=Hm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new Ft(r,this._parents)}function Bm(e){return new Array(e.length)}function cw(){return new Ft(this._enter||this._groups.map(Bm),this._parents)}function Ji(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ji.prototype={constructor:Ji,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uw(e){return function(){return e}}function dw(e,t,n,r,o,s){for(var i=0,l,a=t.length,c=s.length;i<c;++i)(l=t[i])?(l.__data__=s[i],r[i]=l):n[i]=new Ji(e,s[i]);for(;i<a;++i)(l=t[i])&&(o[i]=l)}function fw(e,t,n,r,o,s,i){var l,a,c=new Map,f=t.length,d=s.length,h=new Array(f),p;for(l=0;l<f;++l)(a=t[l])&&(h[l]=p=i.call(a,a.__data__,l,t)+"",c.has(p)?o[l]=a:c.set(p,a));for(l=0;l<d;++l)p=i.call(e,s[l],l,s)+"",(a=c.get(p))?(r[l]=a,a.__data__=s[l],c.delete(p)):n[l]=new Ji(e,s[l]);for(l=0;l<f;++l)(a=t[l])&&c.get(h[l])===a&&(o[l]=a)}function pw(e){return e.__data__}function hw(e,t){if(!arguments.length)return Array.from(this,pw);var n=t?fw:dw,r=this._parents,o=this._groups;typeof e!="function"&&(e=uw(e));for(var s=o.length,i=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var f=r[c],d=o[c],h=d.length,p=mw(e.call(f,f&&f.__data__,c,r)),w=p.length,x=l[c]=new Array(w),S=i[c]=new Array(w),m=a[c]=new Array(h);n(f,d,x,S,m,p,t);for(var g=0,v=0,y,_;g<w;++g)if(y=x[g]){for(g>=v&&(v=g+1);!(_=S[v])&&++v<w;);y._next=_||null}}return i=new Ft(i,r),i._enter=l,i._exit=a,i}function mw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gw(){return new Ft(this._exit||this._groups.map(Bm),this._parents)}function yw(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function xw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),l=new Array(o),a=0;a<i;++a)for(var c=n[a],f=r[a],d=c.length,h=l[a]=new Array(d),p,w=0;w<d;++w)(p=c[w]||f[w])&&(h[w]=p);for(;a<o;++a)l[a]=n[a];return new Ft(l,this._parents)}function vw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function ww(e){e||(e=Nw);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],l=i.length,a=o[s]=new Array(l),c,f=0;f<l;++f)(c=i[f])&&(a[f]=c);a.sort(t)}return new Ft(o,this._parents).order()}function Nw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Sw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ew(){return Array.from(this)}function bw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function kw(){let e=0;for(const t of this)++e;return e}function _w(){return!this.node()}function Cw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,l;s<i;++s)(l=o[s])&&e.call(l,l.__data__,s,o);return this}function Iw(e){return function(){this.removeAttribute(e)}}function jw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tw(e,t){return function(){this.setAttribute(e,t)}}function Pw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $w(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Aw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mw(e,t){var n=jl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?jw:Iw:typeof t=="function"?n.local?Aw:$w:n.local?Pw:Tw)(n,t))}function Um(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rw(e){return function(){this.style.removeProperty(e)}}function zw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Dw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Lw(e,t,n){return arguments.length>1?this.each((t==null?Rw:typeof t=="function"?Dw:zw)(e,t,n??"")):So(this.node(),e)}function So(e,t){return e.style.getPropertyValue(t)||Um(e).getComputedStyle(e,null).getPropertyValue(t)}function Ow(e){return function(){delete this[e]}}function Fw(e,t){return function(){this[e]=t}}function Hw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Vw(e,t){return arguments.length>1?this.each((t==null?Ow:typeof t=="function"?Hw:Fw)(e,t)):this.node()[e]}function Wm(e){return e.trim().split(/^|\s+/)}function Hu(e){return e.classList||new Ym(e)}function Ym(e){this._node=e,this._names=Wm(e.getAttribute("class")||"")}Ym.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qm(e,t){for(var n=Hu(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function qm(e,t){for(var n=Hu(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Bw(e){return function(){Qm(this,e)}}function Uw(e){return function(){qm(this,e)}}function Ww(e,t){return function(){(t.apply(this,arguments)?Qm:qm)(this,e)}}function Yw(e,t){var n=Wm(e+"");if(arguments.length<2){for(var r=Hu(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Ww:t?Bw:Uw)(n,t))}function Qw(){this.textContent=""}function qw(e){return function(){this.textContent=e}}function Xw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Kw(e){return arguments.length?this.each(e==null?Qw:(typeof e=="function"?Xw:qw)(e)):this.node().textContent}function Gw(){this.innerHTML=""}function Zw(e){return function(){this.innerHTML=e}}function Jw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function e1(e){return arguments.length?this.each(e==null?Gw:(typeof e=="function"?Jw:Zw)(e)):this.node().innerHTML}function t1(){this.nextSibling&&this.parentNode.appendChild(this)}function n1(){return this.each(t1)}function r1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function o1(){return this.each(r1)}function s1(e){var t=typeof e=="function"?e:Om(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function i1(){return null}function l1(e,t){var n=typeof e=="function"?e:Om(e),r=t==null?i1:typeof t=="function"?t:Fu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function a1(){var e=this.parentNode;e&&e.removeChild(this)}function c1(){return this.each(a1)}function u1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function d1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function f1(e){return this.select(e?d1:u1)}function p1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function h1(e){return function(t){e.call(this,t,this.__data__)}}function m1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function g1(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function y1(e,t,n){return function(){var r=this.__on,o,s=h1(t);if(r){for(var i=0,l=r.length;i<l;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function x1(e,t,n){var r=m1(e+""),o,s=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,f;a<c;++a)for(o=0,f=l[a];o<s;++o)if((i=r[o]).type===f.type&&i.name===f.name)return f.value}return}for(l=t?y1:g1,o=0;o<s;++o)this.each(l(r[o],t,n));return this}function Xm(e,t,n){var r=Um(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function v1(e,t){return function(){return Xm(this,e,t)}}function w1(e,t){return function(){return Xm(this,e,t.apply(this,arguments))}}function N1(e,t){return this.each((typeof t=="function"?w1:v1)(e,t))}function*S1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var Km=[null];function Ft(e,t){this._groups=e,this._parents=t}function Ds(){return new Ft([[document.documentElement]],Km)}function E1(){return this}Ft.prototype=Ds.prototype={constructor:Ft,select:Xv,selectAll:Jv,selectChild:rw,selectChildren:lw,filter:aw,data:hw,enter:cw,exit:gw,join:yw,merge:xw,selection:E1,order:vw,sort:ww,call:Sw,nodes:Ew,node:bw,size:kw,empty:_w,each:Cw,attr:Mw,style:Lw,property:Vw,classed:Yw,text:Kw,html:e1,raise:n1,lower:o1,append:s1,insert:l1,remove:c1,clone:f1,datum:p1,on:x1,dispatch:N1,[Symbol.iterator]:S1};function Qt(e){return typeof e=="string"?new Ft([[document.querySelector(e)]],[document.documentElement]):new Ft([[e]],Km)}function b1(e){let t;for(;t=e.sourceEvent;)e=t;return e}function on(e,t){if(e=b1(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const k1={passive:!1},Ss={capture:!0,passive:!1};function ma(e){e.stopImmediatePropagation()}function uo(e){e.preventDefault(),e.stopImmediatePropagation()}function Gm(e){var t=e.document.documentElement,n=Qt(e).on("dragstart.drag",uo,Ss);"onselectstart"in t?n.on("selectstart.drag",uo,Ss):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zm(e,t){var n=e.document.documentElement,r=Qt(e).on("dragstart.drag",null);t&&(r.on("click.drag",uo,Ss),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const oi=e=>()=>e;function bc(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:l,dx:a,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}bc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function _1(e){return!e.ctrlKey&&!e.button}function C1(){return this.parentNode}function I1(e,t){return t??{x:e.x,y:e.y}}function j1(){return navigator.maxTouchPoints||"ontouchstart"in this}function T1(){var e=_1,t=C1,n=I1,r=j1,o={},s=Il("start","drag","end"),i=0,l,a,c,f,d=0;function h(y){y.on("mousedown.drag",p).filter(r).on("touchstart.drag",S).on("touchmove.drag",m,k1).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,_){if(!(f||!e.call(this,y,_))){var E=v(this,t.call(this,y,_),y,_,"mouse");E&&(Qt(y.view).on("mousemove.drag",w,Ss).on("mouseup.drag",x,Ss),Gm(y.view),ma(y),c=!1,l=y.clientX,a=y.clientY,E("start",y))}}function w(y){if(uo(y),!c){var _=y.clientX-l,E=y.clientY-a;c=_*_+E*E>d}o.mouse("drag",y)}function x(y){Qt(y.view).on("mousemove.drag mouseup.drag",null),Zm(y.view,c),uo(y),o.mouse("end",y)}function S(y,_){if(e.call(this,y,_)){var E=y.changedTouches,I=t.call(this,y,_),M=E.length,A,b;for(A=0;A<M;++A)(b=v(this,I,y,_,E[A].identifier,E[A]))&&(ma(y),b("start",y,E[A]))}}function m(y){var _=y.changedTouches,E=_.length,I,M;for(I=0;I<E;++I)(M=o[_[I].identifier])&&(uo(y),M("drag",y,_[I]))}function g(y){var _=y.changedTouches,E=_.length,I,M;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),I=0;I<E;++I)(M=o[_[I].identifier])&&(ma(y),M("end",y,_[I]))}function v(y,_,E,I,M,A){var b=s.copy(),R=on(A||E,_),D,L,N;if((N=n.call(y,new bc("beforestart",{sourceEvent:E,target:h,identifier:M,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:b}),I))!=null)return D=N.x-R[0]||0,L=N.y-R[1]||0,function $(C,z,P){var k=R,T;switch(C){case"start":o[M]=$,T=i++;break;case"end":delete o[M],--i;case"drag":R=on(P||z,_),T=i;break}b.call(C,y,new bc(C,{sourceEvent:z,subject:N,target:h,identifier:M,active:T,x:R[0]+D,y:R[1]+L,dx:R[0]-k[0],dy:R[1]-k[1],dispatch:b}),I)}}return h.filter=function(y){return arguments.length?(e=typeof y=="function"?y:oi(!!y),h):e},h.container=function(y){return arguments.length?(t=typeof y=="function"?y:oi(y),h):t},h.subject=function(y){return arguments.length?(n=typeof y=="function"?y:oi(y),h):n},h.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:oi(!!y),h):r},h.on=function(){var y=s.on.apply(s,arguments);return y===s?h:y},h.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,h):Math.sqrt(d)},h}function Vu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Jm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ls(){}var Es=.7,el=1/Es,fo="\\s*([+-]?\\d+)\\s*",bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P1=/^#([0-9a-f]{3,8})$/,$1=new RegExp(`^rgb\\(${fo},${fo},${fo}\\)$`),A1=new RegExp(`^rgb\\(${Sn},${Sn},${Sn}\\)$`),M1=new RegExp(`^rgba\\(${fo},${fo},${fo},${bs}\\)$`),R1=new RegExp(`^rgba\\(${Sn},${Sn},${Sn},${bs}\\)$`),z1=new RegExp(`^hsl\\(${bs},${Sn},${Sn}\\)$`),D1=new RegExp(`^hsla\\(${bs},${Sn},${Sn},${bs}\\)$`),Sf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vu(Ls,ks,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ef,formatHex:Ef,formatHex8:L1,formatHsl:O1,formatRgb:bf,toString:bf});function Ef(){return this.rgb().formatHex()}function L1(){return this.rgb().formatHex8()}function O1(){return eg(this).formatHsl()}function bf(){return this.rgb().formatRgb()}function ks(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=P1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?kf(t):n===3?new $t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?si(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?si(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$1.exec(e))?new $t(t[1],t[2],t[3],1):(t=A1.exec(e))?new $t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=M1.exec(e))?si(t[1],t[2],t[3],t[4]):(t=R1.exec(e))?si(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=z1.exec(e))?If(t[1],t[2]/100,t[3]/100,1):(t=D1.exec(e))?If(t[1],t[2]/100,t[3]/100,t[4]):Sf.hasOwnProperty(e)?kf(Sf[e]):e==="transparent"?new $t(NaN,NaN,NaN,0):null}function kf(e){return new $t(e>>16&255,e>>8&255,e&255,1)}function si(e,t,n,r){return r<=0&&(e=t=n=NaN),new $t(e,t,n,r)}function F1(e){return e instanceof Ls||(e=ks(e)),e?(e=e.rgb(),new $t(e.r,e.g,e.b,e.opacity)):new $t}function kc(e,t,n,r){return arguments.length===1?F1(e):new $t(e,t,n,r??1)}function $t(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Vu($t,kc,Jm(Ls,{brighter(e){return e=e==null?el:Math.pow(el,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Es:Math.pow(Es,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $t(Cr(this.r),Cr(this.g),Cr(this.b),tl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_f,formatHex:_f,formatHex8:H1,formatRgb:Cf,toString:Cf}));function _f(){return`#${Er(this.r)}${Er(this.g)}${Er(this.b)}`}function H1(){return`#${Er(this.r)}${Er(this.g)}${Er(this.b)}${Er((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cf(){const e=tl(this.opacity);return`${e===1?"rgb(":"rgba("}${Cr(this.r)}, ${Cr(this.g)}, ${Cr(this.b)}${e===1?")":`, ${e})`}`}function tl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Er(e){return e=Cr(e),(e<16?"0":"")+e.toString(16)}function If(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,r)}function eg(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof Ls||(e=ks(e)),!e)return new ln;if(e instanceof ln)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,l=s-o,a=(s+o)/2;return l?(t===s?i=(n-r)/l+(n<r)*6:n===s?i=(r-t)/l+2:i=(t-n)/l+4,l/=a<.5?s+o:2-s-o,i*=60):l=a>0&&a<1?0:i,new ln(i,l,a,e.opacity)}function V1(e,t,n,r){return arguments.length===1?eg(e):new ln(e,t,n,r??1)}function ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Vu(ln,V1,Jm(Ls,{brighter(e){return e=e==null?el:Math.pow(el,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Es:Math.pow(Es,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new $t(ga(e>=240?e-240:e+120,o,r),ga(e,o,r),ga(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new ln(jf(this.h),ii(this.s),ii(this.l),tl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tl(this.opacity);return`${e===1?"hsl(":"hsla("}${jf(this.h)}, ${ii(this.s)*100}%, ${ii(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jf(e){return e=(e||0)%360,e<0?e+360:e}function ii(e){return Math.max(0,Math.min(1,e||0))}function ga(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tg=e=>()=>e;function B1(e,t){return function(n){return e+n*t}}function U1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function W1(e){return(e=+e)==1?ng:function(t,n){return n-t?U1(t,n,e):tg(isNaN(t)?n:t)}}function ng(e,t){var n=t-e;return n?B1(e,n):tg(isNaN(e)?t:e)}const Tf=function e(t){var n=W1(t);function r(o,s){var i=n((o=kc(o)).r,(s=kc(s)).r),l=n(o.g,s.g),a=n(o.b,s.b),c=ng(o.opacity,s.opacity);return function(f){return o.r=i(f),o.g=l(f),o.b=a(f),o.opacity=c(f),o+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ya=new RegExp(_c.source,"g");function Y1(e){return function(){return e}}function Q1(e){return function(t){return e(t)+""}}function q1(e,t){var n=_c.lastIndex=ya.lastIndex=0,r,o,s,i=-1,l=[],a=[];for(e=e+"",t=t+"";(r=_c.exec(e))&&(o=ya.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(r=r[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,a.push({i,x:Wn(r,o)})),n=ya.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?a[0]?Q1(a[0].x):Y1(t):(t=a.length,function(c){for(var f=0,d;f<t;++f)l[(d=a[f]).i]=d.x(c);return l.join("")})}var Pf=180/Math.PI,Cc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rg(e,t,n,r,o,s){var i,l,a;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),e*r<t*n&&(e=-e,t=-t,a=-a,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Pf,skewX:Math.atan(a)*Pf,scaleX:i,scaleY:l}}var li;function X1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cc:rg(t.a,t.b,t.c,t.d,t.e,t.f)}function K1(e){return e==null||(li||(li=document.createElementNS("http://www.w3.org/2000/svg","g")),li.setAttribute("transform",e),!(e=li.transform.baseVal.consolidate()))?Cc:(e=e.matrix,rg(e.a,e.b,e.c,e.d,e.e,e.f))}function og(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function s(c,f,d,h,p,w){if(c!==d||f!==h){var x=p.push("translate(",null,t,null,n);w.push({i:x-4,x:Wn(c,d)},{i:x-2,x:Wn(f,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function i(c,f,d,h){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),h.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Wn(c,f)})):f&&d.push(o(d)+"rotate("+f+r)}function l(c,f,d,h){c!==f?h.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Wn(c,f)}):f&&d.push(o(d)+"skewX("+f+r)}function a(c,f,d,h,p,w){if(c!==d||f!==h){var x=p.push(o(p)+"scale(",null,",",null,")");w.push({i:x-4,x:Wn(c,d)},{i:x-2,x:Wn(f,h)})}else(d!==1||h!==1)&&p.push(o(p)+"scale("+d+","+h+")")}return function(c,f){var d=[],h=[];return c=e(c),f=e(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,h),i(c.rotate,f.rotate,d,h),l(c.skewX,f.skewX,d,h),a(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,h),c=f=null,function(p){for(var w=-1,x=h.length,S;++w<x;)d[(S=h[w]).i]=S.x(p);return d.join("")}}}var G1=og(X1,"px, ","px)","deg)"),Z1=og(K1,", ",")",")"),J1=1e-12;function $f(e){return((e=Math.exp(e))+1/e)/2}function eN(e){return((e=Math.exp(e))-1/e)/2}function tN(e){return((e=Math.exp(2*e))-1)/(e+1)}const nN=function e(t,n,r){function o(s,i){var l=s[0],a=s[1],c=s[2],f=i[0],d=i[1],h=i[2],p=f-l,w=d-a,x=p*p+w*w,S,m;if(x<J1)m=Math.log(h/c)/t,S=function(I){return[l+I*p,a+I*w,c*Math.exp(t*I*m)]};else{var g=Math.sqrt(x),v=(h*h-c*c+r*x)/(2*c*n*g),y=(h*h-c*c-r*x)/(2*h*n*g),_=Math.log(Math.sqrt(v*v+1)-v),E=Math.log(Math.sqrt(y*y+1)-y);m=(E-_)/t,S=function(I){var M=I*m,A=$f(_),b=c/(n*g)*(A*tN(t*M+_)-eN(_));return[l+b*p,a+b*w,c*A/$f(t*M+_)]}}return S.duration=m*1e3*t/Math.SQRT2,S}return o.rho=function(s){var i=Math.max(.001,+s),l=i*i,a=l*l;return e(i,l,a)},o}(Math.SQRT2,2,4);var Eo=0,Qo=0,Lo=0,sg=1e3,nl,qo,rl=0,Mr=0,Tl=0,_s=typeof performance=="object"&&performance.now?performance:Date,ig=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bu(){return Mr||(ig(rN),Mr=_s.now()+Tl)}function rN(){Mr=0}function ol(){this._call=this._time=this._next=null}ol.prototype=lg.prototype={constructor:ol,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bu():+n)+(t==null?0:+t),!this._next&&qo!==this&&(qo?qo._next=this:nl=this,qo=this),this._call=e,this._time=n,Ic()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ic())}};function lg(e,t,n){var r=new ol;return r.restart(e,t,n),r}function oN(){Bu(),++Eo;for(var e=nl,t;e;)(t=Mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Eo}function Af(){Mr=(rl=_s.now())+Tl,Eo=Qo=0;try{oN()}finally{Eo=0,iN(),Mr=0}}function sN(){var e=_s.now(),t=e-rl;t>sg&&(Tl-=t,rl=e)}function iN(){for(var e,t=nl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nl=n);qo=e,Ic(r)}function Ic(e){if(!Eo){Qo&&(Qo=clearTimeout(Qo));var t=e-Mr;t>24?(e<1/0&&(Qo=setTimeout(Af,e-_s.now()-Tl)),Lo&&(Lo=clearInterval(Lo))):(Lo||(rl=_s.now(),Lo=setInterval(sN,sg)),Eo=1,ig(Af))}}function Mf(e,t,n){var r=new ol;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var lN=Il("start","end","cancel","interrupt"),aN=[],ag=0,Rf=1,jc=2,_i=3,zf=4,Tc=5,Ci=6;function Pl(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;cN(e,n,{name:t,index:r,group:o,on:lN,tween:aN,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ag})}function Uu(e,t){var n=hn(e,t);if(n.state>ag)throw new Error("too late; already scheduled");return n}function En(e,t){var n=hn(e,t);if(n.state>_i)throw new Error("too late; already running");return n}function hn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cN(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=lg(s,0,n.time);function s(c){n.state=Rf,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var f,d,h,p;if(n.state!==Rf)return a();for(f in r)if(p=r[f],p.name===n.name){if(p.state===_i)return Mf(i);p.state===zf?(p.state=Ci,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=Ci,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(Mf(function(){n.state===_i&&(n.state=zf,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=jc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jc){for(n.state=_i,o=new Array(h=n.tween.length),f=0,d=-1;f<h;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function l(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=Tc,1),d=-1,h=o.length;++d<h;)o[d].call(e,f);n.state===Tc&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Ci,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Ii(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>jc&&r.state<Tc,r.state=Ci,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function uN(e){return this.each(function(){Ii(this,e)})}function dN(e,t){var n,r;return function(){var o=En(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function fN(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=En(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var l={name:t,value:n},a=0,c=o.length;a<c;++a)if(o[a].name===t){o[a]=l;break}a===c&&o.push(l)}s.tween=o}}function pN(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=hn(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?dN:fN)(n,e,t))}function Wu(e,t,n){var r=e._id;return e.each(function(){var o=En(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return hn(o,r).value[t]}}function cg(e,t){var n;return(typeof t=="number"?Wn:t instanceof ks?Tf:(n=ks(t))?(t=n,Tf):q1)(e,t)}function hN(e){return function(){this.removeAttribute(e)}}function mN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gN(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function yN(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function xN(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function vN(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function wN(e,t){var n=jl(e),r=n==="transform"?Z1:cg;return this.attrTween(e,typeof t=="function"?(n.local?vN:xN)(n,r,Wu(this,"attr."+e,t)):t==null?(n.local?mN:hN)(n):(n.local?yN:gN)(n,r,t))}function NN(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SN(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function EN(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&SN(e,s)),n}return o._value=t,o}function bN(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&NN(e,s)),n}return o._value=t,o}function kN(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=jl(e);return this.tween(n,(r.local?EN:bN)(r,t))}function _N(e,t){return function(){Uu(this,e).delay=+t.apply(this,arguments)}}function CN(e,t){return t=+t,function(){Uu(this,e).delay=t}}function IN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_N:CN)(t,e)):hn(this.node(),t).delay}function jN(e,t){return function(){En(this,e).duration=+t.apply(this,arguments)}}function TN(e,t){return t=+t,function(){En(this,e).duration=t}}function PN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jN:TN)(t,e)):hn(this.node(),t).duration}function $N(e,t){if(typeof t!="function")throw new Error;return function(){En(this,e).ease=t}}function AN(e){var t=this._id;return arguments.length?this.each($N(t,e)):hn(this.node(),t).ease}function MN(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;En(this,e).ease=n}}function RN(e){if(typeof e!="function")throw new Error;return this.each(MN(this._id,e))}function zN(e){typeof e!="function"&&(e=Hm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new Dn(r,this._parents,this._name,this._id)}function DN(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),l=0;l<s;++l)for(var a=t[l],c=n[l],f=a.length,d=i[l]=new Array(f),h,p=0;p<f;++p)(h=a[p]||c[p])&&(d[p]=h);for(;l<r;++l)i[l]=t[l];return new Dn(i,this._parents,this._name,this._id)}function LN(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ON(e,t,n){var r,o,s=LN(t)?Uu:En;return function(){var i=s(this,e),l=i.on;l!==r&&(o=(r=l).copy()).on(t,n),i.on=o}}function FN(e,t){var n=this._id;return arguments.length<2?hn(this.node(),n).on.on(e):this.each(ON(n,e,t))}function HN(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function VN(){return this.on("end.remove",HN(this._id))}function BN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fu(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var l=r[i],a=l.length,c=s[i]=new Array(a),f,d,h=0;h<a;++h)(f=l[h])&&(d=e.call(f,f.__data__,h,l))&&("__data__"in f&&(d.__data__=f.__data__),c[h]=d,Pl(c[h],t,n,h,c,hn(f,n)));return new Dn(s,this._parents,t,n)}function UN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fm(e));for(var r=this._groups,o=r.length,s=[],i=[],l=0;l<o;++l)for(var a=r[l],c=a.length,f,d=0;d<c;++d)if(f=a[d]){for(var h=e.call(f,f.__data__,d,a),p,w=hn(f,n),x=0,S=h.length;x<S;++x)(p=h[x])&&Pl(p,t,n,x,h,w);s.push(h),i.push(f)}return new Dn(s,i,t,n)}var WN=Ds.prototype.constructor;function YN(){return new WN(this._groups,this._parents)}function QN(e,t){var n,r,o;return function(){var s=So(this,e),i=(this.style.removeProperty(e),So(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function ug(e){return function(){this.style.removeProperty(e)}}function qN(e,t,n){var r,o=n+"",s;return function(){var i=So(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function XN(e,t,n){var r,o,s;return function(){var i=So(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),So(this,e))),i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l))}}function KN(e,t){var n,r,o,s="style."+t,i="end."+s,l;return function(){var a=En(this,e),c=a.on,f=a.value[s]==null?l||(l=ug(t)):void 0;(c!==n||o!==f)&&(r=(n=c).copy()).on(i,o=f),a.on=r}}function GN(e,t,n){var r=(e+="")=="transform"?G1:cg;return t==null?this.styleTween(e,QN(e,r)).on("end.style."+e,ug(e)):typeof t=="function"?this.styleTween(e,XN(e,r,Wu(this,"style."+e,t))).each(KN(this._id,e)):this.styleTween(e,qN(e,r,t),n).on("end.style."+e,null)}function ZN(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function JN(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&ZN(e,i,n)),r}return s._value=t,s}function e2(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,JN(e,t,n??""))}function t2(e){return function(){this.textContent=e}}function n2(e){return function(){var t=e(this);this.textContent=t??""}}function r2(e){return this.tween("text",typeof e=="function"?n2(Wu(this,"text",e)):t2(e==null?"":e+""))}function o2(e){return function(t){this.textContent=e.call(this,t)}}function s2(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&o2(o)),t}return r._value=e,r}function i2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s2(e))}function l2(){for(var e=this._name,t=this._id,n=dg(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,c=0;c<l;++c)if(a=i[c]){var f=hn(a,t);Pl(a,e,n,c,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Dn(r,this._parents,e,n)}function a2(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var l={value:i},a={value:function(){--o===0&&s()}};n.each(function(){var c=En(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),c.on=t}),o===0&&s()})}var c2=0;function Dn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dg(){return++c2}var bn=Ds.prototype;Dn.prototype={constructor:Dn,select:BN,selectAll:UN,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:zN,merge:DN,selection:YN,transition:l2,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:FN,attr:wN,attrTween:kN,style:GN,styleTween:e2,text:r2,textTween:i2,remove:VN,tween:pN,delay:IN,duration:PN,ease:AN,easeVarying:RN,end:a2,[Symbol.iterator]:bn[Symbol.iterator]};function u2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var d2={time:null,delay:0,duration:250,ease:u2};function f2(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function p2(e){var t,n;e instanceof Dn?(t=e._id,e=e._name):(t=dg(),(n=d2).time=Bu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&Pl(a,e,t,c,i,n||f2(a,t));return new Dn(r,this._parents,e,t)}Ds.prototype.interrupt=uN;Ds.prototype.transition=p2;const ai=e=>()=>e;function h2(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function jn(e,t,n){this.k=e,this.x=t,this.y=n}jn.prototype={constructor:jn,scale:function(e){return e===1?this:new jn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new jn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $n=new jn(1,0,0);jn.prototype;function xa(e){e.stopImmediatePropagation()}function Oo(e){e.preventDefault(),e.stopImmediatePropagation()}function m2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function g2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Df(){return this.__zoom||$n}function y2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function x2(){return navigator.maxTouchPoints||"ontouchstart"in this}function v2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function fg(){var e=m2,t=g2,n=v2,r=y2,o=x2,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,a=nN,c=Il("start","zoom","end"),f,d,h,p=500,w=150,x=0,S=10;function m(N){N.property("__zoom",Df).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",b).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(N,$,C,z){var P=N.selection?N.selection():N;P.property("__zoom",Df),N!==P?_(N,$,C,z):P.interrupt().each(function(){E(this,arguments).event(z).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},m.scaleBy=function(N,$,C,z){m.scaleTo(N,function(){var P=this.__zoom.k,k=typeof $=="function"?$.apply(this,arguments):$;return P*k},C,z)},m.scaleTo=function(N,$,C,z){m.transform(N,function(){var P=t.apply(this,arguments),k=this.__zoom,T=C==null?y(P):typeof C=="function"?C.apply(this,arguments):C,F=k.invert(T),O=typeof $=="function"?$.apply(this,arguments):$;return n(v(g(k,O),T,F),P,i)},C,z)},m.translateBy=function(N,$,C,z){m.transform(N,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),i)},null,z)},m.translateTo=function(N,$,C,z,P){m.transform(N,function(){var k=t.apply(this,arguments),T=this.__zoom,F=z==null?y(k):typeof z=="function"?z.apply(this,arguments):z;return n($n.translate(F[0],F[1]).scale(T.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof C=="function"?-C.apply(this,arguments):-C),k,i)},z,P)};function g(N,$){return $=Math.max(s[0],Math.min(s[1],$)),$===N.k?N:new jn($,N.x,N.y)}function v(N,$,C){var z=$[0]-C[0]*N.k,P=$[1]-C[1]*N.k;return z===N.x&&P===N.y?N:new jn(N.k,z,P)}function y(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function _(N,$,C,z){N.on("start.zoom",function(){E(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(z).end()}).tween("zoom",function(){var P=this,k=arguments,T=E(P,k).event(z),F=t.apply(P,k),O=C==null?y(F):typeof C=="function"?C.apply(P,k):C,Y=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),U=P.__zoom,q=typeof $=="function"?$.apply(P,k):$,Z=a(U.invert(O).concat(Y/U.k),q.invert(O).concat(Y/q.k));return function(J){if(J===1)J=q;else{var be=Z(J),Ne=Y/be[2];J=new jn(Ne,O[0]-be[0]*Ne,O[1]-be[1]*Ne)}T.zoom(null,J)}})}function E(N,$,C){return!C&&N.__zooming||new I(N,$)}function I(N,$){this.that=N,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,$),this.taps=0}I.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,$){return this.mouse&&N!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var $=Qt(this.that).datum();c.call(N,this.that,new h2(N,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:c}),$)}};function M(N,...$){if(!e.apply(this,arguments))return;var C=E(this,$).event(N),z=this.__zoom,P=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,r.apply(this,arguments)))),k=on(N);if(C.wheel)(C.mouse[0][0]!==k[0]||C.mouse[0][1]!==k[1])&&(C.mouse[1]=z.invert(C.mouse[0]=k)),clearTimeout(C.wheel);else{if(z.k===P)return;C.mouse=[k,z.invert(k)],Ii(this),C.start()}Oo(N),C.wheel=setTimeout(T,w),C.zoom("mouse",n(v(g(z,P),C.mouse[0],C.mouse[1]),C.extent,i));function T(){C.wheel=null,C.end()}}function A(N,...$){if(h||!e.apply(this,arguments))return;var C=N.currentTarget,z=E(this,$,!0).event(N),P=Qt(N.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",Y,!0),k=on(N,C),T=N.clientX,F=N.clientY;Gm(N.view),xa(N),z.mouse=[k,this.__zoom.invert(k)],Ii(this),z.start();function O(U){if(Oo(U),!z.moved){var q=U.clientX-T,Z=U.clientY-F;z.moved=q*q+Z*Z>x}z.event(U).zoom("mouse",n(v(z.that.__zoom,z.mouse[0]=on(U,C),z.mouse[1]),z.extent,i))}function Y(U){P.on("mousemove.zoom mouseup.zoom",null),Zm(U.view,z.moved),Oo(U),z.event(U).end()}}function b(N,...$){if(e.apply(this,arguments)){var C=this.__zoom,z=on(N.changedTouches?N.changedTouches[0]:N,this),P=C.invert(z),k=C.k*(N.shiftKey?.5:2),T=n(v(g(C,k),z,P),t.apply(this,$),i);Oo(N),l>0?Qt(this).transition().duration(l).call(_,T,z,N):Qt(this).call(m.transform,T,z,N)}}function R(N,...$){if(e.apply(this,arguments)){var C=N.touches,z=C.length,P=E(this,$,N.changedTouches.length===z).event(N),k,T,F,O;for(xa(N),T=0;T<z;++T)F=C[T],O=on(F,this),O=[O,this.__zoom.invert(O),F.identifier],P.touch0?!P.touch1&&P.touch0[2]!==O[2]&&(P.touch1=O,P.taps=0):(P.touch0=O,k=!0,P.taps=1+!!f);f&&(f=clearTimeout(f)),k&&(P.taps<2&&(d=O[0],f=setTimeout(function(){f=null},p)),Ii(this),P.start())}}function D(N,...$){if(this.__zooming){var C=E(this,$).event(N),z=N.changedTouches,P=z.length,k,T,F,O;for(Oo(N),k=0;k<P;++k)T=z[k],F=on(T,this),C.touch0&&C.touch0[2]===T.identifier?C.touch0[0]=F:C.touch1&&C.touch1[2]===T.identifier&&(C.touch1[0]=F);if(T=C.that.__zoom,C.touch1){var Y=C.touch0[0],U=C.touch0[1],q=C.touch1[0],Z=C.touch1[1],J=(J=q[0]-Y[0])*J+(J=q[1]-Y[1])*J,be=(be=Z[0]-U[0])*be+(be=Z[1]-U[1])*be;T=g(T,Math.sqrt(J/be)),F=[(Y[0]+q[0])/2,(Y[1]+q[1])/2],O=[(U[0]+Z[0])/2,(U[1]+Z[1])/2]}else if(C.touch0)F=C.touch0[0],O=C.touch0[1];else return;C.zoom("touch",n(v(T,F,O),C.extent,i))}}function L(N,...$){if(this.__zooming){var C=E(this,$).event(N),z=N.changedTouches,P=z.length,k,T;for(xa(N),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),k=0;k<P;++k)T=z[k],C.touch0&&C.touch0[2]===T.identifier?delete C.touch0:C.touch1&&C.touch1[2]===T.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(T=on(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<S)){var F=Qt(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return m.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:ai(+N),m):r},m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:ai(!!N),m):e},m.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:ai(!!N),m):o},m.extent=function(N){return arguments.length?(t=typeof N=="function"?N:ai([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),m):t},m.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],m):[s[0],s[1]]},m.translateExtent=function(N){return arguments.length?(i[0][0]=+N[0][0],i[1][0]=+N[1][0],i[0][1]=+N[0][1],i[1][1]=+N[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(N){return arguments.length?(n=N,m):n},m.duration=function(N){return arguments.length?(l=+N,m):l},m.interpolate=function(N){return arguments.length?(a=N,m):a},m.on=function(){var N=c.on.apply(c,arguments);return N===c?m:N},m.clickDistance=function(N){return arguments.length?(x=(N=+N)*N,m):Math.sqrt(x)},m.tapDistance=function(N){return arguments.length?(S=+N,m):S},m}const $l=j.createContext(null),w2=$l.Provider,Ln={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},pg=Ln.error001();function Ye(e,t){const n=j.useContext($l);if(n===null)throw new Error(pg);return Lm(n,e,t)}const ct=()=>{const e=j.useContext($l);if(e===null)throw new Error(pg);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},N2=e=>e.userSelectionActive?"none":"all";function Al({position:e,children:t,className:n,style:r,...o}){const s=Ye(N2),i=`${e}`.split("-");return V.createElement("div",{className:xt(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function S2({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:V.createElement(Al,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const E2=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:a,className:c,...f})=>{const d=j.useRef(null),[h,p]=j.useState({x:0,y:0,width:0,height:0}),w=xt(["react-flow__edge-textwrapper",c]);return j.useEffect(()=>{if(d.current){const x=d.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:V.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:w,visibility:h.width?"visible":"hidden",...f},o&&V.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),V.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),a)};var b2=j.memo(E2);const Yu=e=>({width:e.offsetWidth,height:e.offsetHeight}),bo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Qu=(e={x:0,y:0},t)=>({x:bo(e.x,t[0][0],t[1][0]),y:bo(e.y,t[0][1],t[1][1])}),Lf=(e,t,n)=>e<t?bo(Math.abs(e-t),1,50)/50:e>n?-bo(Math.abs(e-n),1,50)/50:0,hg=(e,t)=>{const n=Lf(e.x,35,t.width-35)*20,r=Lf(e.y,35,t.height-35)*20;return[n,r]},mg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},gg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Cs=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),yg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Of=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),k2=(e,t)=>yg(gg(Cs(e),Cs(t))),Pc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},_2=e=>Kt(e.width)&&Kt(e.height)&&Kt(e.x)&&Kt(e.y),Kt=e=>!isNaN(e)&&isFinite(e),nt=Symbol.for("internals"),xg=["Enter"," ","Escape"],C2=(e,t)=>{},I2=e=>"nativeEvent"in e;function $c(e){var o,s;const t=I2(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const vg=e=>"clientX"in e,ir=(e,t)=>{var s,i;const n=vg(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},sl=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Os=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&V.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&Kt(n)&&Kt(r)?V.createElement(b2,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c}):null);Os.displayName="BaseEdge";function Fo(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function wg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[s,l,o,i]}function Ng({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:l}){const a=e*.125+o*.375+i*.375+n*.125,c=t*.125+s*.375+l*.375+r*.125,f=Math.abs(a-e),d=Math.abs(c-t);return[a,c,f,d]}var ur;(function(e){e.Strict="strict",e.Loose="loose"})(ur||(ur={}));var br;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(br||(br={}));var Is;(function(e){e.Partial="partial",e.Full="full"})(Is||(Is={}));var Xn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xn||(Xn={}));var il;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(il||(il={}));var me;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(me||(me={}));function Ff({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===me.Left||e===me.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Sg({sourceX:e,sourceY:t,sourcePosition:n=me.Bottom,targetX:r,targetY:o,targetPosition:s=me.Top}){const[i,l]=Ff({pos:n,x1:e,y1:t,x2:r,y2:o}),[a,c]=Ff({pos:s,x1:r,y1:o,x2:e,y2:t}),[f,d,h,p]=Ng({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:a,targetControlY:c});return[`M${e},${t} C${i},${l} ${a},${c} ${r},${o}`,f,d,h,p]}const qu=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=me.Bottom,targetPosition:s=me.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,interactionWidth:x})=>{const[S,m,g]=Sg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return V.createElement(Os,{path:S,labelX:m,labelY:g,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,interactionWidth:x})});qu.displayName="SimpleBezierEdge";const Hf={[me.Left]:{x:-1,y:0},[me.Right]:{x:1,y:0},[me.Top]:{x:0,y:-1},[me.Bottom]:{x:0,y:1}},j2=({source:e,sourcePosition:t=me.Bottom,target:n})=>t===me.Left||t===me.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Vf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function T2({source:e,sourcePosition:t=me.Bottom,target:n,targetPosition:r=me.Top,center:o,offset:s}){const i=Hf[t],l=Hf[r],a={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},f=j2({source:a,sourcePosition:t,target:c}),d=f.x!==0?"x":"y",h=f[d];let p=[],w,x;const S={x:0,y:0},m={x:0,y:0},[g,v,y,_]=wg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*l[d]===-1){w=o.x??g,x=o.y??v;const I=[{x:w,y:a.y},{x:w,y:c.y}],M=[{x:a.x,y:x},{x:c.x,y:x}];i[d]===h?p=d==="x"?I:M:p=d==="x"?M:I}else{const I=[{x:a.x,y:c.y}],M=[{x:c.x,y:a.y}];if(d==="x"?p=i.x===h?M:I:p=i.y===h?I:M,t===r){const L=Math.abs(e[d]-n[d]);if(L<=s){const N=Math.min(s-1,s-L);i[d]===h?S[d]=(a[d]>e[d]?-1:1)*N:m[d]=(c[d]>n[d]?-1:1)*N}}if(t!==r){const L=d==="x"?"y":"x",N=i[d]===l[L],$=a[L]>c[L],C=a[L]<c[L];(i[d]===1&&(!N&&$||N&&C)||i[d]!==1&&(!N&&C||N&&$))&&(p=d==="x"?I:M)}const A={x:a.x+S.x,y:a.y+S.y},b={x:c.x+m.x,y:c.y+m.y},R=Math.max(Math.abs(A.x-p[0].x),Math.abs(b.x-p[0].x)),D=Math.max(Math.abs(A.y-p[0].y),Math.abs(b.y-p[0].y));R>=D?(w=(A.x+b.x)/2,x=p[0].y):(w=p[0].x,x=(A.y+b.y)/2)}return[[e,{x:a.x+S.x,y:a.y+S.y},...p,{x:c.x+m.x,y:c.y+m.y},n],w,x,y,_]}function P2(e,t,n,r){const o=Math.min(Vf(e,t)/2,Vf(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*f}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*l},${i}`}function Ac({sourceX:e,sourceY:t,sourcePosition:n=me.Bottom,targetX:r,targetY:o,targetPosition:s=me.Top,borderRadius:i=5,centerX:l,centerY:a,offset:c=20}){const[f,d,h,p,w]=T2({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:l,y:a},offset:c});return[f.reduce((S,m,g)=>{let v="";return g>0&&g<f.length-1?v=P2(f[g-1],m,f[g+1],i):v=`${g===0?"M":"L"}${m.x} ${m.y}`,S+=v,S},""),d,h,p,w]}const Ml=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,sourcePosition:d=me.Bottom,targetPosition:h=me.Top,markerEnd:p,markerStart:w,pathOptions:x,interactionWidth:S})=>{const[m,g,v]=Ac({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return V.createElement(Os,{path:m,labelX:g,labelY:v,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:w,interactionWidth:S})});Ml.displayName="SmoothStepEdge";const Xu=j.memo(e=>{var t;return V.createElement(Ml,{...e,pathOptions:j.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Xu.displayName="StepEdge";function $2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,l]=wg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,l]}const Ku=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[w,x,S]=$2({sourceX:e,sourceY:t,targetX:n,targetY:r});return V.createElement(Os,{path:w,labelX:x,labelY:S,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p})});Ku.displayName="StraightEdge";function ci(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Bf({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case me.Left:return[t-ci(t-r,s),n];case me.Right:return[t+ci(r-t,s),n];case me.Top:return[t,n-ci(n-o,s)];case me.Bottom:return[t,n+ci(o-n,s)]}}function Eg({sourceX:e,sourceY:t,sourcePosition:n=me.Bottom,targetX:r,targetY:o,targetPosition:s=me.Top,curvature:i=.25}){const[l,a]=Bf({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,f]=Bf({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[d,h,p,w]=Ng({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:f});return[`M${e},${t} C${l},${a} ${c},${f} ${r},${o}`,d,h,p,w]}const ll=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=me.Bottom,targetPosition:s=me.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,pathOptions:x,interactionWidth:S})=>{const[m,g,v]=Eg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:x==null?void 0:x.curvature});return V.createElement(Os,{path:m,labelX:g,labelY:v,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,interactionWidth:S})});ll.displayName="BezierEdge";const Gu=j.createContext(null),A2=Gu.Provider;Gu.Consumer;const M2=()=>j.useContext(Gu),R2=e=>"id"in e&&"source"in e&&"target"in e,z2=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Mc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,D2=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),L2=(e,t)=>{if(!e.source||!e.target)return t;let n;return R2(e)?n={...e}:n={...e,id:z2(e)},D2(n,t)?t:t.concat(n)},Rc=({x:e,y:t},[n,r,o],s,[i,l])=>{const a={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(a.x/i),y:l*Math.round(a.y/l)}:a},bg=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Ir=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Rl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=Ir(o,t).positionAbsolute;return gg(r,Cs({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yg(n)},kg=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const a={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(f=>{const{width:d,height:h,selectable:p=!0,hidden:w=!1}=f;if(i&&!p||w)return!1;const{positionAbsolute:x}=Ir(f,l),S={x:x.x,y:x.y,width:d||0,height:h||0},m=Pc(a,S),g=typeof d>"u"||typeof h>"u"||d===null||h===null,v=s&&m>0,y=(d||0)*(h||0);(g||v||m>=y||f.dragging)&&c.push(f)}),c},_g=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Cg=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),l=n/(e.height*(1+s)),a=Math.min(i,l),c=bo(a,r,o),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*c,p=n/2-d*c;return{x:h,y:p,zoom:c}},yr=(e,t=0)=>e.transition().duration(t);function Uf(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,l;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),o},[])}function O2(e,t,n,r,o,s){const{x:i,y:l}=ir(e),c=t.elementsFromPoint(i,l).find(w=>w.classList.contains("react-flow__handle"));if(c){const w=c.getAttribute("data-nodeid");if(w){const x=Zu(void 0,c),S=c.getAttribute("data-handleid"),m=s({nodeId:w,id:S,type:x});if(m){const g=o.find(v=>v.nodeId===w&&v.type===x&&v.id===S);return{handle:{id:S,type:x,nodeId:w,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:m}}}}let f=[],d=1/0;if(o.forEach(w=>{const x=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(x<=r){const S=s(w);x<=d&&(x<d?f=[{handle:w,validHandleResult:S}]:x===d&&f.push({handle:w,validHandleResult:S}),d=x)}}),!f.length)return{handle:null,validHandleResult:Ig()};if(f.length===1)return f[0];const h=f.some(({validHandleResult:w})=>w.isValid),p=f.some(({handle:w})=>w.type==="target");return f.find(({handle:w,validHandleResult:x})=>p?w.type==="target":h?x.isValid:!0)||f[0]}const F2={source:null,target:null,sourceHandle:null,targetHandle:null},Ig=()=>({handleDomNode:null,isValid:!1,connection:F2,endHandle:null});function jg(e,t,n,r,o,s,i){const l=o==="target",a=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...Ig(),handleDomNode:a};if(a){const f=Zu(void 0,a),d=a.getAttribute("data-nodeid"),h=a.getAttribute("data-handleid"),p=a.classList.contains("connectable"),w=a.classList.contains("connectableend"),x={source:l?d:n,sourceHandle:l?h:r,target:l?n:d,targetHandle:l?r:h};c.connection=x,p&&w&&(t===ur.Strict?l&&f==="source"||!l&&f==="target":d!==n||h!==r)&&(c.endHandle={nodeId:d,handleId:h,type:f},c.isValid=s(x))}return c}function H2({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[nt]){const{handleBounds:i}=s[nt];let l=[],a=[];i&&(l=Uf(s,i,"source",`${t}-${n}-${r}`),a=Uf(s,i,"target",`${t}-${n}-${r}`)),o.push(...l,...a)}return o},[])}function Zu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function va(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function V2(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Tg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:a,onReconnectEnd:c}){const f=mg(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:w,onConnectStart:x,panBy:S,getNodes:m,cancelConnection:g}=s();let v=0,y;const{x:_,y:E}=ir(e),I=f==null?void 0:f.elementFromPoint(_,E),M=Zu(a,I),A=h==null?void 0:h.getBoundingClientRect();if(!A||!M)return;let b,R=ir(e,A),D=!1,L=null,N=!1,$=null;const C=H2({nodes:m(),nodeId:n,handleId:t,handleType:M}),z=()=>{if(!p)return;const[T,F]=hg(R,A);S({x:T,y:F}),v=requestAnimationFrame(z)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),x==null||x(e,{nodeId:n,handleId:t,handleType:M});function P(T){const{transform:F}=s();R=ir(T,A);const{handle:O,validHandleResult:Y}=O2(T,f,Rc(R,F,!1,[1,1]),w,C,U=>jg(U,d,n,t,o?"target":"source",l,f));if(y=O,D||(z(),D=!0),$=Y.handleDomNode,L=Y.connection,N=Y.isValid,i({connectionPosition:y&&N?bg({x:y.x,y:y.y},F):R,connectionStatus:V2(!!y,N),connectionEndHandle:Y.endHandle}),!y&&!N&&!$)return va(b);L.source!==L.target&&$&&(va(b),b=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",N),$.classList.toggle("react-flow__handle-valid",N))}function k(T){var F,O;(y||$)&&L&&N&&(r==null||r(L)),(O=(F=s()).onConnectEnd)==null||O.call(F,T),a&&(c==null||c(T)),va(b),g(),cancelAnimationFrame(v),D=!1,N=!1,L=null,$=null,f.removeEventListener("mousemove",P),f.removeEventListener("mouseup",k),f.removeEventListener("touchmove",P),f.removeEventListener("touchend",k)}f.addEventListener("mousemove",P),f.addEventListener("mouseup",k),f.addEventListener("touchmove",P),f.addEventListener("touchend",k)}const Wf=()=>!0,B2=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),U2=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Pg=j.forwardRef(({type:e="source",position:t=me.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:a,className:c,onMouseDown:f,onTouchStart:d,...h},p)=>{var A,b;const w=i||null,x=e==="target",S=ct(),m=M2(),{connectOnClick:g,noPanClassName:v}=Ye(B2,ft),{connecting:y,clickConnecting:_}=Ye(U2(m,w,e),ft);m||(b=(A=S.getState()).onError)==null||b.call(A,"010",Ln.error010());const E=R=>{const{defaultEdgeOptions:D,onConnect:L,hasDefaultEdges:N}=S.getState(),$={...D,...R};if(N){const{edges:C,setEdges:z}=S.getState();z(L2($,C))}L==null||L($),l==null||l($)},I=R=>{if(!m)return;const D=vg(R);o&&(D&&R.button===0||!D)&&Tg({event:R,handleId:w,nodeId:m,onConnect:E,isTarget:x,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||Wf}),D?f==null||f(R):d==null||d(R)},M=R=>{const{onClickConnectStart:D,onClickConnectEnd:L,connectionClickStartHandle:N,connectionMode:$,isValidConnection:C}=S.getState();if(!m||!N&&!o)return;if(!N){D==null||D(R,{nodeId:m,handleId:w,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:w}});return}const z=mg(R.target),P=n||C||Wf,{connection:k,isValid:T}=jg({nodeId:m,id:w,type:e},$,N.nodeId,N.handleId||null,N.type,P,z);T&&E(k),L==null||L(R),S.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":w,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${w}-${e}`,className:xt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,c,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:s,connecting:_,connectionindicator:r&&(o&&!y||s&&y)}]),onMouseDown:I,onTouchStart:I,onClick:g?M:void 0,ref:p,...h},a)});Pg.displayName="Handle";var cn=j.memo(Pg);const $g=({data:e,isConnectable:t,targetPosition:n=me.Top,sourcePosition:r=me.Bottom})=>V.createElement(V.Fragment,null,V.createElement(cn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,V.createElement(cn,{type:"source",position:r,isConnectable:t}));$g.displayName="DefaultNode";var zc=j.memo($g);const Ag=({data:e,isConnectable:t,sourcePosition:n=me.Bottom})=>V.createElement(V.Fragment,null,e==null?void 0:e.label,V.createElement(cn,{type:"source",position:n,isConnectable:t}));Ag.displayName="InputNode";var Mg=j.memo(Ag);const Rg=({data:e,isConnectable:t,targetPosition:n=me.Top})=>V.createElement(V.Fragment,null,V.createElement(cn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Rg.displayName="OutputNode";var zg=j.memo(Rg);const Ju=()=>null;Ju.displayName="GroupNode";const W2=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ui=e=>e.id;function Y2(e,t){return ft(e.selectedNodes.map(ui),t.selectedNodes.map(ui))&&ft(e.selectedEdges.map(ui),t.selectedEdges.map(ui))}const Dg=j.memo(({onSelectionChange:e})=>{const t=ct(),{selectedNodes:n,selectedEdges:r}=Ye(W2,Y2);return j.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});Dg.displayName="SelectionListener";const Q2=e=>!!e.onSelectionChange;function q2({onSelectionChange:e}){const t=Ye(Q2);return e||t?V.createElement(Dg,{onSelectionChange:e}):null}const X2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Fr(e,t){j.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Te(e,t,n){j.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const K2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:a,nodesDraggable:c,nodesConnectable:f,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:w,minZoom:x,maxZoom:S,nodeExtent:m,onNodesChange:g,onEdgesChange:v,elementsSelectable:y,connectionMode:_,snapGrid:E,snapToGrid:I,translateExtent:M,connectOnClick:A,defaultEdgeOptions:b,fitView:R,fitViewOptions:D,onNodesDelete:L,onEdgesDelete:N,onNodeDrag:$,onNodeDragStart:C,onNodeDragStop:z,onSelectionDrag:P,onSelectionDragStart:k,onSelectionDragStop:T,noPanClassName:F,nodeOrigin:O,rfId:Y,autoPanOnConnect:U,autoPanOnNodeDrag:q,onError:Z,connectionRadius:J,isValidConnection:be,nodeDragThreshold:Ne})=>{const{setNodes:B,setEdges:oe,setDefaultNodesAndEdges:ee,setMinZoom:re,setMaxZoom:we,setTranslateExtent:ae,setNodeExtent:Le,reset:X}=Ye(X2,ft),Q=ct();return j.useEffect(()=>{const ge=r==null?void 0:r.map(H=>({...H,...b}));return ee(n,ge),()=>{X()}},[]),Te("defaultEdgeOptions",b,Q.setState),Te("connectionMode",_,Q.setState),Te("onConnect",o,Q.setState),Te("onConnectStart",s,Q.setState),Te("onConnectEnd",i,Q.setState),Te("onClickConnectStart",l,Q.setState),Te("onClickConnectEnd",a,Q.setState),Te("nodesDraggable",c,Q.setState),Te("nodesConnectable",f,Q.setState),Te("nodesFocusable",d,Q.setState),Te("edgesFocusable",h,Q.setState),Te("edgesUpdatable",p,Q.setState),Te("elementsSelectable",y,Q.setState),Te("elevateNodesOnSelect",w,Q.setState),Te("snapToGrid",I,Q.setState),Te("snapGrid",E,Q.setState),Te("onNodesChange",g,Q.setState),Te("onEdgesChange",v,Q.setState),Te("connectOnClick",A,Q.setState),Te("fitViewOnInit",R,Q.setState),Te("fitViewOnInitOptions",D,Q.setState),Te("onNodesDelete",L,Q.setState),Te("onEdgesDelete",N,Q.setState),Te("onNodeDrag",$,Q.setState),Te("onNodeDragStart",C,Q.setState),Te("onNodeDragStop",z,Q.setState),Te("onSelectionDrag",P,Q.setState),Te("onSelectionDragStart",k,Q.setState),Te("onSelectionDragStop",T,Q.setState),Te("noPanClassName",F,Q.setState),Te("nodeOrigin",O,Q.setState),Te("rfId",Y,Q.setState),Te("autoPanOnConnect",U,Q.setState),Te("autoPanOnNodeDrag",q,Q.setState),Te("onError",Z,Q.setState),Te("connectionRadius",J,Q.setState),Te("isValidConnection",be,Q.setState),Te("nodeDragThreshold",Ne,Q.setState),Fr(e,B),Fr(t,oe),Fr(x,re),Fr(S,we),Fr(M,ae),Fr(m,Le),null},Yf={display:"none"},G2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lg="react-flow__node-desc",Og="react-flow__edge-desc",Z2="react-flow__aria-live",J2=e=>e.ariaLiveMessage;function eS({rfId:e}){const t=Ye(J2);return V.createElement("div",{id:`${Z2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:G2},t)}function tS({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${Lg}-${e}`,style:Yf},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${Og}-${e}`,style:Yf},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&V.createElement(eS,{rfId:e}))}var js=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=j.useState(!1),o=j.useRef(!1),s=j.useRef(new Set([])),[i,l]=j.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),f=c.reduce((d,h)=>d.concat(...h),[]);return[c,f]}return[[],[]]},[e]);return j.useEffect(()=>{const a=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||a;if(e!==null){const f=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&$c(p))return!1;const x=qf(p.code,l);s.current.add(p[x]),Qf(i,s.current,!1)&&(p.preventDefault(),r(!0))},d=p=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&$c(p))return!1;const x=qf(p.code,l);Qf(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),o.current=!1},h=()=>{s.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",f),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",f),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function Qf(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function qf(e,t){return t.includes(e)?"code":"key"}function Fg(e,t,n,r){var l,a;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),i=Ir(s,r);return Fg(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=s[nt])==null?void 0:l.z)??0)>(n.z??0)?((a=s[nt])==null?void 0:a.z)??0:n.z??0},r)}function Hg(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:i,y:l,z:a}=Fg(r,e,{...r.position,z:((s=r[nt])==null?void 0:s.z)??0},t);r.positionAbsolute={x:i,y:l},r[nt].z=a,n!=null&&n[r.id]&&(r[nt].isParent=!0)}})}function wa(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(l=>{var p;const a=(Kt(l.zIndex)?l.zIndex:0)+(l.selected?i:0),c=t.get(l.id),f={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},d=l.parentNode||l.parentId;d&&(s[d]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==l.type;Object.defineProperty(f,nt,{enumerable:!1,value:{handleBounds:h||(p=c==null?void 0:c[nt])==null?void 0:p.handleBounds,z:a}}),o.set(l.id,f)}),Hg(o,n,s),o}function Vg(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:a,fitViewOnInitDone:c,fitViewOnInit:f,nodeOrigin:d}=e(),h=t.initial&&!c&&f;if(l&&a&&(h||!t.initial)){const w=n().filter(S=>{var g;const m=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(g=t.nodes)!=null&&g.length?m&&t.nodes.some(v=>v.id===S.id):m}),x=w.every(S=>S.width&&S.height);if(w.length>0&&x){const S=Rl(w,d),{x:m,y:g,zoom:v}=Cg(S,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),y=$n.translate(m,g).scale(v);return typeof t.duration=="number"&&t.duration>0?l.transform(yr(a,t.duration),y):l.transform(a,y),!0}}return!1}function nS(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[nt]:r[nt],selected:n.selected})}),new Map(t)}function rS(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function di({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:a,hasDefaultEdges:c}=n();e!=null&&e.length&&(a&&r({nodeInternals:nS(e,o)}),i==null||i(e)),t!=null&&t.length&&(c&&r({edges:rS(t,s)}),l==null||l(t))}const Hr=()=>{},oS={zoomIn:Hr,zoomOut:Hr,zoomTo:Hr,getZoom:()=>1,setViewport:Hr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Hr,fitBounds:Hr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},sS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),iS=()=>{const e=ct(),{d3Zoom:t,d3Selection:n}=Ye(sS,ft);return j.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(yr(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(yr(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(yr(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,l,a]=e.getState().transform,c=$n.translate(o.x??i,o.y??l).scale(o.zoom??a);t.transform(yr(n,s==null?void 0:s.duration),c)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>Vg(e.getState,o),setCenter:(o,s,i)=>{const{width:l,height:a,maxZoom:c}=e.getState(),f=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,d=l/2-o*f,h=a/2-s*f,p=$n.translate(d,h).scale(f);t.transform(yr(n,i==null?void 0:i.duration),p)},fitBounds:(o,s)=>{const{width:i,height:l,minZoom:a,maxZoom:c}=e.getState(),{x:f,y:d,zoom:h}=Cg(o,i,l,a,c,(s==null?void 0:s.padding)??.1),p=$n.translate(f,d).scale(h);t.transform(yr(n,s==null?void 0:s.duration),p)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Rc(o,s,i,l)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:a}=e.getState();if(!a)return o;const{x:c,y:f}=a.getBoundingClientRect(),d={x:o.x-c,y:o.y-f};return Rc(d,s,i,l)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:l,y:a}=i.getBoundingClientRect(),c=bg(o,s);return{x:c.x+l,y:c.y+a}},viewportInitialized:!0}:oS,[t,n])};function Fs(){const e=iS(),t=ct(),n=j.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),r=j.useCallback(x=>t.getState().nodeInternals.get(x),[]),o=j.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(S=>({...S}))},[]),s=j.useCallback(x=>{const{edges:S=[]}=t.getState();return S.find(m=>m.id===x)},[]),i=j.useCallback(x=>{const{getNodes:S,setNodes:m,hasDefaultNodes:g,onNodesChange:v}=t.getState(),y=S(),_=typeof x=="function"?x(y):x;if(g)m(_);else if(v){const E=_.length===0?y.map(I=>({type:"remove",id:I.id})):_.map(I=>({item:I,type:"reset"}));v(E)}},[]),l=j.useCallback(x=>{const{edges:S=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:v}=t.getState(),y=typeof x=="function"?x(S):x;if(g)m(y);else if(v){const _=y.length===0?S.map(E=>({type:"remove",id:E.id})):y.map(E=>({item:E,type:"reset"}));v(_)}},[]),a=j.useCallback(x=>{const S=Array.isArray(x)?x:[x],{getNodes:m,setNodes:g,hasDefaultNodes:v,onNodesChange:y}=t.getState();if(v){const E=[...m(),...S];g(E)}else if(y){const _=S.map(E=>({item:E,type:"add"}));y(_)}},[]),c=j.useCallback(x=>{const S=Array.isArray(x)?x:[x],{edges:m=[],setEdges:g,hasDefaultEdges:v,onEdgesChange:y}=t.getState();if(v)g([...m,...S]);else if(y){const _=S.map(E=>({item:E,type:"add"}));y(_)}},[]),f=j.useCallback(()=>{const{getNodes:x,edges:S=[],transform:m}=t.getState(),[g,v,y]=m;return{nodes:x().map(_=>({..._})),edges:S.map(_=>({..._})),viewport:{x:g,y:v,zoom:y}}},[]),d=j.useCallback(({nodes:x,edges:S})=>{const{nodeInternals:m,getNodes:g,edges:v,hasDefaultNodes:y,hasDefaultEdges:_,onNodesDelete:E,onEdgesDelete:I,onNodesChange:M,onEdgesChange:A}=t.getState(),b=(x||[]).map($=>$.id),R=(S||[]).map($=>$.id),D=g().reduce(($,C)=>{const z=C.parentNode||C.parentId,P=!b.includes(C.id)&&z&&$.find(T=>T.id===z);return(typeof C.deletable=="boolean"?C.deletable:!0)&&(b.includes(C.id)||P)&&$.push(C),$},[]),L=v.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),N=L.filter($=>R.includes($.id));if(D||N){const $=_g(D,L),C=[...N,...$],z=C.reduce((P,k)=>(P.includes(k.id)||P.push(k.id),P),[]);if((_||y)&&(_&&t.setState({edges:v.filter(P=>!z.includes(P.id))}),y&&(D.forEach(P=>{m.delete(P.id)}),t.setState({nodeInternals:new Map(m)}))),z.length>0&&(I==null||I(C),A&&A(z.map(P=>({id:P,type:"remove"})))),D.length>0&&(E==null||E(D),M)){const P=D.map(k=>({id:k.id,type:"remove"}));M(P)}}},[]),h=j.useCallback(x=>{const S=_2(x),m=S?null:t.getState().nodeInternals.get(x.id);return!S&&!m?[null,null,S]:[S?x:Of(m),m,S]},[]),p=j.useCallback((x,S=!0,m)=>{const[g,v,y]=h(x);return g?(m||t.getState().getNodes()).filter(_=>{if(!y&&(_.id===v.id||!_.positionAbsolute))return!1;const E=Of(_),I=Pc(E,g);return S&&I>0||I>=g.width*g.height}):[]},[]),w=j.useCallback((x,S,m=!0)=>{const[g]=h(x);if(!g)return!1;const v=Pc(g,S);return m&&v>0||v>=g.width*g.height},[]);return j.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:l,addNodes:a,addEdges:c,toObject:f,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:w}),[e,n,r,o,s,i,l,a,c,f,d,p,w])}const lS={actInsideInputWithModifier:!1};var aS=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ct(),{deleteElements:r}=Fs(),o=js(e,lS),s=js(t);j.useEffect(()=>{if(o){const{edges:i,getNodes:l}=n.getState(),a=l().filter(f=>f.selected),c=i.filter(f=>f.selected);r({nodes:a,edges:c}),n.setState({nodesSelectionActive:!1})}},[o]),j.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function cS(e){const t=ct();j.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=Yu(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Ln.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const ed={position:"absolute",width:"100%",height:"100%",top:0,left:0},uS=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,fi=e=>({x:e.x,y:e.y,zoom:e.k}),Vr=(e,t)=>e.target.closest(`.${t}`),Xf=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Kf=e=>{const t=e.ctrlKey&&sl()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},dS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),fS=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:a=br.Free,zoomOnDoubleClick:c=!0,elementsSelectable:f,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:w,maxZoom:x,zoomActivationKeyCode:S,preventScrolling:m=!0,children:g,noWheelClassName:v,noPanClassName:y})=>{const _=j.useRef(),E=ct(),I=j.useRef(!1),M=j.useRef(!1),A=j.useRef(null),b=j.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:D,d3ZoomHandler:L,userSelectionActive:N}=Ye(dS,ft),$=js(S),C=j.useRef(0),z=j.useRef(!1),P=j.useRef();return cS(A),j.useEffect(()=>{if(A.current){const k=A.current.getBoundingClientRect(),T=fg().scaleExtent([w,x]).translateExtent(p),F=Qt(A.current).call(T),O=$n.translate(h.x,h.y).scale(bo(h.zoom,w,x)),Y=[[0,0],[k.width,k.height]],U=T.constrain()(O,Y,p);T.transform(F,U),T.wheelDelta(Kf),E.setState({d3Zoom:T,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[U.x,U.y,U.k],domNode:A.current.closest(".react-flow")})}},[]),j.useEffect(()=>{D&&R&&(i&&!$&&!N?D.on("wheel.zoom",k=>{if(Vr(k,v))return!1;k.preventDefault(),k.stopImmediatePropagation();const T=D.property("__zoom").k||1;if(k.ctrlKey&&s){const be=on(k),Ne=Kf(k),B=T*Math.pow(2,Ne);R.scaleTo(D,B,be,k);return}const F=k.deltaMode===1?20:1;let O=a===br.Vertical?0:k.deltaX*F,Y=a===br.Horizontal?0:k.deltaY*F;!sl()&&k.shiftKey&&a!==br.Vertical&&(O=k.deltaY*F,Y=0),R.translateBy(D,-(O/T)*l,-(Y/T)*l,{internal:!0});const U=fi(D.property("__zoom")),{onViewportChangeStart:q,onViewportChange:Z,onViewportChangeEnd:J}=E.getState();clearTimeout(P.current),z.current||(z.current=!0,t==null||t(k,U),q==null||q(U)),z.current&&(e==null||e(k,U),Z==null||Z(U),P.current=setTimeout(()=>{n==null||n(k,U),J==null||J(U),z.current=!1},150))},{passive:!1}):typeof L<"u"&&D.on("wheel.zoom",function(k,T){if(!m&&k.type==="wheel"&&!k.ctrlKey||Vr(k,v))return null;k.preventDefault(),L.call(this,k,T)},{passive:!1}))},[N,i,a,D,R,L,$,s,m,v,t,e,n]),j.useEffect(()=>{R&&R.on("start",k=>{var O,Y;if(!k.sourceEvent||k.sourceEvent.internal)return null;C.current=(O=k.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:T}=E.getState(),F=fi(k.transform);I.current=!0,b.current=F,((Y=k.sourceEvent)==null?void 0:Y.type)==="mousedown"&&E.setState({paneDragging:!0}),T==null||T(F),t==null||t(k.sourceEvent,F)})},[R,t]),j.useEffect(()=>{R&&(N&&!I.current?R.on("zoom",null):N||R.on("zoom",k=>{var F;const{onViewportChange:T}=E.getState();if(E.setState({transform:[k.transform.x,k.transform.y,k.transform.k]}),M.current=!!(r&&Xf(d,C.current??0)),(e||T)&&!((F=k.sourceEvent)!=null&&F.internal)){const O=fi(k.transform);T==null||T(O),e==null||e(k.sourceEvent,O)}}))},[N,R,e,d,r]),j.useEffect(()=>{R&&R.on("end",k=>{if(!k.sourceEvent||k.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=E.getState();if(I.current=!1,E.setState({paneDragging:!1}),r&&Xf(d,C.current??0)&&!M.current&&r(k.sourceEvent),M.current=!1,(n||T)&&uS(b.current,k.transform)){const F=fi(k.transform);b.current=F,clearTimeout(_.current),_.current=setTimeout(()=>{T==null||T(F),n==null||n(k.sourceEvent,F)},i?150:0)}})},[R,i,d,n,r]),j.useEffect(()=>{R&&R.filter(k=>{const T=$||o,F=s&&k.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&k.button===1&&k.type==="mousedown"&&(Vr(k,"react-flow__node")||Vr(k,"react-flow__edge")))return!0;if(!d&&!T&&!i&&!c&&!s||N||!c&&k.type==="dblclick"||Vr(k,v)&&k.type==="wheel"||Vr(k,y)&&(k.type!=="wheel"||i&&k.type==="wheel"&&!$)||!s&&k.ctrlKey&&k.type==="wheel"||!T&&!i&&!F&&k.type==="wheel"||!d&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(d)&&!d.includes(k.button)&&k.type==="mousedown")return!1;const O=Array.isArray(d)&&d.includes(k.button)||!k.button||k.button<=1;return(!k.ctrlKey||k.type==="wheel")&&O})},[N,R,o,s,i,c,d,f,$]),V.createElement("div",{className:"react-flow__renderer",ref:A,style:ed},g)},pS=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function hS(){const{userSelectionActive:e,userSelectionRect:t}=Ye(pS,ft);return e&&t?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Gf(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Bg(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(l=>l.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&Gf(r,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&Gf(r,i);break}case"remove":return r}return r.push(i),r},n)}function Ug(e,t){return Bg(e,t)}function mS(e,t){return Bg(e,t)}const Yn=(e,t)=>({id:e,type:"select",selected:t});function ro(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Yn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Yn(r.id,!1))),n},[])}const Na=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},gS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Wg=j.memo(({isSelecting:e,selectionMode:t=Is.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:a,onPaneMouseMove:c,onPaneMouseLeave:f,children:d})=>{const h=j.useRef(null),p=ct(),w=j.useRef(0),x=j.useRef(0),S=j.useRef(),{userSelectionActive:m,elementsSelectable:g,dragging:v}=Ye(gS,ft),y=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,x.current=0},_=L=>{s==null||s(L),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},E=L=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){L.preventDefault();return}i==null||i(L)},I=l?L=>l(L):void 0,M=L=>{const{resetSelectedElements:N,domNode:$}=p.getState();if(S.current=$==null?void 0:$.getBoundingClientRect(),!g||!e||L.button!==0||L.target!==h.current||!S.current)return;const{x:C,y:z}=ir(L,S.current);N(),p.setState({userSelectionRect:{width:0,height:0,startX:C,startY:z,x:C,y:z}}),r==null||r(L)},A=L=>{const{userSelectionRect:N,nodeInternals:$,edges:C,transform:z,onNodesChange:P,onEdgesChange:k,nodeOrigin:T,getNodes:F}=p.getState();if(!e||!S.current||!N)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=ir(L,S.current),Y=N.startX??0,U=N.startY??0,q={...N,x:O.x<Y?O.x:Y,y:O.y<U?O.y:U,width:Math.abs(O.x-Y),height:Math.abs(O.y-U)},Z=F(),J=kg($,q,z,t===Is.Partial,!0,T),be=_g(J,C).map(B=>B.id),Ne=J.map(B=>B.id);if(w.current!==Ne.length){w.current=Ne.length;const B=ro(Z,Ne);B.length&&(P==null||P(B))}if(x.current!==be.length){x.current=be.length;const B=ro(C,be);B.length&&(k==null||k(B))}p.setState({userSelectionRect:q})},b=L=>{if(L.button!==0)return;const{userSelectionRect:N}=p.getState();!m&&N&&L.target===h.current&&(_==null||_(L)),p.setState({nodesSelectionActive:w.current>0}),y(),o==null||o(L)},R=L=>{m&&(p.setState({nodesSelectionActive:w.current>0}),o==null||o(L)),y()},D=g&&(e||m);return V.createElement("div",{className:xt(["react-flow__pane",{dragging:v,selection:e}]),onClick:D?void 0:Na(_,h),onContextMenu:Na(E,h),onWheel:Na(I,h),onMouseEnter:D?void 0:a,onMouseDown:D?M:void 0,onMouseMove:D?A:c,onMouseUp:D?b:void 0,onMouseLeave:D?R:f,ref:h,style:ed},d,V.createElement(hS,null))});Wg.displayName="Pane";function Yg(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Yg(r,t):!1}function Zf(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function yS(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Yg(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function xS(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Qg(e,t,n,r,o=[0,0],s){const i=xS(e,e.extent||r);let l=i;const a=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(a&&e.width&&e.height){const d=n.get(a),{x:h,y:p}=Ir(d,o).positionAbsolute;l=d&&Kt(h)&&Kt(p)&&Kt(d.width)&&Kt(d.height)?[[h+e.width*o[0],p+e.height*o[1]],[h+d.width-e.width+e.width*o[0],p+d.height-e.height+e.height*o[1]]]:l}else s==null||s("005",Ln.error005()),l=i;else if(e.extent&&a&&e.extent!=="parent"){const d=n.get(a),{x:h,y:p}=Ir(d,o).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let c={x:0,y:0};if(a){const d=n.get(a);c=Ir(d,o).positionAbsolute}const f=l&&l!=="parent"?Qu(t,l):t;return{position:{x:f.x-c.x,y:f.y-c.y},positionAbsolute:f}}function Sa({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Jf=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),l={x:i.width*r[0],y:i.height*r[1]};return s.map(a=>{const c=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(c.left-i.left-l.x)/n,y:(c.top-i.top-l.y)/n,...Yu(a)}})};function Ho(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Dc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:a}=t.getState(),c=l.get(e);if(!c){a==null||a("012",Ln.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):o([e])}function vS(){const e=ct();return j.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,a={x:(i-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(a.x/o[0]):a.x,ySnapped:s?o[1]*Math.round(a.y/o[1]):a.y,...a}},[])}function Ea(e){return(t,n,r)=>e==null?void 0:e(t,r)}function qg({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const l=ct(),[a,c]=j.useState(!1),f=j.useRef([]),d=j.useRef({x:null,y:null}),h=j.useRef(0),p=j.useRef(null),w=j.useRef({x:0,y:0}),x=j.useRef(null),S=j.useRef(!1),m=j.useRef(!1),g=j.useRef(!1),v=vS();return j.useEffect(()=>{if(e!=null&&e.current){const y=Qt(e.current),_=({x:M,y:A})=>{const{nodeInternals:b,onNodeDrag:R,onSelectionDrag:D,updateNodePositions:L,nodeExtent:N,snapGrid:$,snapToGrid:C,nodeOrigin:z,onError:P}=l.getState();d.current={x:M,y:A};let k=!1,T={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&N){const O=Rl(f.current,z);T=Cs(O)}if(f.current=f.current.map(O=>{const Y={x:M-O.distance.x,y:A-O.distance.y};C&&(Y.x=$[0]*Math.round(Y.x/$[0]),Y.y=$[1]*Math.round(Y.y/$[1]));const U=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];f.current.length>1&&N&&!O.extent&&(U[0][0]=O.positionAbsolute.x-T.x+N[0][0],U[1][0]=O.positionAbsolute.x+(O.width??0)-T.x2+N[1][0],U[0][1]=O.positionAbsolute.y-T.y+N[0][1],U[1][1]=O.positionAbsolute.y+(O.height??0)-T.y2+N[1][1]);const q=Qg(O,Y,b,U,z,P);return k=k||O.position.x!==q.position.x||O.position.y!==q.position.y,O.position=q.position,O.positionAbsolute=q.positionAbsolute,O}),!k)return;L(f.current,!0,!0),c(!0);const F=o?R:Ea(D);if(F&&x.current){const[O,Y]=Sa({nodeId:o,dragItems:f.current,nodeInternals:b});F(x.current,O,Y)}},E=()=>{if(!p.current)return;const[M,A]=hg(w.current,p.current);if(M!==0||A!==0){const{transform:b,panBy:R}=l.getState();d.current.x=(d.current.x??0)-M/b[2],d.current.y=(d.current.y??0)-A/b[2],R({x:M,y:A})&&_(d.current)}h.current=requestAnimationFrame(E)},I=M=>{var z;const{nodeInternals:A,multiSelectionActive:b,nodesDraggable:R,unselectNodesAndEdges:D,onNodeDragStart:L,onSelectionDragStart:N}=l.getState();m.current=!0;const $=o?L:Ea(N);(!i||!s)&&!b&&o&&((z=A.get(o))!=null&&z.selected||D()),o&&s&&i&&Dc({id:o,store:l,nodeRef:e});const C=v(M);if(d.current=C,f.current=yS(A,R,C,o),$&&f.current){const[P,k]=Sa({nodeId:o,dragItems:f.current,nodeInternals:A});$(M.sourceEvent,P,k)}};if(t)y.on(".drag",null);else{const M=T1().on("start",A=>{const{domNode:b,nodeDragThreshold:R}=l.getState();R===0&&I(A),g.current=!1;const D=v(A);d.current=D,p.current=(b==null?void 0:b.getBoundingClientRect())||null,w.current=ir(A.sourceEvent,p.current)}).on("drag",A=>{var L,N;const b=v(A),{autoPanOnNodeDrag:R,nodeDragThreshold:D}=l.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(g.current=!0),!g.current){if(!S.current&&m.current&&R&&(S.current=!0,E()),!m.current){const $=b.xSnapped-(((L=d==null?void 0:d.current)==null?void 0:L.x)??0),C=b.ySnapped-(((N=d==null?void 0:d.current)==null?void 0:N.y)??0);Math.sqrt($*$+C*C)>D&&I(A)}(d.current.x!==b.xSnapped||d.current.y!==b.ySnapped)&&f.current&&m.current&&(x.current=A.sourceEvent,w.current=ir(A.sourceEvent,p.current),_(b))}}).on("end",A=>{if(!(!m.current||g.current)&&(c(!1),S.current=!1,m.current=!1,cancelAnimationFrame(h.current),f.current)){const{updateNodePositions:b,nodeInternals:R,onNodeDragStop:D,onSelectionDragStop:L}=l.getState(),N=o?D:Ea(L);if(b(f.current,!1,!1),N){const[$,C]=Sa({nodeId:o,dragItems:f.current,nodeInternals:R});N(A.sourceEvent,$,C)}}}).filter(A=>{const b=A.target;return!A.button&&(!n||!Zf(b,`.${n}`,e))&&(!r||Zf(b,r,e))});return y.call(M),()=>{y.on(".drag",null)}}}},[e,t,n,r,s,l,o,i,v]),a}function Xg(){const e=ct();return j.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:a,onError:c,nodesDraggable:f}=e.getState(),d=i().filter(g=>g.selected&&(g.draggable||f&&typeof g.draggable>"u")),h=l?a[0]:5,p=l?a[1]:5,w=n.isShiftPressed?4:1,x=n.x*h*w,S=n.y*p*w,m=d.map(g=>{if(g.positionAbsolute){const v={x:g.positionAbsolute.x+x,y:g.positionAbsolute.y+S};l&&(v.x=a[0]*Math.round(v.x/a[0]),v.y=a[1]*Math.round(v.y/a[1]));const{positionAbsolute:y,position:_}=Qg(g,v,r,o,void 0,c);g.position=_,g.positionAbsolute=y}return g});s(m,!0,!1)},[])}const po={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Vo=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:a,selected:c,onClick:f,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:w,onDoubleClick:x,style:S,className:m,isDraggable:g,isSelectable:v,isConnectable:y,isFocusable:_,selectNodesOnDrag:E,sourcePosition:I,targetPosition:M,hidden:A,resizeObserver:b,dragHandle:R,zIndex:D,isParent:L,noDragClassName:N,noPanClassName:$,initialized:C,disableKeyboardA11y:z,ariaLabel:P,rfId:k,hasHandleBounds:T})=>{const F=ct(),O=j.useRef(null),Y=j.useRef(null),U=j.useRef(I),q=j.useRef(M),Z=j.useRef(r),J=v||g||f||d||h||p,be=Xg(),Ne=Ho(n,F.getState,d),B=Ho(n,F.getState,h),oe=Ho(n,F.getState,p),ee=Ho(n,F.getState,w),re=Ho(n,F.getState,x),we=X=>{const{nodeDragThreshold:Q}=F.getState();if(v&&(!E||!g||Q>0)&&Dc({id:n,store:F,nodeRef:O}),f){const ge=F.getState().nodeInternals.get(n);ge&&f(X,{...ge})}},ae=X=>{if(!$c(X)&&!z)if(xg.includes(X.key)&&v){const Q=X.key==="Escape";Dc({id:n,store:F,unselect:Q,nodeRef:O})}else g&&c&&Object.prototype.hasOwnProperty.call(po,X.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${X.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),be({x:po[X.key].x,y:po[X.key].y,isShiftPressed:X.shiftKey}))};j.useEffect(()=>()=>{Y.current&&(b==null||b.unobserve(Y.current),Y.current=null)},[]),j.useEffect(()=>{if(O.current&&!A){const X=O.current;(!C||!T||Y.current!==X)&&(Y.current&&(b==null||b.unobserve(Y.current)),b==null||b.observe(X),Y.current=X)}},[A,C,T]),j.useEffect(()=>{const X=Z.current!==r,Q=U.current!==I,ge=q.current!==M;O.current&&(X||Q||ge)&&(X&&(Z.current=r),Q&&(U.current=I),ge&&(q.current=M),F.getState().updateNodeDimensions([{id:n,nodeElement:O.current,forceUpdate:!0}]))},[n,r,I,M]);const Le=qg({nodeRef:O,disabled:A||!g,noDragClassName:N,handleSelector:R,nodeId:n,isSelectable:v,selectNodesOnDrag:E});return A?null:V.createElement("div",{className:xt(["react-flow__node",`react-flow__node-${r}`,{[$]:g},m,{selected:c,selectable:v,parent:L,dragging:Le}]),ref:O,style:{zIndex:D,transform:`translate(${l}px,${a}px)`,pointerEvents:J?"all":"none",visibility:C?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ne,onMouseMove:B,onMouseLeave:oe,onContextMenu:ee,onClick:we,onDoubleClick:re,onKeyDown:_?ae:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":z?void 0:`${Lg}-${k}`,"aria-label":P},V.createElement(A2,{value:n},V.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:c,isConnectable:y,sourcePosition:I,targetPosition:M,dragging:Le,dragHandle:R,zIndex:D})))};return t.displayName="NodeWrapper",j.memo(t)};const wS=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Rl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function NS({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ct(),{width:o,height:s,x:i,y:l,transformString:a,userSelectionActive:c}=Ye(wS,ft),f=Xg(),d=j.useRef(null);if(j.useEffect(()=>{var w;n||(w=d.current)==null||w.focus({preventScroll:!0})},[n]),qg({nodeRef:d}),c||!o||!s)return null;const h=e?w=>{const x=r.getState().getNodes().filter(S=>S.selected);e(w,x)}:void 0,p=w=>{Object.prototype.hasOwnProperty.call(po,w.key)&&f({x:po[w.key].x,y:po[w.key].y,isShiftPressed:w.shiftKey})};return V.createElement("div",{className:xt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a}},V.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:o,height:s,top:l,left:i}}))}var SS=j.memo(NS);const ES=e=>e.nodesSelectionActive,Kg=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:a,onMoveStart:c,onMoveEnd:f,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:w,onSelectionEnd:x,multiSelectionKeyCode:S,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:_,panOnScroll:E,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:A,panOnDrag:b,defaultViewport:R,translateExtent:D,minZoom:L,maxZoom:N,preventScrolling:$,onSelectionContextMenu:C,noWheelClassName:z,noPanClassName:P,disableKeyboardA11y:k})=>{const T=Ye(ES),F=js(d),O=js(m),Y=O||b,U=O||E,q=F||h&&Y!==!0;return aS({deleteKeyCode:l,multiSelectionKeyCode:S}),V.createElement(fS,{onMove:a,onMoveStart:c,onMoveEnd:f,onPaneContextMenu:s,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:_,panOnScroll:U,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:A,panOnDrag:!F&&Y,defaultViewport:R,translateExtent:D,minZoom:L,maxZoom:N,zoomActivationKeyCode:g,preventScrolling:$,noWheelClassName:z,noPanClassName:P},V.createElement(Wg,{onSelectionStart:w,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:Y,isSelecting:!!q,selectionMode:p},e,T&&V.createElement(SS,{onSelectionContextMenu:C,noPanClassName:P,disableKeyboardA11y:k})))};Kg.displayName="FlowRenderer";var bS=j.memo(Kg);function kS(e){return Ye(j.useCallback(n=>e?kg(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function _S(e){const t={input:Vo(e.input||Mg),default:Vo(e.default||zc),output:Vo(e.output||zg),group:Vo(e.group||Ju)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=Vo(e[s]||zc),o),n);return{...t,...r}}const CS=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},IS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Gg=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=Ye(IS,ft),l=kS(e.onlyRenderVisibleElements),a=j.useRef(),c=j.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return a.current=f,f},[]);return j.useEffect(()=>()=>{var f;(f=a==null?void 0:a.current)==null||f.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:ed},l.map(f=>{var _,E,I;let d=f.type||"default";e.nodeTypes[d]||(i==null||i("003",Ln.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(f.draggable||t&&typeof f.draggable>"u"),w=!!(f.selectable||o&&typeof f.selectable>"u"),x=!!(f.connectable||n&&typeof f.connectable>"u"),S=!!(f.focusable||r&&typeof f.focusable>"u"),m=e.nodeExtent?Qu(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,g=(m==null?void 0:m.x)??0,v=(m==null?void 0:m.y)??0,y=CS({x:g,y:v,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return V.createElement(h,{key:f.id,id:f.id,className:f.className,style:f.style,type:d,data:f.data,sourcePosition:f.sourcePosition||me.Bottom,targetPosition:f.targetPosition||me.Top,hidden:f.hidden,xPos:g,yPos:v,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:p,isSelectable:w,isConnectable:x,isFocusable:S,resizeObserver:c,dragHandle:f.dragHandle,zIndex:((_=f[nt])==null?void 0:_.z)??0,isParent:!!((E=f[nt])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((I=f[nt])!=null&&I.handleBounds)})}))};Gg.displayName="NodeRenderer";var jS=j.memo(Gg);const TS=(e,t,n)=>n===me.Left?e-t:n===me.Right?e+t:e,PS=(e,t,n)=>n===me.Top?e-t:n===me.Bottom?e+t:e,ep="react-flow__edgeupdater",tp=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:l})=>V.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:xt([ep,`${ep}-${l}`]),cx:TS(t,r,e),cy:PS(n,r,e),r,stroke:"transparent",fill:"transparent"}),$S=()=>!0;var Br=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:l,selected:a,animated:c,label:f,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:x,style:S,source:m,target:g,sourceX:v,sourceY:y,targetX:_,targetY:E,sourcePosition:I,targetPosition:M,elementsSelectable:A,hidden:b,sourceHandleId:R,targetHandleId:D,onContextMenu:L,onMouseEnter:N,onMouseMove:$,onMouseLeave:C,reconnectRadius:z,onReconnect:P,onReconnectStart:k,onReconnectEnd:T,markerEnd:F,markerStart:O,rfId:Y,ariaLabel:U,isFocusable:q,isReconnectable:Z,pathOptions:J,interactionWidth:be,disableKeyboardA11y:Ne})=>{const B=j.useRef(null),[oe,ee]=j.useState(!1),[re,we]=j.useState(!1),ae=ct(),Le=j.useMemo(()=>`url('#${Mc(O,Y)}')`,[O,Y]),X=j.useMemo(()=>`url('#${Mc(F,Y)}')`,[F,Y]);if(b)return null;const Q=ne=>{var le;const{edges:ie,addSelectedEdges:Ee,unselectNodesAndEdges:pe,multiSelectionActive:fe}=ae.getState(),he=ie.find(ue=>ue.id===n);he&&(A&&(ae.setState({nodesSelectionActive:!1}),he.selected&&fe?(pe({nodes:[],edges:[he]}),(le=B.current)==null||le.blur()):Ee([n])),i&&i(ne,he))},ge=Fo(n,ae.getState,l),H=Fo(n,ae.getState,L),W=Fo(n,ae.getState,N),G=Fo(n,ae.getState,$),te=Fo(n,ae.getState,C),ke=(ne,ie)=>{if(ne.button!==0)return;const{edges:Ee,isValidConnection:pe}=ae.getState(),fe=ie?g:m,he=(ie?D:R)||null,le=ie?"target":"source",ue=pe||$S,ve=ie,Ie=Ee.find(Ae=>Ae.id===n);we(!0),k==null||k(ne,Ie,le);const Ce=Ae=>{we(!1),T==null||T(Ae,Ie,le)};Tg({event:ne,handleId:he,nodeId:fe,onConnect:Ae=>P==null?void 0:P(Ie,Ae),isTarget:ve,getState:ae.getState,setState:ae.setState,isValidConnection:ue,edgeUpdaterType:le,onReconnectEnd:Ce})},ye=ne=>ke(ne,!0),Se=ne=>ke(ne,!1),_e=()=>ee(!0),xe=()=>ee(!1),ce=!A&&!i,se=ne=>{var ie;if(!Ne&&xg.includes(ne.key)&&A){const{unselectNodesAndEdges:Ee,addSelectedEdges:pe,edges:fe}=ae.getState();ne.key==="Escape"?((ie=B.current)==null||ie.blur(),Ee({edges:[fe.find(le=>le.id===n)]})):pe([n])}};return V.createElement("g",{className:xt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:a,animated:c,inactive:ce,updating:oe}]),onClick:Q,onDoubleClick:ge,onContextMenu:H,onMouseEnter:W,onMouseMove:G,onMouseLeave:te,onKeyDown:q?se:void 0,tabIndex:q?0:void 0,role:q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${m} to ${g}`,"aria-describedby":q?`${Og}-${Y}`:void 0,ref:B},!re&&V.createElement(e,{id:n,source:m,target:g,selected:a,animated:c,label:f,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:x,data:s,style:S,sourceX:v,sourceY:y,targetX:_,targetY:E,sourcePosition:I,targetPosition:M,sourceHandleId:R,targetHandleId:D,markerStart:Le,markerEnd:X,pathOptions:J,interactionWidth:be}),Z&&V.createElement(V.Fragment,null,(Z==="source"||Z===!0)&&V.createElement(tp,{position:I,centerX:v,centerY:y,radius:z,onMouseDown:ye,onMouseEnter:_e,onMouseOut:xe,type:"source"}),(Z==="target"||Z===!0)&&V.createElement(tp,{position:M,centerX:_,centerY:E,radius:z,onMouseDown:Se,onMouseEnter:_e,onMouseOut:xe,type:"target"})))};return t.displayName="EdgeWrapper",j.memo(t)};function AS(e){const t={default:Br(e.default||ll),straight:Br(e.bezier||Ku),step:Br(e.step||Xu),smoothstep:Br(e.step||Ml),simplebezier:Br(e.simplebezier||qu)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=Br(e[s]||ll),o),n);return{...t,...r}}function np(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case me.Top:return{x:r+s/2,y:o};case me.Right:return{x:r+s,y:o+i/2};case me.Bottom:return{x:r+s/2,y:o+i};case me.Left:return{x:r,y:o+i/2}}}function rp(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const MS=(e,t,n,r,o,s)=>{const i=np(n,e,t),l=np(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function RS({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:l,transform:a}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const f=Cs({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:i/a[2],height:l/a[2]}),d=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),h=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y));return Math.ceil(d*h)>0}function op(e){var r,o,s,i,l;const t=((r=e==null?void 0:e[nt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const zS=[{level:0,isMaxLevel:!0,edges:[]}];function DS(e,t,n=!1){let r=-1;const o=e.reduce((i,l)=>{var f,d;const a=Kt(l.zIndex);let c=a?l.zIndex:0;if(n){const h=t.get(l.target),p=t.get(l.source),w=l.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),x=Math.max(((f=p==null?void 0:p[nt])==null?void 0:f.z)||0,((d=h==null?void 0:h[nt])==null?void 0:d.z)||0,1e3);c=(a?l.zIndex:0)+(w?x:0)}return i[c]?i[c].push(l):i[c]=[l],r=c>r?c:r,i},{}),s=Object.entries(o).map(([i,l])=>{const a=+i;return{edges:l,level:a,isMaxLevel:a===r}});return s.length===0?zS:s}function LS(e,t,n){const r=Ye(j.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&RS({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return DS(r,t,n)}const OS=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),FS=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sp={[il.Arrow]:OS,[il.ArrowClosed]:FS};function HS(e){const t=ct();return j.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(sp,e)?sp[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",Ln.error009(e)),null)},[e])}const VS=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const a=HS(t);return a?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},V.createElement(a,{color:n,strokeWidth:i})):null},BS=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=Mc(i,t);r.includes(l)||(o.push({id:l,color:i.color||e,...i}),r.push(l))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},Zg=({defaultColor:e,rfId:t})=>{const n=Ye(j.useCallback(BS({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return V.createElement("defs",null,n.map(r=>V.createElement(VS,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Zg.displayName="MarkerDefinitions";var US=j.memo(Zg);const WS=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Jg=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:a,onEdgeMouseLeave:c,onEdgeClick:f,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:w,reconnectRadius:x,children:S,disableKeyboardA11y:m})=>{const{edgesFocusable:g,edgesUpdatable:v,elementsSelectable:y,width:_,height:E,connectionMode:I,nodeInternals:M,onError:A}=Ye(WS,ft),b=LS(t,M,n);return _?V.createElement(V.Fragment,null,b.map(({level:R,edges:D,isMaxLevel:L})=>V.createElement("svg",{key:R,style:{zIndex:R},width:_,height:E,className:"react-flow__edges react-flow__container"},L&&V.createElement(US,{defaultColor:e,rfId:r}),V.createElement("g",null,D.map(N=>{const[$,C,z]=op(M.get(N.source)),[P,k,T]=op(M.get(N.target));if(!z||!T)return null;let F=N.type||"default";o[F]||(A==null||A("011",Ln.error011(F)),F="default");const O=o[F]||o.default,Y=I===ur.Strict?k.target:(k.target??[]).concat(k.source??[]),U=rp(C.source,N.sourceHandle),q=rp(Y,N.targetHandle),Z=(U==null?void 0:U.position)||me.Bottom,J=(q==null?void 0:q.position)||me.Top,be=!!(N.focusable||g&&typeof N.focusable>"u"),Ne=N.reconnectable||N.updatable,B=typeof h<"u"&&(Ne||v&&typeof Ne>"u");if(!U||!q)return A==null||A("008",Ln.error008(U,N)),null;const{sourceX:oe,sourceY:ee,targetX:re,targetY:we}=MS($,U,Z,P,q,J);return V.createElement(O,{key:N.id,id:N.id,className:xt([N.className,s]),type:F,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:oe,sourceY:ee,targetX:re,targetY:we,sourcePosition:Z,targetPosition:J,elementsSelectable:y,onContextMenu:i,onMouseEnter:l,onMouseMove:a,onMouseLeave:c,onClick:f,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:w,reconnectRadius:x,rfId:r,ariaLabel:N.ariaLabel,isFocusable:be,isReconnectable:B,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:m})})))),S):null};Jg.displayName="EdgeRenderer";var YS=j.memo(Jg);const QS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function qS({children:e}){const t=Ye(QS);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function XS(e){const t=Fs(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const KS={[me.Left]:me.Right,[me.Right]:me.Left,[me.Top]:me.Bottom,[me.Bottom]:me.Top},e0=({nodeId:e,handleType:t,style:n,type:r=Xn.Bezier,CustomComponent:o,connectionStatus:s})=>{var E,I,M;const{fromNode:i,handleId:l,toX:a,toY:c,connectionMode:f}=Ye(j.useCallback(A=>({fromNode:A.nodeInternals.get(e),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[e]),ft),d=(E=i==null?void 0:i[nt])==null?void 0:E.handleBounds;let h=d==null?void 0:d[t];if(f===ur.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!h)return null;const p=l?h.find(A=>A.id===l):h[0],w=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,S=(((I=i.positionAbsolute)==null?void 0:I.x)??0)+w,m=(((M=i.positionAbsolute)==null?void 0:M.y)??0)+x,g=p==null?void 0:p.position,v=g?KS[g]:null;if(!g||!v)return null;if(o)return V.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:S,fromY:m,toX:a,toY:c,fromPosition:g,toPosition:v,connectionStatus:s});let y="";const _={sourceX:S,sourceY:m,sourcePosition:g,targetX:a,targetY:c,targetPosition:v};return r===Xn.Bezier?[y]=Eg(_):r===Xn.Step?[y]=Ac({..._,borderRadius:0}):r===Xn.SmoothStep?[y]=Ac(_):r===Xn.SimpleBezier?[y]=Sg(_):y=`M${S},${m} ${a},${c}`,V.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};e0.displayName="ConnectionLine";const GS=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function ZS({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:l,height:a,connectionStatus:c}=Ye(GS,ft);return!(o&&s&&l&&i)?null:V.createElement("svg",{style:e,width:l,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:xt(["react-flow__connection",c])},V.createElement(e0,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:c})))}function ip(e,t){return j.useRef(null),ct(),j.useMemo(()=>t(e),[e])}const t0=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:a,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:w,onSelectionStart:x,onSelectionEnd:S,connectionLineType:m,connectionLineStyle:g,connectionLineComponent:v,connectionLineContainerStyle:y,selectionKeyCode:_,selectionOnDrag:E,selectionMode:I,multiSelectionKeyCode:M,panActivationKeyCode:A,zoomActivationKeyCode:b,deleteKeyCode:R,onlyRenderVisibleElements:D,elementsSelectable:L,selectNodesOnDrag:N,defaultViewport:$,translateExtent:C,minZoom:z,maxZoom:P,preventScrolling:k,defaultMarkerColor:T,zoomOnScroll:F,zoomOnPinch:O,panOnScroll:Y,panOnScrollSpeed:U,panOnScrollMode:q,zoomOnDoubleClick:Z,panOnDrag:J,onPaneClick:be,onPaneMouseEnter:Ne,onPaneMouseMove:B,onPaneMouseLeave:oe,onPaneScroll:ee,onPaneContextMenu:re,onEdgeContextMenu:we,onEdgeMouseEnter:ae,onEdgeMouseMove:Le,onEdgeMouseLeave:X,onReconnect:Q,onReconnectStart:ge,onReconnectEnd:H,reconnectRadius:W,noDragClassName:G,noWheelClassName:te,noPanClassName:ke,elevateEdgesOnSelect:ye,disableKeyboardA11y:Se,nodeOrigin:_e,nodeExtent:xe,rfId:ce})=>{const se=ip(e,_S),ne=ip(t,AS);return XS(s),V.createElement(bS,{onPaneClick:be,onPaneMouseEnter:Ne,onPaneMouseMove:B,onPaneMouseLeave:oe,onPaneContextMenu:re,onPaneScroll:ee,deleteKeyCode:R,selectionKeyCode:_,selectionOnDrag:E,selectionMode:I,onSelectionStart:x,onSelectionEnd:S,multiSelectionKeyCode:M,panActivationKeyCode:A,zoomActivationKeyCode:b,elementsSelectable:L,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:F,zoomOnPinch:O,zoomOnDoubleClick:Z,panOnScroll:Y,panOnScrollSpeed:U,panOnScrollMode:q,panOnDrag:J,defaultViewport:$,translateExtent:C,minZoom:z,maxZoom:P,onSelectionContextMenu:w,preventScrolling:k,noDragClassName:G,noWheelClassName:te,noPanClassName:ke,disableKeyboardA11y:Se},V.createElement(qS,null,V.createElement(YS,{edgeTypes:ne,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:D,onEdgeContextMenu:we,onEdgeMouseEnter:ae,onEdgeMouseMove:Le,onEdgeMouseLeave:X,onReconnect:Q,onReconnectStart:ge,onReconnectEnd:H,reconnectRadius:W,defaultMarkerColor:T,noPanClassName:ke,elevateEdgesOnSelect:!!ye,disableKeyboardA11y:Se,rfId:ce},V.createElement(ZS,{style:g,type:m,component:v,containerStyle:y})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(jS,{nodeTypes:se,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:N,onlyRenderVisibleElements:D,noPanClassName:ke,noDragClassName:G,disableKeyboardA11y:Se,nodeOrigin:_e,nodeExtent:xe,rfId:ce})))};t0.displayName="GraphView";var JS=j.memo(t0);const Lc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Vn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Lc,nodeExtent:Lc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ur.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:C2,isValidConnection:void 0},eE=()=>Vv((e,t)=>({...Vn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:wa(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?wa(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:a,nodeOrigin:c}=t(),f=a==null?void 0:a.querySelector(".react-flow__viewport");if(!f)return;const d=window.getComputedStyle(f),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((x,S)=>{const m=o.get(S.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[nt]:{...m[nt],handleBounds:void 0}});else if(m){const g=Yu(S.nodeElement);!!(g.width&&g.height&&(m.width!==g.width||m.height!==g.height||S.forceUpdate))&&(o.set(m.id,{...m,[nt]:{...m[nt],handleBounds:{source:Jf(".source",S.nodeElement,h,c),target:Jf(".target",S.nodeElement,h,c)}},...g}),x.push({id:m.id,type:"dimensions",dimensions:g}))}return x},[]);Hg(o,c);const w=i||s&&!i&&Vg(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:w}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(l=>{const a={id:l.id,type:"position",dragging:o};return r&&(a.positionAbsolute=l.positionAbsolute,a.position=l.position),a});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:a}=t();if(n!=null&&n.length){if(s){const c=Ug(n,l()),f=wa(c,o,i,a);e({nodeInternals:f})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>Yn(a,!0)):(i=ro(s(),n),l=ro(o,[])),di({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>Yn(a,!0)):(i=ro(o,n),l=ro(s(),[])),di({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),l=r||o,a=i.map(f=>(f.selected=!1,Yn(f.id,!1))),c=l.map(f=>Yn(f.id,!1));di({changedNodes:a,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(l=>l.selected).map(l=>Yn(l.id,!1)),i=n.filter(l=>l.selected).map(l=>Yn(l.id,!1));di({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Qu(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:l,translateExtent:a}=t();if(!i||!l||!n.x&&!n.y)return!1;const c=$n.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),f=[[0,0],[o,s]],d=i==null?void 0:i.constrain()(c,f,a);return i.transform(l,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Vn.connectionNodeId,connectionHandleId:Vn.connectionHandleId,connectionHandleType:Vn.connectionHandleType,connectionStatus:Vn.connectionStatus,connectionStartHandle:Vn.connectionStartHandle,connectionEndHandle:Vn.connectionEndHandle}),reset:()=>e({...Vn})}),Object.is),td=({children:e})=>{const t=j.useRef(null);return t.current||(t.current=eE()),V.createElement(w2,{value:t.current},e)};td.displayName="ReactFlowProvider";const n0=({children:e})=>j.useContext($l)?V.createElement(V.Fragment,null,e):V.createElement(td,null,e);n0.displayName="ReactFlowWrapper";const tE={input:Mg,default:zc,output:zg,group:Ju},nE={default:ll,straight:Ku,step:Xu,smoothstep:Ml,simplebezier:qu},rE=[0,0],oE=[15,15],sE={x:0,y:0,zoom:1},iE={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},r0=j.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=tE,edgeTypes:i=nE,onNodeClick:l,onEdgeClick:a,onInit:c,onMove:f,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:w,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:m,onNodeMouseEnter:g,onNodeMouseMove:v,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:E,onNodeDragStart:I,onNodeDrag:M,onNodeDragStop:A,onNodesDelete:b,onEdgesDelete:R,onSelectionChange:D,onSelectionDragStart:L,onSelectionDrag:N,onSelectionDragStop:$,onSelectionContextMenu:C,onSelectionStart:z,onSelectionEnd:P,connectionMode:k=ur.Strict,connectionLineType:T=Xn.Bezier,connectionLineStyle:F,connectionLineComponent:O,connectionLineContainerStyle:Y,deleteKeyCode:U="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:Z=!1,selectionMode:J=Is.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:Ne=sl()?"Meta":"Control",zoomActivationKeyCode:B=sl()?"Meta":"Control",snapToGrid:oe=!1,snapGrid:ee=oE,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:we=!0,nodesDraggable:ae,nodesConnectable:Le,nodesFocusable:X,nodeOrigin:Q=rE,edgesFocusable:ge,edgesUpdatable:H,elementsSelectable:W,defaultViewport:G=sE,minZoom:te=.5,maxZoom:ke=2,translateExtent:ye=Lc,preventScrolling:Se=!0,nodeExtent:_e,defaultMarkerColor:xe="#b1b1b7",zoomOnScroll:ce=!0,zoomOnPinch:se=!0,panOnScroll:ne=!1,panOnScrollSpeed:ie=.5,panOnScrollMode:Ee=br.Free,zoomOnDoubleClick:pe=!0,panOnDrag:fe=!0,onPaneClick:he,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:ve,onPaneScroll:Ie,onPaneContextMenu:Ce,children:De,onEdgeContextMenu:Ae,onEdgeDoubleClick:st,onEdgeMouseEnter:Xe,onEdgeMouseMove:pt,onEdgeMouseLeave:It,onEdgeUpdate:Be,onEdgeUpdateStart:vt,onEdgeUpdateEnd:Me,onReconnect:Ue,onReconnectStart:Fe,onReconnectEnd:jt,reconnectRadius:Pe=10,edgeUpdaterRadius:He=10,onNodesChange:je,onEdgesChange:it,noDragClassName:Ge="nodrag",noWheelClassName:ht="nowheel",noPanClassName:mn="nopan",fitView:Fl=!1,fitViewOptions:j0,connectOnClick:T0=!0,attributionPosition:P0,proOptions:$0,defaultEdgeOptions:A0,elevateNodesOnSelect:M0=!0,elevateEdgesOnSelect:R0=!1,disableKeyboardA11y:id=!1,autoPanOnConnect:z0=!0,autoPanOnNodeDrag:D0=!0,connectionRadius:L0=20,isValidConnection:O0,onError:F0,style:H0,id:ld,nodeDragThreshold:V0,...B0},U0)=>{const Hl=ld||"1";return V.createElement("div",{...B0,style:{...H0,...iE},ref:U0,className:xt(["react-flow",o]),"data-testid":"rf__wrapper",id:ld},V.createElement(n0,null,V.createElement(JS,{onInit:c,onMove:f,onMoveStart:d,onMoveEnd:h,onNodeClick:l,onEdgeClick:a,onNodeMouseEnter:g,onNodeMouseMove:v,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:i,connectionLineType:T,connectionLineStyle:F,connectionLineComponent:O,connectionLineContainerStyle:Y,selectionKeyCode:q,selectionOnDrag:Z,selectionMode:J,deleteKeyCode:U,multiSelectionKeyCode:Ne,panActivationKeyCode:be,zoomActivationKeyCode:B,onlyRenderVisibleElements:re,selectNodesOnDrag:we,defaultViewport:G,translateExtent:ye,minZoom:te,maxZoom:ke,preventScrolling:Se,zoomOnScroll:ce,zoomOnPinch:se,zoomOnDoubleClick:pe,panOnScroll:ne,panOnScrollSpeed:ie,panOnScrollMode:Ee,panOnDrag:fe,onPaneClick:he,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:ve,onPaneScroll:Ie,onPaneContextMenu:Ce,onSelectionContextMenu:C,onSelectionStart:z,onSelectionEnd:P,onEdgeContextMenu:Ae,onEdgeDoubleClick:st,onEdgeMouseEnter:Xe,onEdgeMouseMove:pt,onEdgeMouseLeave:It,onReconnect:Ue??Be,onReconnectStart:Fe??vt,onReconnectEnd:jt??Me,reconnectRadius:Pe??He,defaultMarkerColor:xe,noDragClassName:Ge,noWheelClassName:ht,noPanClassName:mn,elevateEdgesOnSelect:R0,rfId:Hl,disableKeyboardA11y:id,nodeOrigin:Q,nodeExtent:_e}),V.createElement(K2,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:w,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:m,nodesDraggable:ae,nodesConnectable:Le,nodesFocusable:X,edgesFocusable:ge,edgesUpdatable:H,elementsSelectable:W,elevateNodesOnSelect:M0,minZoom:te,maxZoom:ke,nodeExtent:_e,onNodesChange:je,onEdgesChange:it,snapToGrid:oe,snapGrid:ee,connectionMode:k,translateExtent:ye,connectOnClick:T0,defaultEdgeOptions:A0,fitView:Fl,fitViewOptions:j0,onNodesDelete:b,onEdgesDelete:R,onNodeDragStart:I,onNodeDrag:M,onNodeDragStop:A,onSelectionDrag:N,onSelectionDragStart:L,onSelectionDragStop:$,noPanClassName:mn,nodeOrigin:Q,rfId:Hl,autoPanOnConnect:z0,autoPanOnNodeDrag:D0,onError:F0,connectionRadius:L0,isValidConnection:O0,nodeDragThreshold:V0}),V.createElement(q2,{onSelectionChange:D}),De,V.createElement(S2,{proOptions:$0,position:P0}),V.createElement(tS,{rfId:Hl,disableKeyboardA11y:id})))});r0.displayName="ReactFlow";function o0(e){return t=>{const[n,r]=j.useState(t),o=j.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const lE=o0(Ug),aE=o0(mS),s0=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:l,strokeWidth:a,className:c,borderRadius:f,shapeRendering:d,onClick:h,selected:p})=>{const{background:w,backgroundColor:x}=s||{},S=i||w||x;return V.createElement("rect",{className:xt(["react-flow__minimap-node",{selected:p},c]),x:t,y:n,rx:f,ry:f,width:r,height:o,fill:S,stroke:l,strokeWidth:a,shapeRendering:d,onClick:h?m=>h(m,e):void 0})};s0.displayName="MiniMapNode";var cE=j.memo(s0);const uE=e=>e.nodeOrigin,dE=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),ba=e=>e instanceof Function?e:()=>e;function fE({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:s=cE,onClick:i}){const l=Ye(dE,ft),a=Ye(uE),c=ba(t),f=ba(e),d=ba(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return V.createElement(V.Fragment,null,l.map(p=>{const{x:w,y:x}=Ir(p,a).positionAbsolute;return V.createElement(s,{key:p.id,x:w,y:x,width:p.width,height:p.height,style:p.style,selected:p.selected,className:d(p),color:c(p),borderRadius:r,strokeColor:f(p),strokeWidth:o,shapeRendering:h,onClick:i,id:p.id})}))}var pE=j.memo(fE);const hE=200,mE=150,gE=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?k2(Rl(t,e.nodeOrigin),n):n,rfId:e.rfId}},yE="react-flow__minimap-desc";function i0({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:f=1,position:d="bottom-right",onClick:h,onNodeClick:p,pannable:w=!1,zoomable:x=!1,ariaLabel:S="React Flow mini map",inversePan:m=!1,zoomStep:g=10,offsetScale:v=5}){const y=ct(),_=j.useRef(null),{boundingRect:E,viewBB:I,rfId:M}=Ye(gE,ft),A=(e==null?void 0:e.width)??hE,b=(e==null?void 0:e.height)??mE,R=E.width/A,D=E.height/b,L=Math.max(R,D),N=L*A,$=L*b,C=v*L,z=E.x-(N-E.width)/2-C,P=E.y-($-E.height)/2-C,k=N+C*2,T=$+C*2,F=`${yE}-${M}`,O=j.useRef(0);O.current=L,j.useEffect(()=>{if(_.current){const q=Qt(_.current),Z=Ne=>{const{transform:B,d3Selection:oe,d3Zoom:ee}=y.getState();if(Ne.sourceEvent.type!=="wheel"||!oe||!ee)return;const re=-Ne.sourceEvent.deltaY*(Ne.sourceEvent.deltaMode===1?.05:Ne.sourceEvent.deltaMode?1:.002)*g,we=B[2]*Math.pow(2,re);ee.scaleTo(oe,we)},J=Ne=>{const{transform:B,d3Selection:oe,d3Zoom:ee,translateExtent:re,width:we,height:ae}=y.getState();if(Ne.sourceEvent.type!=="mousemove"||!oe||!ee)return;const Le=O.current*Math.max(1,B[2])*(m?-1:1),X={x:B[0]-Ne.sourceEvent.movementX*Le,y:B[1]-Ne.sourceEvent.movementY*Le},Q=[[0,0],[we,ae]],ge=$n.translate(X.x,X.y).scale(B[2]),H=ee.constrain()(ge,Q,re);ee.transform(oe,H)},be=fg().on("zoom",w?J:null).on("zoom.wheel",x?Z:null);return q.call(be),()=>{q.on("zoom",null)}}},[w,x,m,g]);const Y=h?q=>{const Z=on(q);h(q,{x:Z[0],y:Z[1]})}:void 0,U=p?(q,Z)=>{const J=y.getState().nodeInternals.get(Z);p(q,J)}:void 0;return V.createElement(Al,{position:d,style:e,className:xt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},V.createElement("svg",{width:A,height:b,viewBox:`${z} ${P} ${k} ${T}`,role:"img","aria-labelledby":F,ref:_,onClick:Y},S&&V.createElement("title",{id:F},S),V.createElement(pE,{onClick:U,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:l}),V.createElement("path",{className:"react-flow__minimap-mask",d:`M${z-C},${P-C}h${k+C*2}v${T+C*2}h${-k-C*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fill:a,fillRule:"evenodd",stroke:c,strokeWidth:f,pointerEvents:"none"})))}i0.displayName="MiniMap";var xE=j.memo(i0);function vE(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function wE(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function NE(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function SE(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function EE(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xo=({children:e,className:t,...n})=>V.createElement("button",{type:"button",className:xt(["react-flow__controls-button",t]),...n},e);Xo.displayName="ControlButton";const bE=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),l0=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:a,className:c,children:f,position:d="bottom-left"})=>{const h=ct(),[p,w]=j.useState(!1),{isInteractive:x,minZoomReached:S,maxZoomReached:m}=Ye(bE,ft),{zoomIn:g,zoomOut:v,fitView:y}=Fs();if(j.useEffect(()=>{w(!0)},[]),!p)return null;const _=()=>{g(),s==null||s()},E=()=>{v(),i==null||i()},I=()=>{y(o),l==null||l()},M=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),a==null||a(!x)};return V.createElement(Al,{className:xt(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls"},t&&V.createElement(V.Fragment,null,V.createElement(Xo,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},V.createElement(vE,null)),V.createElement(Xo,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},V.createElement(wE,null))),n&&V.createElement(Xo,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view"},V.createElement(NE,null)),r&&V.createElement(Xo,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},x?V.createElement(EE,null):V.createElement(SE,null)),f)};l0.displayName="Controls";var kE=j.memo(l0),Zt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Zt||(Zt={}));function _E({color:e,dimensions:t,lineWidth:n}){return V.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function CE({color:e,radius:t}){return V.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const IE={[Zt.Dots]:"#91919a",[Zt.Lines]:"#eee",[Zt.Cross]:"#e2e2e2"},jE={[Zt.Dots]:1,[Zt.Lines]:1,[Zt.Cross]:6},TE=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function a0({id:e,variant:t=Zt.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:i,style:l,className:a}){const c=j.useRef(null),{transform:f,patternId:d}=Ye(TE,ft),h=i||IE[t],p=r||jE[t],w=t===Zt.Dots,x=t===Zt.Cross,S=Array.isArray(n)?n:[n,n],m=[S[0]*f[2]||1,S[1]*f[2]||1],g=p*f[2],v=x?[g,g]:m,y=w?[g/s,g/s]:[v[0]/s,v[1]/s];return V.createElement("svg",{className:xt(["react-flow__background",a]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},V.createElement("pattern",{id:d+e,x:f[0]%m[0],y:f[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},w?V.createElement(CE,{color:h,radius:g/s}):V.createElement(_E,{dimensions:v,color:h,lineWidth:o})),V.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}a0.displayName="Background";var PE=j.memo(a0);const c0={},{useDebugValue:$E}=V,{useSyncExternalStoreWithSelector:AE}=zm;let lp=!1;const ME=e=>e;function RE(e,t=ME,n){(c0?"production":void 0)!=="production"&&n&&!lp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),lp=!0);const r=AE(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $E(r),r}const zE=e=>{(c0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Dm(e):e,n=(r,o)=>RE(t,r,o);return Object.assign(n,t),n},DE=e=>zE;var u0=Symbol.for("immer-nothing"),ap=Symbol.for("immer-draftable"),Ht=Symbol.for("immer-state");function an(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ko=Object.getPrototypeOf;function _o(e){return!!e&&!!e[Ht]}function Rr(e){var t;return e?d0(e)||Array.isArray(e)||!!e[ap]||!!((t=e.constructor)!=null&&t[ap])||Dl(e)||Ll(e):!1}var LE=Object.prototype.constructor.toString();function d0(e){if(!e||typeof e!="object")return!1;const t=ko(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===LE}function al(e,t){zl(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function zl(e){const t=e[Ht];return t?t.type_:Array.isArray(e)?1:Dl(e)?2:Ll(e)?3:0}function Oc(e,t){return zl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function f0(e,t,n){const r=zl(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function OE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dl(e){return e instanceof Map}function Ll(e){return e instanceof Set}function xr(e){return e.copy_||e.base_}function Fc(e,t){if(Dl(e))return new Map(e);if(Ll(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=d0(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ht];let o=Reflect.ownKeys(r);for(let s=0;s<o.length;s++){const i=o[s],l=r[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(ko(e),r)}else{const r=ko(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function nd(e,t=!1){return Ol(e)||_o(e)||!Rr(e)||(zl(e)>1&&(e.set=e.add=e.clear=e.delete=FE),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>nd(r,!0))),e}function FE(){an(2)}function Ol(e){return Object.isFrozen(e)}var HE={};function zr(e){const t=HE[e];return t||an(0,e),t}var Ts;function p0(){return Ts}function VE(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cp(e,t){t&&(zr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hc(e){Vc(e),e.drafts_.forEach(BE),e.drafts_=null}function Vc(e){e===Ts&&(Ts=e.parent_)}function up(e){return Ts=VE(Ts,e)}function BE(e){const t=e[Ht];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function dp(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ht].modified_&&(Hc(t),an(4)),Rr(e)&&(e=cl(t,e),t.parent_||ul(t,e)),t.patches_&&zr("Patches").generateReplacementPatches_(n[Ht].base_,e,t.patches_,t.inversePatches_)):e=cl(t,n,[]),Hc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==u0?e:void 0}function cl(e,t,n){if(Ol(t))return t;const r=t[Ht];if(!r)return al(t,(o,s)=>fp(e,r,t,o,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ul(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let s=o,i=!1;r.type_===3&&(s=new Set(o),o.clear(),i=!0),al(s,(l,a)=>fp(e,r,o,l,a,n,i)),ul(e,o,!1),n&&e.patches_&&zr("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function fp(e,t,n,r,o,s,i){if(_o(o)){const l=s&&t&&t.type_!==3&&!Oc(t.assigned_,r)?s.concat(r):void 0,a=cl(e,o,l);if(f0(n,r,a),_o(a))e.canAutoFreeze_=!1;else return}else i&&n.add(o);if(Rr(o)&&!Ol(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;cl(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ul(e,o)}}function ul(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nd(t,n)}function UE(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:p0(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,s=rd;n&&(o=[r],s=Ps);const{revoke:i,proxy:l}=Proxy.revocable(o,s);return r.draft_=l,r.revoke_=i,l}var rd={get(e,t){if(t===Ht)return e;const n=xr(e);if(!Oc(n,t))return WE(e,n,t);const r=n[t];return e.finalized_||!Rr(r)?r:r===ka(e.base_,t)?(_a(e),e.copy_[t]=Uc(r,e)):r},has(e,t){return t in xr(e)},ownKeys(e){return Reflect.ownKeys(xr(e))},set(e,t,n){const r=h0(xr(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=ka(xr(e),t),s=o==null?void 0:o[Ht];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(OE(n,o)&&(n!==void 0||Oc(e.base_,t)))return!0;_a(e),Bc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ka(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_a(e),Bc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){an(11)},getPrototypeOf(e){return ko(e.base_)},setPrototypeOf(){an(12)}},Ps={};al(rd,(e,t)=>{Ps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ps.deleteProperty=function(e,t){return Ps.set.call(this,e,t,void 0)};Ps.set=function(e,t,n){return rd.set.call(this,e[0],t,n,e[0])};function ka(e,t){const n=e[Ht];return(n?xr(n):e)[t]}function WE(e,t,n){var o;const r=h0(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function h0(e,t){if(!(t in e))return;let n=ko(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ko(n)}}function Bc(e){e.modified_||(e.modified_=!0,e.parent_&&Bc(e.parent_))}function _a(e){e.copy_||(e.copy_=Fc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var YE=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const i=this;return function(a=s,...c){return i.produce(a,f=>n.call(this,f,...c))}}typeof n!="function"&&an(6),r!==void 0&&typeof r!="function"&&an(7);let o;if(Rr(t)){const s=up(this),i=Uc(t,void 0);let l=!0;try{o=n(i),l=!1}finally{l?Hc(s):Vc(s)}return cp(s,r),dp(o,s)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===u0&&(o=void 0),this.autoFreeze_&&nd(o,!0),r){const s=[],i=[];zr("Patches").generateReplacementPatches_(t,o,s,i),r(s,i)}return o}else an(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...l)=>this.produceWithPatches(i,a=>t(a,...l));let r,o;return[this.produce(t,n,(i,l)=>{r=i,o=l}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Rr(e)||an(8),_o(e)&&(e=QE(e));const t=up(this),n=Uc(e,void 0);return n[Ht].isManual_=!0,Vc(t),n}finishDraft(e,t){const n=e&&e[Ht];(!n||!n.isManual_)&&an(9);const{scope_:r}=n;return cp(r,t),dp(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=zr("Patches").applyPatches_;return _o(e)?r(e,t):this.produce(e,o=>r(o,t))}};function Uc(e,t){const n=Dl(e)?zr("MapSet").proxyMap_(e,t):Ll(e)?zr("MapSet").proxySet_(e,t):UE(e,t);return(t?t.scope_:p0()).drafts_.push(n),n}function QE(e){return _o(e)||an(10,e),m0(e)}function m0(e){if(!Rr(e)||Ol(e))return e;const t=e[Ht];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Fc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Fc(e,!0);return al(n,(r,o)=>{f0(n,r,m0(o))}),t&&(t.finalized_=!1),n}var Vt=new YE,qE=Vt.produce;Vt.produceWithPatches.bind(Vt);Vt.setAutoFreeze.bind(Vt);Vt.setUseStrictShallowCopy.bind(Vt);Vt.applyPatches.bind(Vt);Vt.createDraft.bind(Vt);Vt.finishDraft.bind(Vt);const XE=e=>(t,n,r)=>(r.setState=(o,s,...i)=>{const l=typeof o=="function"?qE(o):o;return t(l,s,...i)},e(r.setState,n,r)),KE=XE,vr=class vr{constructor(){Fn(this,"counters",new Map);Fn(this,"pathRegistry",{nodeToPathsMap:new Map,pathToNodeMap:new Map})}static getInstance(){return vr.instance||(vr.instance=new vr),vr.instance}generateQuestionPathId(t,n,r){return t?`${t.pathId}-Q${n}`:`${r}-Q${n}`}generateAnswerPathId(t,n){return`${t.pathId}-A${n}`}generateOutcomePathId(t,n){return`${t.pathId}-E${n}`}generateVariantPathId(t,n){return`${t}-V${n+1}`}parseVariantFromPath(t){const n=t.match(/(.*-A\d+)-V(\d+)/);return n?{answerPath:n[1],variantNumber:parseInt(n[2])}:null}parsePathId(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];i.startsWith("Q")?o.push({type:"Q",number:parseInt(i.substring(1))}):i.startsWith("A")&&o.push({type:"A",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}parsePathIdWithVariants(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];if(i.startsWith("Q"))o.push({type:"Q",number:parseInt(i.substring(1))});else if(i.startsWith("A"))o.push({type:"A",number:parseInt(i.substring(1))});else if(i.startsWith("V")&&i.includes("+V")){const l=i.substring(1).split("+V").map(a=>parseInt(a));o.push({type:"VC",numbers:l})}else i.startsWith("V")?o.push({type:"V",number:parseInt(i.substring(1))}):i.startsWith("E")&&o.push({type:"E",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}getPathLevel(t){return this.parsePathId(t).segments.filter(r=>r.type==="Q").length}getParentPathId(t){const n=t.split("-");return n.length<=2?null:n.slice(0,-1).join("-")}generateEdgeId(t,n,r){const o=r?`-${r}`:"";return`edge-${t}-${n}${o}`}registerNode(t,n){this.pathRegistry.pathToNodeMap.set(n,t);const r=this.pathRegistry.nodeToPathsMap.get(t)||[];r.includes(n)||this.pathRegistry.nodeToPathsMap.set(t,[...r,n])}getNodePaths(t){return this.pathRegistry.nodeToPathsMap.get(t)||[]}getNodeForPath(t){return this.pathRegistry.pathToNodeMap.get(t)||null}recalculatePathIds(t,n,r){var p,w,x,S,m,g,v,y,_;const o={nodeToPathsMap:new Map,pathToNodeMap:new Map},s=new Map,i=new Map,l=new Map;t.forEach(E=>{s.set(E.id,E)}),n.forEach(E=>{const I=i.get(E.source)||[];I.push(E),i.set(E.source,I);const M=l.get(E.target)||[];M.push(E),l.set(E.target,M)});const a=t.filter(E=>{var I;return E.type==="question"&&((I=E.data)==null?void 0:I.isRoot)===!0});this.counters.clear();const c=new Map;t.forEach(E=>{var I;c.set(E.id,{...E,data:{...E.data,pathIds:[],topic:((I=E.data)==null?void 0:I.topic)||r}})});const f=[];a.forEach(E=>{var M;i.has(E.id)&&(((M=i.get(E.id))==null?void 0:M.length)||0)>0&&f.push({nodeId:E.id,parentPathId:null,level:1})});const d=new Set;for(;f.length>0;){const{nodeId:E,parentPathId:I,level:M}=f.shift(),A=c.get(E);if(!A)continue;let b;if(A.type==="question"){const $=this.getQuestionNumberForNode(A.id,I,t);I===null?b=`${((p=A.data)==null?void 0:p.topic)||r}-Q${$}`:b=`${I}-Q${$}`}else if(A.type==="answer"){const $=this.getAnswerNumberForNode(A.id,I||"STANDALONE",t);if(b=`${I||"STANDALONE"}-A${$}`,((w=A.data)==null?void 0:w.answerType)==="single"){const z=`${E}:${b}`;if(!d.has(z)){d.add(z);const P=c.get(E),k=P.data.pathIds||[];if(!k.includes(b)){c.set(E,{...P,data:{...P.data,pathId:b,primaryPathId:b,pathIds:[...k,b],isRoot:!1,questionLevel:M}}),o.pathToNodeMap.set(b,E);const T=o.nodeToPathsMap.get(E)||[];T.includes(b)||o.nodeToPathsMap.set(E,[...T,b])}}}else{const z=c.get(E),P=z.data.pathIds||[],k=[];if(((x=A.data)==null?void 0:x.answerType)==="multiple")(((S=A.data)==null?void 0:S.variants)||[]).forEach((O,Y)=>{const U=`${b}-V${Y+1}`;P.includes(U)||k.push(U)});else if(((m=A.data)==null?void 0:m.answerType)==="combinations"){const O=(((g=A.data)==null?void 0:g.variants)||[]).length;for(let Y=1;Y<Math.pow(2,O);Y++){const U=[];for(let Z=0;Z<O;Z++)Y&1<<Z&&U.push(Z+1);const q=`${b}-V${U.join("+V")}`;P.includes(q)||k.push(q)}}const T=[...P,...k];c.set(E,{...z,data:{...z.data,pathId:b,pathIds:T,isRoot:!1,questionLevel:M}}),k.forEach(F=>{o.pathToNodeMap.set(F,E);const O=o.nodeToPathsMap.get(E)||[];O.includes(F)||o.nodeToPathsMap.set(E,[...O,F])})}const C=i.get(E)||[];((v=A.data)==null?void 0:v.answerType)==="single"?C.forEach(z=>{f.push({nodeId:z.target,parentPathId:b,level:M+1,sourceHandle:z.sourceHandle||void 0,sourceNodeId:E})}):((y=A.data)==null?void 0:y.answerType)==="multiple"?C.forEach(z=>{if(z.sourceHandle&&z.sourceHandle.startsWith("variant-")){const P=parseInt(z.sourceHandle.replace("variant-","")),k=`${b}-V${P+1}`;f.push({nodeId:z.target,parentPathId:k,level:M+1,sourceHandle:z.sourceHandle||void 0,sourceNodeId:E})}}):((_=A.data)==null?void 0:_.answerType)==="combinations"&&C.forEach(z=>{var P;if(z.sourceHandle&&z.sourceHandle.startsWith("combination-")){const k=z.sourceHandle.replace("combination-",""),T=((P=A.data)==null?void 0:P.variants)||[],F=[],O=T.length;for(let U=1;U<Math.pow(2,O);U++){const q=[];for(let J=0;J<O;J++)U&1<<J&&q.push(J+1);const Z={id:`combo-${U}`,variantIndices:q};F.push(Z)}const Y=F.find(U=>U.id===k);if(Y){const U=`${b}-V${Y.variantIndices.join("+V")}`;f.push({nodeId:z.target,parentPathId:U,level:M+1,sourceHandle:z.sourceHandle||void 0,sourceNodeId:E})}}});continue}else if(A.type==="outcome"){const $=this.getOutcomeNumberForNode(A.id,I||"STANDALONE",t);b=`${I||"STANDALONE"}-E${$}`}else b=`${I||"STANDALONE"}-NODE`;const R=`${E}:${b}`;if(d.has(R))continue;d.add(R);const D=c.get(E),L=D.data.pathIds||[];if(!L.includes(b)){const $=[...L,b],C=D.data.primaryPathId,z=!C||b.length<(C||"").length;c.set(E,{...D,data:{...D.data,pathId:z?b:D.data.pathId||b,primaryPathId:z?b:C||b,pathIds:$,isRoot:D.data.isRoot||!1,questionLevel:M,topic:(D.data.isRoot&&D.data.topic,D.data.topic)}})}o.pathToNodeMap.set(b,E);const N=o.nodeToPathsMap.get(E)||[];N.includes(b)||o.nodeToPathsMap.set(E,[...N,b]),A.type!=="answer"&&(i.get(E)||[]).forEach(C=>{if(c.get(C.target)){const P=A.type==="question"?M:M+1;f.push({nodeId:C.target,parentPathId:b,level:P,sourceHandle:C.sourceHandle||void 0,sourceNodeId:E})}})}return t.forEach(E=>{var A;const I=c.get(E.id);if(((A=E.data)==null?void 0:A.isRoot)===!0)return;let M=!1;if(I&&(!I.data.pathIds||I.data.pathIds.length===0)&&(M=!0),M){let b;E.type==="question"?b=`disconnected from root-Q${this.getQuestionNumberForNode(E.id,"disconnected from root",t)}`:E.type==="answer"?b=`disconnected from root-A${this.getAnswerNumberForNode(E.id,"disconnected from root",t)}`:E.type==="outcome"?b=`disconnected from root-E${this.getOutcomeNumberForNode(E.id,"disconnected from root",t)}`:b="disconnected from root-NODE";const R=`${E.id}:${b}`;if(!d.has(R)){d.add(R);const D=c.get(E.id);c.set(E.id,{...D,data:{...D.data,pathId:b,primaryPathId:b,pathIds:[b],isRoot:!1,questionLevel:1,topic:D.data.topic}}),o.pathToNodeMap.set(b,E.id),o.nodeToPathsMap.set(E.id,[b])}}}),this.pathRegistry=o,{nodes:Array.from(c.values()),registry:o}}getQuestionNumberForNode(t,n,r){var a;const o=r.find(c=>c.id===t);return n===null||((a=o==null?void 0:o.data)==null?void 0:a.isRoot)===!0?1:r.filter(c=>{var f;return c.type==="question"&&!((f=c.data)!=null&&f.isRoot)}).sort((c,f)=>c.id.localeCompare(f.id)).findIndex(c=>c.id===t)+2}getAnswerNumberForNode(t,n,r){return r.filter(l=>l.type==="answer").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getOutcomeNumberForNode(t,n,r){return r.filter(l=>l.type==="outcome").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getNextQuestionNumber(t,n){if(t===null)return 1;const r="Q-NEXT",o=this.counters.get(r)||0;return this.counters.set(r,o+1),o+1}getNextAnswerNumber(t){const n="A-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}getNextOutcomeNumber(t){const n="E-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}reset(){this.counters.clear(),this.pathRegistry={nodeToPathsMap:new Map,pathToNodeMap:new Map}}getRegistry(){return this.pathRegistry}getDisplayLabel(t,n){const r=this.parsePathId(t),o=[];switch(r.segments.forEach(s=>{s.type==="Q"&&o.push(s.number)}),n){case"question":return`Q${o.join(".")}`;case"answer":const s=r.segments.filter(i=>i.type==="A").pop();return`A${(s==null?void 0:s.number)||"?"}`;case"outcome":return`Outcome ${this.getPathLevel(t)}`;default:return t}}calculatePathScore(t,n){const r=this.parsePathIdWithVariants(t);let o=0,s=r.topic;for(let i=0;i<r.segments.length;i++){const l=r.segments[i];if(l.type==="Q")s+=`-Q${l.number}`;else if(l.type==="A")s+=`-A${l.number}`;else if(l.type==="V"&&l.number!==void 0){s+=`-V${l.number}`;const a=s.substring(0,s.lastIndexOf("-V")),c=this.getNodeForPath(a);if(c){const f=n.find(d=>d.id===c);if(f&&f.data.variants){const d=l.number-1,h=f.data.variants[d];h&&(o+=h.score||0)}}}else if(l.type==="VC"&&l.numbers){const a=`V${l.numbers.join("+V")}`;s+=`-${a}`;const c=s.substring(0,s.lastIndexOf("-V")),f=this.getNodeForPath(c);if(f){const d=n.find(h=>h.id===f);d&&d.data.variants&&l.numbers.forEach(h=>{const p=d.data.variants[h];p&&(o+=p.score||0)})}}else l.type==="E"&&l.number!==void 0&&(s+=`-E${l.number}`)}return o}getHumanReadablePath(t,n){const r=this.parsePathIdWithVariants(t),o=[];let s="";return r.segments.forEach((i,l)=>{if(i.type==="Q"&&i.number!==void 0){s=l===0?`${r.topic}-Q${i.number}`:s+`-Q${i.number}`;const a=this.getNodeForPath(s),c=n.find(f=>f.id===a);c&&o.push(`Q${i.number}: ${c.data.questionText||"Question"}`)}else if(i.type==="A"&&i.number!==void 0)s+=`-A${i.number}`,o.push(`Answer ${i.number}`);else if(i.type==="V"&&i.number!==void 0){const a=s;s+=`-V${i.number}`;const c=this.getNodeForPath(a),f=n.find(d=>d.id===c);if(f&&f.data.variants){const d=f.data.variants[i.number-1];d&&o.push(`→ "${d.text}"`)}}else if(i.type==="VC"&&i.numbers){const a=s,c=`V${i.numbers.join("+V")}`;s+=`-${c}`;const f=this.getNodeForPath(a),d=n.find(h=>h.id===f);if(d&&d.data.variants){const h=i.numbers.map(p=>{var w;return(w=d.data.variants[p])==null?void 0:w.text}).filter(Boolean);h.length>0&&o.push(`→ [${h.join(" + ")}]`)}}else i.type==="E"&&i.number!==void 0&&(s+=`-E${i.number}`,o.push(`Outcome ${i.number}`))}),o.join(" ")}printPathStructure(t){console.log("=== Path Structure Debug ==="),t.forEach(n=>{n.data.pathIds?(console.log(`Node ${n.id} (${n.type}):`),console.log(`  Primary: ${n.data.pathId||n.data.primaryPathId}`),console.log(`  All paths: ${n.data.pathIds.join(", ")}`)):n.data.pathId&&console.log(`Node ${n.id} (${n.type}): ${n.data.pathId}`)}),console.log("=== Counters ==="),this.counters.forEach((n,r)=>{console.log(`${r}: ${n}`)})}};Fn(vr,"instance");let qt=vr;const Re=DE()(KE((e,t)=>{let n=null;const r=()=>{n&&clearTimeout(n),n=setTimeout(()=>{console.log("🔄 Auto-triggering path propagation after structural changes"),t().propagatePathToAll(),n=null},100)};return{nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,selectedNodeIds:[],copiedNodeIds:[],clipboard:{nodes:[],edges:[]},focusNodeId:null,pathDisplaysFolded:!1,combinationSectionsFolded:!1,history:[{nodes:[],edges:[]}],historyIndex:0,addNode:o=>{t().saveToHistory(),e(s=>{s.nodes.push(o)}),r()},updateNode:(o,s)=>e(i=>{const l=i.nodes.findIndex(a=>a.id===o);l!==-1&&(i.nodes[l].data={...i.nodes[l].data,...s})}),updateNodePosition:(o,s)=>e(i=>{const l=i.nodes.findIndex(a=>a.id===o);l!==-1&&(i.nodes[l].position=s)}),deleteNode:o=>{t().saveToHistory(),e(s=>{s.nodes=s.nodes.filter(l=>l.id!==o);const i=s.edges.filter(l=>l.source===o||l.target===o);s.edges=s.edges.filter(l=>l.source!==o&&l.target!==o),s.selectedNodeId===o&&(s.selectedNodeId=null),i.length>0&&console.log(`Cleaned up ${i.length} edges for deleted node ${o}`)}),r()},deleteNodes:o=>{t().saveToHistory(),e(s=>{s.nodes=s.nodes.filter(l=>!o.includes(l.id));const i=s.edges.filter(l=>o.includes(l.source)||o.includes(l.target));s.edges=s.edges.filter(l=>!o.includes(l.source)&&!o.includes(l.target)),o.includes(s.selectedNodeId||"")&&(s.selectedNodeId=null),s.selectedNodeIds=s.selectedNodeIds.filter(l=>!o.includes(l)),i.length>0&&console.log(`Cleaned up ${i.length} edges for ${o.length} deleted nodes`)}),r()},addEdge:o=>{t().saveToHistory(),e(s=>{s.edges.some(l=>l.source===o.source&&l.target===o.target&&l.sourceHandle===o.sourceHandle&&l.targetHandle===o.targetHandle)||(s.edges.push(o),console.log(`Added edge: ${o.source} -> ${o.target} (handle: ${o.sourceHandle})`))}),r()},deleteEdge:o=>{t().saveToHistory(),e(s=>{const i=s.edges.find(l=>l.id===o);if(i){console.log(`🗑️ Deleting edge: ${i.source} -> ${i.target}`);const l=s.nodes.findIndex(a=>a.id===i.target);if(l!==-1){const a=s.nodes[l];s.nodes[l].data={...a.data,pathId:`disconnected from root-${a.id}`,pathIds:[`disconnected from root-${a.id}`]},console.log(`🗑️ Marked target node ${i.target} as disconnected from root`)}}s.edges=s.edges.filter(l=>l.id!==o)}),r()},setNodes:o=>e(s=>{s.nodes=o}),setEdges:o=>e(s=>{s.edges=o}),setSelectedNodeId:o=>e(s=>{s.selectedNodeId=o,s.selectedEdgeId=null,o?s.selectedNodeIds=[o]:s.selectedNodeIds=[]}),setSelectedEdgeId:o=>e(s=>{s.selectedEdgeId=o,s.selectedNodeId=null}),setSelectedNodeIds:o=>e(s=>{s.selectedNodeIds=o}),addToSelection:o=>e(s=>{s.selectedNodeIds.includes(o)||s.selectedNodeIds.push(o)}),removeFromSelection:o=>e(s=>{s.selectedNodeIds=s.selectedNodeIds.filter(i=>i!==o)}),clearSelection:()=>e(o=>{o.selectedNodeId=null,o.selectedEdgeId=null,o.selectedNodeIds=[]}),markNodesAsCopied:o=>e(s=>{console.log("🟢 markNodesAsCopied() called with:",o);const i=o.filter(a=>s.copiedNodeIds.includes(a)),l=o.filter(a=>!s.copiedNodeIds.includes(a));i.length>0&&console.log("🟡 Some nodes already pulsing:",i),l.length>0?(console.log("🟢 Setting copiedNodeIds to:",[...s.copiedNodeIds,...l]),s.copiedNodeIds=[...s.copiedNodeIds,...l],setTimeout(()=>{console.log("🕒 Auto-clearing copiedNodeIds after 1 second for nodes:",l),e(a=>{a.copiedNodeIds=a.copiedNodeIds.filter(c=>!l.includes(c)),console.log("🕒 copiedNodeIds after clearing:",a.copiedNodeIds)})},1e3)):console.log("🟡 All nodes already pulsing, skipping")}),clearCopiedNodes:()=>e(o=>{o.copiedNodeIds=[]}),copySelectedNodes:()=>e(o=>{console.log("🔄 copySelectedNodes() called - selectedNodeIds:",o.selectedNodeIds);const s=o.nodes.filter(l=>o.selectedNodeIds.includes(l.id)),i=o.edges.filter(l=>o.selectedNodeIds.includes(l.source)&&o.selectedNodeIds.includes(l.target));console.log("🔄 copySelectedNodes() - filtered nodes:",s.length,"edges:",i.length),o.clipboard.nodes=s,o.clipboard.edges=i,console.log(`📋 CLIPBOARD OVERWRITTEN by copySelectedNodes() - ${s.length} nodes and ${i.length} edges to clipboard.`)}),pasteNodes:o=>e(s=>{if(s.clipboard.nodes.length===0){console.log("Clipboard is empty, nothing to paste.");return}const i=[],l=[],a=new Map,c=s.clipboard.nodes,f=Math.min(...c.map(y=>y.position.x)),d=Math.max(...c.map(y=>y.position.x)),h=Math.min(...c.map(y=>y.position.y)),p=Math.max(...c.map(y=>y.position.y)),w=(f+d)/2,x=(h+p)/2,S=(o==null?void 0:o.x)||0,m=(o==null?void 0:o.y)||0,g=S-w,v=m-x;console.log(`📍 Centering ${c.length} nodes at (${S}, ${m})`),console.log(`📐 Clipboard bounds: (${f}, ${h}) to (${d}, ${p}), center: (${w}, ${x})`),console.log(`🎯 Applying offset: (${g}, ${v})`),s.clipboard.nodes.forEach(y=>{const _=`pasted-${y.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.set(y.id,_);const E={...y,id:_,position:{x:y.position.x+g,y:y.position.y+v},data:{...y.data,pathId:y.data.pathId?`${y.data.pathId}-copy`:void 0,topic:y.data.topic?`${y.data.topic}-copy`:y.data.topic,isRoot:!1}};i.push(E)}),s.clipboard.edges.forEach(y=>{const _=a.get(y.source),E=a.get(y.target);if(_&&E){const I=`pasted-${y.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,M={...y,id:I,source:_,target:E,sourceHandle:y.sourceHandle,targetHandle:y.targetHandle,animated:!0};l.push(M)}}),s.nodes.push(...i),s.edges.push(...l),console.log(`Pasted ${i.length} nodes and ${l.length} edges. Original selection preserved.`),r()}),focusOnNode:o=>{e({focusNodeId:o})},clearFocusNode:()=>{e({focusNodeId:null})},togglePathDisplays:()=>{e(o=>({pathDisplaysFolded:!o.pathDisplaysFolded}))},toggleCombinationSections:()=>{e(o=>({combinationSectionsFolded:!o.combinationSectionsFolded}))},toggleAllMeta:()=>{e(o=>{const s=!o.pathDisplaysFolded||!o.combinationSectionsFolded;return{pathDisplaysFolded:s,combinationSectionsFolded:s}})},canUndo:()=>t().historyIndex>0,canRedo:()=>{const o=t();return o.historyIndex<o.history.length-1},cleanupDuplicateEdges:()=>e(o=>{const s=[],i=new Set;o.edges.forEach(a=>{const c=`${a.source}-${a.target}-${a.sourceHandle||""}-${a.targetHandle||""}`;i.has(c)||(i.add(c),s.push(a))});const l=o.edges.length-s.length;o.edges=s,l>0&&console.log(`Removed ${l} duplicate edges`)}),recalculateFlowIds:(o,s)=>e(i=>{var x;const l=qt.getInstance(),a=i.nodes.find(S=>S.id===o);if(!a||!((x=a.data)!=null&&x.isRoot)){console.log(`Root node ${o} not found or is not a root node`);return}const c=i.nodes.findIndex(S=>S.id===o);c!==-1&&(i.nodes[c]={...i.nodes[c],data:{...i.nodes[c].data,topic:s}});const f=new Set,d=[o];for(f.add(o);d.length>0;){const S=d.shift();i.edges.filter(g=>g.source===S).forEach(g=>{f.has(g.target)||(f.add(g.target),d.push(g.target))})}const h=i.nodes.filter(S=>f.has(S.id)),p=i.edges.filter(S=>f.has(S.source)&&f.has(S.target));console.log(`Recalculating ${h.length} nodes for root "${o}" with topic "${s}"`);const w=l.recalculatePathIds(h,p,s);w.nodes.forEach(S=>{const m=i.nodes.findIndex(g=>g.id===S.id);m!==-1&&(i.nodes[m]=S)}),console.log(`Recalculated path IDs for topic: ${s} (${w.nodes.length} nodes updated)`)}),propagateTopicOnConnection:(o,s)=>e(i=>{var h,p;const l=i.nodes.find(w=>w.id===o),a=i.nodes.find(w=>w.id===s);if(!l||!a)return;if((h=a.data)!=null&&h.isRoot){console.log(`Target node ${s} is a root node - preserving its dedicated topic "${a.data.topic}"`);return}const c=(w,x=new Set)=>{var g,v,y;if(x.has(w))return null;x.add(w);const S=i.nodes.find(_=>_.id===w);if(!S)return null;if((g=S.data)!=null&&g.topic&&((v=S.data)!=null&&v.isRoot)||(y=S.data)!=null&&y.topic)return S.data.topic;const m=i.edges.find(_=>_.target===w);return m?c(m.source,x):null},f=c(o),d=c(s);if(d&&f&&d!==f){console.log(`Cross-topic connection: ${f} -> ${d} (preserving target topic)`);return}if(f&&(!((p=a.data)!=null&&p.topic)||a.data.topic!==f)){const w=i.nodes.findIndex(x=>x.id===s);w!==-1&&(i.nodes[w].data={...i.nodes[w].data,topic:f},console.log(`Propagated topic "${f}" to node ${s}`))}}),propagatePathIdOnConnection:(o,s,i)=>e(l=>{var w,x,S,m,g,v,y,_,E,I,M,A;const a=l.nodes.find(b=>b.id===o),c=l.nodes.find(b=>b.id===s);if(!a||!c)return;const f=qt.getInstance();let d=[];if(((w=a.data)==null?void 0:w.answerType)==="multiple"&&(i!=null&&i.startsWith("variant-"))){const b=(x=a.data)==null?void 0:x.pathId;if(b&&!b.startsWith("disconnected from root-")){const D=`V${parseInt(i.replace("variant-",""))+1}`,L=`${b}-${D}`;d=[L],console.log(`Generated variant path for Multiple answer: ${L} from base ${b}`)}else{console.log(`Source node ${o} has invalid base path for Multiple variant connection`);return}}else if(((S=a.data)==null?void 0:S.answerType)==="combinations"&&(i!=null&&i.startsWith("combination-"))){const b=(m=a.data)==null?void 0:m.pathId;if(console.log(`🔍 Combination path propagation - Base path: ${b}, Source handle: ${i}`),b&&!b.startsWith("disconnected from root-")){const R=i.replace("combination-","");console.log(`🔍 Extracted combination ID: ${R}`);const D=((g=a.data)==null?void 0:g.combinations)||[];console.log("🔍 Available combinations:",D.map(N=>({id:N.id,variantIndices:N.variantIndices})));const L=D.find(N=>N.id===R);if(console.log("🔍 Found combination:",L),L&&L.variantIndices){const N=L.variantIndices.map(C=>`V${C}`).join("+"),$=`${b}-${N}`;d=[$],console.log(`✅ Generated combination path for Combinations answer: ${$} from base ${b}`)}else{console.log(`❌ Could not find combination data for ${R} or missing variantIndices`),console.log("❌ Combination found:",L);return}}else{console.log(`❌ Source node ${o} has invalid base path for Combinations connection: ${b}`);return}}else d=((v=a.data)==null?void 0:v.pathIds)||[(y=a.data)==null?void 0:y.pathId].filter(Boolean);if(d.length===0){console.log(`Source node ${o} has no valid path IDs for propagation`);return}const h=[];d.forEach(b=>{let R;if(c.type==="question"){const D=f.getQuestionNumberForNode(s,b,l.nodes);R=`${b}-Q${D}`}else if(c.type==="answer"){const D=f.getAnswerNumberForNode(s,b,l.nodes);R=`${b}-A${D}`}else if(c.type==="outcome"){const D=f.getOutcomeNumberForNode(s,b,l.nodes);R=`${b}-E${D}`}else R=`${b}-NODE`;h.push(R)});const p=l.nodes.findIndex(b=>b.id===s);if(p!==-1){const R=[...((_=l.nodes[p].data)==null?void 0:_.pathIds)||[(E=l.nodes[p].data)==null?void 0:E.pathId].filter(Boolean)];h.forEach(N=>{R.includes(N)||R.push(N)}),l.nodes[p].data={...l.nodes[p].data,pathId:R[0]||((I=l.nodes[p].data)==null?void 0:I.pathId),pathIds:R},console.log(`Updated ${c.type} node ${s} with ${h.length} new path IDs via handle "${i}". Total paths: ${R.length}`),console.log(`All path IDs for node ${s}:`,R);const D=(M=a.data)==null?void 0:M.topic,L=(A=c.data)==null?void 0:A.topic;D&&L&&D!==L&&console.log(`Cross-topic connection detected: ${D} -> ${L} for node ${s}`)}}),createLinkedQuestion:(o,s)=>e(i=>{var _,E,I,M,A,b,R;const l=i.nodes.find(D=>D.id===o);if(!l)return;const a=qt.getInstance(),c=a.getNextQuestionNumber(((_=l.data)==null?void 0:_.pathId)||null),f=((E=l.data)==null?void 0:E.topic)||"NEW-TOPIC",d=(I=l.data)!=null&&I.pathId?{nodeId:l.id,pathId:l.data.pathId,parentPathId:null,level:((M=l.data)==null?void 0:M.questionLevel)||1,topic:f}:null,h=a.generateQuestionPathId(d,c,f),p=`q-${Date.now()}`,w={id:p,type:"question",position:s,data:{pathId:h,topic:f,questionText:"New Question",questionLevel:(((A=l.data)==null?void 0:A.questionLevel)||1)+1,elementId:"NEW",subElementId:"NEW"}},x=a.getNextAnswerNumber(h),S={nodeId:p,pathId:h,parentPathId:((b=l.data)==null?void 0:b.pathId)||null,level:(((R=l.data)==null?void 0:R.questionLevel)||1)+1,topic:f},m=a.generateAnswerPathId(S,x),g=`a-${Date.now()}`,v={id:g,type:"answer",position:{x:s.x,y:s.y+120},data:{pathId:m,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},y={id:a.generateEdgeId(p,g),source:p,target:g,animated:!0};i.nodes.push(w,v),i.edges.push(y),r()}),importFromExcel:o=>e(s=>{s.nodes=o.nodes,s.edges=o.edges,r()}),additiveImport:(o,s)=>e(i=>{i.nodes.push(...o),i.edges.push(...s),r()}),exportToFormat:o=>{const{nodes:s,edges:i}=t();return o==="json"?{nodes:s,edges:i}:null},validateTopicUniqueness:(o,s)=>t().nodes.filter(l=>{var a;return((a=l.data)==null?void 0:a.topic)===o&&l.id!==s}).length===0,generateUniqueTopicName:(o,s)=>{let i=o||"New Topic",l=1;for(;!t().validateTopicUniqueness(i,s);)i=`${o} ${l++}`;return i},clearFlow:()=>e(o=>{o.nodes=[],o.edges=[],o.selectedNodeId=null,o.focusNodeId=null,o.history=[{nodes:[],edges:[]}],o.historyIndex=0,qt.getInstance().reset()}),saveToHistory:()=>e(o=>{const s={nodes:JSON.parse(JSON.stringify(o.nodes)),edges:JSON.parse(JSON.stringify(o.edges))};o.history=o.history.slice(0,o.historyIndex+1),o.history.push(s),o.historyIndex=o.history.length-1,o.history.length>50&&(o.history.shift(),o.historyIndex=o.history.length-1)}),undo:()=>e(o=>{if(o.historyIndex>0){o.historyIndex--;const s=o.history[o.historyIndex];o.nodes=JSON.parse(JSON.stringify(s.nodes)),o.edges=JSON.parse(JSON.stringify(s.edges)),console.log("Undo: Restored state from history index",o.historyIndex),r()}}),redo:()=>e(o=>{if(o.historyIndex<o.history.length-1){o.historyIndex++;const s=o.history[o.historyIndex];o.nodes=JSON.parse(JSON.stringify(s.nodes)),o.edges=JSON.parse(JSON.stringify(s.edges)),console.log("Redo: Restored state from history index",o.historyIndex),r()}}),propagatePathToAll:()=>{n&&(clearTimeout(n),n=null),t().saveToHistory(),e(o=>{const s=o.nodes.filter(l=>{var a,c;return((a=l.data)==null?void 0:a.isRoot)&&((c=l.data)==null?void 0:c.topic)});if(s.length===0){console.log("No root nodes with topics found");return}console.log(`Found ${s.length} root nodes with topics`);const i=qt.getInstance();if(i.reset(),s.length===1){const l=s[0].data.topic;console.log(`Recalculating path IDs for single topic "${l}"`);const a=i.recalculatePathIds(o.nodes,o.edges,l);o.nodes=a.nodes,console.log(`Recalculated path IDs for topic "${l}"`)}else{console.log("Multiple root nodes detected - processing all nodes together to preserve individual topics and handle cross-connections");const l=i.recalculatePathIds(o.nodes,o.edges,"MULTI-ROOT");o.nodes=l.nodes,console.log(`Processed ${s.length} roots with cross-connection support`),console.log(`Processed ${s.length} roots with individual topic preservation`)}console.log("Path ID propagation completed - all nodes now have updated path IDs")})}}})),g0=["shift","alt","meta","mod","ctrl","control"],GE={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function lr(e){return(GE[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function y0(e){return g0.includes(e)}function Ca(e,t=","){return e.toLowerCase().split(t)}function Ia(e,t="+",n=">",r=!1,o){let s=[],i=!1;e.includes(n)?(i=!0,s=e.toLocaleLowerCase().split(n).map(c=>lr(c))):s=e.toLocaleLowerCase().split(t).map(c=>lr(c));const l={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:r},a=s.filter(c=>!g0.includes(c));return{...l,keys:a,description:o,isSequence:i}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&x0([lr(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&v0([lr(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Tn.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Tn.clear()},0)}));const Tn=new Set;function od(e){return Array.isArray(e)}function ZE(e,t=","){return(od(e)?e:e.split(t)).every(n=>Tn.has(n.trim().toLowerCase()))}function x0(e){const t=Array.isArray(e)?e:[e];Tn.has("meta")&&Tn.forEach(n=>!y0(n)&&Tn.delete(n.toLowerCase())),t.forEach(n=>Tn.add(n.toLowerCase()))}function v0(e){const t=Array.isArray(e)?e:[e];e==="meta"?Tn.clear():t.forEach(n=>Tn.delete(n.toLowerCase()))}function JE(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function eb(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function tb(e){return w0(e,["input","textarea","select"])}function w0(e,t=!1){const{target:n,composed:r}=e;let o;return nb(n)&&r?o=e.composedPath()[0]&&e.composedPath()[0].tagName:o=n&&n.tagName,od(t)?!!(o&&t&&t.some(s=>s.toLowerCase()===o.toLowerCase())):!!(o&&t&&t)}function nb(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function rb(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(n=>t.includes(n))||e.includes("*"):!0}const ob=(e,t,n=!1)=>{const{alt:r,meta:o,mod:s,shift:i,ctrl:l,keys:a,useKey:c}=t,{code:f,key:d,ctrlKey:h,metaKey:p,shiftKey:w,altKey:x}=e,S=lr(f);if(c&&(a==null?void 0:a.length)===1&&a.includes(d))return!0;if(!(a!=null&&a.includes(S))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(S))return!1;if(!n){if(r!==x&&S!=="alt"||i!==w&&S!=="shift")return!1;if(s){if(!p&&!h)return!1}else if(o!==p&&S!=="meta"&&S!=="os"||l!==h&&S!=="ctrl"&&S!=="control")return!1}return a&&a.length===1&&a.includes(S)?!0:a?ZE(a):!a},sb=j.createContext(void 0),ib=()=>j.useContext(sb);function N0(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((n,r)=>n&&N0(e[r],t[r]),!0):e===t}const lb=j.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),ab=()=>j.useContext(lb);function cb(e){const t=j.useRef(void 0);return N0(t.current,e)||(t.current=e),t.current}const pp=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},ub=typeof window<"u"?j.useLayoutEffect:j.useEffect;function hr(e,t,n,r){const o=j.useRef(null),s=j.useRef(!1),i=n instanceof Array?r instanceof Array?void 0:r:n,l=od(e)?e.join(i==null?void 0:i.delimiter):e,a=n instanceof Array?n:r instanceof Array?r:void 0,c=j.useCallback(t,a??[]),f=j.useRef(c);a?f.current=c:f.current=t;const d=cb(i),{activeScopes:h}=ab(),p=ib();return ub(()=>{if((d==null?void 0:d.enabled)===!1||!rb(h,d==null?void 0:d.scopes))return;let w=[],x;const S=(y,_=!1)=>{var E;if(!(tb(y)&&!w0(y,d==null?void 0:d.enableOnFormTags))){if(o.current!==null){const I=o.current.getRootNode();if((I instanceof Document||I instanceof ShadowRoot)&&I.activeElement!==o.current&&!o.current.contains(I.activeElement)){pp(y);return}}(E=y.target)!=null&&E.isContentEditable&&!(d!=null&&d.enableOnContentEditable)||Ca(l,d==null?void 0:d.delimiter).forEach(I=>{var M,A,b,R;if(I.includes((d==null?void 0:d.splitKey)??"+")&&I.includes((d==null?void 0:d.sequenceSplitKey)??">")){console.warn(`Hotkey ${I} contains both ${(d==null?void 0:d.splitKey)??"+"} and ${(d==null?void 0:d.sequenceSplitKey)??">"} which is not supported.`);return}const D=Ia(I,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description);if(D.isSequence){x=setTimeout(()=>{w=[]},(d==null?void 0:d.sequenceTimeoutMs)??1e3);const L=D.useKey?y.key:lr(y.code);if(y0(L.toLowerCase()))return;w.push(L);const N=(M=D.keys)==null?void 0:M[w.length-1];if(L!==N){w=[],x&&clearTimeout(x);return}w.length===((A=D.keys)==null?void 0:A.length)&&(f.current(y,D),x&&clearTimeout(x),w=[])}else if(ob(y,D,d==null?void 0:d.ignoreModifiers)||(b=D.keys)!=null&&b.includes("*")){if((R=d==null?void 0:d.ignoreEventWhen)!=null&&R.call(d,y)||_&&s.current)return;if(JE(y,D,d==null?void 0:d.preventDefault),!eb(y,D,d==null?void 0:d.enabled)){pp(y);return}f.current(y,D),_||(s.current=!0)}})}},m=y=>{y.code!==void 0&&(x0(lr(y.code)),((d==null?void 0:d.keydown)===void 0&&(d==null?void 0:d.keyup)!==!0||d!=null&&d.keydown)&&S(y))},g=y=>{y.code!==void 0&&(v0(lr(y.code)),s.current=!1,d!=null&&d.keyup&&S(y,!0))},v=o.current||(i==null?void 0:i.document)||document;return v.addEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),v.addEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),p&&Ca(l,d==null?void 0:d.delimiter).forEach(y=>p.addHotkey(Ia(y,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),()=>{v.removeEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),v.removeEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),p&&Ca(l,d==null?void 0:d.delimiter).forEach(y=>p.removeHotkey(Ia(y,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),w=[],x&&clearTimeout(x)}},[l,d,h]),o}function db(){const e=Fs();hr("tab",t=>{t.preventDefault();const{selectedNodeId:n,nodes:r,createLinkedQuestion:o}=Re.getState();if(n){const s=r.find(i=>i.id===n);if(s){const i={x:s.position.x+300,y:s.position.y};o(n,i)}}},{enableOnFormTags:!1}),hr("delete, backspace",()=>{const{selectedEdgeId:t,selectedNodeIds:n,selectedNodeId:r,deleteNode:o,deleteNodes:s,deleteEdge:i}=Re.getState();t?i(t):n.length>0?s(n):r&&o(r)},{enableOnFormTags:!1}),hr("ctrl+c, cmd+c",t=>{t.preventDefault();const{selectedNodeIds:n,copySelectedNodes:r}=Re.getState();console.log("Copy shortcut pressed, selectedNodeIds:",n),n.length>0?(r(),console.log(`✅ Copied ${n.length} node(s) to clipboard`)):console.log("⚠️ No nodes selected for copying")},{enableOnFormTags:!1}),hr("ctrl+v, cmd+v",t=>{t.preventDefault();const{clipboard:n,pasteNodes:r}=Re.getState();if(console.log("Paste shortcut pressed"),console.log("📋 Clipboard contents:",n),console.log("📋 Clipboard nodes count:",n.nodes.length),console.log("📋 Clipboard edges count:",n.edges.length),n.nodes.length>0){const o=e.getViewport(),s=(-o.x+window.innerWidth/2)/o.zoom,i=(-o.y+window.innerHeight/2)/o.zoom;console.log(`📍 Pasting at viewport center: (${s}, ${i})`),r({x:s,y:i}),console.log(`✅ Pasted ${n.nodes.length} node(s) from clipboard at viewport center`)}else console.log("⚠️ Clipboard is empty - nothing to paste"),console.log("⚠️ Full clipboard object:",JSON.stringify(n,null,2))},{enableOnFormTags:!1}),hr("ctrl+z, cmd+z",t=>{t.preventDefault();const{undo:n}=Re.getState();n()},{enableOnFormTags:!1}),hr("ctrl+y, cmd+shift+z",t=>{t.preventDefault();const{redo:n}=Re.getState();n()},{enableOnFormTags:!1}),hr("escape",()=>{const{setSelectedNodeId:t,setSelectedEdgeId:n,clearSelection:r}=Re.getState();t(null),n(null),r()},{enableOnFormTags:!1})}/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S0=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},a)=>j.createElement("svg",{ref:a,...pb,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:S0("lucide",o),...l},[...i.map(([c,f])=>j.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(e,t)=>{const n=j.forwardRef(({className:r,...o},s)=>j.createElement(hb,{ref:s,iconNode:t,className:S0(`lucide-${fb(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=Ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=Ve("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Ve("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Ve("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Ve("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Ve("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Ve("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Ve("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Ve("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=Ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Cb({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,recalculateFlowIds:s,propagateTopicOnConnection:i,propagatePathIdOnConnection:l,focusOnNode:a,edges:c,pathDisplaysFolded:f,nodes:d}=Re(),[h,p]=j.useState(null),[w,x]=j.useState(null),S=h!==null?h:f,m=R=>R.trim()?d.filter(L=>{var N;return((N=L.data)==null?void 0:N.isRoot)&&L.id!==e&&L.data.topic===R.trim()}).length===0:!1,g=R=>{const D=[],L=d.filter($=>{var C;return((C=$.data)==null?void 0:C.isRoot)&&$.id!==e}).map($=>$.data.topic).filter($=>$);for(let $=1;$<=5;$++){const C=`${R}-${$}`;L.includes(C)||D.push(C)}return["NEW","ALT","BRANCH","FLOW","PATH"].forEach($=>{const C=`${$}-${R}`;!L.includes(C)&&D.length<8&&D.push(C)}),D.slice(0,5)},v=()=>{r(e)},y=R=>{const D=R.target;if(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.closest("input")||D.closest("textarea"))return;const L=c.find(N=>N.source===e);L&&a(L.target)},_=R=>{o(e,{questionText:R.target.value})},E=R=>{const D=R.target.value;if(x(null),o(e,{topic:D}),t.isRoot&&D.trim()&&!m(D)){x(`Topic "${D}" already exists. Please choose a different name.`);return}t.isRoot&&D.trim()&&s(e,D)},I=R=>{if(!R.target.value.trim()&&t.isRoot){const L=d.filter(C=>{var z;return((z=C.data)==null?void 0:z.isRoot)&&C.id!==e}).map(C=>C.data.topic).filter(C=>C);let N=1,$=`TOPIC-${N}`;for(;L.includes($);)N++,$=`TOPIC-${N}`;o(e,{topic:$}),s(e,$),x(null)}},M=R=>{o(e,{topic:R}),x(null),t.isRoot&&s(e,R)},A=R=>{R.stopPropagation()},b=()=>{if(t.isRoot&&w){console.log("Cannot create connection: Topic validation failed. Please fix the topic first.");return}const{nodes:R,addNode:D,addEdge:L,edges:N}=Re.getState();if(N.find(T=>T.source===e)){console.log("This question already has a connection. Only one outgoing connection is allowed.");return}const C=R.find(T=>T.id===e);if(!C)return;const z=`answer-${Date.now()}`,P={id:z,type:"answer",position:{x:C.position.x+150,y:C.position.y+150},data:{pathId:"path-id-will-be-generated",pathIds:[],answerType:"single",topic:t.topic,variants:[{id:`var-${Date.now()}`,text:"Answer option",score:0}]}};D(P);const k={id:`edge-${e}-${z}`,source:e,target:z,sourceHandle:null,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};L(k),i(e,z),l(e,z)};return u.jsxs("div",{className:`
        bg-white rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-blue-500 shadow-xl ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:v,onDoubleClick:y,children:[!t.isRoot&&u.jsx(cn,{type:"target",position:me.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:t.isRoot?"Root Question":"Question"})]}),u.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Level ",t.questionLevel]})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),S?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}),!S&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((R,D)=>u.jsx("div",{className:"text-xs pl-2",children:R},D))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathIds[0]}),S?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathId}),S?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]})}),t.isRoot&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Topic"}),u.jsxs("div",{onClick:A,onMouseDown:A,children:[u.jsx("input",{type:"text",value:t.topic||"",onChange:E,onBlur:I,className:`w-full p-2 border rounded text-sm font-semibold focus:outline-none focus:ring-2 focus:border-transparent ${w?"border-red-300 focus:ring-red-500":"border-gray-200 focus:ring-blue-500"}`,placeholder:"Enter topic...",onFocus:A,onKeyDown:A}),w&&u.jsxs("div",{className:"mt-1 space-y-2",children:[u.jsx("p",{className:"text-xs text-red-600",children:w}),t.topic&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Suggestions:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:g(t.topic).map((R,D)=>u.jsx("button",{onClick:()=>M(R),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:R},D))})]})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Question"}),u.jsx("div",{onClick:A,onMouseDown:A,children:u.jsx("textarea",{value:t.questionText,onChange:_,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:3,placeholder:"Enter your question here...",onFocus:A,onKeyDown:A})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.elementId}),u.jsx("span",{className:"text-gray-400",children:"|"}),u.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.subElementId})]})]}),u.jsx(cn,{type:"source",position:me.Bottom,className:"w-3 h-3 bg-green-500 border-2 border-white cursor-pointer hover:bg-green-600 transition-colors",style:{background:"#22c55e"},onClick:R=>{R.stopPropagation(),b()}})]})}const Ib=({onClick:e,hasInfo:t,className:n=""})=>u.jsx("button",{onClick:e,className:`
        w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold
        transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-300
        ${t?"bg-blue-500 text-white shadow-sm hover:bg-blue-600":"bg-gray-300 text-gray-600 hover:bg-gray-400 hover:text-gray-700"}
        ${n}
      `,title:t?"Has additional info - click to edit":"Add additional info",type:"button",children:"i"}),jb=({isOpen:e,onClose:t,onSave:n,currentInfo:r,variantText:o})=>{const[s,i]=j.useState(r),[l,a]=j.useState(o);j.useEffect(()=>{i(r),a(o)},[r,o,e]);const c=()=>{n(l,s),t()},f=d=>{d.key==="Escape"?t():d.key==="Enter"&&(d.ctrlKey||d.metaKey)&&c()};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",onKeyDown:f,children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),u.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",title:"Close",children:u.jsx(sd,{size:20,className:"text-gray-500"})})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Answer Variant:"}),u.jsx("textarea",{value:l,onChange:d=>a(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter answer variant text...",style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word"}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Additional Information:"}),u.jsx("textarea",{value:s,onChange:d=>i(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter additional information that will be stored with this answer variant...",autoFocus:!0})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"This information will be saved with the answer variant but won't be displayed as part of the answer text."})]}),u.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),u.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save"})]})]})}):null};function Tb({id:e,data:t,selected:n}){var J,be,Ne;const{setSelectedNodeId:r,updateNode:o,nodes:s,edges:i,addNode:l,addEdge:a,propagateTopicOnConnection:c,focusOnNode:f,pathDisplaysFolded:d,combinationSectionsFolded:h}=Re(),[p,w]=j.useState(t.answerType||"single"),[x,S]=j.useState(null),[m,g]=j.useState(null),v=x!==null?x:d,y=m!==null?m:h,[_,E]=j.useState({isOpen:!1,variantId:null}),I=B=>{B.style.height="auto",B.style.height=B.scrollHeight+"px"};j.useEffect(()=>{(()=>{setTimeout(()=>{document.querySelectorAll(`[data-node-id="${e}"] textarea`).forEach(ee=>{ee instanceof HTMLTextAreaElement&&I(ee)})},10)})()},[t.variants,e]),j.useEffect(()=>{w(t.answerType||"single")},[t.answerType]);const M=()=>{r(e)},A=B=>{if(p!=="single")return;const oe=B.target;if(oe.tagName==="INPUT"||oe.tagName==="TEXTAREA"||oe.closest("input")||oe.closest("textarea")||oe.closest("button"))return;const ee=i.find(re=>re.source===e&&re.sourceHandle==="default");ee&&f(ee.target)},b=(B,oe)=>{if(p!=="multiple")return;const ee=oe.target;if(ee.tagName==="INPUT"||ee.tagName==="TEXTAREA"||ee.closest("input")||ee.closest("textarea")||ee.closest("button"))return;const re=`variant-${B}`,we=i.find(ae=>ae.source===e&&ae.sourceHandle===re);we&&f(we.target)},R=(B,oe)=>{if(p!=="combinations")return;const ee=oe.target;if(ee.tagName==="INPUT"||ee.tagName==="TEXTAREA"||ee.closest("input")||ee.closest("textarea")||ee.closest("button"))return;const re=`combination-${B}`,we=i.find(ae=>ae.source===e&&ae.sourceHandle===re);we&&f(we.target)},D=B=>{const{edges:oe}=Re.getState();if(oe.find(Q=>Q.source===e&&Q.sourceHandle===(B||"default"))){console.log("This answer variant already has a connection. Only one connection per variant is allowed.");return}const re=s.find(Q=>Q.id===e);if(!re)return;let we=t.topic;if(!we){const Q=ge=>{var G;const H=s.find(te=>te.id===ge);if(!H)return"Topic";if((G=H.data)!=null&&G.topic)return H.data.topic;const W=Re.getState().edges.find(te=>te.target===ge);return W?Q(W.source):"Topic"};we=Q(e)}const ae=`question-${Date.now()}`,Le={id:ae,type:"question",position:{x:B==="default"?re.position.x:re.position.x+200,y:re.position.y+200},data:{pathId:"path-id-will-be-generated",topic:we,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(Le);const X={id:`edge-${e}-${ae}`,source:e,target:ae,sourceHandle:B||"default",targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(X),c(e,ae)},L=()=>{const B={id:`var-${Date.now()}`,text:"New Answer",score:0},ee=[...t.variants||[],B];if(p==="combinations"){const re=k(ee);o(e,{variants:ee,combinations:re}),console.log(`🔄 Regenerated ${re.length} combinations after adding variant`)}else o(e,{variants:ee})},N=(B,oe)=>{const re=(t.variants||[]).map(we=>we.id===B?{...we,...oe}:we);if(p==="combinations"&&oe.text!==void 0){const we=k(re);o(e,{variants:re,combinations:we}),console.log(`🔄 Regenerated ${we.length} combinations after updating variant text`)}else o(e,{variants:re})},$=B=>{E({isOpen:!0,variantId:B})},C=()=>{E({isOpen:!1,variantId:null})},z=(B,oe)=>{_.variantId&&N(_.variantId,{text:B,additionalInfo:oe}),C()},P=B=>{const oe=t.variants||[];if(oe.length>1){const ee=oe.filter(re=>re.id!==B);if(p==="combinations"){const re=ee.length>=2?k(ee):[];o(e,{variants:ee,combinations:re}),console.log(`🔄 Regenerated ${re.length} combinations after removing variant`)}else o(e,{variants:ee})}},k=B=>{const oe=[],ee=B.length;for(let re=1;re<Math.pow(2,ee);re++){const we=[],ae=[];for(let X=0;X<ee;X++)re&1<<X&&(we.push(X+1),ae.push(B[X].text||`Answer ${X+1}`));const Le={id:`combo-${re}`,variantIndices:we,pathId:`combination-${we.join("-")}`,label:ae.join(" + ")};console.log("🔧 Generated combination:",{id:Le.id,variantIndices:Le.variantIndices,pathId:Le.pathId,label:Le.label}),oe.push(Le)}return oe},T=()=>{if(p!=="combinations")return[];const B=t.variants||[];if(B.length<2)return[];const oe=k(B),ee=t.combinations||[],re=Math.pow(2,B.length)-1;return ee.length!==re||ee.length===0?(console.log(`🔧 Combinations out of sync (stored: ${ee.length}, expected: ${re}). Regenerating...`),o(e,{combinations:oe}),oe):ee},F=()=>T().filter(oe=>{const ee=`combination-${oe.id}`;return i.some(re=>re.source===e&&re.sourceHandle===ee)}),O=()=>T().filter(oe=>{const ee=`combination-${oe.id}`;return!i.some(re=>re.source===e&&re.sourceHandle===ee)}),Y=B=>{if(console.log("Creating linked question for combination:",B),i.find(X=>X.source===e&&X.sourceHandle===`combination-${B}`)){console.log("This combination already has a connection. Only one connection per combination is allowed.");return}const ee=s.find(X=>X.id===e);if(!ee)return;let re=t.topic;if(!re){const X=Q=>{var W;const ge=s.find(G=>G.id===Q);if(!ge)return"Topic";if((W=ge.data)!=null&&W.topic)return ge.data.topic;const H=Re.getState().edges.find(G=>G.target===Q);return H?X(H.source):"Topic"};re=X(e)}const we=`question-${Date.now()}`,ae={id:we,type:"question",position:{x:ee.position.x+200,y:ee.position.y+200},data:{pathId:"path-id-will-be-generated",topic:re,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(ae);const Le={id:`edge-${e}-${we}`,source:e,target:we,sourceHandle:`combination-${B}`,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(Le),c(e,we)},U=B=>{w(B);const oe={answerType:B};if(B==="combinations"){const X=t.variants||[];if(X.length>=2){const Q=k(X);oe.combinations=Q,console.log(`🔄 Generated ${Q.length} combinations when switching to combinations mode`)}}else oe.combinations=[];o(e,oe);const{edges:ee,deleteEdge:re,nodes:we,updateNode:ae}=Re.getState(),Le=ee.filter(X=>X.source===e);console.log(`Switching to ${B} mode: removing ${Le.length} outgoing edges and cleaning up pathIDs`),Le.forEach(X=>{var ge,H;const Q=we.find(W=>W.id===X.target);if(Q){const W=((ge=Q.data)==null?void 0:ge.pathIds)||[(H=Q.data)==null?void 0:H.pathId].filter(Boolean),G=t.pathId;if(G){const te=W.filter(ke=>!ke.startsWith(G));ae(X.target,{pathId:te.length>0?te[0]:void 0,pathIds:te.length>0?te:[]}),console.log(`Cleaned pathIDs for target node ${X.target}: removed paths starting with ${G}`)}}}),Le.forEach(X=>re(X.id))},q=B=>{B.stopPropagation()},Z=t.variants||[];return u.jsxs("div",{"data-node-id":e,className:`
        bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow-lg border-2 p-4 w-[350px]
        ${n?"border-purple-500 shadow-xl ring-2 ring-purple-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-100":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer relative
      `,onClick:M,onDoubleClick:A,children:[u.jsx(cn,{type:"target",position:me.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),t.answerLevel&&u.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:["Level ",t.answerLevel]}),u.jsxs("div",{className:"flex items-center space-x-2 text-xs",onClick:q,onMouseDown:q,children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"single",checked:p==="single",onChange:B=>U(B.target.value),className:"mr-1"}),"Single"]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"multiple",checked:p==="multiple",onChange:B=>U(B.target.value),className:"mr-1"}),"Multiple"]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"combinations",checked:p==="combinations",onChange:B=>U(B.target.value),className:"mr-1"}),"Combinations"]})]})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:B=>{B.stopPropagation(),S(!v)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),v?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}),!v&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((B,oe)=>u.jsx("div",{className:"text-xs pl-2",children:B},oe))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:B=>{B.stopPropagation(),S(!v)},children:[u.jsx("div",{className:"truncate",children:v?"Path: ...":t.pathIds[0]}),v?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:B=>{B.stopPropagation(),S(!v)},children:[u.jsx("div",{className:"truncate",children:v?"Path: ...":t.pathId||"No path"}),v?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]})}),u.jsx("div",{className:`text-xs rounded px-2 py-1 text-center font-medium ${p==="single"?"bg-blue-50 text-blue-600":p==="multiple"?"bg-green-50 text-green-600":"bg-yellow-50 text-yellow-600"}`,children:p==="single"?"↓ Single path (bottom)":p==="multiple"?"→ Multiple paths (variants)":"→ Combinations (variants)"}),u.jsx("div",{className:"space-y-2",children:Z.map((B,oe)=>{var we;const ee=`variant-${oe}`,re=(we=t.orphanedVariants)==null?void 0:we.includes(ee);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`bg-white rounded-lg p-3 shadow-sm border ${p==="multiple"?"border-green-200 hover:border-green-300":"border-gray-100"} ${re?"ring-1 ring-orange-400 border-orange-300":""} transition-colors`,onClick:q,onMouseDown:q,onDoubleClick:ae=>b(oe,ae),children:[u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(Ib,{onClick:()=>$(B.id),hasInfo:!!B.additionalInfo,className:"mt-1 flex-shrink-0"}),u.jsx("textarea",{value:B.text,onChange:ae=>{N(B.id,{text:ae.target.value}),I(ae.target)},onInput:ae=>I(ae.target),className:"flex-1 text-sm bg-transparent focus:outline-none resize-none min-h-[24px] leading-relaxed overflow-hidden",placeholder:"Answer text...",rows:1,style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",overflow:"hidden",boxSizing:"border-box"},onFocus:q,onKeyDown:q,ref:ae=>{ae&&setTimeout(()=>I(ae),0)}}),u.jsx("input",{type:"number",value:B.score,onChange:ae=>N(B.id,{score:Number(ae.target.value)}),className:"w-12 text-xs text-center bg-gray-50 rounded px-1 py-1 focus:outline-none focus:bg-white border border-gray-200 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield] flex-shrink-0",placeholder:"0",title:"Score",min:"-999",max:"999",onFocus:q,onKeyDown:q,onWheel:ae=>{ae.currentTarget.blur(),ae.stopPropagation()},onClick:q,onMouseDown:q}),Z.length>1&&u.jsx("button",{onClick:ae=>{ae.stopPropagation(),P(B.id)},className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors flex-shrink-0",children:u.jsx(sd,{size:12})})]}),B.additionalInfo&&u.jsxs("div",{className:"mt-2 text-xs text-gray-500 italic truncate bg-blue-50 px-2 py-1 rounded",children:["Info: ",B.additionalInfo]})]}),p==="multiple"&&u.jsx(cn,{type:"source",position:me.Right,id:`variant-${oe}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:re?"#fb923c":"#22c55e",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:ae=>{ae.stopPropagation(),D(`variant-${oe}`)}})]},B.id)})}),p==="combinations"&&Z.length>1&&u.jsx("div",{className:"space-y-3 border-t pt-3",children:u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-yellow-100 px-2 py-1 rounded",onClick:B=>{B.stopPropagation(),g(!y)},children:[u.jsx("div",{className:"text-xs text-yellow-700",children:"All combinations are active. Connect them to questions:"}),y?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}),!y&&u.jsx("div",{className:"space-y-2",children:T().map(B=>{const oe=O().some(re=>re.id===B.id),ee=F().some(re=>re.id===B.id);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`flex items-center space-x-2 bg-white rounded-lg p-2 shadow-sm border transition-colors ${ee?"border-green-300 bg-green-50":oe?"border-orange-300 bg-orange-50":"border-gray-200"}`,onClick:q,onMouseDown:q,onDoubleClick:re=>R(B.id,re),children:[u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.label})}),u.jsxs("div",{className:"flex items-center space-x-1",children:[ee&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Connected"}),oe&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"Orphaned"})]}),u.jsx("div",{className:"flex space-x-1",children:B.variantIndices.map(re=>u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:re},re))})]}),u.jsx(cn,{type:"source",position:me.Right,id:`combination-${B.id}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:oe?"#fb923c":"#f59e0b",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:re=>{re.stopPropagation(),Y(B.id)}})]},B.id)})})]})}),u.jsxs("button",{onClick:B=>{B.stopPropagation(),L()},className:"w-full flex items-center justify-center space-x-2 p-2 border-2 border-dashed border-purple-300 rounded-lg text-sm text-purple-600 hover:border-purple-500 hover:bg-purple-50 transition-colors font-medium",children:[u.jsx(Sb,{size:14}),u.jsx("span",{children:"Add Answer"})]})]}),p==="single"&&u.jsx(cn,{type:"source",position:me.Bottom,id:"default",className:"w-3 h-3 border-2 border-white cursor-pointer hover:scale-125 transition-transform",style:{background:(J=t.orphanedVariants)!=null&&J.includes("default")?"#fb923c":"#22c55e"},onClick:B=>{B.stopPropagation(),D("default")}}),_.isOpen&&_.variantId&&u.jsx(jb,{isOpen:_.isOpen,onClose:C,onSave:z,currentInfo:((be=Z.find(B=>B.id===_.variantId))==null?void 0:be.additionalInfo)||"",variantText:((Ne=Z.find(B=>B.id===_.variantId))==null?void 0:Ne.text)||""})]})}function Pb({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,pathDisplaysFolded:s}=Re(),[i,l]=j.useState(null),a=i!==null?i:s,c=()=>{r(e)},f=h=>{o(e,{recommendation:h.target.value})},d=h=>{h.stopPropagation()};return u.jsxs("div",{className:`
        bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-green-500 shadow-xl ring-2 ring-green-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:c,children:[u.jsx(cn,{type:"target",position:me.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-green-600",children:"Outcome"})]}),u.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Final"})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),a?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}),!a&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((h,p)=>u.jsx("div",{className:"text-xs pl-2",children:h},p))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathIds[0]}),a?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathId}),a?u.jsx(vn,{size:12}):u.jsx(un,{size:12})]})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Recommendation"}),u.jsx("div",{onClick:d,onMouseDown:d,children:u.jsx("textarea",{value:t.recommendation||"",onChange:f,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:4,placeholder:"Enter recommendation text...",onFocus:d,onKeyDown:d})})]}),u.jsx("div",{className:"text-xs rounded px-2 py-1 text-center font-medium bg-green-50 text-green-600 border border-green-200",children:"🎯 Final Outcome"})]})]})}const $b={question:Cb,answer:Tb,outcome:Pb},Ab={animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};function Mb({shouldAutoOrganize:e=!1,onAutoOrganizeComplete:t}){const{nodes:n,edges:r,addEdge:o,updateNodePosition:s,deleteEdge:i,propagateTopicOnConnection:l,propagatePathIdOnConnection:a,selectedNodeId:c,selectedEdgeId:f,selectedNodeIds:d,setSelectedEdgeId:h,setSelectedNodeIds:p,clearSelection:w,setNodes:x,focusNodeId:S,clearFocusNode:m,copiedNodeIds:g}=Re(),v=j.useMemo(()=>(console.log("🎭 Processing nodes for copied state:",{totalNodes:n.length,copiedNodeIds:g,copiedCount:g.length}),n.map(H=>(g.includes(H.id)&&console.log(`✨ Node ${H.id} will get inline animation styles`),{...H}))),[n,g]),[y,_,E]=lE(v),[I,M,A]=aE(r),b=Fs(),{upstreamSiblings:R,downstreamSiblings:D}=j.useMemo(()=>{if(d.length===0)return{upstreamSiblings:new Set,downstreamSiblings:new Set};const H=new Set,W=new Set;return d.forEach(G=>{I.forEach(te=>{te.target===G&&!d.includes(te.source)&&H.add(te.source)}),I.forEach(te=>{te.source===G&&!d.includes(te.target)&&W.add(te.target)})}),{upstreamSiblings:H,downstreamSiblings:W}},[d,I]);V.useEffect(()=>{console.log("🎨 Applying copied animation to DOM elements directly"),g.forEach(W=>{const G=document.querySelector(`[data-id="${W}"]`);if(G){console.log(`✨ Directly applying copied animation to DOM node ${W}`),G.classList.add("copied"),G.style.animation="copiedNodePulse 2s ease-in-out 1";const te=()=>{console.log(`🎬 Animation ended for node ${W}, cleaning up`),G.classList.remove("copied"),G.style.animation="",G.removeEventListener("animationend",te)};G.addEventListener("animationend",te)}else console.log(`❌ Could not find DOM element for copied node ${W}`)}),document.querySelectorAll(".react-flow__node").forEach(W=>{const G=W.getAttribute("data-id");if(G&&!g.includes(G)){const te=W;te.classList.contains("copied")&&(console.log(`🧹 Removing copied animation from DOM node ${G} (fallback cleanup)`),te.classList.remove("copied"),te.style.animation="")}}),_(v)},[v,g,_]);const[L,N]=j.useState(null),[$,C]=j.useState(!1),[z,P]=j.useState(!1),k=$&&!z,T=$&&z,F=k||T,O=j.useRef(!1),Y=j.useRef(!1),U=j.useRef(!1);j.useEffect(()=>{console.log("🔧 Setting up enhanced keyboard event listeners");const H=Se=>{Se.key==="Shift"&&(O.current=!0,C(!0),console.log("✅ Shift key pressed - entering selection mode",{isDPressed:z,isShiftDeleteMode:z}),console.log(z?"🗑️ Shift+D mode - entering delete selection mode":"📋 Shift mode - entering copy selection mode")),(Se.key==="d"||Se.key==="D")&&(Y.current=!0,P(!0),console.log("🔧 D key pressed",{isShiftPressed:$,isShiftSelectMode:$}),$&&console.log("🗑️ Shift+D mode - entering delete selection mode"))},W=Se=>{if(Se.key==="Shift"){console.log("⬆️ Shift key released - checking context"),O.current=!1;const _e=Re.getState().selectedNodeIds;_e.length>0&&(console.log(`✨ Shift released with ${_e.length} selected nodes - triggering pulse as fallback`),Re.getState().markNodesAsCopied(_e)),C(!1),U.current=!1,console.log("✅ Shift state cleared - selection mode disabled")}(Se.key==="d"||Se.key==="D")&&(console.log("⬆️ D key released"),Y.current=!1,P(!1))},G=()=>{console.log("🔍 Window lost focus - checking Shift state"),(O.current||$)&&(console.log("⚠️ Window lost focus while Shift was pressed - marking for recovery"),U.current=!0)},te=()=>{console.log("🔍 Window gained focus - checking for stuck states"),U.current&&(console.log("🔧 Recovering from focus loss - checking current Shift state"),setTimeout(()=>{$&&!O.current&&(console.log("🚨 Detected stuck Shift state - forcing reset"),C(!1),P(!1),U.current=!1)},100))},ke=Se=>{$&&!Se.shiftKey&&(console.log("🚨 Detected Shift key mismatch via mouse event - forcing reset"),O.current=!1,C(!1),P(!1),U.current=!1)},ye=()=>{L!=null&&L.isSelecting&&(console.log("🖱️ Global mouse up - ending selection"),we())};return window.addEventListener("keydown",H),window.addEventListener("keyup",W),window.addEventListener("blur",G),window.addEventListener("focus",te),window.addEventListener("mousemove",ke,{passive:!0}),window.addEventListener("mouseup",ye),()=>{console.log("🧹 Cleaning up enhanced keyboard event listeners"),window.removeEventListener("keydown",H),window.removeEventListener("keyup",W),window.removeEventListener("blur",G),window.removeEventListener("focus",te),window.removeEventListener("mousemove",ke),window.removeEventListener("mouseup",ye)}},[L==null?void 0:L.isSelecting]),j.useEffect(()=>{const H=setInterval(()=>{if($){const W=G=>{!G.shiftKey&&$&&(console.log("🚨 Periodic check detected stuck Shift state - forcing reset"),C(!1),P(!1),O.current=!1,Y.current=!1,U.current=!1),window.removeEventListener("keydown",W),window.removeEventListener("keyup",W)};window.addEventListener("keydown",W),window.addEventListener("keyup",W),setTimeout(()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",W)},1e3)}},2e3);return()=>{clearInterval(H)}},[$]);const q=j.useCallback(()=>{console.log("🚨 Emergency reset triggered"),C(!1),P(!1),O.current=!1,Y.current=!1,U.current=!1,N(null)},[]);j.useEffect(()=>(window.emergencyResetKeyboardState=q,console.log("🔧 Emergency reset function available as window.emergencyResetKeyboardState()"),()=>{delete window.emergencyResetKeyboardState}),[q]);const Z=V.useRef(!1),J=V.useRef(null);db(),V.useEffect(()=>{if(S&&b){const H=y.find(W=>W.id===S);H&&(b.fitView({nodes:[H],padding:.3,maxZoom:1.2,minZoom:.5,duration:800}),setTimeout(()=>{m()},100))}},[S,y,b,m]),V.useEffect(()=>{const{cleanupDuplicateEdges:H}=Re.getState();H()},[]),V.useEffect(()=>{_(H=>{if(Z.current)return console.log("Bulk update detected - using store positions directly"),n;if(H.length===0)return n;const G=(()=>{const ce=new Set,se=new Set;return r.forEach(ne=>{ce.add(ne.target),se.add(ne.source)}),n.filter(ne=>{var pe;if(ne.type==="question"&&((pe=ne.data)!=null&&pe.isRoot))return!se.has(ne.id);if(ne.type==="outcome")return!ce.has(ne.id);const ie=ce.has(ne.id),Ee=se.has(ne.id);return!ie||!Ee}).map(ne=>ne.id)})(),ke=(()=>{const ce=new Map;return n.forEach(se=>{var ne;if(se.type==="answer"&&((ne=se.data)!=null&&ne.variants)){const ie=se.data.variants,Ee=se.data.answerType||"single",pe=[];Ee==="multiple"&&ie.forEach((fe,he)=>{const le=`variant-${he}`;r.some(ve=>ve.source===se.id&&ve.sourceHandle===le)||pe.push(le)}),Ee==="single"&&(r.some(he=>he.source===se.id&&he.sourceHandle==="default")||pe.push("default")),pe.length>0&&ce.set(se.id,pe)}}),ce})(),ye=ce=>{if(!ce)return{parents:[],children:[]};const se=r.filter(ie=>ie.target===ce).map(ie=>ie.source),ne=r.filter(ie=>ie.source===ce).map(ie=>ie.target);return{parents:se,children:ne}},{parents:Se,children:_e}=ye(c),xe=new Map;return H.forEach(ce=>{xe.set(ce.id,ce.position)}),n.map(ce=>{const se=xe.get(ce.id),ne=H.find(ie=>ie.id===ce.id);return{...ce,position:se||ce.position,selected:(ne==null?void 0:ne.selected)||d.includes(ce.id),data:{...ce.data,isOrphaned:G.includes(ce.id),isParent:Se.includes(ce.id),isChild:_e.includes(ce.id),isSelected:c===ce.id,isMultiSelected:d.includes(ce.id),orphanedVariants:ke.get(ce.id)||[]}}})})},[n,r,_,c,d]),V.useEffect(()=>{const H=r.map(W=>{let G="#9ca3af",te={stroke:G,strokeWidth:2};return f===W.id?(G="#dc2626",te={stroke:G,strokeWidth:3,filter:"drop-shadow(0 0 16px #dc2626cc)",opacity:1}):c&&(W.source===c||W.target===c)&&(G="#2563eb",te={stroke:G,strokeWidth:2,filter:"drop-shadow(0 0 16px #2563ebcc)",opacity:1}),{...W,style:{...W.style,...te}}});M(H)},[r,M,c,f]);const be=j.useCallback(H=>{var Se;if(!H.source||!H.target)return;console.log("Creating edge:",H);const W=n.find(_e=>_e.id===H.source),G=n.find(_e=>_e.id===H.target);if(!W||!G){console.log("Source or target node not found");return}if(W.type==="answer"&&G.type!=="question"&&G.type!=="outcome"){console.log("Answer nodes can only connect to Question nodes or Outcome nodes");return}if(W.type==="question"&&G.type!=="answer"){console.log("Question nodes can only connect to Answer nodes");return}if(W.type==="question"&&((Se=W.data)!=null&&Se.isRoot)&&n.filter(xe=>{var ce;return((ce=xe.data)==null?void 0:ce.isRoot)&&xe.id!==W.id&&xe.data.topic===W.data.topic}).length>0){console.log(`Cannot create connection: Topic "${W.data.topic}" already exists on another root question. Please choose a different topic.`);return}if(W.type==="answer"&&r.find(xe=>xe.source===H.source&&xe.sourceHandle===H.sourceHandle)){console.log("Answer variant already has a connection. Only one connection per variant is allowed.");return}if(W.type==="question"&&r.find(xe=>xe.source===H.source)){console.log("Question node already has a connection. Only one outgoing connection is allowed.");return}if(((_e,xe)=>{if(_e===xe)return!0;const ce=new Set,se=[xe];for(;se.length>0;){const ne=se.pop();if(ce.has(ne))continue;if(ce.add(ne),ne===_e)return!0;r.filter(Ee=>Ee.source===ne).forEach(Ee=>{ce.has(Ee.target)||se.push(Ee.target)})}return!1})(H.source,H.target)){console.log("Connection would create a loop, preventing connection");return}const ke=qt.getInstance(),ye={...H,source:H.source,target:H.target,id:ke.generateEdgeId(H.source,H.target,H.sourceHandle||void 0),animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};console.log("Generated edge:",ye),o(ye),l(H.source,H.target),a(H.source,H.target,H.sourceHandle||void 0)},[o,r,l,a,n]),Ne=j.useCallback((H,W)=>{Re.getState().setSelectedNodeId(W.id)},[]),B=j.useCallback((H,W)=>{h(W.id)},[h]),oe=j.useCallback(()=>{Re.getState().setSelectedNodeId(null),h(null),w()},[h,w]),ee=j.useCallback(H=>{if(F&&!H.target.closest("button, input, textarea, select, .react-flow__handle, .react-flow__controls, .react-flow__minimap")){console.log(`Starting selection box - ${T?"Shift+D delete mode":"Shift copy mode"}`),H.preventDefault(),H.stopPropagation();const te=H.currentTarget.getBoundingClientRect();N({start:{x:H.clientX-te.left,y:H.clientY-te.top},end:{x:H.clientX-te.left,y:H.clientY-te.top},isSelecting:!0})}},[$]),re=j.useCallback(H=>{if(L!=null&&L.isSelecting){H.preventDefault(),H.stopPropagation();const W=H.currentTarget.getBoundingClientRect();N(G=>G?{...G,end:{x:H.clientX-W.left,y:H.clientY-W.top}}:null)}},[L==null?void 0:L.isSelecting]),we=j.useCallback(H=>{if(L&&b){H&&(H.preventDefault(),H.stopPropagation());const{x:W,y:G}=L.start,{x:te,y:ke}=L.end,ye=Math.min(W,te),Se=Math.max(W,te),_e=Math.min(G,ke),xe=Math.max(G,ke);if(Math.abs(Se-ye)>5||Math.abs(xe-_e)>5){const ce=b.screenToFlowPosition({x:ye,y:_e}),se=b.screenToFlowPosition({x:Se,y:xe});console.log("Selection box coordinates:",{startFlow:ce,endFlow:se});const ne=y.filter(Ee=>{const pe=Ee.position.x,fe=Ee.position.y,he=Ee.width||280,le=Ee.height||150,ue=pe<se.x&&pe+he>ce.x&&fe<se.y&&fe+le>ce.y;return ue&&console.log(`Node ${Ee.id} overlaps: pos(${pe}, ${fe}) size(${he}, ${le})`),ue});console.log(`Selected ${ne.length} nodes:`,ne.map(Ee=>Ee.id));const ie=ne.map(Ee=>Ee.id);if(Re.setState(Ee=>(Ee.selectedNodeIds=ie,Ee)),console.log(`🎯 Updated selection: store=${ie.length} nodes`),ie.length>0)if(T)console.log(`🗑️ Deleting ${ie.length} nodes in Shift+D mode`),Re.getState().deleteNodes(ie),console.log(`✅ Successfully deleted ${ie.length} nodes`);else{const Ee=ne,pe=I.filter(fe=>ie.includes(fe.source)&&ie.includes(fe.target));Re.setState(fe=>(fe.clipboard.nodes=Ee,fe.clipboard.edges=pe,console.log("📋 CLIPBOARD UPDATED - Nodes:",fe.clipboard.nodes.length,"Edges:",fe.clipboard.edges.length),fe)),console.log(`🎯 Auto-copied ${Ee.length} nodes and ${pe.length} edges to clipboard`),console.log(`✨ Triggering immediate pulse for ${ie.length} selected nodes`),Re.getState().markNodesAsCopied(ie),setTimeout(()=>{ie.forEach(fe=>{const he=document.querySelector(`[data-id="${fe}"]`);he?(console.log(`🔍 DOM node ${fe} classes:`,he.className),console.log(`🔍 DOM node ${fe} inline style:`,he.style.animation),console.log(`🔍 DOM node ${fe} inline boxShadow:`,he.style.boxShadow),console.log(`🔍 DOM node ${fe} computed animation:`,window.getComputedStyle(he).animation)):console.log(`❌ Could not find DOM element for node ${fe}`)})},100),setTimeout(()=>{const fe=Re.getState().clipboard;console.log("📋 CLIPBOARD CHECK (100ms later):",fe.nodes.length,"nodes,",fe.edges.length,"edges")},100)}p(ie),ie.length>0&&b.setNodes(Ee=>Ee.map(pe=>({...pe,selected:ie.includes(pe.id)})))}}N(null)},[L,b,y,I,T]),ae=j.useCallback(({nodes:H})=>{const W=H.map(ye=>ye.id);console.log("React Flow selection changed:",W);const G=Re.getState().selectedNodeIds,te=[...W].sort(),ke=[...G].sort();JSON.stringify(te)!==JSON.stringify(ke)&&Re.setState(ye=>(ye.selectedNodeIds=W,ye))},[]),Le=j.useCallback(H=>{if(E(H),Z.current){console.log("Skipping position sync during bulk update");return}H.forEach(W=>{W.type==="position"&&W.position&&s&&s(W.id,W.position)})},[E,s]),X=j.useCallback(H=>{A(H),H.forEach(W=>{W.type==="remove"&&W.id&&(console.log("Edge deleted:",W.id),i(W.id))})},[A,i]);V.useEffect(()=>(b&&(window.reactFlowInstance=b),()=>{window.reactFlowInstance===b&&delete window.reactFlowInstance}),[b]),V.useEffect(()=>(window.flowCanvasSetBulkUpdate=()=>{console.log("Setting bulk update flag"),Z.current=!0,J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{console.log("Resetting bulk update flag"),Z.current=!1,J.current=null},500)},()=>{J.current&&clearTimeout(J.current),delete window.flowCanvasSetBulkUpdate}),[]),j.useEffect(()=>{if(e&&b&&n.length>0){console.log("Auto-organizing nodes...");const H=setTimeout(()=>{Q(),setTimeout(()=>{b.fitView({padding:.2,maxZoom:.8,minZoom:.1,duration:1e3}),t==null||t()},500)},1e3);return()=>clearTimeout(H)}},[e,b,n.length,t]);const Q=()=>{if(console.log("🎯 PowerPoint-Style Auto-Organize: Starting distribution and alignment..."),n.length<2){console.log("Not enough nodes to organize");return}Z.current=!0,console.log("🔧 Bulk update flag set - preventing position overwrite"),console.log("🎯 Auto-organizing",n.length,"nodes with HARD CONSTRAINT overlap prevention");class H{constructor(){Fn(this,"grid",new Set);Fn(this,"cellSize",50)}getRectangleCells(ue,ve,Ie,Ce){const De=[],Ae=Math.floor(ue/this.cellSize),st=Math.floor((ue+Ie)/this.cellSize),Xe=Math.floor(ve/this.cellSize),pt=Math.floor((ve+Ce)/this.cellSize);for(let It=Ae;It<=st;It++)for(let Be=Xe;Be<=pt;Be++)De.push(`${It},${Be}`);return De}isPositionFree(ue,ve,Ie,Ce){return!this.getRectangleCells(ue,ve,Ie,Ce).some(Ae=>this.grid.has(Ae))}occupyPosition(ue,ve,Ie,Ce){this.getRectangleCells(ue,ve,Ie,Ce).forEach(Ae=>this.grid.add(Ae))}findNearestFreePosition(ue,ve,Ie,Ce,De=0,Ae=0,st=2e3){if(ue>=De&&ve>=Ae&&this.isPositionFree(ue,ve,Ie,Ce))return{x:ue,y:ve};const Xe=25;for(let Be=Xe;Be<=st;Be+=Xe)for(let vt=-Be;vt<=Be;vt+=Xe)for(let Me=-Be;Me<=Be;Me+=Xe){if(Math.abs(vt)!==Be&&Math.abs(Me)!==Be)continue;const Ue=ue+vt,Fe=ve+Me;if(!(Ue<De||Fe<Ae)&&this.isPositionFree(Ue,Fe,Ie,Ce))return{x:Ue,y:Fe}}console.warn("⚠️ Spiral search failed, using fallback positioning");for(let Be=Ae;Be<Ae+st;Be+=Xe)for(let vt=De;vt<De+st;vt+=Xe)if(this.isPositionFree(vt,Be,Ie,Ce))return{x:vt,y:Be};const pt=De+st+100,It=Ae+Math.random()*500;return console.error("🚨 All placement strategies failed, using ultimate fallback"),{x:pt,y:It}}}const G=(()=>{const Ie=Math.max(n.length*300,1200),Ce=800;if(n.length<=3)return{x:150,y:150};const De=[];n.forEach(Pe=>{var Ge;const je=Pe.type==="answer"&&((Ge=Pe.data)==null?void 0:Ge.answerType)==="combinations"?400:150,it=100;De.push({x:Pe.position.x-it,y:Pe.position.y-it,width:300+2*it,height:je+2*it})});const Ae=(Pe,He,je,it)=>!De.some(Ge=>Pe<Ge.x+Ge.width&&Pe+je>Ge.x&&He<Ge.y+Ge.height&&He+it>Ge.y);let st=150,Xe=150,pt=150,It=150;n.length>0&&(st=Math.min(...n.map(Pe=>Pe.position.x)),Xe=Math.max(...n.map(Pe=>Pe.position.x+300)),pt=Math.min(...n.map(Pe=>Pe.position.y)),It=Math.max(...n.map(Pe=>Pe.position.y+150)));const Be=Xe+200;if(Ae(Be,150,Ie,Ce))return console.log("📍 Found empty space to the right of existing content"),{x:Be,y:150};const vt=It+200;if(Ae(150,vt,Ie,Ce))return console.log("📍 Found empty space below existing content"),{x:150,y:vt};const Me=pt-Ce-200;if(Me>=150&&Ae(150,Me,Ie,Ce))return console.log("📍 Found empty space above existing content"),{x:150,y:Me};const Ue=st-Ie-200;if(Ue>=150&&Ae(Ue,150,Ie,Ce))return console.log("📍 Found empty space to the left of existing content"),{x:Ue,y:150};for(let Pe=150;Pe<2150;Pe+=500)for(let He=150;He<3150;He+=500)if(Ae(He,Pe,Ie,Ce))return console.log(`📍 Found empty space via grid search at (${He}, ${Pe})`),{x:He,y:Pe};const Fe=Xe+500,jt=150;return console.log("📍 Using fallback position - placing far to the right"),{x:Fe,y:jt}})(),te=400,ke=200,ye=G.x,Se=G.y,_e=new H,xe=le=>{var Ie,Ce,De;let ve=120;if(le.type==="answer"&&((Ie=le.data)==null?void 0:Ie.answerType)==="combinations"){const Ae=((Ce=le.data)==null?void 0:Ce.combinations)||[],st=((De=le.data)==null?void 0:De.variants)||[];if(Ae.length>0){const Xe=st.length*50,pt=Ae.length*70;ve=200+Xe+pt}}return{width:300,height:ve}},ce=new Map,se=new Map;n.forEach(le=>{ce.set(le.id,[]),se.set(le.id,[])}),r.forEach(le=>{const ue=ce.get(le.source)||[];ue.push(le.target),ce.set(le.source,ue);const ve=se.get(le.target)||[];ve.push(le.source),se.set(le.target,ve)});const ne=[],ie=new Set,Ee=le=>{const ue=[],ve=[le],Ie=new Set;for(;ve.length>0;){const Ce=ve.pop();if(Ie.has(Ce.id))continue;Ie.add(Ce.id),ie.add(Ce.id),ue.push(Ce);const De=ce.get(Ce.id)||[],Ae=se.get(Ce.id)||[];[...De,...Ae].forEach(st=>{const Xe=n.find(pt=>pt.id===st);Xe&&!Ie.has(st)&&ve.push(Xe)})}return ue};n.forEach(le=>{if(!ie.has(le.id)){const ue=Ee(le);ue.length>0&&ne.push(ue)}}),console.log("🎯 Components found:",ne.length);const pe=(le,ue)=>{const ve=new Set(le.map(Me=>Me.id)),Ce=(()=>{const Me=le.filter(Fe=>(se.get(Fe.id)||[]).filter(Pe=>ve.has(Pe)).length===0);if(Me.length===0)return[le[0]];let Ue=[];for(const Fe of Me){const jt=[];let Pe=Fe;const He=new Set;for(;Pe&&!He.has(Pe.id);){He.add(Pe.id),jt.push(Pe);const it=(ce.get(Pe.id)||[]).map(Ge=>le.find(ht=>ht.id===Ge)).filter(Ge=>Ge!==void 0&&ve.has(Ge.id)&&!He.has(Ge.id));if(it.length===0){Pe=null;break}Pe=it.reduce((Ge,ht)=>{const mn=(ce.get(ht.id)||[]).length+(se.get(ht.id)||[]).length,Fl=(ce.get(Ge.id)||[]).length+(se.get(Ge.id)||[]).length;return mn>Fl?ht:Ge})}jt.length>Ue.length&&(Ue=jt)}return Ue})(),De=new Set(Ce.map(Me=>Me.id)),Ae=Ce.length*te+800,st=600;let Xe,pt;if(ue===0)Xe=ye,pt=Se;else{const Me=ye,Ue=Se+ue*400,Fe=_e.findNearestFreePosition(Me,Ue,Ae,st,ye,Se,3e3);Xe=Fe.x,pt=Fe.y,console.log(`📍 Component ${ue} positioned at (${Xe}, ${pt}) - estimated size: ${Ae}×${st}px`)}const It=[],Be=new Map;Ce.forEach((Me,Ue)=>{const{width:Fe,height:jt}=xe(Me),Pe=Xe+Ue*te,He=pt,je=_e.findNearestFreePosition(Pe,He,Fe,jt,ye,Se);_e.occupyPosition(je.x,je.y,Fe,jt),Be.set(Me.id,je),It.push({...Me,position:je}),console.log(`📍 Main path ${Ue}: ${Me.id} at (${je.x}, ${je.y}) [${Fe}x${jt}]`)});const vt=le.filter(Me=>!De.has(Me.id));for(const Me of vt){const{width:Ue,height:Fe}=xe(Me),jt=se.get(Me.id)||[],Pe=ce.get(Me.id)||[];let He=null;for(const je of jt)if(De.has(je)){He=Ce.find(it=>it.id===je)||null;break}if(!He){for(const je of Pe)if(De.has(je)){He=Ce.find(it=>it.id===je)||null;break}}if(!He&&Ce.length>0&&(He=Ce[0]),He){const je=Be.get(He.id),it=xe(He).height,Ge=[{x:je.x,y:je.y-Fe-ke},{x:je.x,y:je.y+it+ke},{x:je.x-Ue-100,y:je.y},{x:je.x+300+100,y:je.y},{x:je.x-Ue-100,y:je.y-Fe-ke},{x:je.x+300+100,y:je.y-Fe-ke},{x:je.x-Ue-100,y:je.y+it+ke},{x:je.x+300+100,y:je.y+it+ke}];let ht=null;for(const mn of Ge)if(mn.x>=ye&&mn.y>=Se&&_e.isPositionFree(mn.x,mn.y,Ue,Fe)){ht=mn;break}ht||(ht=_e.findNearestFreePosition(je.x,je.y-Fe-ke,Ue,Fe,ye,Se)),_e.occupyPosition(ht.x,ht.y,Ue,Fe),Be.set(Me.id,ht),It.push({...Me,position:ht}),console.log(`📍 Branch: ${Me.id} at (${ht.x}, ${ht.y}) [${Ue}x${Fe}] connected to ${He.id}`)}}return It},fe=[];ne.forEach((le,ue)=>{const ve=pe(le,ue);fe.push(...ve)}),n.filter(le=>!fe.some(ue=>ue.id===le.id)).forEach(le=>{const{width:ue,height:ve}=xe(le),Ie=ye,Ce=Se+ne.length*300,De=_e.findNearestFreePosition(Ie,Ce,ue,ve,ye,Se);_e.occupyPosition(De.x,De.y,ue,ve),fe.push({...le,position:De}),console.log(`📍 Isolated: ${le.id} at (${De.x}, ${De.y}) [${ue}x${ve}]`)}),console.log("🎯 PowerPoint-style layout with HARD CONSTRAINTS complete. Nodes positioned:",fe.length),console.log("🔒 GUARANTEE: Zero overlaps enforced by spatial grid system"),x(fe),t==null||t()},ge=j.useCallback((H,W)=>{b&&b.setCenter(W.x,W.y,{zoom:b.getZoom()})},[b]);return u.jsx("div",{className:`w-full h-full bg-gradient-to-br from-gray-50 to-gray-100 ${F?"cursor-crosshair":""}`,children:u.jsxs(r0,{nodes:y,edges:I,onNodesChange:Le,onEdgesChange:X,onConnect:be,onNodeClick:Ne,onPaneClick:oe,onEdgeClick:B,onMouseDown:ee,onMouseMove:re,onMouseUp:we,onSelectionChange:ae,nodeTypes:$b,connectionMode:ur.Loose,defaultEdgeOptions:Ab,className:`bg-transparent ${F?"selection-mode":""}`,nodesDraggable:!F,nodesConnectable:!0,elementsSelectable:!0,selectNodesOnDrag:!1,panOnDrag:!F,panOnScroll:!0,panOnScrollSpeed:.5,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!1,preventScrolling:!1,panActivationKeyCode:null,multiSelectionKeyCode:null,selectionKeyCode:null,deleteKeyCode:null,children:[u.jsx(PE,{variant:Zt.Dots,gap:16,size:1,color:"#e5e7eb"}),u.jsx(kE,{className:"bg-white shadow-lg rounded-lg border border-gray-200"}),u.jsx(xE,{className:"bg-white shadow-lg rounded-lg border border-gray-200",nodeColor:H=>{var W;if(d.includes(H.id))switch(H.type){case"question":return"#1e40af";case"answer":return"#6b21a8";case"outcome":return"#15803d";default:return"#374151"}if(R.has(H.id))switch(H.type){case"question":return"#ea580c";case"answer":return"#dc2626";case"outcome":return"#f59e0b";default:return"#f97316"}if(D.has(H.id))switch(H.type){case"question":return"#7c3aed";case"answer":return"#9333ea";case"outcome":return"#a855f7";default:return"#8b5cf6"}if((W=H.data)!=null&&W.isOrphaned)return"#fb923c";switch(H.type){case"question":return"#94a3b8";case"answer":return"#cbd5e1";case"outcome":return"#d1d5db";default:return"#e5e7eb"}},maskColor:"rgba(255, 255, 255, 0.9)",pannable:!0,zoomable:!0,onClick:ge}),u.jsxs(Al,{position:"top-right",className:"bg-white p-3 rounded-lg shadow-lg",children:[u.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Flow Stats"}),u.jsxs("div",{className:"space-y-1 text-xs",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),u.jsxs("span",{children:["Questions: ",y.filter(H=>H.type==="question").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),u.jsxs("span",{children:["Answers: ",y.filter(H=>H.type==="answer").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),u.jsxs("span",{children:["Outcomes: ",y.filter(H=>H.type==="outcome").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),u.jsxs("span",{children:["Connections: ",I.length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),u.jsxs("span",{children:["Orphaned: ",y.filter(H=>!I.some(W=>W.source===H.id||W.target===H.id)).length]})]})]})]}),(L==null?void 0:L.isSelecting)&&u.jsx("div",{className:"absolute pointer-events-none border-2 border-blue-500 bg-blue-200 bg-opacity-20 z-10",style:{left:Math.min(L.start.x,L.end.x),top:Math.min(L.start.y,L.end.y),width:Math.abs(L.end.x-L.start.x),height:Math.abs(L.end.y-L.start.y)}})]})})}class Wc{generateCombinationsForNode(t){const n=[],r=t.length;for(let o=1;o<Math.pow(2,r);o++){const s=[],i=[];for(let a=0;a<r;a++)o&1<<a&&(s.push(a+1),i.push(t[a].text||`Variant ${a+1}`));const l={id:`combo-${o}`,variantIndices:s,pathId:`PATH-V${s.join("+V")}`,label:i.join(" + ")};n.push(l)}return n}exportToJson(t,n){const r=t.filter(p=>p.type==="question"),o=t.filter(p=>p.type==="answer"),s=t.filter(p=>p.type==="outcome"),l=r.filter(p=>p.data.isRoot).map(p=>p.data.topic).filter(Boolean),c={topic:l.length>1?`Multi-Topic (${l.join(", ")})`:l[0]||"UNTITLED",version:"1.0.0",createdAt:new Date().toISOString(),totalQuestions:r.length},f={};r.forEach(p=>{f[p.id]={id:p.id,type:"question",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:p.data.questionText,level:p.data.questionLevel,position:p.position,topic:p.data.topic}}),o.forEach(p=>{var w,x;f[p.id]={id:p.id,type:"answer",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:`${((w=p.data.variants)==null?void 0:w.length)||0} variants`,level:0,position:p.position,topic:p.data.topic,answerType:p.data.answerType,variants:(x=p.data.variants)==null?void 0:x.map(S=>({id:S.id,text:S.text,score:S.score,allowsInput:S.allowsInput,inputValidation:S.inputValidation,additionalInfo:S.additionalInfo})),combinations:p.data.answerType==="combinations"?this.generateCombinationsForNode(p.data.variants||[]):void 0,combinationRules:p.data.combinationRules}}),s.forEach(p=>{f[p.id]={id:p.id,type:"outcome",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:p.data.recommendation||"No recommendation provided",level:0,position:p.position,topic:p.data.topic,recommendation:p.data.recommendation}});const d={},h={};return n.forEach(p=>{const w=t.find(S=>S.id===p.source),x=t.find(S=>S.id===p.target);!w||!x||(d[p.source]||(d[p.source]={}),p.sourceHandle&&p.sourceHandle.startsWith("variant-")?(d[p.source].variants||(d[p.source].variants={}),d[p.source].variants[p.sourceHandle]=x.data.pathId):p.sourceHandle&&p.sourceHandle.startsWith("combination-")?(d[p.source].combinations||(d[p.source].combinations={}),d[p.source].combinations[p.sourceHandle]=x.data.pathId):d[p.source].default=x.data.pathId)}),o.forEach(p=>{(p.data.answerType==="multiple"||p.data.answerType==="combinations")&&p.data.combinationRules&&(h[p.id]=p.data.combinationRules.map((w,x)=>({condition:w.selectedVariants,nextNode:w.nextNode,priority:x+1})))}),{metadata:c,nodes:f,navigation:d,multipleChoiceRules:h}}exportToExcel(t){const n=this.convertToCSV(t);return new Blob([n],{type:"text/csv"})}convertToCSV(t){const r=[["Path ID","All Path IDs","Clean Path ID","Type","Content","Level","Variants","Scores","Next Path"]];return Object.values(t.nodes).forEach(o=>{var s,i;o.type==="question"?r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Question",o.content,o.level.toString(),"","",((s=t.navigation[o.id])==null?void 0:s.default)||""]):o.type==="answer"?((i=o.variants)==null||i.forEach((l,a)=>{var f,d;const c=((d=(f=t.navigation[o.id])==null?void 0:f.variants)==null?void 0:d[`variant-${a}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Answer",l.text,"0",l.text,l.score.toString(),c])}),o.answerType==="combinations"&&o.combinations&&o.combinations.forEach(l=>{var c,f;const a=((f=(c=t.navigation[o.id])==null?void 0:c.combinations)==null?void 0:f[`combination-${l.id}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Combination",l.label,"0",l.label,l.variantIndices.map(d=>{var h,p;return((p=(h=o.variants)==null?void 0:h[d])==null?void 0:p.score)||0}).reduce((d,h)=>d+h,0).toString(),a])})):o.type==="outcome"&&r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Outcome",o.recommendation||"No recommendation","0","","",""])}),r.map(o=>o.map(s=>`"${s.replace(/"/g,'""')}"`).join(",")).join(`
`)}cleanPathId(t){const n=t.split("-");return n.length<=2?t:n.slice(1).join("-")}importFromJson(t){const n=[],r=[];return Object.values(t.nodes).forEach((o,s)=>{const i=o.position||{x:200+s%3*400,y:200+Math.floor(s/3)*300};o.type==="question"?n.push({id:o.id,type:"question",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],topic:o.topic||"IMPORTED",isRoot:o.level===1,questionText:o.content,questionLevel:o.level,elementId:"IMPORTED",subElementId:"IMPORTED"}}):o.type==="answer"?n.push({id:o.id,type:"answer",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],answerType:o.answerType||"single",variants:o.variants||[],combinations:o.combinations,combinationRules:o.combinationRules,topic:o.topic||"IMPORTED"}}):o.type==="outcome"&&n.push({id:o.id,type:"outcome",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],recommendation:o.recommendation||"No recommendation provided",topic:o.topic||"IMPORTED"}})}),Object.entries(t.navigation).forEach(([o,s])=>{if(s.default){const i=n.find(l=>l.data.pathId===s.default);i&&r.push({id:`edge-${o}-${i.id}`,source:o,target:i.id,sourceHandle:"default",animated:!0})}s.variants&&Object.entries(s.variants).forEach(([i,l])=>{const a=n.find(c=>c.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})}),s.combinations&&Object.entries(s.combinations).forEach(([i,l])=>{const a=n.find(c=>c.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})})}),{nodes:n,edges:r}}testCombinationExportImport(){var r,o;console.log("Testing combination export/import functionality...");const t=[{id:"test-answer-1",type:"answer",position:{x:100,y:100},data:{pathId:"Test-A1",pathIds:["Test-A1"],answerType:"combinations",variants:[{id:"var1",text:"Option A",score:1},{id:"var2",text:"Option B",score:2}],topic:"Test"}},{id:"test-question-1",type:"question",position:{x:300,y:100},data:{pathId:"Test-A1-V0+V1-Q1",pathIds:["Test-A1-V0+V1-Q1"],questionText:"Test Question",questionLevel:2,topic:"Test",isRoot:!1,elementId:"E1",subElementId:"SE1"}}],n=[{id:"test-edge-1",source:"test-answer-1",target:"test-question-1",sourceHandle:"combination-combo-3",animated:!0}];try{const s=this.exportToJson(t,n);console.log("Export successful:",{hasNavigationCombinations:!!((r=s.navigation["test-answer-1"])!=null&&r.combinations),hasCombinationData:!!((o=s.nodes["test-answer-1"])!=null&&o.combinations)});const{nodes:i,edges:l}=this.importFromJson(s);return console.log("Import successful:",{nodeCount:i.length,edgeCount:l.length,hasCombinationHandle:l.some(a=>{var c;return(c=a.sourceHandle)==null?void 0:c.startsWith("combination-")})}),!0}catch(s){return console.error("Test failed:",s),!1}}}class Rb{static findAvailableSpace(t,n=400){if(t.length===0)return{x:200,y:200};const r=Math.max(...t.map(s=>s.position.x+300)),o=Math.min(...t.map(s=>s.position.y));return{x:r+n,y:o}}static generateUniqueId(t,n){let r=1,o=`${t}-imported`;for(;n.has(o);)o=`${t}-imported-${r}`,r++;return o}static adjustImportedPositions(t,n){if(t.length===0)return[];const r=Math.min(...t.map(l=>l.position.x)),o=Math.min(...t.map(l=>l.position.y)),s=n.x-r,i=n.y-o;return t.map(l=>({...l,position:{x:l.position.x+s,y:l.position.y+i}}))}static resolveConflicts(t,n,r,o){const s=[],i=new Set(t.map(d=>d.id)),l=new Set(n.map(d=>d.id)),a=new Map,c=r.map(d=>{if(i.has(d.id)){const h=this.generateUniqueId(d.id,i);return a.set(d.id,h),i.add(h),s.push({originalId:d.id,newId:h,type:"node",reason:`Node ID "${d.id}" already exists`}),{...d,id:h}}return i.add(d.id),d}),f=o.map(d=>{let h={...d};if(a.has(d.source)&&(h.source=a.get(d.source)),a.has(d.target)&&(h.target=a.get(d.target)),l.has(d.id)){const p=this.generateUniqueId(d.id,l);l.add(p),s.push({originalId:d.id,newId:p,type:"edge",reason:`Edge ID "${d.id}" already exists`}),h.id=p}else l.add(d.id);return h});return{resolvedNodes:c,resolvedEdges:f,conflicts:s}}static getTopicsFromNodes(t){const n=new Set;return t.forEach(r=>{var o;(o=r.data)!=null&&o.topic&&n.add(r.data.topic)}),Array.from(n).sort()}static performAdditiveImport(t,n,r,o){const s=this.findAvailableSpace(t),i=this.adjustImportedPositions(r,s),{resolvedNodes:l,resolvedEdges:a,conflicts:c}=this.resolveConflicts(t,n,i,o),f=[...t,...l],d=[...n,...a],h=this.getTopicsFromNodes(l),p=this.getTopicsFromNodes(f);return{nodes:f,edges:d,conflicts:c,statistics:{imported:{nodes:l.length,edges:a.length,topics:h},total:{nodes:f.length,edges:d.length,topics:p}}}}}function zb({isOpen:e,importResult:t,onAccept:n,onRevert:r,onClose:o}){if(!e||!t)return null;const{statistics:s,conflicts:i}=t;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(hp,{className:"w-6 h-6 text-green-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Successful"})]}),u.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(sd,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-blue-900 mb-3 flex items-center",children:[u.jsx(xb,{className:"w-5 h-5 mr-2"}),"Imported Content"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Nodes:"}),u.jsx("span",{className:"font-medium text-blue-900",children:s.imported.nodes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Connections:"}),u.jsx("span",{className:"font-medium text-blue-900",children:s.imported.edges})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-blue-700",children:"Topics:"}),u.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.imported.topics.map(l=>u.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded",children:l},l))})]})]})]}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-green-900 mb-3 flex items-center",children:[u.jsx(hp,{className:"w-5 h-5 mr-2"}),"Total Canvas"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Nodes:"}),u.jsx("span",{className:"font-medium text-green-900",children:s.total.nodes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Connections:"}),u.jsx("span",{className:"font-medium text-green-900",children:s.total.edges})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-green-700",children:"Topics:"}),u.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.total.topics.map(l=>u.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs rounded",children:l},l))})]})]})]})]}),i.length>0&&u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-yellow-900 mb-3 flex items-center",children:[u.jsx(kb,{className:"w-5 h-5 mr-2"}),"Conflicts Resolved (",i.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map((l,a)=>u.jsx("div",{className:"bg-yellow-100 rounded p-3 text-sm",children:u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"font-medium text-yellow-900",children:[l.type==="node"?"Node":"Edge"," ID Conflict"]}),u.jsx("div",{className:"text-yellow-700 mt-1",children:l.reason}),u.jsxs("div",{className:"text-yellow-600 mt-1",children:[u.jsx("span",{className:"font-mono",children:l.originalId}),u.jsx("span",{className:"mx-2",children:"→"}),u.jsx("span",{className:"font-mono",children:l.newId})]})]})})},a))})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Summary"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully imported ",s.imported.nodes," nodes and ",s.imported.edges," connections",i.length>0&&` with ${i.length} conflicts resolved`,". The imported content has been positioned to avoid overlap with existing nodes and is ready for use."]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[u.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Revert Import"}),u.jsx("button",{onClick:n,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept Import"})]})]})})}function Db({onAddNode:e,onLoadDemo:t,onClearAll:n,onSetNodes:r,nodes:o=[]}){const{setEdges:s,edges:i,nodes:l,setNodes:a,toggleAllMeta:c,pathDisplaysFolded:f,combinationSectionsFolded:d}=Re(),[h,p]=j.useState(!1),w=j.useRef(null);j.useEffect(()=>{const T=F=>{w.current&&!w.current.contains(F.target)&&p(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const x=o.length>0?o:l,[S,m]=j.useState(!1),[g,v]=j.useState(null),[y,_]=j.useState(null),E=()=>{const T=window.reactFlowInstance;let F=400,O=300;if(T)try{const q=window.innerWidth,Z=window.innerHeight,J={x:q/2,y:Z/2},be=T.screenToFlowPosition(J);F=be.x,O=be.y}catch(q){console.warn("Failed to get viewport center, using fallback position:",q)}if(x.length===0)return{x:F,y:O};const Y=x.map(q=>q.position),U=100;for(let q=0;q<500;q+=U)for(let Z=0;Z<360;Z+=45){const J=Z*Math.PI/180,be=F+q*Math.cos(J),Ne=O+q*Math.sin(J);if(!Y.some(oe=>Math.sqrt(Math.pow(oe.x-be,2)+Math.pow(oe.y-Ne,2))<U))return{x:be,y:Ne}}return{x:F+Math.random()*100-50,y:O+Math.random()*100-50}},I=T=>{const{nodes:F}=Re.getState(),O=F.filter(Y=>{var U;return(U=Y.data)==null?void 0:U.isRoot}).map(Y=>Y.data.topic).filter(Y=>Y);{let Y=1,U=`TOPIC-${Y}`;for(;O.includes(U);)Y++,U=`TOPIC-${Y}`;return U}},M=()=>{const T=qt.getInstance(),F=E(),O=I(),Y=T.getNextQuestionNumber(null,O),U=T.generateQuestionPathId(null,Y,O),q={id:`q-${Date.now()}`,type:"question",position:F,data:{pathId:U,topic:O,isRoot:!0,questionText:"New Root Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};T.registerNode(q.id,U),e==null||e(q),p(!1)},A=()=>{const T=qt.getInstance(),F=E(),O=`STANDALONE-Q${Date.now()}`,Y={id:`q-${Date.now()}`,type:"question",position:F,data:{pathId:O,topic:"STANDALONE",isRoot:!1,questionText:"New Regular Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};T.registerNode(Y.id,O),e==null||e(Y),p(!1)},b=()=>{const T=qt.getInstance(),F=E(),Y=`STANDALONE-A${T.getNextAnswerNumber("STANDALONE")}`,U={id:`a-${Date.now()}`,type:"answer",position:F,data:{pathId:Y,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}};e==null||e(U)},R=()=>{const T=qt.getInstance(),F=E(),Y=`STANDALONE-E${T.getNextOutcomeNumber("STANDALONE")}`,U={id:`o-${Date.now()}`,type:"outcome",position:F,data:{pathId:Y,recommendation:"Enter your recommendation here...",topic:"General"}};e==null||e(U)},D=()=>{const T=Re.getState(),O=new Wc().exportToJson(x,T.edges),Y=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),U=URL.createObjectURL(Y),q=document.createElement("a");q.href=U,q.download=`flow-${O.metadata.topic}-${Date.now()}.json`,q.click(),URL.revokeObjectURL(U)},L=()=>{const T=document.createElement("input");T.type="file",T.accept=".json",T.onchange=F=>{var Y;const O=(Y=F.target.files)==null?void 0:Y[0];if(O){const U=new FileReader;U.onload=q=>{var Z;try{const J=JSON.parse((Z=q.target)==null?void 0:Z.result);let be=[],Ne=[];if(J.metadata&&J.nodes&&J.navigation){const ee=new Wc().importFromJson(J);be=ee.nodes,Ne=ee.edges}else if(J.nodes&&J.edges)be=J.nodes,Ne=J.edges;else{console.error("Invalid file format");return}_({nodes:[...x],edges:[...i]});const B=Rb.performAdditiveImport(x,i,be,Ne);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),r==null||r(B.nodes),s(B.edges),v(B),m(!0)}catch(J){console.error("Error importing flow:",J)}},U.readAsText(O)}},T.click()},N=()=>{t==null||t()},$=()=>{n==null||n()},C=()=>{if(console.log("🎯 PowerPoint-Style Organize: Starting smart placement..."),x.length<2){console.log("Not enough nodes to organize");return}window.flowCanvasSetBulkUpdate&&(window.flowCanvasSetBulkUpdate(),console.log("🔧 Bulk update flag set - preventing position overwrite")),console.log("🎯 Organizing",x.length,"nodes with HARD CONSTRAINT overlap prevention");class T{constructor(){Fn(this,"grid",new Set);Fn(this,"cellSize",50)}getRectangleCells(Q,ge,H,W){const G=[],te=Math.floor(Q/this.cellSize),ke=Math.floor((Q+H)/this.cellSize),ye=Math.floor(ge/this.cellSize),Se=Math.floor((ge+W)/this.cellSize);for(let _e=te;_e<=ke;_e++)for(let xe=ye;xe<=Se;xe++)G.push(`${_e},${xe}`);return G}isPositionFree(Q,ge,H,W){return!this.getRectangleCells(Q,ge,H,W).some(te=>this.grid.has(te))}occupyPosition(Q,ge,H,W){this.getRectangleCells(Q,ge,H,W).forEach(te=>this.grid.add(te))}findNearestFreePosition(Q,ge,H,W,G=0,te=0,ke=2e3){if(Q>=G&&ge>=te&&this.isPositionFree(Q,ge,H,W))return{x:Q,y:ge};const ye=25;for(let xe=ye;xe<=ke;xe+=ye)for(let ce=-xe;ce<=xe;ce+=ye)for(let se=-xe;se<=xe;se+=ye){if(Math.abs(ce)!==xe&&Math.abs(se)!==xe)continue;const ne=Q+ce,ie=ge+se;if(!(ne<G||ie<te)&&this.isPositionFree(ne,ie,H,W))return{x:ne,y:ie}}console.warn("⚠️ Spiral search failed, using fallback positioning");for(let xe=te;xe<te+ke;xe+=ye)for(let ce=G;ce<G+ke;ce+=ye)if(this.isPositionFree(ce,xe,H,W))return{x:ce,y:xe};const Se=G+ke+100,_e=te+Math.random()*500;return console.error("🚨 All placement strategies failed, using ultimate fallback"),{x:Se,y:_e}}}const O=(()=>{const H=Math.max(x.length*300,1200),W=800;if(x.length<=3)return{x:150,y:150};const G=[];x.forEach(pe=>{var ue;const he=pe.type==="answer"&&((ue=pe.data)==null?void 0:ue.answerType)==="combinations"?400:150,le=100;G.push({x:pe.position.x-le,y:pe.position.y-le,width:300+2*le,height:he+2*le})});const te=(pe,fe,he,le)=>!G.some(ue=>pe<ue.x+ue.width&&pe+he>ue.x&&fe<ue.y+ue.height&&fe+le>ue.y);let ke=150,ye=150,Se=150,_e=150;x.length>0&&(ke=Math.min(...x.map(pe=>pe.position.x)),ye=Math.max(...x.map(pe=>pe.position.x+300)),Se=Math.min(...x.map(pe=>pe.position.y)),_e=Math.max(...x.map(pe=>pe.position.y+150)));const xe=ye+200;if(te(xe,150,H,W))return console.log("📍 Found empty space to the right of existing content"),{x:xe,y:150};const ce=_e+200;if(te(150,ce,H,W))return console.log("📍 Found empty space below existing content"),{x:150,y:ce};const se=Se-W-200;if(se>=150&&te(150,se,H,W))return console.log("📍 Found empty space above existing content"),{x:150,y:se};const ne=ke-H-200;if(ne>=150&&te(ne,150,H,W))return console.log("📍 Found empty space to the left of existing content"),{x:ne,y:150};for(let pe=150;pe<2150;pe+=500)for(let fe=150;fe<3150;fe+=500)if(te(fe,pe,H,W))return console.log(`📍 Found empty space via grid search at (${fe}, ${pe})`),{x:fe,y:pe};const ie=ye+500,Ee=150;return console.log("📍 Using fallback position - placing far to the right"),{x:ie,y:Ee}})(),Y=400,U=200,q=O.x,Z=O.y,J=new T,be=X=>{var H,W,G;let ge=120;if(X.type==="answer"&&((H=X.data)==null?void 0:H.answerType)==="combinations"){const te=((W=X.data)==null?void 0:W.combinations)||[],ke=((G=X.data)==null?void 0:G.variants)||[];if(te.length>0){const ye=ke.length*50,Se=te.length*70;ge=200+ye+Se}}return{width:300,height:ge}},Ne=new Map,B=new Map;x.forEach(X=>{Ne.set(X.id,[]),B.set(X.id,[])}),i.forEach(X=>{const Q=Ne.get(X.source)||[];Q.push(X.target),Ne.set(X.source,Q);const ge=B.get(X.target)||[];ge.push(X.source),B.set(X.target,ge)});const oe=[],ee=new Set,re=X=>{const Q=[],ge=[X],H=new Set;for(;ge.length>0;){const W=ge.pop();if(H.has(W.id))continue;H.add(W.id),ee.add(W.id),Q.push(W);const G=Ne.get(W.id)||[],te=B.get(W.id)||[];[...G,...te].forEach(ke=>{const ye=x.find(Se=>Se.id===ke);ye&&!H.has(ke)&&ge.push(ye)})}return Q};x.forEach(X=>{if(!ee.has(X.id)){const Q=re(X);Q.length>0&&oe.push(Q)}}),console.log("🎯 Components found:",oe.length);const we=(X,Q)=>{const ge=new Set(X.map(se=>se.id)),W=(()=>{const se=X.filter(ie=>(B.get(ie.id)||[]).filter(pe=>ge.has(pe)).length===0);if(se.length===0)return[X[0]];let ne=[];for(const ie of se){const Ee=[];let pe=ie;const fe=new Set;for(;pe&&!fe.has(pe.id);){fe.add(pe.id),Ee.push(pe);const le=(Ne.get(pe.id)||[]).map(ue=>X.find(ve=>ve.id===ue)).filter(ue=>ue!==void 0&&ge.has(ue.id)&&!fe.has(ue.id));if(le.length===0){pe=null;break}pe=le.reduce((ue,ve)=>{const Ie=(Ne.get(ve.id)||[]).length+(B.get(ve.id)||[]).length,Ce=(Ne.get(ue.id)||[]).length+(B.get(ue.id)||[]).length;return Ie>Ce?ve:ue})}Ee.length>ne.length&&(ne=Ee)}return ne})(),G=new Set(W.map(se=>se.id)),te=W.length*Y+800,ke=600;let ye,Se;if(Q===0)ye=q,Se=Z;else{const se=q,ne=Z+Q*400,ie=J.findNearestFreePosition(se,ne,te,ke,q,Z,3e3);ye=ie.x,Se=ie.y,console.log(`📍 Component ${Q} positioned at (${ye}, ${Se}) - estimated size: ${te}×${ke}px`)}const _e=[],xe=new Map;W.forEach((se,ne)=>{const{width:ie,height:Ee}=be(se),pe=ye+ne*Y,fe=Se,he=J.findNearestFreePosition(pe,fe,ie,Ee,q,Z);J.occupyPosition(he.x,he.y,ie,Ee),xe.set(se.id,he),_e.push({...se,position:he}),console.log(`📍 Main path ${ne}: ${se.id} at (${he.x}, ${he.y}) [${ie}x${Ee}]`)});const ce=X.filter(se=>!G.has(se.id));for(const se of ce){const{width:ne,height:ie}=be(se),Ee=B.get(se.id)||[],pe=Ne.get(se.id)||[];let fe=null;for(const he of Ee)if(G.has(he)){fe=W.find(le=>le.id===he)||null;break}if(!fe){for(const he of pe)if(G.has(he)){fe=W.find(le=>le.id===he)||null;break}}if(!fe&&W.length>0&&(fe=W[0]),fe){const he=xe.get(fe.id),le=be(fe).height,ue=[{x:he.x,y:he.y-ie-U},{x:he.x,y:he.y+le+U},{x:he.x-ne-100,y:he.y},{x:he.x+300+100,y:he.y},{x:he.x-ne-100,y:he.y-ie-U},{x:he.x+300+100,y:he.y-ie-U},{x:he.x-ne-100,y:he.y+le+U},{x:he.x+300+100,y:he.y+le+U}];let ve=null;for(const Ie of ue)if(Ie.x>=q&&Ie.y>=Z&&J.isPositionFree(Ie.x,Ie.y,ne,ie)){ve=Ie;break}ve||(ve=J.findNearestFreePosition(he.x,he.y-ie-U,ne,ie,q,Z)),J.occupyPosition(ve.x,ve.y,ne,ie),xe.set(se.id,ve),_e.push({...se,position:ve}),console.log(`📍 Branch: ${se.id} at (${ve.x}, ${ve.y}) [${ne}x${ie}] connected to ${fe.id}`)}}return _e},ae=[];oe.forEach((X,Q)=>{const ge=we(X,Q);ae.push(...ge)}),x.filter(X=>!ae.some(Q=>Q.id===X.id)).forEach(X=>{const{width:Q,height:ge}=be(X),H=q,W=Z+oe.length*300,G=J.findNearestFreePosition(H,W,Q,ge,q,Z);J.occupyPosition(G.x,G.y,Q,ge),ae.push({...X,position:G}),console.log(`📍 Isolated: ${X.id} at (${G.x}, ${G.y}) [${Q}x${ge}]`)}),console.log("🎯 PowerPoint-style layout with HARD CONSTRAINTS complete. Nodes positioned:",ae.length),console.log("🔒 GUARANTEE: Zero overlaps enforced by spatial grid system"),r&&ae.length>0?r(ae):a(ae)},z=()=>{m(!1),v(null),_(null)},P=()=>{y&&(r==null||r(y.nodes),s(y.edges),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate()),m(!1),v(null),_(null)},k=()=>{z()};return u.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:C,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Organize nodes in a hierarchical layout",children:[u.jsx(Nb,{size:16}),u.jsx("span",{children:"Organize"})]}),u.jsxs("button",{onClick:c,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Toggle visibility of path displays and combination sections",children:[f||d?u.jsx(k0,{size:16}):u.jsx(gb,{size:16}),u.jsx("span",{children:f||d?"Unfold Meta":"Fold Meta"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("div",{className:"relative",ref:w,children:[u.jsxs("button",{onClick:()=>p(!h),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(E0,{size:16}),u.jsx("span",{children:"Add Question"}),u.jsx(un,{size:14})]}),h&&u.jsxs("div",{className:"absolute top-full left-0 mt-1 w-[140px] bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[u.jsx("button",{onClick:M,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"ROOT"}),u.jsx("button",{onClick:A,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-b-lg",children:"REGULAR"})]})]}),u.jsxs("button",{onClick:b,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(_0,{size:16}),u.jsx("span",{children:"Add Answer"})]}),u.jsxs("button",{onClick:R,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(C0,{size:16}),u.jsx("span",{children:"Add Outcome"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:D,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(b0,{size:16}),u.jsx("span",{children:"Export JSON"})]}),u.jsxs("button",{onClick:L,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(I0,{size:16}),u.jsx("span",{children:"Import JSON"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:N,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-slate-500 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(mb,{size:16}),u.jsx("span",{children:"Load Demo"})]}),u.jsxs("button",{onClick:$,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(bb,{size:16}),u.jsx("span",{children:"Clear All"})]})]}),u.jsx(zb,{isOpen:S,importResult:g,onAccept:z,onRevert:P,onClose:k})]})}function Lb({onEnterApp:e}){return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[u.jsxs("div",{className:"relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10"}),u.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"flex items-center justify-center mb-6",children:u.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:u.jsx(yb,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"Question Flow Builder"}),u.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Create interactive questionnaire flows with a powerful visual interface. Design complex decision trees, manage answer variants, and export your work seamlessly."}),u.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[u.jsx(xp,{className:"w-5 h-5 mr-2"}),"Start Building",u.jsx(ja,{className:"w-5 h-5 ml-2"})]})]})})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Everything you need to create professional questionnaire flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(wb,{className:"w-6 h-6 text-blue-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Visual Flow Builder"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop nodes to create complex questionnaire flows. Connect questions, answers, and outcomes with intuitive visual connections."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(yp,{className:"w-6 h-6 text-cyan-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),u.jsx("p",{className:"text-gray-600",children:"Double-click any node, answer variant, or combination to instantly focus on the next connected element. Navigate your flow with ease."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(vb,{className:"w-6 h-6 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Keyboard Shortcuts"}),u.jsx("p",{className:"text-gray-600",children:"Work efficiently with keyboard shortcuts: Tab to create nodes, Delete to remove, Cmd/Ctrl+Z for undo, and more."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(I0,{className:"w-3 h-3 text-purple-600"}),u.jsx(b0,{className:"w-3 h-3 text-purple-600"})]})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Import & Export"}),u.jsx("p",{className:"text-gray-600",children:"Import Excel files or JSON flows. Export your work to share or backup. Seamless integration with existing workflows."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(k0,{className:"w-6 h-6 text-orange-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Real-time Validation"}),u.jsx("p",{className:"text-gray-600",children:"Instant visual feedback for orphaned nodes, missing connections, and flow integrity issues. Orange highlights show problems."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(mp,{className:"w-6 h-6 text-indigo-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path IDs"}),u.jsx("p",{className:"text-gray-600",children:"Automatic generation of hierarchical path IDs (Q1, Q2, A1, A2, E1, E2) for questions, answers, and outcomes. All paths visible on nodes."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(gp,{className:"w-6 h-6 text-rose-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Answer Combinations"}),u.jsx("p",{className:"text-gray-600",children:"Create complex multi-select scenarios with combination logic. Generate paths like V1+V2, V1+V3 for sophisticated questionnaire flows."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(_b,{className:"w-6 h-6 text-teal-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path Propagation"}),u.jsx("p",{className:"text-gray-600",children:"Intelligent path propagation across all answer types. Single, Multiple, and Combinations modes all generate correct variant paths."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(Eb,{className:"w-6 h-6 text-emerald-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Undo/Redo System"}),u.jsx("p",{className:"text-gray-600",children:"50-state history with standard keyboard shortcuts. Never lose your work with comprehensive undo/redo functionality."})]})]})]}),u.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Demonstrations of Interactions"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Here are a few things you can do"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"group-hover:animate-pulse bg-white border-2 border-blue-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"Question"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"What's your level?"})]}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"group-hover:animate-bounce",children:u.jsx(ja,{className:"w-4 h-4 text-blue-500 transform group-hover:translate-x-2 transition-transform duration-500"})})}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Beginner"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Double-click any node to smoothly focus on the next connected element with zoom animation."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Main"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-200",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 1"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-300",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 2"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-400",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 3"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sibling Node Highlighting"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Single-click highlights all neighboring nodes in green for 3-5 seconds to show relationships."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700 mb-2",children:"Advanced"}),u.jsxs("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full group-hover:bg-green-100 group-hover:text-green-800 transition-colors duration-500",children:[u.jsx("span",{className:"group-hover:hidden",children:"Topic-Q1-A1"}),u.jsx("span",{className:"hidden group-hover:inline",children:"Topic-Q1-A1-E1"})]})]}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"w-0.5 h-6 bg-gray-300 group-hover:bg-green-500 transition-colors duration-500"})}),u.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:bg-gradient-to-br group-hover:from-green-50 group-hover:to-emerald-50 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full group-hover:bg-green-500 transition-colors duration-500"}),u.jsxs("span",{className:"text-xs font-semibold text-orange-600 group-hover:text-green-600 transition-colors duration-500",children:[u.jsx("span",{className:"group-hover:hidden",children:"Orphan"}),u.jsx("span",{className:"hidden group-hover:inline",children:"Outcome"})]})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Expert Path"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Orphan Node Connection"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connecting orphan nodes turns them green and updates their path IDs automatically."})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Answer Types & Modes"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Three powerful modes for different questionnaire scenarios"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Single Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Traditional single-choice questions where users select one answer from multiple options."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A1-E1"}),u.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A2-E2"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Multiple Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Multi-choice questions where each answer variant creates its own independent path."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V1-E1"}),u.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V2-E2"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(gp,{className:"w-6 h-6 text-rose-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Combinations Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Advanced multi-select with combination logic. Each possible combination of answers creates unique paths."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V2-E1"}),u.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V3-E2"})]})]})]})]})}),u.jsx("div",{className:"bg-white py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Node Types & Visual Guide"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Understanding the visual language of your flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"Question"})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"What is your experience level?"}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q1"}),u.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q2"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(E0,{className:"w-5 h-5 inline mr-2 text-blue-500"}),"Question Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Blue theme • Single outgoing connection • Contains question text and level information • Shows all propagated path IDs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-purple-600",children:"Answer"})]}),u.jsxs("div",{className:"space-y-2 mb-3",children:[u.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"Yes (Score: 1)"}),u.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"No (Score: 0)"})]}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1"}),u.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(_0,{className:"w-5 h-5 inline mr-2 text-purple-500"}),"Answer Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Purple theme • Three modes: Single, Multiple, Combinations • Scoring system • Shows all propagated path IDs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-green-600",children:"Outcome"})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"You should explore visual tools..."}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-E1"}),u.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1-E1"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(C0,{className:"w-5 h-5 inline mr-2 text-green-500"}),"Outcome Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Green theme • End points • Contains recommendations • No outgoing connections • Shows all propagated path IDs"})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Navigation & Interaction"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Intuitive ways to navigate and interact with your flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:u.jsx(yp,{className:"w-8 h-8 text-cyan-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"Double-Click Navigation"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Question Nodes"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the connected answer node"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Answer Nodes (Single)"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the next connected node"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Answer Variants (Multiple)"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click individual variants to follow their path"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Combinations"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click combination items to navigate their unique paths"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:u.jsx(mp,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"PathID Display System"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"All Nodes Show Multiple Paths"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Every node displays all propagated path IDs as badges, making it easy to track complex flows"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Automatic Propagation"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Path IDs automatically propagate through the flow, updating connected nodes when changes occur"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Smart Variant Generation"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Multiple and Combinations modes generate appropriate variant paths (V1, V2, V1+V2, etc.)"})]})]})]})]})]})}),u.jsx("div",{className:"bg-gray-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Visual Indicators & Alerts"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Understand what the colors and effects mean"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-orange-100 rounded-lg border-2 border-orange-300 ring-2 ring-orange-400 flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Orange Glow"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Orphaned nodes or variants missing connections"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-green-100 rounded-lg border-2 border-green-300 ring-2 ring-green-400 flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Green Glow"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Selected node and its connected parent/child nodes"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-1 bg-blue-500 rounded shadow-lg",style:{boxShadow:"0 0 8px rgba(37, 99, 235, 0.6)"}})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Blue Edges"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connections from selected nodes with blue glow effect"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Gray Edges"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Default connection lines between nodes"})]})]})]})}),u.jsx("div",{className:"bg-white py-16",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Keyboard Shortcuts"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Work faster with these essential shortcuts"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Navigation & Selection"}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Create linked question"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Tab"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Multi-select nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Shift + Drag"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Copy selected nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/⌘ + C"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Paste nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/⌘ + V"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Delete selected node"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Delete"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Deselect all"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Escape"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Undo & Redo"}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Undo (Windows)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Z"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Undo (Mac)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"⌘ + Z"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Redo (Windows)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Y"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Redo (Mac)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"⌘ + ⇧ + Z"})]})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 py-16",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Build Your First Flow?"}),u.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Start with our pre-loaded example or create your own from scratch"}),u.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[u.jsx(xp,{className:"w-5 h-5 mr-2"}),"Launch Flow Builder",u.jsx(ja,{className:"w-5 h-5 ml-2"})]})]})})]})}const Ob=[{id:"q1",type:"question",position:{x:100,y:100},data:{pathId:"TOPIC-1-Q1",topic:"TOPIC-1",isRoot:!0,questionText:"What is your experience level with React?",questionLevel:1,elementId:"TOPIC-1",subElementId:"REACT"}},{id:"a1",type:"answer",position:{x:100,y:250},data:{pathId:"TOPIC-1-Q1-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Beginner",score:1},{id:"var2",text:"Intermediate",score:2},{id:"var3",text:"Advanced",score:3}]}},{id:"q2",type:"question",position:{x:450,y:100},data:{pathId:"TOPIC-1-Q1-A1-Q2",topic:"TOPIC-1",isRoot:!1,questionText:"Do you prefer TypeScript over JavaScript?",questionLevel:2,elementId:"TOPIC-1",subElementId:"TYPESCRIPT"}},{id:"a2",type:"answer",position:{x:450,y:250},data:{pathId:"TOPIC-1-Q1-A1-Q2-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},{id:"q3",type:"question",position:{x:100,y:400},data:{pathId:"TOPIC-2-Q1",topic:"TOPIC-2",isRoot:!0,questionText:"What is your preferred development environment?",questionLevel:1,elementId:"TOPIC-2",subElementId:"DEVENV"}},{id:"a3",type:"answer",position:{x:100,y:550},data:{pathId:"TOPIC-2-Q1-A1",topic:"TOPIC-2",answerType:"multiple",variants:[{id:"var1",text:"VS Code",score:1},{id:"var2",text:"WebStorm",score:2},{id:"var3",text:"Vim/Neovim",score:3}]}},{id:"outcome1",type:"outcome",position:{x:800,y:300},data:{pathId:"CROSS-CONNECTED-E1",topic:"CROSS-CONNECTED",outcomeText:"Recommended Learning Path",outcomeType:"recommendation",score:0}}],Fb=[{id:"e1",source:"q1",target:"a1",animated:!0,type:"smoothstep"},{id:"e2",source:"a1",target:"q2",animated:!0,type:"smoothstep"},{id:"e3",source:"q2",target:"a2",animated:!0,type:"smoothstep"},{id:"e4",source:"q3",target:"a3",animated:!0,type:"smoothstep"},{id:"e5",source:"a2",target:"outcome1",animated:!0,type:"smoothstep"},{id:"e6",source:"a3",target:"outcome1",sourceHandle:"variant-0",animated:!0,type:"smoothstep"}],Ur={nodes:Ob,edges:Fb};function Hb(){const[e,t]=j.useState(!0),[n,r]=j.useState(!1),o=j.useRef(!1),{nodes:s,addNode:i,setNodes:l,setEdges:a,clearFlow:c}=Re(),f=j.useCallback(async()=>{try{const m=await fetch("/qnatool/flow-Topic-1752233651561.json");if(m.ok){const g=await m.json(),v=new Wc,{nodes:y,edges:_}=v.importFromJson(g);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),l(y),a(_),console.log("Default flow loaded successfully")}else console.warn("Default flow not found, loading demo data instead"),l(Ur.nodes),a(Ur.edges)}catch(m){console.error("Error loading default flow:",m),l(Ur.nodes),a(Ur.edges)}t(!1),r(!0)},[l,a]),d=j.useCallback(m=>{i(m)},[i]),h=j.useCallback(()=>{r(!1),o.current=!0,console.log("Auto-organize completed")},[]),p=j.useCallback(()=>{l(Ur.nodes),a(Ur.edges),setTimeout(()=>{const{cleanupDuplicateEdges:m}=Re.getState();m()},100)},[l,a]),w=j.useCallback(()=>{c()},[c]),x=j.useCallback(m=>{l(m)},[l]),S=j.useCallback(()=>{t(!0)},[]);return e?u.jsx(Lb,{onEnterApp:f}):u.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:S,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"← Back to Home"}),u.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Question Flow Builder"})]}),u.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," nodes • Auto-loaded flow"]})]}),u.jsx(Db,{onAddNode:d,onLoadDemo:p,onClearAll:w,onSetNodes:x,nodes:s}),u.jsx("div",{className:"flex-1",children:u.jsx(td,{children:u.jsx(Mb,{shouldAutoOrganize:n&&!o.current,onAutoOrganizeComplete:h})})})]})}Ta.createRoot(document.getElementById("root")).render(u.jsx(V.StrictMode,{children:u.jsx(Hb,{})}));
