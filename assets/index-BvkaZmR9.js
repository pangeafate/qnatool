var W0=Object.defineProperty;var Q0=(e,t,n)=>t in e?W0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ls=(e,t,n)=>Q0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Np={exports:{}},ul={},Sp={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=Symbol.for("react.element"),q0=Symbol.for("react.portal"),Y0=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),Z0=Symbol.for("react.context"),J0=Symbol.for("react.forward_ref"),ey=Symbol.for("react.suspense"),ty=Symbol.for("react.memo"),ny=Symbol.for("react.lazy"),cd=Symbol.iterator;function ry(e){return e===null||typeof e!="object"?null:(e=cd&&e[cd]||e["@@iterator"],typeof e=="function"?e:null)}var bp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ep=Object.assign,kp={};function No(e,t,n){this.props=e,this.context=t,this.refs=kp,this.updater=n||bp}No.prototype.isReactComponent={};No.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};No.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _p(){}_p.prototype=No.prototype;function qc(e,t,n){this.props=e,this.context=t,this.refs=kp,this.updater=n||bp}var Yc=qc.prototype=new _p;Yc.constructor=qc;Ep(Yc,No.prototype);Yc.isPureReactComponent=!0;var ud=Array.isArray,Cp=Object.prototype.hasOwnProperty,Xc={current:null},jp={key:!0,ref:!0,__self:!0,__source:!0};function Ip(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)Cp.call(t,r)&&!jp.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];o.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:js,type:e,key:s,ref:i,props:o,_owner:Xc.current}}function oy(e,t){return{$$typeof:js,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kc(e){return typeof e=="object"&&e!==null&&e.$$typeof===js}function sy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dd=/\/+/g;function Bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sy(""+e.key):t.toString(36)}function fi(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case js:case q0:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Bl(i,0):r,ud(o)?(n="",e!=null&&(n=e.replace(dd,"$&/")+"/"),fi(o,t,n,"",function(c){return c})):o!=null&&(Kc(o)&&(o=oy(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(dd,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",ud(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+Bl(s,l);i+=fi(s,t,n,a,o)}else if(a=ry(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+Bl(s,l++),i+=fi(s,t,n,a,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Fs(e,t,n){if(e==null)return e;var r=[],o=0;return fi(e,r,"","",function(s){return t.call(n,s,o++)}),r}function iy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},pi={transition:null},ly={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:pi,ReactCurrentOwner:Xc};function Pp(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Fs,forEach:function(e,t,n){Fs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Fs(e,function(){t++}),t},toArray:function(e){return Fs(e,function(t){return t})||[]},only:function(e){if(!Kc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=No;Ee.Fragment=Y0;Ee.Profiler=K0;Ee.PureComponent=qc;Ee.StrictMode=X0;Ee.Suspense=ey;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ly;Ee.act=Pp;Ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ep({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Xc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Cp.call(t,a)&&!jp.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:js,type:e.type,key:o,ref:s,props:r,_owner:i}};Ee.createContext=function(e){return e={$$typeof:Z0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:G0,_context:e},e.Consumer=e};Ee.createElement=Ip;Ee.createFactory=function(e){var t=Ip.bind(null,e);return t.type=e,t};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:J0,render:e}};Ee.isValidElement=Kc;Ee.lazy=function(e){return{$$typeof:ny,_payload:{_status:-1,_result:e},_init:iy}};Ee.memo=function(e,t){return{$$typeof:ty,type:e,compare:t===void 0?null:t}};Ee.startTransition=function(e){var t=pi.transition;pi.transition={};try{e()}finally{pi.transition=t}};Ee.unstable_act=Pp;Ee.useCallback=function(e,t){return dt.current.useCallback(e,t)};Ee.useContext=function(e){return dt.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};Ee.useEffect=function(e,t){return dt.current.useEffect(e,t)};Ee.useId=function(){return dt.current.useId()};Ee.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};Ee.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};Ee.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};Ee.useMemo=function(e,t){return dt.current.useMemo(e,t)};Ee.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};Ee.useRef=function(e){return dt.current.useRef(e)};Ee.useState=function(e){return dt.current.useState(e)};Ee.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};Ee.useTransition=function(){return dt.current.useTransition()};Ee.version="18.3.1";Sp.exports=Ee;var I=Sp.exports;const V=wp(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=I,cy=Symbol.for("react.element"),uy=Symbol.for("react.fragment"),dy=Object.prototype.hasOwnProperty,fy=ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,py={key:!0,ref:!0,__self:!0,__source:!0};function Tp(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)dy.call(t,r)&&!py.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:cy,type:e,key:s,ref:i,props:o,_owner:fy.current}}ul.Fragment=uy;ul.jsx=Tp;ul.jsxs=Tp;Np.exports=ul;var u=Np.exports,Ta={},$p={exports:{}},jt={},Mp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,k){var P=T.length;T.push(k);e:for(;0<P;){var L=P-1>>>1,H=T[L];if(0<o(H,k))T[L]=k,T[P]=H,P=L;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var k=T[0],P=T.pop();if(P!==k){T[0]=P;e:for(var L=0,H=T.length,q=H>>>1;L<q;){var Q=2*(L+1)-1,Y=T[Q],G=Q+1,te=T[G];if(0>o(Y,P))G<H&&0>o(te,Y)?(T[L]=te,T[G]=P,L=G):(T[L]=Y,T[Q]=P,L=Q);else if(G<H&&0>o(te,P))T[L]=te,T[G]=P,L=G;else break e}}return k}function o(T,k){var P=T.sortIndex-k.sortIndex;return P!==0?P:T.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var a=[],c=[],f=1,d=null,h=3,p=!1,w=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var k=n(c);k!==null;){if(k.callback===null)r(c);else if(k.startTime<=T)r(c),k.sortIndex=k.expirationTime,t(a,k);else break;k=n(c)}}function y(T){if(v=!1,x(T),!w)if(n(a)!==null)w=!0,j(_);else{var k=n(c);k!==null&&F(y,k.startTime-T)}}function _(T,k){w=!1,v&&(v=!1,m(z),z=-1),p=!0;var P=h;try{for(x(k),d=n(a);d!==null&&(!(d.expirationTime>k)||T&&!R());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var H=L(d.expirationTime<=k);k=e.unstable_now(),typeof H=="function"?d.callback=H:d===n(a)&&r(a),x(k)}else r(a);d=n(a)}if(d!==null)var q=!0;else{var Q=n(c);Q!==null&&F(y,Q.startTime-k),q=!1}return q}finally{d=null,h=P,p=!1}}var b=!1,C=null,z=-1,A=5,E=-1;function R(){return!(e.unstable_now()-E<A)}function D(){if(C!==null){var T=e.unstable_now();E=T;var k=!0;try{k=C(!0,T)}finally{k?O():(b=!1,C=null)}}else b=!1}var O;if(typeof g=="function")O=function(){g(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,M=N.port2;N.port1.onmessage=D,O=function(){M.postMessage(null)}}else O=function(){S(D,0)};function j(T){C=T,b||(b=!0,O())}function F(T,k){z=S(function(){T(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,j(_))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var P=h;h=k;try{return T()}finally{h=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,k){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var P=h;h=T;try{return k()}finally{h=P}},e.unstable_scheduleCallback=function(T,k,P){var L=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?L+P:L):P=L,T){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=P+H,T={id:f++,callback:k,priorityLevel:T,startTime:P,expirationTime:H,sortIndex:-1},P>L?(T.sortIndex=P,t(c,T),n(a)===null&&T===n(c)&&(v?(m(z),z=-1):v=!0,F(y,P-L))):(T.sortIndex=H,t(a,T),w||p||(w=!0,j(_))),T},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(T){var k=h;return function(){var P=h;h=k;try{return T.apply(this,arguments)}finally{h=P}}}})(Ap);Mp.exports=Ap;var hy=Mp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my=I,Et=hy;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zp=new Set,ts={};function jr(e,t){lo(e,t),lo(e+"Capture",t)}function lo(e,t){for(ts[e]=t,e=0;e<t.length;e++)zp.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fd={},pd={};function yy(e){return $a.call(pd,e)?!0:$a.call(fd,e)?!1:gy.test(e)?pd[e]=!0:(fd[e]=!0,!1)}function xy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vy(e,t,n,r){if(t===null||typeof t>"u"||xy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nt[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nt[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nt[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nt[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nt[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nt[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nt[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nt[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nt[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gc=/[\-:]([a-z])/g;function Zc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gc,Zc);nt[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gc,Zc);nt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gc,Zc);nt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nt[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});nt.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nt[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jc(e,t,n,r){var o=nt.hasOwnProperty(t)?nt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vy(t,n,o,r)&&(n=null),r||o===null?yy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Cn=my.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Fr=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),Ma=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),tu=Symbol.for("react.forward_ref"),Aa=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),nu=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),Op=Symbol.for("react.offscreen"),hd=Symbol.iterator;function _o(e){return e===null||typeof e!="object"?null:(e=hd&&e[hd]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Ul;function Lo(e){if(Ul===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ul=t&&t[1]||""}return`
`+Ul+e}var Wl=!1;function Ql(e,t){if(!e||Wl)return"";Wl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var a=`
`+o[i].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=i&&0<=l);break}}}finally{Wl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Lo(e):""}function wy(e){switch(e.tag){case 5:return Lo(e.type);case 16:return Lo("Lazy");case 13:return Lo("Suspense");case 19:return Lo("SuspenseList");case 0:case 2:case 15:return e=Ql(e.type,!1),e;case 11:return e=Ql(e.type.render,!1),e;case 1:return e=Ql(e.type,!0),e;default:return""}}function Ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fr:return"Fragment";case Lr:return"Portal";case Ma:return"Profiler";case eu:return"StrictMode";case Aa:return"Suspense";case za:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dp:return(e.displayName||"Context")+".Consumer";case Rp:return(e._context.displayName||"Context")+".Provider";case tu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nu:return t=e.displayName||null,t!==null?t:Ra(e.type)||"Memo";case $n:t=e._payload,e=e._init;try{return Ra(e(t))}catch{}}return null}function Ny(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ra(t);case 8:return t===eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sy(e){var t=Lp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vs(e){e._valueTracker||(e._valueTracker=Sy(e))}function Fp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Lp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Da(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function md(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hp(e,t){t=t.checked,t!=null&&Jc(e,"checked",t,!1)}function Oa(e,t){Hp(e,t);var n=Gn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?La(e,t.type,n):t.hasOwnProperty("defaultValue")&&La(e,t.type,Gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function La(e,t,n){(t!=="number"||ji(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fo=Array.isArray;function Zr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Fa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(Fo(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gn(n)}}function Vp(e,t){var n=Gn(t.value),r=Gn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ha(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bs,Up=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ns(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},by=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(e){by.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qo[t]=Qo[e]})});function Wp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qo.hasOwnProperty(e)&&Qo[e]?(""+t).trim():t+"px"}function Qp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Wp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Ey=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Va(e,t){if(t){if(Ey[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Ba(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=null;function ru(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wa=null,Jr=null,eo=null;function vd(e){if(e=Ts(e)){if(typeof Wa!="function")throw Error(X(280));var t=e.stateNode;t&&(t=ml(t),Wa(e.stateNode,e.type,t))}}function qp(e){Jr?eo?eo.push(e):eo=[e]:Jr=e}function Yp(){if(Jr){var e=Jr,t=eo;if(eo=Jr=null,vd(e),t)for(e=0;e<t.length;e++)vd(t[e])}}function Xp(e,t){return e(t)}function Kp(){}var ql=!1;function Gp(e,t,n){if(ql)return e(t,n);ql=!0;try{return Xp(e,t,n)}finally{ql=!1,(Jr!==null||eo!==null)&&(Kp(),Yp())}}function rs(e,t){var n=e.stateNode;if(n===null)return null;var r=ml(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var Qa=!1;if(Nn)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Qa=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Qa=!1}function ky(e,t,n,r,o,s,i,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var qo=!1,Ii=null,Pi=!1,qa=null,_y={onError:function(e){qo=!0,Ii=e}};function Cy(e,t,n,r,o,s,i,l,a){qo=!1,Ii=null,ky.apply(_y,arguments)}function jy(e,t,n,r,o,s,i,l,a){if(Cy.apply(this,arguments),qo){if(qo){var c=Ii;qo=!1,Ii=null}else throw Error(X(198));Pi||(Pi=!0,qa=c)}}function Ir(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Zp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wd(e){if(Ir(e)!==e)throw Error(X(188))}function Iy(e){var t=e.alternate;if(!t){if(t=Ir(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return wd(o),e;if(s===r)return wd(o),t;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function Jp(e){return e=Iy(e),e!==null?eh(e):null}function eh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eh(e);if(t!==null)return t;e=e.sibling}return null}var th=Et.unstable_scheduleCallback,Nd=Et.unstable_cancelCallback,Py=Et.unstable_shouldYield,Ty=Et.unstable_requestPaint,We=Et.unstable_now,$y=Et.unstable_getCurrentPriorityLevel,ou=Et.unstable_ImmediatePriority,nh=Et.unstable_UserBlockingPriority,Ti=Et.unstable_NormalPriority,My=Et.unstable_LowPriority,rh=Et.unstable_IdlePriority,dl=null,sn=null;function Ay(e){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(dl,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Dy,zy=Math.log,Ry=Math.LN2;function Dy(e){return e>>>=0,e===0?32:31-(zy(e)/Ry|0)|0}var Us=64,Ws=4194304;function Ho(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $i(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=Ho(l):(s&=i,s!==0&&(r=Ho(s)))}else i=n&~o,i!==0?r=Ho(i):s!==0&&(r=Ho(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kt(t),o=1<<n,r|=e[n],t&=~o;return r}function Oy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ly(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Kt(s),l=1<<i,a=o[i];a===-1?(!(l&n)||l&r)&&(o[i]=Oy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Ya(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oh(){var e=Us;return Us<<=1,!(Us&4194240)&&(Us=64),e}function Yl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Is(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function Fy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Kt(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function su(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ie=0;function sh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ih,iu,lh,ah,ch,Xa=!1,Qs=[],Hn=null,Vn=null,Bn=null,os=new Map,ss=new Map,Rn=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sd(e,t){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(t.pointerId)}}function jo(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ts(t),t!==null&&iu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Vy(e,t,n,r,o){switch(t){case"focusin":return Hn=jo(Hn,e,t,n,r,o),!0;case"dragenter":return Vn=jo(Vn,e,t,n,r,o),!0;case"mouseover":return Bn=jo(Bn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return os.set(s,jo(os.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,ss.set(s,jo(ss.get(s)||null,e,t,n,r,o)),!0}return!1}function uh(e){var t=dr(e.target);if(t!==null){var n=Ir(t);if(n!==null){if(t=n.tag,t===13){if(t=Zp(n),t!==null){e.blockedOn=t,ch(e.priority,function(){lh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ka(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ua=r,n.target.dispatchEvent(r),Ua=null}else return t=Ts(n),t!==null&&iu(t),e.blockedOn=n,!1;t.shift()}return!0}function bd(e,t,n){hi(e)&&n.delete(t)}function By(){Xa=!1,Hn!==null&&hi(Hn)&&(Hn=null),Vn!==null&&hi(Vn)&&(Vn=null),Bn!==null&&hi(Bn)&&(Bn=null),os.forEach(bd),ss.forEach(bd)}function Io(e,t){e.blockedOn===t&&(e.blockedOn=null,Xa||(Xa=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,By)))}function is(e){function t(o){return Io(o,e)}if(0<Qs.length){Io(Qs[0],e);for(var n=1;n<Qs.length;n++){var r=Qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hn!==null&&Io(Hn,e),Vn!==null&&Io(Vn,e),Bn!==null&&Io(Bn,e),os.forEach(t),ss.forEach(t),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)uh(n),n.blockedOn===null&&Rn.shift()}var to=Cn.ReactCurrentBatchConfig,Mi=!0;function Uy(e,t,n,r){var o=Ie,s=to.transition;to.transition=null;try{Ie=1,lu(e,t,n,r)}finally{Ie=o,to.transition=s}}function Wy(e,t,n,r){var o=Ie,s=to.transition;to.transition=null;try{Ie=4,lu(e,t,n,r)}finally{Ie=o,to.transition=s}}function lu(e,t,n,r){if(Mi){var o=Ka(e,t,n,r);if(o===null)oa(e,t,r,Ai,n),Sd(e,r);else if(Vy(o,e,t,n,r))r.stopPropagation();else if(Sd(e,r),t&4&&-1<Hy.indexOf(e)){for(;o!==null;){var s=Ts(o);if(s!==null&&ih(s),s=Ka(e,t,n,r),s===null&&oa(e,t,r,Ai,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else oa(e,t,r,null,n)}}var Ai=null;function Ka(e,t,n,r){if(Ai=null,e=ru(r),e=dr(e),e!==null)if(t=Ir(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Zp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ai=e,null}function dh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($y()){case ou:return 1;case nh:return 4;case Ti:case My:return 16;case rh:return 536870912;default:return 16}default:return 16}}var Ln=null,au=null,mi=null;function fh(){if(mi)return mi;var e,t=au,n=t.length,r,o="value"in Ln?Ln.value:Ln.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return mi=o.slice(e,1<r?1-r:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function Ed(){return!1}function It(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qs:Ed,this.isPropagationStopped=Ed,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),t}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=It(So),Ps=Le({},So,{view:0,detail:0}),Qy=It(Ps),Xl,Kl,Po,fl=Le({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Po&&(Po&&e.type==="mousemove"?(Xl=e.screenX-Po.screenX,Kl=e.screenY-Po.screenY):Kl=Xl=0,Po=e),Xl)},movementY:function(e){return"movementY"in e?e.movementY:Kl}}),kd=It(fl),qy=Le({},fl,{dataTransfer:0}),Yy=It(qy),Xy=Le({},Ps,{relatedTarget:0}),Gl=It(Xy),Ky=Le({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),Gy=It(Ky),Zy=Le({},So,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jy=It(Zy),ex=Le({},So,{data:0}),_d=It(ex),tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rx[e])?!!t[e]:!1}function uu(){return ox}var sx=Le({},Ps,{key:function(e){if(e.key){var t=tx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ix=It(sx),lx=Le({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=It(lx),ax=Le({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),cx=It(ax),ux=Le({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),dx=It(ux),fx=Le({},fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),px=It(fx),hx=[9,13,27,32],du=Nn&&"CompositionEvent"in window,Yo=null;Nn&&"documentMode"in document&&(Yo=document.documentMode);var mx=Nn&&"TextEvent"in window&&!Yo,ph=Nn&&(!du||Yo&&8<Yo&&11>=Yo),jd=" ",Id=!1;function hh(e,t){switch(e){case"keyup":return hx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hr=!1;function gx(e,t){switch(e){case"compositionend":return mh(t);case"keypress":return t.which!==32?null:(Id=!0,jd);case"textInput":return e=t.data,e===jd&&Id?null:e;default:return null}}function yx(e,t){if(Hr)return e==="compositionend"||!du&&hh(e,t)?(e=fh(),mi=au=Ln=null,Hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ph&&t.locale!=="ko"?null:t.data;default:return null}}var xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xx[e.type]:t==="textarea"}function gh(e,t,n,r){qp(r),t=zi(t,"onChange"),0<t.length&&(n=new cu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xo=null,ls=null;function vx(e){Ch(e,0)}function pl(e){var t=Ur(e);if(Fp(t))return e}function wx(e,t){if(e==="change")return t}var yh=!1;if(Nn){var Zl;if(Nn){var Jl="oninput"in document;if(!Jl){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Jl=typeof Td.oninput=="function"}Zl=Jl}else Zl=!1;yh=Zl&&(!document.documentMode||9<document.documentMode)}function $d(){Xo&&(Xo.detachEvent("onpropertychange",xh),ls=Xo=null)}function xh(e){if(e.propertyName==="value"&&pl(ls)){var t=[];gh(t,ls,e,ru(e)),Gp(vx,t)}}function Nx(e,t,n){e==="focusin"?($d(),Xo=t,ls=n,Xo.attachEvent("onpropertychange",xh)):e==="focusout"&&$d()}function Sx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pl(ls)}function bx(e,t){if(e==="click")return pl(t)}function Ex(e,t){if(e==="input"||e==="change")return pl(t)}function kx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:kx;function as(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!$a.call(t,o)||!Zt(e[o],t[o]))return!1}return!0}function Md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ad(e,t){var n=Md(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Md(n)}}function vh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wh(){for(var e=window,t=ji();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ji(e.document)}return t}function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _x(e){var t=wh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vh(n.ownerDocument.documentElement,n)){if(r!==null&&fu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Ad(n,s);var i=Ad(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cx=Nn&&"documentMode"in document&&11>=document.documentMode,Vr=null,Ga=null,Ko=null,Za=!1;function zd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Za||Vr==null||Vr!==ji(r)||(r=Vr,"selectionStart"in r&&fu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ko&&as(Ko,r)||(Ko=r,r=zi(Ga,"onSelect"),0<r.length&&(t=new cu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vr)))}function Ys(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Br={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},ea={},Nh={};Nn&&(Nh=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function hl(e){if(ea[e])return ea[e];if(!Br[e])return e;var t=Br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Nh)return ea[e]=t[n];return e}var Sh=hl("animationend"),bh=hl("animationiteration"),Eh=hl("animationstart"),kh=hl("transitionend"),_h=new Map,Rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){_h.set(e,t),jr(t,[e])}for(var ta=0;ta<Rd.length;ta++){var na=Rd[ta],jx=na.toLowerCase(),Ix=na[0].toUpperCase()+na.slice(1);er(jx,"on"+Ix)}er(Sh,"onAnimationEnd");er(bh,"onAnimationIteration");er(Eh,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(kh,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Px=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function Dd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,jy(r,t,void 0,e),e.currentTarget=null}function Ch(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&o.isPropagationStopped())break e;Dd(o,l,c),s=a}else for(i=0;i<r.length;i++){if(l=r[i],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&o.isPropagationStopped())break e;Dd(o,l,c),s=a}}}if(Pi)throw e=qa,Pi=!1,qa=null,e}function Ae(e,t){var n=t[rc];n===void 0&&(n=t[rc]=new Set);var r=e+"__bubble";n.has(r)||(jh(t,e,2,!1),n.add(r))}function ra(e,t,n){var r=0;t&&(r|=4),jh(n,e,r,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function cs(e){if(!e[Xs]){e[Xs]=!0,zp.forEach(function(n){n!=="selectionchange"&&(Px.has(n)||ra(n,!1,e),ra(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,ra("selectionchange",!1,t))}}function jh(e,t,n,r){switch(dh(t)){case 1:var o=Uy;break;case 4:o=Wy;break;default:o=lu}n=o.bind(null,t,n,e),o=void 0,!Qa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function oa(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;i=i.return}for(;l!==null;){if(i=dr(l),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Gp(function(){var c=s,f=ru(n),d=[];e:{var h=_h.get(e);if(h!==void 0){var p=cu,w=e;switch(e){case"keypress":if(gi(n)===0)break e;case"keydown":case"keyup":p=ix;break;case"focusin":w="focus",p=Gl;break;case"focusout":w="blur",p=Gl;break;case"beforeblur":case"afterblur":p=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cx;break;case Sh:case bh:case Eh:p=Gy;break;case kh:p=dx;break;case"scroll":p=Qy;break;case"wheel":p=px;break;case"copy":case"cut":case"paste":p=Jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Cd}var v=(t&4)!==0,S=!v&&e==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var g=c,x;g!==null;){x=g;var y=x.stateNode;if(x.tag===5&&y!==null&&(x=y,m!==null&&(y=rs(g,m),y!=null&&v.push(us(g,y,x)))),S)break;g=g.return}0<v.length&&(h=new p(h,w,null,n,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Ua&&(w=n.relatedTarget||n.fromElement)&&(dr(w)||w[Sn]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?dr(w):null,w!==null&&(S=Ir(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(v=kd,y="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=Cd,y="onPointerLeave",m="onPointerEnter",g="pointer"),S=p==null?h:Ur(p),x=w==null?h:Ur(w),h=new v(y,g+"leave",p,n,f),h.target=S,h.relatedTarget=x,y=null,dr(f)===c&&(v=new v(m,g+"enter",w,n,f),v.target=x,v.relatedTarget=S,y=v),S=y,p&&w)t:{for(v=p,m=w,g=0,x=v;x;x=Mr(x))g++;for(x=0,y=m;y;y=Mr(y))x++;for(;0<g-x;)v=Mr(v),g--;for(;0<x-g;)m=Mr(m),x--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=Mr(v),m=Mr(m)}v=null}else v=null;p!==null&&Od(d,h,p,v,!1),w!==null&&S!==null&&Od(d,S,w,v,!0)}}e:{if(h=c?Ur(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=wx;else if(Pd(h))if(yh)_=Ex;else{_=Sx;var b=Nx}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=bx);if(_&&(_=_(e,c))){gh(d,_,n,f);break e}b&&b(e,h,c),e==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&La(h,"number",h.value)}switch(b=c?Ur(c):window,e){case"focusin":(Pd(b)||b.contentEditable==="true")&&(Vr=b,Ga=c,Ko=null);break;case"focusout":Ko=Ga=Vr=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,zd(d,n,f);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":zd(d,n,f)}var C;if(du)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Hr?hh(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(ph&&n.locale!=="ko"&&(Hr||z!=="onCompositionStart"?z==="onCompositionEnd"&&Hr&&(C=fh()):(Ln=f,au="value"in Ln?Ln.value:Ln.textContent,Hr=!0)),b=zi(c,z),0<b.length&&(z=new _d(z,e,null,n,f),d.push({event:z,listeners:b}),C?z.data=C:(C=mh(n),C!==null&&(z.data=C)))),(C=mx?gx(e,n):yx(e,n))&&(c=zi(c,"onBeforeInput"),0<c.length&&(f=new _d("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=C))}Ch(d,t)})}function us(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zi(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=rs(e,n),s!=null&&r.unshift(us(e,s,o)),s=rs(e,t),s!=null&&r.push(us(e,s,o))),e=e.return}return r}function Mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Od(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,o?(a=rs(n,s),a!=null&&i.unshift(us(n,a,l))):o||(a=rs(n,s),a!=null&&i.push(us(n,a,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Tx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function Ld(e){return(typeof e=="string"?e:""+e).replace(Tx,`
`).replace($x,"")}function Ks(e,t,n){if(t=Ld(t),Ld(e)!==t&&n)throw Error(X(425))}function Ri(){}var Ja=null,ec=null;function tc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nc=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,Fd=typeof Promise=="function"?Promise:void 0,Ax=typeof queueMicrotask=="function"?queueMicrotask:typeof Fd<"u"?function(e){return Fd.resolve(null).then(e).catch(zx)}:nc;function zx(e){setTimeout(function(){throw e})}function sa(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),is(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);is(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bo=Math.random().toString(36).slice(2),rn="__reactFiber$"+bo,ds="__reactProps$"+bo,Sn="__reactContainer$"+bo,rc="__reactEvents$"+bo,Rx="__reactListeners$"+bo,Dx="__reactHandles$"+bo;function dr(e){var t=e[rn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[rn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hd(e);e!==null;){if(n=e[rn])return n;e=Hd(e)}return t}e=n,n=e.parentNode}return null}function Ts(e){return e=e[rn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function ml(e){return e[ds]||null}var oc=[],Wr=-1;function tr(e){return{current:e}}function ze(e){0>Wr||(e.current=oc[Wr],oc[Wr]=null,Wr--)}function $e(e,t){Wr++,oc[Wr]=e.current,e.current=t}var Zn={},lt=tr(Zn),yt=tr(!1),wr=Zn;function ao(e,t){var n=e.type.contextTypes;if(!n)return Zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function xt(e){return e=e.childContextTypes,e!=null}function Di(){ze(yt),ze(lt)}function Vd(e,t,n){if(lt.current!==Zn)throw Error(X(168));$e(lt,t),$e(yt,n)}function Ih(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(X(108,Ny(e)||"Unknown",o));return Le({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zn,wr=lt.current,$e(lt,e),$e(yt,yt.current),!0}function Bd(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=Ih(e,t,wr),r.__reactInternalMemoizedMergedChildContext=e,ze(yt),ze(lt),$e(lt,e)):ze(yt),$e(yt,n)}var hn=null,gl=!1,ia=!1;function Ph(e){hn===null?hn=[e]:hn.push(e)}function Ox(e){gl=!0,Ph(e)}function nr(){if(!ia&&hn!==null){ia=!0;var e=0,t=Ie;try{var n=hn;for(Ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}hn=null,gl=!1}catch(o){throw hn!==null&&(hn=hn.slice(e+1)),th(ou,nr),o}finally{Ie=t,ia=!1}}return null}var Qr=[],qr=0,Li=null,Fi=0,Tt=[],$t=0,Nr=null,mn=1,gn="";function ir(e,t){Qr[qr++]=Fi,Qr[qr++]=Li,Li=e,Fi=t}function Th(e,t,n){Tt[$t++]=mn,Tt[$t++]=gn,Tt[$t++]=Nr,Nr=e;var r=mn;e=gn;var o=32-Kt(r)-1;r&=~(1<<o),n+=1;var s=32-Kt(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,mn=1<<32-Kt(t)+o|n<<o|r,gn=s+e}else mn=1<<s|n<<o|r,gn=e}function pu(e){e.return!==null&&(ir(e,1),Th(e,1,0))}function hu(e){for(;e===Li;)Li=Qr[--qr],Qr[qr]=null,Fi=Qr[--qr],Qr[qr]=null;for(;e===Nr;)Nr=Tt[--$t],Tt[$t]=null,gn=Tt[--$t],Tt[$t]=null,mn=Tt[--$t],Tt[$t]=null}var bt=null,St=null,Re=!1,Wt=null;function $h(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ud(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,St=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Nr!==null?{id:mn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,bt=e,St=null,!0):!1;default:return!1}}function sc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ic(e){if(Re){var t=St;if(t){var n=t;if(!Ud(e,t)){if(sc(e))throw Error(X(418));t=Un(n.nextSibling);var r=bt;t&&Ud(e,t)?$h(r,n):(e.flags=e.flags&-4097|2,Re=!1,bt=e)}}else{if(sc(e))throw Error(X(418));e.flags=e.flags&-4097|2,Re=!1,bt=e}}}function Wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function Gs(e){if(e!==bt)return!1;if(!Re)return Wd(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tc(e.type,e.memoizedProps)),t&&(t=St)){if(sc(e))throw Mh(),Error(X(418));for(;t;)$h(e,t),t=Un(t.nextSibling)}if(Wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){St=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}St=null}}else St=bt?Un(e.stateNode.nextSibling):null;return!0}function Mh(){for(var e=St;e;)e=Un(e.nextSibling)}function co(){St=bt=null,Re=!1}function mu(e){Wt===null?Wt=[e]:Wt.push(e)}var Lx=Cn.ReactCurrentBatchConfig;function To(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function Zs(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qd(e){var t=e._init;return t(e._payload)}function Ah(e){function t(m,g){if(e){var x=m.deletions;x===null?(m.deletions=[g],m.flags|=16):x.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=Yn(m,g),m.index=0,m.sibling=null,m}function s(m,g,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<g?(m.flags|=2,g):x):(m.flags|=2,g)):(m.flags|=1048576,g)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,x,y){return g===null||g.tag!==6?(g=pa(x,m.mode,y),g.return=m,g):(g=o(g,x),g.return=m,g)}function a(m,g,x,y){var _=x.type;return _===Fr?f(m,g,x.props.children,y,x.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===$n&&Qd(_)===g.type)?(y=o(g,x.props),y.ref=To(m,g,x),y.return=m,y):(y=bi(x.type,x.key,x.props,null,m.mode,y),y.ref=To(m,g,x),y.return=m,y)}function c(m,g,x,y){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=ha(x,m.mode,y),g.return=m,g):(g=o(g,x.children||[]),g.return=m,g)}function f(m,g,x,y,_){return g===null||g.tag!==7?(g=yr(x,m.mode,y,_),g.return=m,g):(g=o(g,x),g.return=m,g)}function d(m,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pa(""+g,m.mode,x),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Hs:return x=bi(g.type,g.key,g.props,null,m.mode,x),x.ref=To(m,null,g),x.return=m,x;case Lr:return g=ha(g,m.mode,x),g.return=m,g;case $n:var y=g._init;return d(m,y(g._payload),x)}if(Fo(g)||_o(g))return g=yr(g,m.mode,x,null),g.return=m,g;Zs(m,g)}return null}function h(m,g,x,y){var _=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:l(m,g,""+x,y);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hs:return x.key===_?a(m,g,x,y):null;case Lr:return x.key===_?c(m,g,x,y):null;case $n:return _=x._init,h(m,g,_(x._payload),y)}if(Fo(x)||_o(x))return _!==null?null:f(m,g,x,y,null);Zs(m,x)}return null}function p(m,g,x,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(x)||null,l(g,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hs:return m=m.get(y.key===null?x:y.key)||null,a(g,m,y,_);case Lr:return m=m.get(y.key===null?x:y.key)||null,c(g,m,y,_);case $n:var b=y._init;return p(m,g,x,b(y._payload),_)}if(Fo(y)||_o(y))return m=m.get(x)||null,f(g,m,y,_,null);Zs(g,y)}return null}function w(m,g,x,y){for(var _=null,b=null,C=g,z=g=0,A=null;C!==null&&z<x.length;z++){C.index>z?(A=C,C=null):A=C.sibling;var E=h(m,C,x[z],y);if(E===null){C===null&&(C=A);break}e&&C&&E.alternate===null&&t(m,C),g=s(E,g,z),b===null?_=E:b.sibling=E,b=E,C=A}if(z===x.length)return n(m,C),Re&&ir(m,z),_;if(C===null){for(;z<x.length;z++)C=d(m,x[z],y),C!==null&&(g=s(C,g,z),b===null?_=C:b.sibling=C,b=C);return Re&&ir(m,z),_}for(C=r(m,C);z<x.length;z++)A=p(C,m,z,x[z],y),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?z:A.key),g=s(A,g,z),b===null?_=A:b.sibling=A,b=A);return e&&C.forEach(function(R){return t(m,R)}),Re&&ir(m,z),_}function v(m,g,x,y){var _=_o(x);if(typeof _!="function")throw Error(X(150));if(x=_.call(x),x==null)throw Error(X(151));for(var b=_=null,C=g,z=g=0,A=null,E=x.next();C!==null&&!E.done;z++,E=x.next()){C.index>z?(A=C,C=null):A=C.sibling;var R=h(m,C,E.value,y);if(R===null){C===null&&(C=A);break}e&&C&&R.alternate===null&&t(m,C),g=s(R,g,z),b===null?_=R:b.sibling=R,b=R,C=A}if(E.done)return n(m,C),Re&&ir(m,z),_;if(C===null){for(;!E.done;z++,E=x.next())E=d(m,E.value,y),E!==null&&(g=s(E,g,z),b===null?_=E:b.sibling=E,b=E);return Re&&ir(m,z),_}for(C=r(m,C);!E.done;z++,E=x.next())E=p(C,m,z,E.value,y),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?z:E.key),g=s(E,g,z),b===null?_=E:b.sibling=E,b=E);return e&&C.forEach(function(D){return t(m,D)}),Re&&ir(m,z),_}function S(m,g,x,y){if(typeof x=="object"&&x!==null&&x.type===Fr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Hs:e:{for(var _=x.key,b=g;b!==null;){if(b.key===_){if(_=x.type,_===Fr){if(b.tag===7){n(m,b.sibling),g=o(b,x.props.children),g.return=m,m=g;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===$n&&Qd(_)===b.type){n(m,b.sibling),g=o(b,x.props),g.ref=To(m,b,x),g.return=m,m=g;break e}n(m,b);break}else t(m,b);b=b.sibling}x.type===Fr?(g=yr(x.props.children,m.mode,y,x.key),g.return=m,m=g):(y=bi(x.type,x.key,x.props,null,m.mode,y),y.ref=To(m,g,x),y.return=m,m=y)}return i(m);case Lr:e:{for(b=x.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(m,g.sibling),g=o(g,x.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=ha(x,m.mode,y),g.return=m,m=g}return i(m);case $n:return b=x._init,S(m,g,b(x._payload),y)}if(Fo(x))return w(m,g,x,y);if(_o(x))return v(m,g,x,y);Zs(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,x),g.return=m,m=g):(n(m,g),g=pa(x,m.mode,y),g.return=m,m=g),i(m)):n(m,g)}return S}var uo=Ah(!0),zh=Ah(!1),Hi=tr(null),Vi=null,Yr=null,gu=null;function yu(){gu=Yr=Vi=null}function xu(e){var t=Hi.current;ze(Hi),e._currentValue=t}function lc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function no(e,t){Vi=e,gu=Yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(gu!==e)if(e={context:e,memoizedValue:t,next:null},Yr===null){if(Vi===null)throw Error(X(308));Yr=e,Vi.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return t}var fr=null;function vu(e){fr===null?fr=[e]:fr.push(e)}function Rh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,vu(t)):(n.next=o.next,o.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,bn(e,n)}return o=r.interleaved,o===null?(t.next=t,vu(r)):(t.next=o.next,o.next=t),r.interleaved=t,bn(e,n)}function yi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,su(e,n)}}function qd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var o=e.updateQueue;Mn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var a=l,c=a.next;a.next=null,i===null?s=c:i.next=c,i=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=o.baseState;i=0,f=c=a=null,l=s;do{var h=l.lane,p=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,v=l;switch(h=t,p=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){d=w.call(p,d,h);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,h=typeof w=="function"?w.call(p,d,h):w,h==null)break e;d=Le({},d,h);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=p,a=d):f=f.next=p,i|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(a=d),o.baseState=a,o.firstBaseUpdate=c,o.lastBaseUpdate=f,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);br|=i,e.lanes=i,e.memoizedState=d}}function Yd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(X(191,o));o.call(r)}}}var $s={},ln=tr($s),fs=tr($s),ps=tr($s);function pr(e){if(e===$s)throw Error(X(174));return e}function Nu(e,t){switch($e(ps,t),$e(fs,e),$e(ln,$s),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ha(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ha(t,e)}ze(ln),$e(ln,t)}function fo(){ze(ln),ze(fs),ze(ps)}function Oh(e){pr(ps.current);var t=pr(ln.current),n=Ha(t,e.type);t!==n&&($e(fs,e),$e(ln,n))}function Su(e){fs.current===e&&(ze(ln),ze(fs))}var De=tr(0);function Ui(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function bu(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var xi=Cn.ReactCurrentDispatcher,aa=Cn.ReactCurrentBatchConfig,Sr=0,Oe=null,qe=null,Ge=null,Wi=!1,Go=!1,hs=0,Fx=0;function ot(){throw Error(X(321))}function Eu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function ku(e,t,n,r,o,s){if(Sr=s,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xi.current=e===null||e.memoizedState===null?Ux:Wx,e=n(r,o),Go){s=0;do{if(Go=!1,hs=0,25<=s)throw Error(X(301));s+=1,Ge=qe=null,t.updateQueue=null,xi.current=Qx,e=n(r,o)}while(Go)}if(xi.current=Qi,t=qe!==null&&qe.next!==null,Sr=0,Ge=qe=Oe=null,Wi=!1,t)throw Error(X(300));return e}function _u(){var e=hs!==0;return hs=0,e}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Oe.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Ft(){if(qe===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=Ge===null?Oe.memoizedState:Ge.next;if(t!==null)Ge=t,qe=e;else{if(e===null)throw Error(X(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ge===null?Oe.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function ms(e,t){return typeof t=="function"?t(e):t}function ca(e){var t=Ft(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=qe,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,a=null,c=s;do{var f=c.lane;if((Sr&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,i=r):a=a.next=d,Oe.lanes|=f,br|=f}c=c.next}while(c!==null&&c!==s);a===null?i=r:a.next=l,Zt(r,t.memoizedState)||(mt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Oe.lanes|=s,br|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ua(e){var t=Ft(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Zt(s,t.memoizedState)||(mt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Lh(){}function Fh(e,t){var n=Oe,r=Ft(),o=t(),s=!Zt(r.memoizedState,o);if(s&&(r.memoizedState=o,mt=!0),r=r.queue,Cu(Bh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,gs(9,Vh.bind(null,n,r,o,t),void 0,null),Ze===null)throw Error(X(349));Sr&30||Hh(n,t,o)}return o}function Hh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vh(e,t,n,r){t.value=n,t.getSnapshot=r,Uh(t)&&Wh(e)}function Bh(e,t,n){return n(function(){Uh(t)&&Wh(e)})}function Uh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zt(e,n)}catch{return!0}}function Wh(e){var t=bn(e,1);t!==null&&Gt(t,e,1,-1)}function Xd(e){var t=nn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t.queue=e,e=e.dispatch=Bx.bind(null,Oe,e),[t.memoizedState,e]}function gs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qh(){return Ft().memoizedState}function vi(e,t,n,r){var o=nn();Oe.flags|=e,o.memoizedState=gs(1|t,n,void 0,r===void 0?null:r)}function yl(e,t,n,r){var o=Ft();r=r===void 0?null:r;var s=void 0;if(qe!==null){var i=qe.memoizedState;if(s=i.destroy,r!==null&&Eu(r,i.deps)){o.memoizedState=gs(t,n,s,r);return}}Oe.flags|=e,o.memoizedState=gs(1|t,n,s,r)}function Kd(e,t){return vi(8390656,8,e,t)}function Cu(e,t){return yl(2048,8,e,t)}function qh(e,t){return yl(4,2,e,t)}function Yh(e,t){return yl(4,4,e,t)}function Xh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kh(e,t,n){return n=n!=null?n.concat([e]):null,yl(4,4,Xh.bind(null,t,e),n)}function ju(){}function Gh(e,t){var n=Ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zh(e,t){var n=Ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jh(e,t,n){return Sr&21?(Zt(n,t)||(n=oh(),Oe.lanes|=n,br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=n)}function Hx(e,t){var n=Ie;Ie=n!==0&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{Ie=n,aa.transition=r}}function em(){return Ft().memoizedState}function Vx(e,t,n){var r=qn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tm(e))nm(t,n);else if(n=Rh(e,t,n,r),n!==null){var o=ut();Gt(n,e,r,o),rm(n,t,r)}}function Bx(e,t,n){var r=qn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tm(e))nm(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Zt(l,i)){var a=t.interleaved;a===null?(o.next=o,vu(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}finally{}n=Rh(e,t,o,r),n!==null&&(o=ut(),Gt(n,e,r,o),rm(n,t,r))}}function tm(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function nm(e,t){Go=Wi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,su(e,n)}}var Qi={readContext:Lt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Ux={readContext:Lt,useCallback:function(e,t){return nn().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:Kd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vi(4194308,4,Xh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return vi(4,2,e,t)},useMemo:function(e,t){var n=nn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=nn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vx.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=nn();return e={current:e},t.memoizedState=e},useState:Xd,useDebugValue:ju,useDeferredValue:function(e){return nn().memoizedState=e},useTransition:function(){var e=Xd(!1),t=e[0];return e=Hx.bind(null,e[1]),nn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,o=nn();if(Re){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),Ze===null)throw Error(X(349));Sr&30||Hh(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Kd(Bh.bind(null,r,s,e),[e]),r.flags|=2048,gs(9,Vh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=nn(),t=Ze.identifierPrefix;if(Re){var n=gn,r=mn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wx={readContext:Lt,useCallback:Gh,useContext:Lt,useEffect:Cu,useImperativeHandle:Kh,useInsertionEffect:qh,useLayoutEffect:Yh,useMemo:Zh,useReducer:ca,useRef:Qh,useState:function(){return ca(ms)},useDebugValue:ju,useDeferredValue:function(e){var t=Ft();return Jh(t,qe.memoizedState,e)},useTransition:function(){var e=ca(ms)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:Lh,useSyncExternalStore:Fh,useId:em,unstable_isNewReconciler:!1},Qx={readContext:Lt,useCallback:Gh,useContext:Lt,useEffect:Cu,useImperativeHandle:Kh,useInsertionEffect:qh,useLayoutEffect:Yh,useMemo:Zh,useReducer:ua,useRef:Qh,useState:function(){return ua(ms)},useDebugValue:ju,useDeferredValue:function(e){var t=Ft();return qe===null?t.memoizedState=e:Jh(t,qe.memoizedState,e)},useTransition:function(){var e=ua(ms)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:Lh,useSyncExternalStore:Fh,useId:em,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ac(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xl={isMounted:function(e){return(e=e._reactInternals)?Ir(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),o=qn(e),s=vn(r,o);s.payload=t,n!=null&&(s.callback=n),t=Wn(e,s,o),t!==null&&(Gt(t,e,o,r),yi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),o=qn(e),s=vn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Wn(e,s,o),t!==null&&(Gt(t,e,o,r),yi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=qn(e),o=vn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Wn(e,o,r),t!==null&&(Gt(t,e,r,n),yi(t,e,r))}};function Gd(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!as(n,r)||!as(o,s):!0}function om(e,t,n){var r=!1,o=Zn,s=t.contextType;return typeof s=="object"&&s!==null?s=Lt(s):(o=xt(t)?wr:lt.current,r=t.contextTypes,s=(r=r!=null)?ao(e,o):Zn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Zd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xl.enqueueReplaceState(t,t.state,null)}function cc(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},wu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Lt(s):(s=xt(t)?wr:lt.current,o.context=ao(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ac(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&xl.enqueueReplaceState(o,o.state,null),Bi(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function po(e,t){try{var n="",r=t;do n+=wy(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function da(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function uc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var qx=typeof WeakMap=="function"?WeakMap:Map;function sm(e,t,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yi||(Yi=!0,wc=r),uc(e,t)},n}function im(e,t,n){n=vn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){uc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uc(e,t),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Jd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new qx;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=lv.bind(null,e,t,n),t.then(e,e))}function ef(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tf(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vn(-1,1),t.tag=2,Wn(n,t,1))),n.lanes|=1),e)}var Yx=Cn.ReactCurrentOwner,mt=!1;function ct(e,t,n,r){t.child=e===null?zh(t,null,n,r):uo(t,e.child,n,r)}function nf(e,t,n,r,o){n=n.render;var s=t.ref;return no(t,o),r=ku(e,t,n,r,s,o),n=_u(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(Re&&n&&pu(t),t.flags|=1,ct(e,t,r,o),t.child)}function rf(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Ru(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,lm(e,t,s,r,o)):(e=bi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:as,n(i,r)&&e.ref===t.ref)return En(e,t,o)}return t.flags|=1,e=Yn(s,r),e.ref=t.ref,e.return=t,t.child=e}function lm(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(as(s,r)&&e.ref===t.ref)if(mt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,En(e,t,o)}return dc(e,t,n,r,o)}function am(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Kr,Nt),Nt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(Kr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(Kr,Nt),Nt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,$e(Kr,Nt),Nt|=r;return ct(e,t,o,n),t.child}function cm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dc(e,t,n,r,o){var s=xt(n)?wr:lt.current;return s=ao(t,s),no(t,o),n=ku(e,t,n,r,s,o),r=_u(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(Re&&r&&pu(t),t.flags|=1,ct(e,t,n,o),t.child)}function of(e,t,n,r,o){if(xt(n)){var s=!0;Oi(t)}else s=!1;if(no(t,o),t.stateNode===null)wi(e,t),om(t,n,r),cc(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Lt(c):(c=xt(n)?wr:lt.current,c=ao(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Zd(t,i,r,c),Mn=!1;var h=t.memoizedState;i.state=h,Bi(t,r,i,o),a=t.memoizedState,l!==r||h!==a||yt.current||Mn?(typeof f=="function"&&(ac(t,n,f,r),a=t.memoizedState),(l=Mn||Gd(t,n,l,r,h,a,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),i.props=r,i.state=a,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Dh(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Vt(t.type,l),i.props=c,d=t.pendingProps,h=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Lt(a):(a=xt(n)?wr:lt.current,a=ao(t,a));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Zd(t,i,r,a),Mn=!1,h=t.memoizedState,i.state=h,Bi(t,r,i,o);var w=t.memoizedState;l!==d||h!==w||yt.current||Mn?(typeof p=="function"&&(ac(t,n,p,r),w=t.memoizedState),(c=Mn||Gd(t,n,c,r,h,w,a)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,a)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return fc(e,t,n,r,s,o)}function fc(e,t,n,r,o,s){cm(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Bd(t,n,!1),En(e,t,s);r=t.stateNode,Yx.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=uo(t,e.child,null,s),t.child=uo(t,null,l,s)):ct(e,t,l,s),t.memoizedState=r.state,o&&Bd(t,n,!0),t.child}function um(e){var t=e.stateNode;t.pendingContext?Vd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vd(e,t.context,!1),Nu(e,t.containerInfo)}function sf(e,t,n,r,o){return co(),mu(o),t.flags|=256,ct(e,t,n,r),t.child}var pc={dehydrated:null,treeContext:null,retryLane:0};function hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function dm(e,t,n){var r=t.pendingProps,o=De.current,s=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),$e(De,o&1),e===null)return ic(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Nl(i,r,0,null),e=yr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hc(n),t.memoizedState=pc,e):Iu(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Xx(e,t,i,r,l,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,l=o.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=Yn(o,a),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Yn(l,s):(s=yr(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?hc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=pc,r}return s=e.child,e=s.sibling,r=Yn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Iu(e,t){return t=Nl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,r){return r!==null&&mu(r),uo(t,e.child,null,n),e=Iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xx(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=da(Error(X(422))),Js(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Nl({mode:"visible",children:r.children},o,0,null),s=yr(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&uo(t,e.child,null,i),t.child.memoizedState=hc(i),t.memoizedState=pc,s);if(!(t.mode&1))return Js(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=da(s,r,void 0),Js(e,t,i,r)}if(l=(i&e.childLanes)!==0,mt||l){if(r=Ze,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,bn(e,o),Gt(r,e,o,-1))}return zu(),r=da(Error(X(421))),Js(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=av.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,St=Un(o.nextSibling),bt=t,Re=!0,Wt=null,e!==null&&(Tt[$t++]=mn,Tt[$t++]=gn,Tt[$t++]=Nr,mn=e.id,gn=e.overflow,Nr=t),t=Iu(t,r.children),t.flags|=4096,t)}function lf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lc(e.return,t,n)}function fa(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function fm(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(ct(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lf(e,n,t);else if(e.tag===19)lf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($e(De,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Ui(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),fa(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ui(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}fa(t,!0,n,null,s);break;case"together":fa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=Yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Kx(e,t,n){switch(t.tag){case 3:um(t),co();break;case 5:Oh(t);break;case 1:xt(t.type)&&Oi(t);break;case 4:Nu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;$e(Hi,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?($e(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?dm(e,t,n):($e(De,De.current&1),e=En(e,t,n),e!==null?e.sibling:null);$e(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fm(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$e(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,am(e,t,n)}return En(e,t,n)}var pm,mc,hm,mm;pm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mc=function(){};hm=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,pr(ln.current);var s=null;switch(n){case"input":o=Da(e,o),r=Da(e,r),s=[];break;case"select":o=Le({},o,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":o=Fa(e,o),r=Fa(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ri)}Va(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ts.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&l[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ts.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ae("scroll",e),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};mm=function(e,t,n,r){n!==r&&(t.flags|=4)};function $o(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gx(e,t,n){var r=t.pendingProps;switch(hu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return xt(t.type)&&Di(),st(t),null;case 3:return r=t.stateNode,fo(),ze(yt),ze(lt),bu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(bc(Wt),Wt=null))),mc(e,t),st(t),null;case 5:Su(t);var o=pr(ps.current);if(n=t.type,e!==null&&t.stateNode!=null)hm(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return st(t),null}if(e=pr(ln.current),Gs(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[rn]=t,r[ds]=s,e=(t.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(o=0;o<Vo.length;o++)Ae(Vo[o],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":md(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":yd(r,s),Ae("invalid",r)}Va(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ks(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ks(r.textContent,l,e),o=["children",""+l]):ts.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Vs(r),gd(r,s,!0);break;case"textarea":Vs(r),xd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ri)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[rn]=t,e[ds]=r,pm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ba(n,r),n){case"dialog":Ae("cancel",e),Ae("close",e),o=r;break;case"iframe":case"object":case"embed":Ae("load",e),o=r;break;case"video":case"audio":for(o=0;o<Vo.length;o++)Ae(Vo[o],e);o=r;break;case"source":Ae("error",e),o=r;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),o=r;break;case"details":Ae("toggle",e),o=r;break;case"input":md(e,r),o=Da(e,r),Ae("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Le({},r,{value:void 0}),Ae("invalid",e);break;case"textarea":yd(e,r),o=Fa(e,r),Ae("invalid",e);break;default:o=r}Va(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Qp(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Up(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ns(e,a):typeof a=="number"&&ns(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ts.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ae("scroll",e):a!=null&&Jc(e,s,a,i))}switch(n){case"input":Vs(e),gd(e,r,!1);break;case"textarea":Vs(e),xd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Zr(e,!!r.multiple,s,!1):r.defaultValue!=null&&Zr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ri)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)mm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=pr(ps.current),pr(ln.current),Gs(t)){if(r=t.stateNode,n=t.memoizedProps,r[rn]=t,(s=r.nodeValue!==n)&&(e=bt,e!==null))switch(e.tag){case 3:Ks(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rn]=t,t.stateNode=r}return st(t),null;case 13:if(ze(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&St!==null&&t.mode&1&&!(t.flags&128))Mh(),co(),t.flags|=98560,s=!1;else if(s=Gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(X(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[rn]=t}else co(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),s=!1}else Wt!==null&&(bc(Wt),Wt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Ye===0&&(Ye=3):zu())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return fo(),mc(e,t),e===null&&cs(t.stateNode.containerInfo),st(t),null;case 10:return xu(t.type._context),st(t),null;case 17:return xt(t.type)&&Di(),st(t),null;case 19:if(ze(De),s=t.memoizedState,s===null)return st(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)$o(s,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ui(e),i!==null){for(t.flags|=128,$o(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(De,De.current&1|2),t.child}e=e.sibling}s.tail!==null&&We()>ho&&(t.flags|=128,r=!0,$o(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ui(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$o(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Re)return st(t),null}else 2*We()-s.renderingStartTime>ho&&n!==1073741824&&(t.flags|=128,r=!0,$o(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=We(),t.sibling=null,n=De.current,$e(De,r?n&1|2:n&1),t):(st(t),null);case 22:case 23:return Au(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nt&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Zx(e,t){switch(hu(t),t.tag){case 1:return xt(t.type)&&Di(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fo(),ze(yt),ze(lt),bu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Su(t),null;case 13:if(ze(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));co()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(De),null;case 4:return fo(),null;case 10:return xu(t.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var ei=!1,it=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Xr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function gc(e,t,n){try{n()}catch(r){Be(e,t,r)}}var af=!1;function ev(e,t){if(Ja=Mi,e=wh(),fu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,a=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||o!==0&&d.nodeType!==3||(l=i+o),d!==s||r!==0&&d.nodeType!==3||(a=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===o&&(l=i),h===s&&++f===r&&(a=i),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ec={focusedElem:e,selectionRange:n},Mi=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,S=w.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:Vt(t.type,v),S);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(y){Be(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return w=af,af=!1,w}function Zo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&gc(t,n,s)}o=o.next}while(o!==r)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gm(e){var t=e.alternate;t!==null&&(e.alternate=null,gm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rn],delete t[ds],delete t[rc],delete t[Rx],delete t[Dx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ym(e){return e.tag===5||e.tag===3||e.tag===4}function cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ym(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ri));else if(r!==4&&(e=e.child,e!==null))for(xc(e,t,n),e=e.sibling;e!==null;)xc(e,t,n),e=e.sibling}function vc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(vc(e,t,n),e=e.sibling;e!==null;)vc(e,t,n),e=e.sibling}var et=null,Bt=!1;function Pn(e,t,n){for(n=n.child;n!==null;)xm(e,t,n),n=n.sibling}function xm(e,t,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(dl,n)}catch{}switch(n.tag){case 5:it||Xr(n,t);case 6:var r=et,o=Bt;et=null,Pn(e,t,n),et=r,Bt=o,et!==null&&(Bt?(e=et,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(Bt?(e=et,n=n.stateNode,e.nodeType===8?sa(e.parentNode,n):e.nodeType===1&&sa(e,n),is(e)):sa(et,n.stateNode));break;case 4:r=et,o=Bt,et=n.stateNode.containerInfo,Bt=!0,Pn(e,t,n),et=r,Bt=o;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&gc(n,t,i),o=o.next}while(o!==r)}Pn(e,t,n);break;case 1:if(!it&&(Xr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Be(n,t,l)}Pn(e,t,n);break;case 21:Pn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Pn(e,t,n),it=r):Pn(e,t,n);break;default:Pn(e,t,n)}}function uf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Jx),t.forEach(function(r){var o=cv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ht(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,Bt=!1;break e;case 3:et=l.stateNode.containerInfo,Bt=!0;break e;case 4:et=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(et===null)throw Error(X(160));xm(s,i,o),et=null,Bt=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(c){Be(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vm(t,e),t=t.sibling}function vm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(t,e),tn(e),r&4){try{Zo(3,e,e.return),vl(3,e)}catch(v){Be(e,e.return,v)}try{Zo(5,e,e.return)}catch(v){Be(e,e.return,v)}}break;case 1:Ht(t,e),tn(e),r&512&&n!==null&&Xr(n,n.return);break;case 5:if(Ht(t,e),tn(e),r&512&&n!==null&&Xr(n,n.return),e.flags&32){var o=e.stateNode;try{ns(o,"")}catch(v){Be(e,e.return,v)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Hp(o,s),Ba(l,i);var c=Ba(l,s);for(i=0;i<a.length;i+=2){var f=a[i],d=a[i+1];f==="style"?Qp(o,d):f==="dangerouslySetInnerHTML"?Up(o,d):f==="children"?ns(o,d):Jc(o,f,d,c)}switch(l){case"input":Oa(o,s);break;case"textarea":Vp(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Zr(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zr(o,!!s.multiple,s.defaultValue,!0):Zr(o,!!s.multiple,s.multiple?[]:"",!1))}o[ds]=s}catch(v){Be(e,e.return,v)}}break;case 6:if(Ht(t,e),tn(e),r&4){if(e.stateNode===null)throw Error(X(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(v){Be(e,e.return,v)}}break;case 3:if(Ht(t,e),tn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(v){Be(e,e.return,v)}break;case 4:Ht(t,e),tn(e);break;case 13:Ht(t,e),tn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||($u=We())),r&4&&uf(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(it=(c=it)||f,Ht(t,e),it=c):Ht(t,e),tn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(ne=e,f=e.child;f!==null;){for(d=ne=f;ne!==null;){switch(h=ne,p=h.child,h.tag){case 0:case 11:case 14:case 15:Zo(4,h,h.return);break;case 1:Xr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){Be(r,n,v)}}break;case 5:Xr(h,h.return);break;case 22:if(h.memoizedState!==null){ff(d);continue}}p!==null?(p.return=h,ne=p):ff(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Wp("display",i))}catch(v){Be(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Be(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ht(t,e),tn(e),r&4&&uf(e);break;case 21:break;default:Ht(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ym(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ns(o,""),r.flags&=-33);var s=cf(e);vc(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=cf(e);xc(e,l,i);break;default:throw Error(X(161))}}catch(a){Be(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tv(e,t,n){ne=e,wm(e)}function wm(e,t,n){for(var r=(e.mode&1)!==0;ne!==null;){var o=ne,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ei;if(!i){var l=o.alternate,a=l!==null&&l.memoizedState!==null||it;l=ei;var c=it;if(ei=i,(it=a)&&!c)for(ne=o;ne!==null;)i=ne,a=i.child,i.tag===22&&i.memoizedState!==null?pf(o):a!==null?(a.return=i,ne=a):pf(o);for(;s!==null;)ne=s,wm(s),s=s.sibling;ne=o,ei=l,it=c}df(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ne=s):df(e)}}function df(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:it||vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Yd(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yd(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&is(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}it||t.flags&512&&yc(t)}catch(h){Be(t,t.return,h)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function ff(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function pf(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vl(4,t)}catch(a){Be(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(a){Be(t,o,a)}}var s=t.return;try{yc(t)}catch(a){Be(t,s,a)}break;case 5:var i=t.return;try{yc(t)}catch(a){Be(t,i,a)}}}catch(a){Be(t,t.return,a)}if(t===e){ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ne=l;break}ne=t.return}}var nv=Math.ceil,qi=Cn.ReactCurrentDispatcher,Pu=Cn.ReactCurrentOwner,Dt=Cn.ReactCurrentBatchConfig,_e=0,Ze=null,Qe=null,tt=0,Nt=0,Kr=tr(0),Ye=0,ys=null,br=0,wl=0,Tu=0,Jo=null,ht=null,$u=0,ho=1/0,pn=null,Yi=!1,wc=null,Qn=null,ti=!1,Fn=null,Xi=0,es=0,Nc=null,Ni=-1,Si=0;function ut(){return _e&6?We():Ni!==-1?Ni:Ni=We()}function qn(e){return e.mode&1?_e&2&&tt!==0?tt&-tt:Lx.transition!==null?(Si===0&&(Si=oh()),Si):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:dh(e.type)),e):1}function Gt(e,t,n,r){if(50<es)throw es=0,Nc=null,Error(X(185));Is(e,n,r),(!(_e&2)||e!==Ze)&&(e===Ze&&(!(_e&2)&&(wl|=n),Ye===4&&Dn(e,tt)),vt(e,r),n===1&&_e===0&&!(t.mode&1)&&(ho=We()+500,gl&&nr()))}function vt(e,t){var n=e.callbackNode;Ly(e,t);var r=$i(e,e===Ze?tt:0);if(r===0)n!==null&&Nd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nd(n),t===1)e.tag===0?Ox(hf.bind(null,e)):Ph(hf.bind(null,e)),Ax(function(){!(_e&6)&&nr()}),n=null;else{switch(sh(r)){case 1:n=ou;break;case 4:n=nh;break;case 16:n=Ti;break;case 536870912:n=rh;break;default:n=Ti}n=jm(n,Nm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Nm(e,t){if(Ni=-1,Si=0,_e&6)throw Error(X(327));var n=e.callbackNode;if(ro()&&e.callbackNode!==n)return null;var r=$i(e,e===Ze?tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ki(e,r);else{t=r;var o=_e;_e|=2;var s=bm();(Ze!==e||tt!==t)&&(pn=null,ho=We()+500,gr(e,t));do try{sv();break}catch(l){Sm(e,l)}while(!0);yu(),qi.current=s,_e=o,Qe!==null?t=0:(Ze=null,tt=0,t=Ye)}if(t!==0){if(t===2&&(o=Ya(e),o!==0&&(r=o,t=Sc(e,o))),t===1)throw n=ys,gr(e,0),Dn(e,r),vt(e,We()),n;if(t===6)Dn(e,r);else{if(o=e.current.alternate,!(r&30)&&!rv(o)&&(t=Ki(e,r),t===2&&(s=Ya(e),s!==0&&(r=s,t=Sc(e,s))),t===1))throw n=ys,gr(e,0),Dn(e,r),vt(e,We()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:lr(e,ht,pn);break;case 3:if(Dn(e,r),(r&130023424)===r&&(t=$u+500-We(),10<t)){if($i(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=nc(lr.bind(null,e,ht,pn),t);break}lr(e,ht,pn);break;case 4:if(Dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Kt(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nv(r/1960))-r,10<r){e.timeoutHandle=nc(lr.bind(null,e,ht,pn),r);break}lr(e,ht,pn);break;case 5:lr(e,ht,pn);break;default:throw Error(X(329))}}}return vt(e,We()),e.callbackNode===n?Nm.bind(null,e):null}function Sc(e,t){var n=Jo;return e.current.memoizedState.isDehydrated&&(gr(e,t).flags|=256),e=Ki(e,t),e!==2&&(t=ht,ht=n,t!==null&&bc(t)),e}function bc(e){ht===null?ht=e:ht.push.apply(ht,e)}function rv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Zt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t){for(t&=~Tu,t&=~wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function hf(e){if(_e&6)throw Error(X(327));ro();var t=$i(e,0);if(!(t&1))return vt(e,We()),null;var n=Ki(e,t);if(e.tag!==0&&n===2){var r=Ya(e);r!==0&&(t=r,n=Sc(e,r))}if(n===1)throw n=ys,gr(e,0),Dn(e,t),vt(e,We()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,ht,pn),vt(e,We()),null}function Mu(e,t){var n=_e;_e|=1;try{return e(t)}finally{_e=n,_e===0&&(ho=We()+500,gl&&nr())}}function Er(e){Fn!==null&&Fn.tag===0&&!(_e&6)&&ro();var t=_e;_e|=1;var n=Dt.transition,r=Ie;try{if(Dt.transition=null,Ie=1,e)return e()}finally{Ie=r,Dt.transition=n,_e=t,!(_e&6)&&nr()}}function Au(){Nt=Kr.current,ze(Kr)}function gr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Mx(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Di();break;case 3:fo(),ze(yt),ze(lt),bu();break;case 5:Su(r);break;case 4:fo();break;case 13:ze(De);break;case 19:ze(De);break;case 10:xu(r.type._context);break;case 22:case 23:Au()}n=n.return}if(Ze=e,Qe=e=Yn(e.current,null),tt=Nt=t,Ye=0,ys=null,Tu=wl=br=0,ht=Jo=null,fr!==null){for(t=0;t<fr.length;t++)if(n=fr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}fr=null}return e}function Sm(e,t){do{var n=Qe;try{if(yu(),xi.current=Qi,Wi){for(var r=Oe.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Wi=!1}if(Sr=0,Ge=qe=Oe=null,Go=!1,hs=0,Pu.current=null,n===null||n.return===null){Ye=1,ys=t,Qe=null;break}e:{var s=e,i=n.return,l=n,a=t;if(t=tt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ef(i);if(p!==null){p.flags&=-257,tf(p,i,l,s,t),p.mode&1&&Jd(s,c,t),t=p,a=c;var w=t.updateQueue;if(w===null){var v=new Set;v.add(a),t.updateQueue=v}else w.add(a);break e}else{if(!(t&1)){Jd(s,c,t),zu();break e}a=Error(X(426))}}else if(Re&&l.mode&1){var S=ef(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),tf(S,i,l,s,t),mu(po(a,l));break e}}s=a=po(a,l),Ye!==4&&(Ye=2),Jo===null?Jo=[s]:Jo.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=sm(s,a,t);qd(s,m);break e;case 1:l=a;var g=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qn===null||!Qn.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var y=im(s,l,t);qd(s,y);break e}}s=s.return}while(s!==null)}km(n)}catch(_){t=_,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function bm(){var e=qi.current;return qi.current=Qi,e===null?Qi:e}function zu(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||!(br&268435455)&&!(wl&268435455)||Dn(Ze,tt)}function Ki(e,t){var n=_e;_e|=2;var r=bm();(Ze!==e||tt!==t)&&(pn=null,gr(e,t));do try{ov();break}catch(o){Sm(e,o)}while(!0);if(yu(),_e=n,qi.current=r,Qe!==null)throw Error(X(261));return Ze=null,tt=0,Ye}function ov(){for(;Qe!==null;)Em(Qe)}function sv(){for(;Qe!==null&&!Py();)Em(Qe)}function Em(e){var t=Cm(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?km(e):Qe=t,Pu.current=null}function km(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Zx(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Qe=null;return}}else if(n=Gx(n,t,Nt),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Ye===0&&(Ye=5)}function lr(e,t,n){var r=Ie,o=Dt.transition;try{Dt.transition=null,Ie=1,iv(e,t,n,r)}finally{Dt.transition=o,Ie=r}return null}function iv(e,t,n,r){do ro();while(Fn!==null);if(_e&6)throw Error(X(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fy(e,s),e===Ze&&(Qe=Ze=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ti||(ti=!0,jm(Ti,function(){return ro(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dt.transition,Dt.transition=null;var i=Ie;Ie=1;var l=_e;_e|=4,Pu.current=null,ev(e,n),vm(n,e),_x(ec),Mi=!!Ja,ec=Ja=null,e.current=n,tv(n),Ty(),_e=l,Ie=i,Dt.transition=s}else e.current=n;if(ti&&(ti=!1,Fn=e,Xi=o),s=e.pendingLanes,s===0&&(Qn=null),Ay(n.stateNode),vt(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Yi)throw Yi=!1,e=wc,wc=null,e;return Xi&1&&e.tag!==0&&ro(),s=e.pendingLanes,s&1?e===Nc?es++:(es=0,Nc=e):es=0,nr(),null}function ro(){if(Fn!==null){var e=sh(Xi),t=Dt.transition,n=Ie;try{if(Dt.transition=null,Ie=16>e?16:e,Fn===null)var r=!1;else{if(e=Fn,Fn=null,Xi=0,_e&6)throw Error(X(331));var o=_e;for(_e|=4,ne=e.current;ne!==null;){var s=ne,i=s.child;if(ne.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(ne=c;ne!==null;){var f=ne;switch(f.tag){case 0:case 11:case 15:Zo(8,f,s)}var d=f.child;if(d!==null)d.return=f,ne=d;else for(;ne!==null;){f=ne;var h=f.sibling,p=f.return;if(gm(f),f===c){ne=null;break}if(h!==null){h.return=p,ne=h;break}ne=p}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}ne=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,ne=i;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zo(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ne=m;break e}ne=s.return}}var g=e.current;for(ne=g;ne!==null;){i=ne;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,ne=x;else e:for(i=g;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vl(9,l)}}catch(_){Be(l,l.return,_)}if(l===i){ne=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,ne=y;break e}ne=l.return}}if(_e=o,nr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(dl,e)}catch{}r=!0}return r}finally{Ie=n,Dt.transition=t}}return!1}function mf(e,t,n){t=po(n,t),t=sm(e,t,1),e=Wn(e,t,1),t=ut(),e!==null&&(Is(e,1,t),vt(e,t))}function Be(e,t,n){if(e.tag===3)mf(e,e,n);else for(;t!==null;){if(t.tag===3){mf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){e=po(n,e),e=im(t,e,1),t=Wn(t,e,1),e=ut(),t!==null&&(Is(t,1,e),vt(t,e));break}}t=t.return}}function lv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Ze===e&&(tt&n)===n&&(Ye===4||Ye===3&&(tt&130023424)===tt&&500>We()-$u?gr(e,0):Tu|=n),vt(e,t)}function _m(e,t){t===0&&(e.mode&1?(t=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):t=1);var n=ut();e=bn(e,t),e!==null&&(Is(e,t,n),vt(e,n))}function av(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_m(e,n)}function cv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),_m(e,n)}var Cm;Cm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mt=!1,Kx(e,t,n);mt=!!(e.flags&131072)}else mt=!1,Re&&t.flags&1048576&&Th(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wi(e,t),e=t.pendingProps;var o=ao(t,lt.current);no(t,n),o=ku(null,t,r,e,o,n);var s=_u();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(s=!0,Oi(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,wu(t),o.updater=xl,t.stateNode=o,o._reactInternals=t,cc(t,r,e,n),t=fc(null,t,r,!0,s,n)):(t.tag=0,Re&&s&&pu(t),ct(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wi(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=dv(r),e=Vt(r,e),o){case 0:t=dc(null,t,r,e,n);break e;case 1:t=of(null,t,r,e,n);break e;case 11:t=nf(null,t,r,e,n);break e;case 14:t=rf(null,t,r,Vt(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),dc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),of(e,t,r,o,n);case 3:e:{if(um(t),e===null)throw Error(X(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Dh(e,t),Bi(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=po(Error(X(423)),t),t=sf(e,t,r,n,o);break e}else if(r!==o){o=po(Error(X(424)),t),t=sf(e,t,r,n,o);break e}else for(St=Un(t.stateNode.containerInfo.firstChild),bt=t,Re=!0,Wt=null,n=zh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===o){t=En(e,t,n);break e}ct(e,t,r,n)}t=t.child}return t;case 5:return Oh(t),e===null&&ic(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,tc(r,o)?i=null:s!==null&&tc(r,s)&&(t.flags|=32),cm(e,t),ct(e,t,i,n),t.child;case 6:return e===null&&ic(t),null;case 13:return dm(e,t,n);case 4:return Nu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=uo(t,null,r,n):ct(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),nf(e,t,r,o,n);case 7:return ct(e,t,t.pendingProps,n),t.child;case 8:return ct(e,t,t.pendingProps.children,n),t.child;case 12:return ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,$e(Hi,r._currentValue),r._currentValue=i,s!==null)if(Zt(s.value,i)){if(s.children===o.children&&!yt.current){t=En(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=vn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),lc(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(X(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lc(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}ct(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,no(t,n),o=Lt(o),r=r(o),t.flags|=1,ct(e,t,r,n),t.child;case 14:return r=t.type,o=Vt(r,t.pendingProps),o=Vt(r.type,o),rf(e,t,r,o,n);case 15:return lm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Vt(r,o),wi(e,t),t.tag=1,xt(r)?(e=!0,Oi(t)):e=!1,no(t,n),om(t,r,o),cc(t,r,o,n),fc(null,t,r,!0,e,n);case 19:return fm(e,t,n);case 22:return am(e,t,n)}throw Error(X(156,t.tag))};function jm(e,t){return th(e,t)}function uv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new uv(e,t,n,r)}function Ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dv(e){if(typeof e=="function")return Ru(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tu)return 11;if(e===nu)return 14}return 2}function Yn(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bi(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")Ru(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Fr:return yr(n.children,o,s,t);case eu:i=8,o|=8;break;case Ma:return e=zt(12,n,t,o|2),e.elementType=Ma,e.lanes=s,e;case Aa:return e=zt(13,n,t,o),e.elementType=Aa,e.lanes=s,e;case za:return e=zt(19,n,t,o),e.elementType=za,e.lanes=s,e;case Op:return Nl(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rp:i=10;break e;case Dp:i=9;break e;case tu:i=11;break e;case nu:i=14;break e;case $n:i=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=zt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function yr(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function Nl(e,t,n,r){return e=zt(22,e,r,t),e.elementType=Op,e.lanes=n,e.stateNode={isHidden:!1},e}function pa(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function ha(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Du(e,t,n,r,o,s,i,l,a){return e=new fv(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=zt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(s),e}function pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Im(e){if(!e)return Zn;e=e._reactInternals;e:{if(Ir(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(xt(n))return Ih(e,n,t)}return t}function Pm(e,t,n,r,o,s,i,l,a){return e=Du(n,r,!0,e,o,s,i,l,a),e.context=Im(null),n=e.current,r=ut(),o=qn(n),s=vn(r,o),s.callback=t??null,Wn(n,s,o),e.current.lanes=o,Is(e,o,r),vt(e,r),e}function Sl(e,t,n,r){var o=t.current,s=ut(),i=qn(o);return n=Im(n),t.context===null?t.context=n:t.pendingContext=n,t=vn(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Wn(o,t,i),e!==null&&(Gt(e,o,i,s),yi(e,o,i)),i}function Gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ou(e,t){gf(e,t),(e=e.alternate)&&gf(e,t)}function hv(){return null}var Tm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lu(e){this._internalRoot=e}bl.prototype.render=Lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Sl(e,t,null,null)};bl.prototype.unmount=Lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Er(function(){Sl(null,e,null,null)}),t[Sn]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=ah();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rn.length&&t!==0&&t<Rn[n].priority;n++);Rn.splice(n,0,e),n===0&&uh(e)}};function Fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function El(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yf(){}function mv(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Gi(i);s.call(c)}}var i=Pm(t,r,e,0,null,!1,!1,"",yf);return e._reactRootContainer=i,e[Sn]=i.current,cs(e.nodeType===8?e.parentNode:e),Er(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=Gi(a);l.call(c)}}var a=Du(e,0,!1,null,null,!1,!1,"",yf);return e._reactRootContainer=a,e[Sn]=a.current,cs(e.nodeType===8?e.parentNode:e),Er(function(){Sl(t,a,n,r)}),a}function kl(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var a=Gi(i);l.call(a)}}Sl(t,i,e,o)}else i=mv(n,t,e,o,r);return Gi(i)}ih=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ho(t.pendingLanes);n!==0&&(su(t,n|1),vt(t,We()),!(_e&6)&&(ho=We()+500,nr()))}break;case 13:Er(function(){var r=bn(e,1);if(r!==null){var o=ut();Gt(r,e,1,o)}}),Ou(e,1)}};iu=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=ut();Gt(t,e,134217728,n)}Ou(e,134217728)}};lh=function(e){if(e.tag===13){var t=qn(e),n=bn(e,t);if(n!==null){var r=ut();Gt(n,e,t,r)}Ou(e,t)}};ah=function(){return Ie};ch=function(e,t){var n=Ie;try{return Ie=e,t()}finally{Ie=n}};Wa=function(e,t,n){switch(t){case"input":if(Oa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ml(r);if(!o)throw Error(X(90));Fp(r),Oa(r,o)}}}break;case"textarea":Vp(e,n);break;case"select":t=n.value,t!=null&&Zr(e,!!n.multiple,t,!1)}};Xp=Mu;Kp=Er;var gv={usingClientEntryPoint:!1,Events:[Ts,Ur,ml,qp,Yp,Mu]},Mo={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yv={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jp(e),e===null?null:e.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ni.isDisabled&&ni.supportsFiber)try{dl=ni.inject(yv),sn=ni}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv;jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fu(t))throw Error(X(200));return pv(e,t,null,n)};jt.createRoot=function(e,t){if(!Fu(e))throw Error(X(299));var n=!1,r="",o=Tm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Du(e,1,!1,null,null,n,!1,r,o),e[Sn]=t.current,cs(e.nodeType===8?e.parentNode:e),new Lu(t)};jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Jp(t),e=e===null?null:e.stateNode,e};jt.flushSync=function(e){return Er(e)};jt.hydrate=function(e,t,n){if(!El(t))throw Error(X(200));return kl(null,e,t,!0,n)};jt.hydrateRoot=function(e,t,n){if(!Fu(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Tm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Pm(t,null,e,1,n??null,o,!1,s,i),e[Sn]=t.current,cs(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new bl(t)};jt.render=function(e,t,n){if(!El(t))throw Error(X(200));return kl(null,e,t,!1,n)};jt.unmountComponentAtNode=function(e){if(!El(e))throw Error(X(40));return e._reactRootContainer?(Er(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};jt.unstable_batchedUpdates=Mu;jt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!El(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return kl(e,t,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function $m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($m)}catch(e){console.error(e)}}$m(),$p.exports=jt;var xv=$p.exports,xf=xv;Ta.createRoot=xf.createRoot,Ta.hydrateRoot=xf.hydrateRoot;function rt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=rt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Mm={exports:{}},Am={},zm={exports:{}},Rm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=I;function vv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wv=typeof Object.is=="function"?Object.is:vv,Nv=mo.useState,Sv=mo.useEffect,bv=mo.useLayoutEffect,Ev=mo.useDebugValue;function kv(e,t){var n=t(),r=Nv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return bv(function(){o.value=n,o.getSnapshot=t,ma(o)&&s({inst:o})},[e,n,t]),Sv(function(){return ma(o)&&s({inst:o}),e(function(){ma(o)&&s({inst:o})})},[e]),Ev(n),n}function ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wv(e,n)}catch{return!0}}function _v(e,t){return t()}var Cv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_v:kv;Rm.useSyncExternalStore=mo.useSyncExternalStore!==void 0?mo.useSyncExternalStore:Cv;zm.exports=Rm;var jv=zm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=I,Iv=jv;function Pv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tv=typeof Object.is=="function"?Object.is:Pv,$v=Iv.useSyncExternalStore,Mv=_l.useRef,Av=_l.useEffect,zv=_l.useMemo,Rv=_l.useDebugValue;Am.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Mv(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=zv(function(){function a(p){if(!c){if(c=!0,f=p,p=r(p),o!==void 0&&i.hasValue){var w=i.value;if(o(w,p))return d=w}return d=p}if(w=d,Tv(f,p))return w;var v=r(p);return o!==void 0&&o(w,v)?(f=p,w):(f=p,d=v)}var c=!1,f,d,h=n===void 0?null:n;return[function(){return a(t())},h===null?void 0:function(){return a(h())}]},[t,n,r,o]);var l=$v(e,s[0],s[1]);return Av(function(){i.hasValue=!0,i.value=l},[l]),Rv(l),l};Mm.exports=Am;var Dv=Mm.exports;const Dm=wp(Dv),Ov={},vf=e=>{let t;const n=new Set,r=(f,d)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(w=>w(t,p))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Ov?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,a);return a},Om=e=>e?vf(e):vf,{useDebugValue:Lv}=V,{useSyncExternalStoreWithSelector:Fv}=Dm,Hv=e=>e;function Lm(e,t=Hv,n){const r=Fv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lv(r),r}const wf=(e,t)=>{const n=Om(e),r=(o,s=t)=>Lm(n,o,s);return Object.assign(r,n),r},Vv=(e,t)=>e?wf(e,t):wf;function Je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Bv={value:()=>{}};function Cl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ei(n)}function Ei(e){this._=e}function Uv(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ei.prototype=Cl.prototype={constructor:Ei,on:function(e,t){var n=this._,r=Uv(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=Wv(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=Nf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Nf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ei(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function Wv(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Nf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Bv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ec="http://www.w3.org/1999/xhtml";const Sf={svg:"http://www.w3.org/2000/svg",xhtml:Ec,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Sf.hasOwnProperty(t)?{space:Sf[t],local:e}:e}function Qv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ec&&t.documentElement.namespaceURI===Ec?t.createElement(e):t.createElementNS(n,e)}}function qv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fm(e){var t=jl(e);return(t.local?qv:Qv)(t)}function Yv(){}function Hu(e){return e==null?Yv:function(){return this.querySelector(e)}}function Xv(e){typeof e!="function"&&(e=Hu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=new Array(i),a,c,f=0;f<i;++f)(a=s[f])&&(c=e.call(a,a.__data__,f,s))&&("__data__"in a&&(c.__data__=a.__data__),l[f]=c);return new kt(r,this._parents)}function Kv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Gv(){return[]}function Hm(e){return e==null?Gv:function(){return this.querySelectorAll(e)}}function Zv(e){return function(){return Kv(e.apply(this,arguments))}}function Jv(e){typeof e=="function"?e=Zv(e):e=Hm(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&(r.push(e.call(a,a.__data__,c,i)),o.push(a));return new kt(r,o)}function Vm(e){return function(){return this.matches(e)}}function Bm(e){return function(t){return t.matches(e)}}var e1=Array.prototype.find;function t1(e){return function(){return e1.call(this.children,e)}}function n1(){return this.firstElementChild}function r1(e){return this.select(e==null?n1:t1(typeof e=="function"?e:Bm(e)))}var o1=Array.prototype.filter;function s1(){return Array.from(this.children)}function i1(e){return function(){return o1.call(this.children,e)}}function l1(e){return this.selectAll(e==null?s1:i1(typeof e=="function"?e:Bm(e)))}function a1(e){typeof e!="function"&&(e=Vm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new kt(r,this._parents)}function Um(e){return new Array(e.length)}function c1(){return new kt(this._enter||this._groups.map(Um),this._parents)}function Zi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zi.prototype={constructor:Zi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function u1(e){return function(){return e}}function d1(e,t,n,r,o,s){for(var i=0,l,a=t.length,c=s.length;i<c;++i)(l=t[i])?(l.__data__=s[i],r[i]=l):n[i]=new Zi(e,s[i]);for(;i<a;++i)(l=t[i])&&(o[i]=l)}function f1(e,t,n,r,o,s,i){var l,a,c=new Map,f=t.length,d=s.length,h=new Array(f),p;for(l=0;l<f;++l)(a=t[l])&&(h[l]=p=i.call(a,a.__data__,l,t)+"",c.has(p)?o[l]=a:c.set(p,a));for(l=0;l<d;++l)p=i.call(e,s[l],l,s)+"",(a=c.get(p))?(r[l]=a,a.__data__=s[l],c.delete(p)):n[l]=new Zi(e,s[l]);for(l=0;l<f;++l)(a=t[l])&&c.get(h[l])===a&&(o[l]=a)}function p1(e){return e.__data__}function h1(e,t){if(!arguments.length)return Array.from(this,p1);var n=t?f1:d1,r=this._parents,o=this._groups;typeof e!="function"&&(e=u1(e));for(var s=o.length,i=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var f=r[c],d=o[c],h=d.length,p=m1(e.call(f,f&&f.__data__,c,r)),w=p.length,v=l[c]=new Array(w),S=i[c]=new Array(w),m=a[c]=new Array(h);n(f,d,v,S,m,p,t);for(var g=0,x=0,y,_;g<w;++g)if(y=v[g]){for(g>=x&&(x=g+1);!(_=S[x])&&++x<w;);y._next=_||null}}return i=new kt(i,r),i._enter=l,i._exit=a,i}function m1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g1(){return new kt(this._exit||this._groups.map(Um),this._parents)}function y1(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function x1(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),l=new Array(o),a=0;a<i;++a)for(var c=n[a],f=r[a],d=c.length,h=l[a]=new Array(d),p,w=0;w<d;++w)(p=c[w]||f[w])&&(h[w]=p);for(;a<o;++a)l[a]=n[a];return new kt(l,this._parents)}function v1(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function w1(e){e||(e=N1);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],l=i.length,a=o[s]=new Array(l),c,f=0;f<l;++f)(c=i[f])&&(a[f]=c);a.sort(t)}return new kt(o,this._parents).order()}function N1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function S1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function b1(){return Array.from(this)}function E1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function k1(){let e=0;for(const t of this)++e;return e}function _1(){return!this.node()}function C1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,l;s<i;++s)(l=o[s])&&e.call(l,l.__data__,s,o);return this}function j1(e){return function(){this.removeAttribute(e)}}function I1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P1(e,t){return function(){this.setAttribute(e,t)}}function T1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function M1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function A1(e,t){var n=jl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?I1:j1:typeof t=="function"?n.local?M1:$1:n.local?T1:P1)(n,t))}function Wm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function z1(e){return function(){this.style.removeProperty(e)}}function R1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function D1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function O1(e,t,n){return arguments.length>1?this.each((t==null?z1:typeof t=="function"?D1:R1)(e,t,n??"")):go(this.node(),e)}function go(e,t){return e.style.getPropertyValue(t)||Wm(e).getComputedStyle(e,null).getPropertyValue(t)}function L1(e){return function(){delete this[e]}}function F1(e,t){return function(){this[e]=t}}function H1(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function V1(e,t){return arguments.length>1?this.each((t==null?L1:typeof t=="function"?H1:F1)(e,t)):this.node()[e]}function Qm(e){return e.trim().split(/^|\s+/)}function Vu(e){return e.classList||new qm(e)}function qm(e){this._node=e,this._names=Qm(e.getAttribute("class")||"")}qm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ym(e,t){for(var n=Vu(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Xm(e,t){for(var n=Vu(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function B1(e){return function(){Ym(this,e)}}function U1(e){return function(){Xm(this,e)}}function W1(e,t){return function(){(t.apply(this,arguments)?Ym:Xm)(this,e)}}function Q1(e,t){var n=Qm(e+"");if(arguments.length<2){for(var r=Vu(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?W1:t?B1:U1)(n,t))}function q1(){this.textContent=""}function Y1(e){return function(){this.textContent=e}}function X1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function K1(e){return arguments.length?this.each(e==null?q1:(typeof e=="function"?X1:Y1)(e)):this.node().textContent}function G1(){this.innerHTML=""}function Z1(e){return function(){this.innerHTML=e}}function J1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ew(e){return arguments.length?this.each(e==null?G1:(typeof e=="function"?J1:Z1)(e)):this.node().innerHTML}function tw(){this.nextSibling&&this.parentNode.appendChild(this)}function nw(){return this.each(tw)}function rw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ow(){return this.each(rw)}function sw(e){var t=typeof e=="function"?e:Fm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iw(){return null}function lw(e,t){var n=typeof e=="function"?e:Fm(e),r=t==null?iw:typeof t=="function"?t:Hu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aw(){var e=this.parentNode;e&&e.removeChild(this)}function cw(){return this.each(aw)}function uw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fw(e){return this.select(e?dw:uw)}function pw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hw(e){return function(t){e.call(this,t,this.__data__)}}function mw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function yw(e,t,n){return function(){var r=this.__on,o,s=hw(t);if(r){for(var i=0,l=r.length;i<l;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function xw(e,t,n){var r=mw(e+""),o,s=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,f;a<c;++a)for(o=0,f=l[a];o<s;++o)if((i=r[o]).type===f.type&&i.name===f.name)return f.value}return}for(l=t?yw:gw,o=0;o<s;++o)this.each(l(r[o],t,n));return this}function Km(e,t,n){var r=Wm(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function vw(e,t){return function(){return Km(this,e,t)}}function ww(e,t){return function(){return Km(this,e,t.apply(this,arguments))}}function Nw(e,t){return this.each((typeof t=="function"?ww:vw)(e,t))}function*Sw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var Gm=[null];function kt(e,t){this._groups=e,this._parents=t}function Ms(){return new kt([[document.documentElement]],Gm)}function bw(){return this}kt.prototype=Ms.prototype={constructor:kt,select:Xv,selectAll:Jv,selectChild:r1,selectChildren:l1,filter:a1,data:h1,enter:c1,exit:g1,join:y1,merge:x1,selection:bw,order:v1,sort:w1,call:S1,nodes:b1,node:E1,size:k1,empty:_1,each:C1,attr:A1,style:O1,property:V1,classed:Q1,text:K1,html:ew,raise:nw,lower:ow,append:sw,insert:lw,remove:cw,clone:fw,datum:pw,on:xw,dispatch:Nw,[Symbol.iterator]:Sw};function Mt(e){return typeof e=="string"?new kt([[document.querySelector(e)]],[document.documentElement]):new kt([[e]],Gm)}function Ew(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ut(e,t){if(e=Ew(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const kw={passive:!1},xs={capture:!0,passive:!1};function ga(e){e.stopImmediatePropagation()}function oo(e){e.preventDefault(),e.stopImmediatePropagation()}function Zm(e){var t=e.document.documentElement,n=Mt(e).on("dragstart.drag",oo,xs);"onselectstart"in t?n.on("selectstart.drag",oo,xs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Jm(e,t){var n=e.document.documentElement,r=Mt(e).on("dragstart.drag",null);t&&(r.on("click.drag",oo,xs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ri=e=>()=>e;function kc(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:l,dx:a,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}kc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function _w(e){return!e.ctrlKey&&!e.button}function Cw(){return this.parentNode}function jw(e,t){return t??{x:e.x,y:e.y}}function Iw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pw(){var e=_w,t=Cw,n=jw,r=Iw,o={},s=Cl("start","drag","end"),i=0,l,a,c,f,d=0;function h(y){y.on("mousedown.drag",p).filter(r).on("touchstart.drag",S).on("touchmove.drag",m,kw).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,_){if(!(f||!e.call(this,y,_))){var b=x(this,t.call(this,y,_),y,_,"mouse");b&&(Mt(y.view).on("mousemove.drag",w,xs).on("mouseup.drag",v,xs),Zm(y.view),ga(y),c=!1,l=y.clientX,a=y.clientY,b("start",y))}}function w(y){if(oo(y),!c){var _=y.clientX-l,b=y.clientY-a;c=_*_+b*b>d}o.mouse("drag",y)}function v(y){Mt(y.view).on("mousemove.drag mouseup.drag",null),Jm(y.view,c),oo(y),o.mouse("end",y)}function S(y,_){if(e.call(this,y,_)){var b=y.changedTouches,C=t.call(this,y,_),z=b.length,A,E;for(A=0;A<z;++A)(E=x(this,C,y,_,b[A].identifier,b[A]))&&(ga(y),E("start",y,b[A]))}}function m(y){var _=y.changedTouches,b=_.length,C,z;for(C=0;C<b;++C)(z=o[_[C].identifier])&&(oo(y),z("drag",y,_[C]))}function g(y){var _=y.changedTouches,b=_.length,C,z;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),C=0;C<b;++C)(z=o[_[C].identifier])&&(ga(y),z("end",y,_[C]))}function x(y,_,b,C,z,A){var E=s.copy(),R=Ut(A||b,_),D,O,N;if((N=n.call(y,new kc("beforestart",{sourceEvent:b,target:h,identifier:z,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:E}),C))!=null)return D=N.x-R[0]||0,O=N.y-R[1]||0,function M(j,F,T){var k=R,P;switch(j){case"start":o[z]=M,P=i++;break;case"end":delete o[z],--i;case"drag":R=Ut(T||F,_),P=i;break}E.call(j,y,new kc(j,{sourceEvent:F,subject:N,target:h,identifier:z,active:P,x:R[0]+D,y:R[1]+O,dx:R[0]-k[0],dy:R[1]-k[1],dispatch:E}),C)}}return h.filter=function(y){return arguments.length?(e=typeof y=="function"?y:ri(!!y),h):e},h.container=function(y){return arguments.length?(t=typeof y=="function"?y:ri(y),h):t},h.subject=function(y){return arguments.length?(n=typeof y=="function"?y:ri(y),h):n},h.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:ri(!!y),h):r},h.on=function(){var y=s.on.apply(s,arguments);return y===s?h:y},h.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,h):Math.sqrt(d)},h}function Bu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function As(){}var vs=.7,Ji=1/vs,so="\\s*([+-]?\\d+)\\s*",ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tw=/^#([0-9a-f]{3,8})$/,$w=new RegExp(`^rgb\\(${so},${so},${so}\\)$`),Mw=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),Aw=new RegExp(`^rgba\\(${so},${so},${so},${ws}\\)$`),zw=new RegExp(`^rgba\\(${an},${an},${an},${ws}\\)$`),Rw=new RegExp(`^hsl\\(${ws},${an},${an}\\)$`),Dw=new RegExp(`^hsla\\(${ws},${an},${an},${ws}\\)$`),bf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bu(As,Ns,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ef,formatHex:Ef,formatHex8:Ow,formatHsl:Lw,formatRgb:kf,toString:kf});function Ef(){return this.rgb().formatHex()}function Ow(){return this.rgb().formatHex8()}function Lw(){return tg(this).formatHsl()}function kf(){return this.rgb().formatRgb()}function Ns(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_f(t):n===3?new gt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$w.exec(e))?new gt(t[1],t[2],t[3],1):(t=Mw.exec(e))?new gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Aw.exec(e))?oi(t[1],t[2],t[3],t[4]):(t=zw.exec(e))?oi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Rw.exec(e))?If(t[1],t[2]/100,t[3]/100,1):(t=Dw.exec(e))?If(t[1],t[2]/100,t[3]/100,t[4]):bf.hasOwnProperty(e)?_f(bf[e]):e==="transparent"?new gt(NaN,NaN,NaN,0):null}function _f(e){return new gt(e>>16&255,e>>8&255,e&255,1)}function oi(e,t,n,r){return r<=0&&(e=t=n=NaN),new gt(e,t,n,r)}function Fw(e){return e instanceof As||(e=Ns(e)),e?(e=e.rgb(),new gt(e.r,e.g,e.b,e.opacity)):new gt}function _c(e,t,n,r){return arguments.length===1?Fw(e):new gt(e,t,n,r??1)}function gt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Bu(gt,_c,eg(As,{brighter(e){return e=e==null?Ji:Math.pow(Ji,e),new gt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vs:Math.pow(vs,e),new gt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gt(xr(this.r),xr(this.g),xr(this.b),el(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cf,formatHex:Cf,formatHex8:Hw,formatRgb:jf,toString:jf}));function Cf(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}`}function Hw(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}${hr((isNaN(this.opacity)?1:this.opacity)*255)}`}function jf(){const e=el(this.opacity);return`${e===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${e===1?")":`, ${e})`}`}function el(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hr(e){return e=xr(e),(e<16?"0":"")+e.toString(16)}function If(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qt(e,t,n,r)}function tg(e){if(e instanceof Qt)return new Qt(e.h,e.s,e.l,e.opacity);if(e instanceof As||(e=Ns(e)),!e)return new Qt;if(e instanceof Qt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,l=s-o,a=(s+o)/2;return l?(t===s?i=(n-r)/l+(n<r)*6:n===s?i=(r-t)/l+2:i=(t-n)/l+4,l/=a<.5?s+o:2-s-o,i*=60):l=a>0&&a<1?0:i,new Qt(i,l,a,e.opacity)}function Vw(e,t,n,r){return arguments.length===1?tg(e):new Qt(e,t,n,r??1)}function Qt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Bu(Qt,Vw,eg(As,{brighter(e){return e=e==null?Ji:Math.pow(Ji,e),new Qt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vs:Math.pow(vs,e),new Qt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new gt(ya(e>=240?e-240:e+120,o,r),ya(e,o,r),ya(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Qt(Pf(this.h),si(this.s),si(this.l),el(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=el(this.opacity);return`${e===1?"hsl(":"hsla("}${Pf(this.h)}, ${si(this.s)*100}%, ${si(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pf(e){return e=(e||0)%360,e<0?e+360:e}function si(e){return Math.max(0,Math.min(1,e||0))}function ya(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ng=e=>()=>e;function Bw(e,t){return function(n){return e+n*t}}function Uw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ww(e){return(e=+e)==1?rg:function(t,n){return n-t?Uw(t,n,e):ng(isNaN(t)?n:t)}}function rg(e,t){var n=t-e;return n?Bw(e,n):ng(isNaN(e)?t:e)}const Tf=function e(t){var n=Ww(t);function r(o,s){var i=n((o=_c(o)).r,(s=_c(s)).r),l=n(o.g,s.g),a=n(o.b,s.b),c=rg(o.opacity,s.opacity);return function(f){return o.r=i(f),o.g=l(f),o.b=a(f),o.opacity=c(f),o+""}}return r.gamma=e,r}(1);function An(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Cc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xa=new RegExp(Cc.source,"g");function Qw(e){return function(){return e}}function qw(e){return function(t){return e(t)+""}}function Yw(e,t){var n=Cc.lastIndex=xa.lastIndex=0,r,o,s,i=-1,l=[],a=[];for(e=e+"",t=t+"";(r=Cc.exec(e))&&(o=xa.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(r=r[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,a.push({i,x:An(r,o)})),n=xa.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?a[0]?qw(a[0].x):Qw(t):(t=a.length,function(c){for(var f=0,d;f<t;++f)l[(d=a[f]).i]=d.x(c);return l.join("")})}var $f=180/Math.PI,jc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function og(e,t,n,r,o,s){var i,l,a;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),e*r<t*n&&(e=-e,t=-t,a=-a,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*$f,skewX:Math.atan(a)*$f,scaleX:i,scaleY:l}}var ii;function Xw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jc:og(t.a,t.b,t.c,t.d,t.e,t.f)}function Kw(e){return e==null||(ii||(ii=document.createElementNS("http://www.w3.org/2000/svg","g")),ii.setAttribute("transform",e),!(e=ii.transform.baseVal.consolidate()))?jc:(e=e.matrix,og(e.a,e.b,e.c,e.d,e.e,e.f))}function sg(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function s(c,f,d,h,p,w){if(c!==d||f!==h){var v=p.push("translate(",null,t,null,n);w.push({i:v-4,x:An(c,d)},{i:v-2,x:An(f,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function i(c,f,d,h){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),h.push({i:d.push(o(d)+"rotate(",null,r)-2,x:An(c,f)})):f&&d.push(o(d)+"rotate("+f+r)}function l(c,f,d,h){c!==f?h.push({i:d.push(o(d)+"skewX(",null,r)-2,x:An(c,f)}):f&&d.push(o(d)+"skewX("+f+r)}function a(c,f,d,h,p,w){if(c!==d||f!==h){var v=p.push(o(p)+"scale(",null,",",null,")");w.push({i:v-4,x:An(c,d)},{i:v-2,x:An(f,h)})}else(d!==1||h!==1)&&p.push(o(p)+"scale("+d+","+h+")")}return function(c,f){var d=[],h=[];return c=e(c),f=e(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,h),i(c.rotate,f.rotate,d,h),l(c.skewX,f.skewX,d,h),a(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,h),c=f=null,function(p){for(var w=-1,v=h.length,S;++w<v;)d[(S=h[w]).i]=S.x(p);return d.join("")}}}var Gw=sg(Xw,"px, ","px)","deg)"),Zw=sg(Kw,", ",")",")"),Jw=1e-12;function Mf(e){return((e=Math.exp(e))+1/e)/2}function eN(e){return((e=Math.exp(e))-1/e)/2}function tN(e){return((e=Math.exp(2*e))-1)/(e+1)}const nN=function e(t,n,r){function o(s,i){var l=s[0],a=s[1],c=s[2],f=i[0],d=i[1],h=i[2],p=f-l,w=d-a,v=p*p+w*w,S,m;if(v<Jw)m=Math.log(h/c)/t,S=function(C){return[l+C*p,a+C*w,c*Math.exp(t*C*m)]};else{var g=Math.sqrt(v),x=(h*h-c*c+r*v)/(2*c*n*g),y=(h*h-c*c-r*v)/(2*h*n*g),_=Math.log(Math.sqrt(x*x+1)-x),b=Math.log(Math.sqrt(y*y+1)-y);m=(b-_)/t,S=function(C){var z=C*m,A=Mf(_),E=c/(n*g)*(A*tN(t*z+_)-eN(_));return[l+E*p,a+E*w,c*A/Mf(t*z+_)]}}return S.duration=m*1e3*t/Math.SQRT2,S}return o.rho=function(s){var i=Math.max(.001,+s),l=i*i,a=l*l;return e(i,l,a)},o}(Math.SQRT2,2,4);var yo=0,Bo=0,Ao=0,ig=1e3,tl,Uo,nl=0,kr=0,Il=0,Ss=typeof performance=="object"&&performance.now?performance:Date,lg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Uu(){return kr||(lg(rN),kr=Ss.now()+Il)}function rN(){kr=0}function rl(){this._call=this._time=this._next=null}rl.prototype=ag.prototype={constructor:rl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Uu():+n)+(t==null?0:+t),!this._next&&Uo!==this&&(Uo?Uo._next=this:tl=this,Uo=this),this._call=e,this._time=n,Ic()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ic())}};function ag(e,t,n){var r=new rl;return r.restart(e,t,n),r}function oN(){Uu(),++yo;for(var e=tl,t;e;)(t=kr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yo}function Af(){kr=(nl=Ss.now())+Il,yo=Bo=0;try{oN()}finally{yo=0,iN(),kr=0}}function sN(){var e=Ss.now(),t=e-nl;t>ig&&(Il-=t,nl=e)}function iN(){for(var e,t=tl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:tl=n);Uo=e,Ic(r)}function Ic(e){if(!yo){Bo&&(Bo=clearTimeout(Bo));var t=e-kr;t>24?(e<1/0&&(Bo=setTimeout(Af,e-Ss.now()-Il)),Ao&&(Ao=clearInterval(Ao))):(Ao||(nl=Ss.now(),Ao=setInterval(sN,ig)),yo=1,lg(Af))}}function zf(e,t,n){var r=new rl;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var lN=Cl("start","end","cancel","interrupt"),aN=[],cg=0,Rf=1,Pc=2,ki=3,Df=4,Tc=5,_i=6;function Pl(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;cN(e,n,{name:t,index:r,group:o,on:lN,tween:aN,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:cg})}function Wu(e,t){var n=Jt(e,t);if(n.state>cg)throw new Error("too late; already scheduled");return n}function cn(e,t){var n=Jt(e,t);if(n.state>ki)throw new Error("too late; already running");return n}function Jt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cN(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ag(s,0,n.time);function s(c){n.state=Rf,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var f,d,h,p;if(n.state!==Rf)return a();for(f in r)if(p=r[f],p.name===n.name){if(p.state===ki)return zf(i);p.state===Df?(p.state=_i,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=_i,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(zf(function(){n.state===ki&&(n.state=Df,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=Pc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pc){for(n.state=ki,o=new Array(h=n.tween.length),f=0,d=-1;f<h;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function l(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=Tc,1),d=-1,h=o.length;++d<h;)o[d].call(e,f);n.state===Tc&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=_i,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Ci(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>Pc&&r.state<Tc,r.state=_i,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function uN(e){return this.each(function(){Ci(this,e)})}function dN(e,t){var n,r;return function(){var o=cn(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function fN(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=cn(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var l={name:t,value:n},a=0,c=o.length;a<c;++a)if(o[a].name===t){o[a]=l;break}a===c&&o.push(l)}s.tween=o}}function pN(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Jt(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?dN:fN)(n,e,t))}function Qu(e,t,n){var r=e._id;return e.each(function(){var o=cn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Jt(o,r).value[t]}}function ug(e,t){var n;return(typeof t=="number"?An:t instanceof Ns?Tf:(n=Ns(t))?(t=n,Tf):Yw)(e,t)}function hN(e){return function(){this.removeAttribute(e)}}function mN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gN(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function yN(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function xN(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function vN(e,t,n){var r,o,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),a=l+"",i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l)))}}function wN(e,t){var n=jl(e),r=n==="transform"?Zw:ug;return this.attrTween(e,typeof t=="function"?(n.local?vN:xN)(n,r,Qu(this,"attr."+e,t)):t==null?(n.local?mN:hN)(n):(n.local?yN:gN)(n,r,t))}function NN(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SN(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bN(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&SN(e,s)),n}return o._value=t,o}function EN(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&NN(e,s)),n}return o._value=t,o}function kN(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=jl(e);return this.tween(n,(r.local?bN:EN)(r,t))}function _N(e,t){return function(){Wu(this,e).delay=+t.apply(this,arguments)}}function CN(e,t){return t=+t,function(){Wu(this,e).delay=t}}function jN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_N:CN)(t,e)):Jt(this.node(),t).delay}function IN(e,t){return function(){cn(this,e).duration=+t.apply(this,arguments)}}function PN(e,t){return t=+t,function(){cn(this,e).duration=t}}function TN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?IN:PN)(t,e)):Jt(this.node(),t).duration}function $N(e,t){if(typeof t!="function")throw new Error;return function(){cn(this,e).ease=t}}function MN(e){var t=this._id;return arguments.length?this.each($N(t,e)):Jt(this.node(),t).ease}function AN(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;cn(this,e).ease=n}}function zN(e){if(typeof e!="function")throw new Error;return this.each(AN(this._id,e))}function RN(e){typeof e!="function"&&(e=Vm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new kn(r,this._parents,this._name,this._id)}function DN(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),l=0;l<s;++l)for(var a=t[l],c=n[l],f=a.length,d=i[l]=new Array(f),h,p=0;p<f;++p)(h=a[p]||c[p])&&(d[p]=h);for(;l<r;++l)i[l]=t[l];return new kn(i,this._parents,this._name,this._id)}function ON(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function LN(e,t,n){var r,o,s=ON(t)?Wu:cn;return function(){var i=s(this,e),l=i.on;l!==r&&(o=(r=l).copy()).on(t,n),i.on=o}}function FN(e,t){var n=this._id;return arguments.length<2?Jt(this.node(),n).on.on(e):this.each(LN(n,e,t))}function HN(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function VN(){return this.on("end.remove",HN(this._id))}function BN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hu(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var l=r[i],a=l.length,c=s[i]=new Array(a),f,d,h=0;h<a;++h)(f=l[h])&&(d=e.call(f,f.__data__,h,l))&&("__data__"in f&&(d.__data__=f.__data__),c[h]=d,Pl(c[h],t,n,h,c,Jt(f,n)));return new kn(s,this._parents,t,n)}function UN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hm(e));for(var r=this._groups,o=r.length,s=[],i=[],l=0;l<o;++l)for(var a=r[l],c=a.length,f,d=0;d<c;++d)if(f=a[d]){for(var h=e.call(f,f.__data__,d,a),p,w=Jt(f,n),v=0,S=h.length;v<S;++v)(p=h[v])&&Pl(p,t,n,v,h,w);s.push(h),i.push(f)}return new kn(s,i,t,n)}var WN=Ms.prototype.constructor;function QN(){return new WN(this._groups,this._parents)}function qN(e,t){var n,r,o;return function(){var s=go(this,e),i=(this.style.removeProperty(e),go(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function dg(e){return function(){this.style.removeProperty(e)}}function YN(e,t,n){var r,o=n+"",s;return function(){var i=go(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function XN(e,t,n){var r,o,s;return function(){var i=go(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),go(this,e))),i===a?null:i===r&&a===o?s:(o=a,s=t(r=i,l))}}function KN(e,t){var n,r,o,s="style."+t,i="end."+s,l;return function(){var a=cn(this,e),c=a.on,f=a.value[s]==null?l||(l=dg(t)):void 0;(c!==n||o!==f)&&(r=(n=c).copy()).on(i,o=f),a.on=r}}function GN(e,t,n){var r=(e+="")=="transform"?Gw:ug;return t==null?this.styleTween(e,qN(e,r)).on("end.style."+e,dg(e)):typeof t=="function"?this.styleTween(e,XN(e,r,Qu(this,"style."+e,t))).each(KN(this._id,e)):this.styleTween(e,YN(e,r,t),n).on("end.style."+e,null)}function ZN(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function JN(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&ZN(e,i,n)),r}return s._value=t,s}function e2(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,JN(e,t,n??""))}function t2(e){return function(){this.textContent=e}}function n2(e){return function(){var t=e(this);this.textContent=t??""}}function r2(e){return this.tween("text",typeof e=="function"?n2(Qu(this,"text",e)):t2(e==null?"":e+""))}function o2(e){return function(t){this.textContent=e.call(this,t)}}function s2(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&o2(o)),t}return r._value=e,r}function i2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s2(e))}function l2(){for(var e=this._name,t=this._id,n=fg(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,c=0;c<l;++c)if(a=i[c]){var f=Jt(a,t);Pl(a,e,n,c,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new kn(r,this._parents,e,n)}function a2(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var l={value:i},a={value:function(){--o===0&&s()}};n.each(function(){var c=cn(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),c.on=t}),o===0&&s()})}var c2=0;function kn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function fg(){return++c2}var fn=Ms.prototype;kn.prototype={constructor:kn,select:BN,selectAll:UN,selectChild:fn.selectChild,selectChildren:fn.selectChildren,filter:RN,merge:DN,selection:QN,transition:l2,call:fn.call,nodes:fn.nodes,node:fn.node,size:fn.size,empty:fn.empty,each:fn.each,on:FN,attr:wN,attrTween:kN,style:GN,styleTween:e2,text:r2,textTween:i2,remove:VN,tween:pN,delay:jN,duration:TN,ease:MN,easeVarying:zN,end:a2,[Symbol.iterator]:fn[Symbol.iterator]};function u2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var d2={time:null,delay:0,duration:250,ease:u2};function f2(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function p2(e){var t,n;e instanceof kn?(t=e._id,e=e._name):(t=fg(),(n=d2).time=Uu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&Pl(a,e,t,c,i,n||f2(a,t));return new kn(r,this._parents,e,t)}Ms.prototype.interrupt=uN;Ms.prototype.transition=p2;const li=e=>()=>e;function h2(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function yn(e,t,n){this.k=e,this.x=t,this.y=n}yn.prototype={constructor:yn,scale:function(e){return e===1?this:new yn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wn=new yn(1,0,0);yn.prototype;function va(e){e.stopImmediatePropagation()}function zo(e){e.preventDefault(),e.stopImmediatePropagation()}function m2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function g2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Of(){return this.__zoom||wn}function y2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function x2(){return navigator.maxTouchPoints||"ontouchstart"in this}function v2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function pg(){var e=m2,t=g2,n=v2,r=y2,o=x2,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,a=nN,c=Cl("start","zoom","end"),f,d,h,p=500,w=150,v=0,S=10;function m(N){N.property("__zoom",Of).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",E).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(N,M,j,F){var T=N.selection?N.selection():N;T.property("__zoom",Of),N!==T?_(N,M,j,F):T.interrupt().each(function(){b(this,arguments).event(F).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},m.scaleBy=function(N,M,j,F){m.scaleTo(N,function(){var T=this.__zoom.k,k=typeof M=="function"?M.apply(this,arguments):M;return T*k},j,F)},m.scaleTo=function(N,M,j,F){m.transform(N,function(){var T=t.apply(this,arguments),k=this.__zoom,P=j==null?y(T):typeof j=="function"?j.apply(this,arguments):j,L=k.invert(P),H=typeof M=="function"?M.apply(this,arguments):M;return n(x(g(k,H),P,L),T,i)},j,F)},m.translateBy=function(N,M,j,F){m.transform(N,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof j=="function"?j.apply(this,arguments):j),t.apply(this,arguments),i)},null,F)},m.translateTo=function(N,M,j,F,T){m.transform(N,function(){var k=t.apply(this,arguments),P=this.__zoom,L=F==null?y(k):typeof F=="function"?F.apply(this,arguments):F;return n(wn.translate(L[0],L[1]).scale(P.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof j=="function"?-j.apply(this,arguments):-j),k,i)},F,T)};function g(N,M){return M=Math.max(s[0],Math.min(s[1],M)),M===N.k?N:new yn(M,N.x,N.y)}function x(N,M,j){var F=M[0]-j[0]*N.k,T=M[1]-j[1]*N.k;return F===N.x&&T===N.y?N:new yn(N.k,F,T)}function y(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function _(N,M,j,F){N.on("start.zoom",function(){b(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(F).end()}).tween("zoom",function(){var T=this,k=arguments,P=b(T,k).event(F),L=t.apply(T,k),H=j==null?y(L):typeof j=="function"?j.apply(T,k):j,q=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),Q=T.__zoom,Y=typeof M=="function"?M.apply(T,k):M,G=a(Q.invert(H).concat(q/Q.k),Y.invert(H).concat(q/Y.k));return function(te){if(te===1)te=Y;else{var ce=G(te),pe=q/ce[2];te=new yn(pe,H[0]-ce[0]*pe,H[1]-ce[1]*pe)}P.zoom(null,te)}})}function b(N,M,j){return!j&&N.__zooming||new C(N,M)}function C(N,M){this.that=N,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,M),this.taps=0}C.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,M){return this.mouse&&N!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var M=Mt(this.that).datum();c.call(N,this.that,new h2(N,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:c}),M)}};function z(N,...M){if(!e.apply(this,arguments))return;var j=b(this,M).event(N),F=this.__zoom,T=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,r.apply(this,arguments)))),k=Ut(N);if(j.wheel)(j.mouse[0][0]!==k[0]||j.mouse[0][1]!==k[1])&&(j.mouse[1]=F.invert(j.mouse[0]=k)),clearTimeout(j.wheel);else{if(F.k===T)return;j.mouse=[k,F.invert(k)],Ci(this),j.start()}zo(N),j.wheel=setTimeout(P,w),j.zoom("mouse",n(x(g(F,T),j.mouse[0],j.mouse[1]),j.extent,i));function P(){j.wheel=null,j.end()}}function A(N,...M){if(h||!e.apply(this,arguments))return;var j=N.currentTarget,F=b(this,M,!0).event(N),T=Mt(N.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",q,!0),k=Ut(N,j),P=N.clientX,L=N.clientY;Zm(N.view),va(N),F.mouse=[k,this.__zoom.invert(k)],Ci(this),F.start();function H(Q){if(zo(Q),!F.moved){var Y=Q.clientX-P,G=Q.clientY-L;F.moved=Y*Y+G*G>v}F.event(Q).zoom("mouse",n(x(F.that.__zoom,F.mouse[0]=Ut(Q,j),F.mouse[1]),F.extent,i))}function q(Q){T.on("mousemove.zoom mouseup.zoom",null),Jm(Q.view,F.moved),zo(Q),F.event(Q).end()}}function E(N,...M){if(e.apply(this,arguments)){var j=this.__zoom,F=Ut(N.changedTouches?N.changedTouches[0]:N,this),T=j.invert(F),k=j.k*(N.shiftKey?.5:2),P=n(x(g(j,k),F,T),t.apply(this,M),i);zo(N),l>0?Mt(this).transition().duration(l).call(_,P,F,N):Mt(this).call(m.transform,P,F,N)}}function R(N,...M){if(e.apply(this,arguments)){var j=N.touches,F=j.length,T=b(this,M,N.changedTouches.length===F).event(N),k,P,L,H;for(va(N),P=0;P<F;++P)L=j[P],H=Ut(L,this),H=[H,this.__zoom.invert(H),L.identifier],T.touch0?!T.touch1&&T.touch0[2]!==H[2]&&(T.touch1=H,T.taps=0):(T.touch0=H,k=!0,T.taps=1+!!f);f&&(f=clearTimeout(f)),k&&(T.taps<2&&(d=H[0],f=setTimeout(function(){f=null},p)),Ci(this),T.start())}}function D(N,...M){if(this.__zooming){var j=b(this,M).event(N),F=N.changedTouches,T=F.length,k,P,L,H;for(zo(N),k=0;k<T;++k)P=F[k],L=Ut(P,this),j.touch0&&j.touch0[2]===P.identifier?j.touch0[0]=L:j.touch1&&j.touch1[2]===P.identifier&&(j.touch1[0]=L);if(P=j.that.__zoom,j.touch1){var q=j.touch0[0],Q=j.touch0[1],Y=j.touch1[0],G=j.touch1[1],te=(te=Y[0]-q[0])*te+(te=Y[1]-q[1])*te,ce=(ce=G[0]-Q[0])*ce+(ce=G[1]-Q[1])*ce;P=g(P,Math.sqrt(te/ce)),L=[(q[0]+Y[0])/2,(q[1]+Y[1])/2],H=[(Q[0]+G[0])/2,(Q[1]+G[1])/2]}else if(j.touch0)L=j.touch0[0],H=j.touch0[1];else return;j.zoom("touch",n(x(P,L,H),j.extent,i))}}function O(N,...M){if(this.__zooming){var j=b(this,M).event(N),F=N.changedTouches,T=F.length,k,P;for(va(N),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),k=0;k<T;++k)P=F[k],j.touch0&&j.touch0[2]===P.identifier?delete j.touch0:j.touch1&&j.touch1[2]===P.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(P=Ut(P,this),Math.hypot(d[0]-P[0],d[1]-P[1])<S)){var L=Mt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return m.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:li(+N),m):r},m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:li(!!N),m):e},m.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:li(!!N),m):o},m.extent=function(N){return arguments.length?(t=typeof N=="function"?N:li([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),m):t},m.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],m):[s[0],s[1]]},m.translateExtent=function(N){return arguments.length?(i[0][0]=+N[0][0],i[1][0]=+N[1][0],i[0][1]=+N[0][1],i[1][1]=+N[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(N){return arguments.length?(n=N,m):n},m.duration=function(N){return arguments.length?(l=+N,m):l},m.interpolate=function(N){return arguments.length?(a=N,m):a},m.on=function(){var N=c.on.apply(c,arguments);return N===c?m:N},m.clickDistance=function(N){return arguments.length?(v=(N=+N)*N,m):Math.sqrt(v)},m.tapDistance=function(N){return arguments.length?(S=+N,m):S},m}const Tl=I.createContext(null),w2=Tl.Provider,_n={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},hg=_n.error001();function Me(e,t){const n=I.useContext(Tl);if(n===null)throw new Error(hg);return Lm(n,e,t)}const Xe=()=>{const e=I.useContext(Tl);if(e===null)throw new Error(hg);return I.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},N2=e=>e.userSelectionActive?"none":"all";function $l({position:e,children:t,className:n,style:r,...o}){const s=Me(N2),i=`${e}`.split("-");return V.createElement("div",{className:rt(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function S2({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:V.createElement($l,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const b2=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:a,className:c,...f})=>{const d=I.useRef(null),[h,p]=I.useState({x:0,y:0,width:0,height:0}),w=rt(["react-flow__edge-textwrapper",c]);return I.useEffect(()=>{if(d.current){const v=d.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:V.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:w,visibility:h.width?"visible":"hidden",...f},o&&V.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),V.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),a)};var E2=I.memo(b2);const qu=e=>({width:e.offsetWidth,height:e.offsetHeight}),xo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Yu=(e={x:0,y:0},t)=>({x:xo(e.x,t[0][0],t[1][0]),y:xo(e.y,t[0][1],t[1][1])}),Lf=(e,t,n)=>e<t?xo(Math.abs(e-t),1,50)/50:e>n?-xo(Math.abs(e-n),1,50)/50:0,mg=(e,t)=>{const n=Lf(e.x,35,t.width-35)*20,r=Lf(e.y,35,t.height-35)*20;return[n,r]},gg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},yg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),bs=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),xg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ff=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),k2=(e,t)=>xg(yg(bs(e),bs(t))),$c=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},_2=e=>Rt(e.width)&&Rt(e.height)&&Rt(e.x)&&Rt(e.y),Rt=e=>!isNaN(e)&&isFinite(e),Ue=Symbol.for("internals"),vg=["Enter"," ","Escape"],C2=(e,t)=>{},j2=e=>"nativeEvent"in e;function Mc(e){var o,s;const t=j2(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const wg=e=>"clientX"in e,Xn=(e,t)=>{var s,i;const n=wg(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},ol=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},zs=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&V.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&Rt(n)&&Rt(r)?V.createElement(E2,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c}):null);zs.displayName="BaseEdge";function Ro(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function Ng({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[s,l,o,i]}function Sg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:l}){const a=e*.125+o*.375+i*.375+n*.125,c=t*.125+s*.375+l*.375+r*.125,f=Math.abs(a-e),d=Math.abs(c-t);return[a,c,f,d]}var Jn;(function(e){e.Strict="strict",e.Loose="loose"})(Jn||(Jn={}));var mr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mr||(mr={}));var Es;(function(e){e.Partial="partial",e.Full="full"})(Es||(Es={}));var On;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(On||(On={}));var sl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(sl||(sl={}));var ie;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ie||(ie={}));function Hf({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===ie.Left||e===ie.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function bg({sourceX:e,sourceY:t,sourcePosition:n=ie.Bottom,targetX:r,targetY:o,targetPosition:s=ie.Top}){const[i,l]=Hf({pos:n,x1:e,y1:t,x2:r,y2:o}),[a,c]=Hf({pos:s,x1:r,y1:o,x2:e,y2:t}),[f,d,h,p]=Sg({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:a,targetControlY:c});return[`M${e},${t} C${i},${l} ${a},${c} ${r},${o}`,f,d,h,p]}const Xu=I.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=ie.Bottom,targetPosition:s=ie.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,interactionWidth:v})=>{const[S,m,g]=bg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return V.createElement(zs,{path:S,labelX:m,labelY:g,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,interactionWidth:v})});Xu.displayName="SimpleBezierEdge";const Vf={[ie.Left]:{x:-1,y:0},[ie.Right]:{x:1,y:0},[ie.Top]:{x:0,y:-1},[ie.Bottom]:{x:0,y:1}},I2=({source:e,sourcePosition:t=ie.Bottom,target:n})=>t===ie.Left||t===ie.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Bf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function P2({source:e,sourcePosition:t=ie.Bottom,target:n,targetPosition:r=ie.Top,center:o,offset:s}){const i=Vf[t],l=Vf[r],a={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},f=I2({source:a,sourcePosition:t,target:c}),d=f.x!==0?"x":"y",h=f[d];let p=[],w,v;const S={x:0,y:0},m={x:0,y:0},[g,x,y,_]=Ng({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*l[d]===-1){w=o.x??g,v=o.y??x;const C=[{x:w,y:a.y},{x:w,y:c.y}],z=[{x:a.x,y:v},{x:c.x,y:v}];i[d]===h?p=d==="x"?C:z:p=d==="x"?z:C}else{const C=[{x:a.x,y:c.y}],z=[{x:c.x,y:a.y}];if(d==="x"?p=i.x===h?z:C:p=i.y===h?C:z,t===r){const O=Math.abs(e[d]-n[d]);if(O<=s){const N=Math.min(s-1,s-O);i[d]===h?S[d]=(a[d]>e[d]?-1:1)*N:m[d]=(c[d]>n[d]?-1:1)*N}}if(t!==r){const O=d==="x"?"y":"x",N=i[d]===l[O],M=a[O]>c[O],j=a[O]<c[O];(i[d]===1&&(!N&&M||N&&j)||i[d]!==1&&(!N&&j||N&&M))&&(p=d==="x"?C:z)}const A={x:a.x+S.x,y:a.y+S.y},E={x:c.x+m.x,y:c.y+m.y},R=Math.max(Math.abs(A.x-p[0].x),Math.abs(E.x-p[0].x)),D=Math.max(Math.abs(A.y-p[0].y),Math.abs(E.y-p[0].y));R>=D?(w=(A.x+E.x)/2,v=p[0].y):(w=p[0].x,v=(A.y+E.y)/2)}return[[e,{x:a.x+S.x,y:a.y+S.y},...p,{x:c.x+m.x,y:c.y+m.y},n],w,v,y,_]}function T2(e,t,n,r){const o=Math.min(Bf(e,t)/2,Bf(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*f}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*l},${i}`}function Ac({sourceX:e,sourceY:t,sourcePosition:n=ie.Bottom,targetX:r,targetY:o,targetPosition:s=ie.Top,borderRadius:i=5,centerX:l,centerY:a,offset:c=20}){const[f,d,h,p,w]=P2({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:l,y:a},offset:c});return[f.reduce((S,m,g)=>{let x="";return g>0&&g<f.length-1?x=T2(f[g-1],m,f[g+1],i):x=`${g===0?"M":"L"}${m.x} ${m.y}`,S+=x,S},""),d,h,p,w]}const Ml=I.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,sourcePosition:d=ie.Bottom,targetPosition:h=ie.Top,markerEnd:p,markerStart:w,pathOptions:v,interactionWidth:S})=>{const[m,g,x]=Ac({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return V.createElement(zs,{path:m,labelX:g,labelY:x,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:w,interactionWidth:S})});Ml.displayName="SmoothStepEdge";const Ku=I.memo(e=>{var t;return V.createElement(Ml,{...e,pathOptions:I.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ku.displayName="StepEdge";function $2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,l]=Ng({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,l]}const Gu=I.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[w,v,S]=$2({sourceX:e,sourceY:t,targetX:n,targetY:r});return V.createElement(zs,{path:w,labelX:v,labelY:S,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h,interactionWidth:p})});Gu.displayName="StraightEdge";function ai(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Uf({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case ie.Left:return[t-ai(t-r,s),n];case ie.Right:return[t+ai(r-t,s),n];case ie.Top:return[t,n-ai(n-o,s)];case ie.Bottom:return[t,n+ai(o-n,s)]}}function Eg({sourceX:e,sourceY:t,sourcePosition:n=ie.Bottom,targetX:r,targetY:o,targetPosition:s=ie.Top,curvature:i=.25}){const[l,a]=Uf({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,f]=Uf({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[d,h,p,w]=Sg({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:f});return[`M${e},${t} C${l},${a} ${c},${f} ${r},${o}`,d,h,p,w]}const il=I.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=ie.Bottom,targetPosition:s=ie.Top,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,pathOptions:v,interactionWidth:S})=>{const[m,g,x]=Eg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:v==null?void 0:v.curvature});return V.createElement(zs,{path:m,labelX:g,labelY:x,label:i,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:w,interactionWidth:S})});il.displayName="BezierEdge";const Zu=I.createContext(null),M2=Zu.Provider;Zu.Consumer;const A2=()=>I.useContext(Zu),z2=e=>"id"in e&&"source"in e&&"target"in e,R2=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,zc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,D2=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),O2=(e,t)=>{if(!e.source||!e.target)return t;let n;return z2(e)?n={...e}:n={...e,id:R2(e)},D2(n,t)?t:t.concat(n)},Rc=({x:e,y:t},[n,r,o],s,[i,l])=>{const a={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(a.x/i),y:l*Math.round(a.y/l)}:a},kg=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),vr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Al=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=vr(o,t).positionAbsolute;return yg(r,bs({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return xg(n)},_g=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const a={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(f=>{const{width:d,height:h,selectable:p=!0,hidden:w=!1}=f;if(i&&!p||w)return!1;const{positionAbsolute:v}=vr(f,l),S={x:v.x,y:v.y,width:d||0,height:h||0},m=$c(a,S),g=typeof d>"u"||typeof h>"u"||d===null||h===null,x=s&&m>0,y=(d||0)*(h||0);(g||x||m>=y||f.dragging)&&c.push(f)}),c},Cg=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},jg=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),l=n/(e.height*(1+s)),a=Math.min(i,l),c=xo(a,r,o),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*c,p=n/2-d*c;return{x:h,y:p,zoom:c}},ar=(e,t=0)=>e.transition().duration(t);function Wf(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,l;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),o},[])}function L2(e,t,n,r,o,s){const{x:i,y:l}=Xn(e),c=t.elementsFromPoint(i,l).find(w=>w.classList.contains("react-flow__handle"));if(c){const w=c.getAttribute("data-nodeid");if(w){const v=Ju(void 0,c),S=c.getAttribute("data-handleid"),m=s({nodeId:w,id:S,type:v});if(m){const g=o.find(x=>x.nodeId===w&&x.type===v&&x.id===S);return{handle:{id:S,type:v,nodeId:w,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:m}}}}let f=[],d=1/0;if(o.forEach(w=>{const v=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(v<=r){const S=s(w);v<=d&&(v<d?f=[{handle:w,validHandleResult:S}]:v===d&&f.push({handle:w,validHandleResult:S}),d=v)}}),!f.length)return{handle:null,validHandleResult:Ig()};if(f.length===1)return f[0];const h=f.some(({validHandleResult:w})=>w.isValid),p=f.some(({handle:w})=>w.type==="target");return f.find(({handle:w,validHandleResult:v})=>p?w.type==="target":h?v.isValid:!0)||f[0]}const F2={source:null,target:null,sourceHandle:null,targetHandle:null},Ig=()=>({handleDomNode:null,isValid:!1,connection:F2,endHandle:null});function Pg(e,t,n,r,o,s,i){const l=o==="target",a=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...Ig(),handleDomNode:a};if(a){const f=Ju(void 0,a),d=a.getAttribute("data-nodeid"),h=a.getAttribute("data-handleid"),p=a.classList.contains("connectable"),w=a.classList.contains("connectableend"),v={source:l?d:n,sourceHandle:l?h:r,target:l?n:d,targetHandle:l?r:h};c.connection=v,p&&w&&(t===Jn.Strict?l&&f==="source"||!l&&f==="target":d!==n||h!==r)&&(c.endHandle={nodeId:d,handleId:h,type:f},c.isValid=s(v))}return c}function H2({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[Ue]){const{handleBounds:i}=s[Ue];let l=[],a=[];i&&(l=Wf(s,i,"source",`${t}-${n}-${r}`),a=Wf(s,i,"target",`${t}-${n}-${r}`)),o.push(...l,...a)}return o},[])}function Ju(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function wa(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function V2(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Tg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:a,onReconnectEnd:c}){const f=gg(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:w,onConnectStart:v,panBy:S,getNodes:m,cancelConnection:g}=s();let x=0,y;const{x:_,y:b}=Xn(e),C=f==null?void 0:f.elementFromPoint(_,b),z=Ju(a,C),A=h==null?void 0:h.getBoundingClientRect();if(!A||!z)return;let E,R=Xn(e,A),D=!1,O=null,N=!1,M=null;const j=H2({nodes:m(),nodeId:n,handleId:t,handleType:z}),F=()=>{if(!p)return;const[P,L]=mg(R,A);S({x:P,y:L}),x=requestAnimationFrame(F)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:z,connectionStartHandle:{nodeId:n,handleId:t,type:z},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:z});function T(P){const{transform:L}=s();R=Xn(P,A);const{handle:H,validHandleResult:q}=L2(P,f,Rc(R,L,!1,[1,1]),w,j,Q=>Pg(Q,d,n,t,o?"target":"source",l,f));if(y=H,D||(F(),D=!0),M=q.handleDomNode,O=q.connection,N=q.isValid,i({connectionPosition:y&&N?kg({x:y.x,y:y.y},L):R,connectionStatus:V2(!!y,N),connectionEndHandle:q.endHandle}),!y&&!N&&!M)return wa(E);O.source!==O.target&&M&&(wa(E),E=M,M.classList.add("connecting","react-flow__handle-connecting"),M.classList.toggle("valid",N),M.classList.toggle("react-flow__handle-valid",N))}function k(P){var L,H;(y||M)&&O&&N&&(r==null||r(O)),(H=(L=s()).onConnectEnd)==null||H.call(L,P),a&&(c==null||c(P)),wa(E),g(),cancelAnimationFrame(x),D=!1,N=!1,O=null,M=null,f.removeEventListener("mousemove",T),f.removeEventListener("mouseup",k),f.removeEventListener("touchmove",T),f.removeEventListener("touchend",k)}f.addEventListener("mousemove",T),f.addEventListener("mouseup",k),f.addEventListener("touchmove",T),f.addEventListener("touchend",k)}const Qf=()=>!0,B2=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),U2=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},$g=I.forwardRef(({type:e="source",position:t=ie.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:a,className:c,onMouseDown:f,onTouchStart:d,...h},p)=>{var A,E;const w=i||null,v=e==="target",S=Xe(),m=A2(),{connectOnClick:g,noPanClassName:x}=Me(B2,Je),{connecting:y,clickConnecting:_}=Me(U2(m,w,e),Je);m||(E=(A=S.getState()).onError)==null||E.call(A,"010",_n.error010());const b=R=>{const{defaultEdgeOptions:D,onConnect:O,hasDefaultEdges:N}=S.getState(),M={...D,...R};if(N){const{edges:j,setEdges:F}=S.getState();F(O2(M,j))}O==null||O(M),l==null||l(M)},C=R=>{if(!m)return;const D=wg(R);o&&(D&&R.button===0||!D)&&Tg({event:R,handleId:w,nodeId:m,onConnect:b,isTarget:v,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||Qf}),D?f==null||f(R):d==null||d(R)},z=R=>{const{onClickConnectStart:D,onClickConnectEnd:O,connectionClickStartHandle:N,connectionMode:M,isValidConnection:j}=S.getState();if(!m||!N&&!o)return;if(!N){D==null||D(R,{nodeId:m,handleId:w,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:w}});return}const F=gg(R.target),T=n||j||Qf,{connection:k,isValid:P}=Pg({nodeId:m,id:w,type:e},M,N.nodeId,N.handleId||null,N.type,T,F);P&&b(k),O==null||O(R),S.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":w,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${w}-${e}`,className:rt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,c,{source:!v,target:v,connectable:r,connectablestart:o,connectableend:s,connecting:_,connectionindicator:r&&(o&&!y||s&&y)}]),onMouseDown:C,onTouchStart:C,onClick:g?z:void 0,ref:p,...h},a)});$g.displayName="Handle";var Yt=I.memo($g);const Mg=({data:e,isConnectable:t,targetPosition:n=ie.Top,sourcePosition:r=ie.Bottom})=>V.createElement(V.Fragment,null,V.createElement(Yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,V.createElement(Yt,{type:"source",position:r,isConnectable:t}));Mg.displayName="DefaultNode";var Dc=I.memo(Mg);const Ag=({data:e,isConnectable:t,sourcePosition:n=ie.Bottom})=>V.createElement(V.Fragment,null,e==null?void 0:e.label,V.createElement(Yt,{type:"source",position:n,isConnectable:t}));Ag.displayName="InputNode";var zg=I.memo(Ag);const Rg=({data:e,isConnectable:t,targetPosition:n=ie.Top})=>V.createElement(V.Fragment,null,V.createElement(Yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Rg.displayName="OutputNode";var Dg=I.memo(Rg);const ed=()=>null;ed.displayName="GroupNode";const W2=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ci=e=>e.id;function Q2(e,t){return Je(e.selectedNodes.map(ci),t.selectedNodes.map(ci))&&Je(e.selectedEdges.map(ci),t.selectedEdges.map(ci))}const Og=I.memo(({onSelectionChange:e})=>{const t=Xe(),{selectedNodes:n,selectedEdges:r}=Me(W2,Q2);return I.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});Og.displayName="SelectionListener";const q2=e=>!!e.onSelectionChange;function Y2({onSelectionChange:e}){const t=Me(q2);return e||t?V.createElement(Og,{onSelectionChange:e}):null}const X2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ar(e,t){I.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function be(e,t,n){I.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const K2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:a,nodesDraggable:c,nodesConnectable:f,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:w,minZoom:v,maxZoom:S,nodeExtent:m,onNodesChange:g,onEdgesChange:x,elementsSelectable:y,connectionMode:_,snapGrid:b,snapToGrid:C,translateExtent:z,connectOnClick:A,defaultEdgeOptions:E,fitView:R,fitViewOptions:D,onNodesDelete:O,onEdgesDelete:N,onNodeDrag:M,onNodeDragStart:j,onNodeDragStop:F,onSelectionDrag:T,onSelectionDragStart:k,onSelectionDragStop:P,noPanClassName:L,nodeOrigin:H,rfId:q,autoPanOnConnect:Q,autoPanOnNodeDrag:Y,onError:G,connectionRadius:te,isValidConnection:ce,nodeDragThreshold:pe})=>{const{setNodes:B,setEdges:ee,setDefaultNodesAndEdges:Z,setMinZoom:J,setMaxZoom:ae,setTranslateExtent:re,setNodeExtent:W,reset:$}=Me(X2,Je),U=Xe();return I.useEffect(()=>{const K=r==null?void 0:r.map(ue=>({...ue,...E}));return Z(n,K),()=>{$()}},[]),be("defaultEdgeOptions",E,U.setState),be("connectionMode",_,U.setState),be("onConnect",o,U.setState),be("onConnectStart",s,U.setState),be("onConnectEnd",i,U.setState),be("onClickConnectStart",l,U.setState),be("onClickConnectEnd",a,U.setState),be("nodesDraggable",c,U.setState),be("nodesConnectable",f,U.setState),be("nodesFocusable",d,U.setState),be("edgesFocusable",h,U.setState),be("edgesUpdatable",p,U.setState),be("elementsSelectable",y,U.setState),be("elevateNodesOnSelect",w,U.setState),be("snapToGrid",C,U.setState),be("snapGrid",b,U.setState),be("onNodesChange",g,U.setState),be("onEdgesChange",x,U.setState),be("connectOnClick",A,U.setState),be("fitViewOnInit",R,U.setState),be("fitViewOnInitOptions",D,U.setState),be("onNodesDelete",O,U.setState),be("onEdgesDelete",N,U.setState),be("onNodeDrag",M,U.setState),be("onNodeDragStart",j,U.setState),be("onNodeDragStop",F,U.setState),be("onSelectionDrag",T,U.setState),be("onSelectionDragStart",k,U.setState),be("onSelectionDragStop",P,U.setState),be("noPanClassName",L,U.setState),be("nodeOrigin",H,U.setState),be("rfId",q,U.setState),be("autoPanOnConnect",Q,U.setState),be("autoPanOnNodeDrag",Y,U.setState),be("onError",G,U.setState),be("connectionRadius",te,U.setState),be("isValidConnection",ce,U.setState),be("nodeDragThreshold",pe,U.setState),Ar(e,B),Ar(t,ee),Ar(v,J),Ar(S,ae),Ar(z,re),Ar(m,W),null},qf={display:"none"},G2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lg="react-flow__node-desc",Fg="react-flow__edge-desc",Z2="react-flow__aria-live",J2=e=>e.ariaLiveMessage;function eS({rfId:e}){const t=Me(J2);return V.createElement("div",{id:`${Z2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:G2},t)}function tS({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${Lg}-${e}`,style:qf},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${Fg}-${e}`,style:qf},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&V.createElement(eS,{rfId:e}))}var ks=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=I.useState(!1),o=I.useRef(!1),s=I.useRef(new Set([])),[i,l]=I.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),f=c.reduce((d,h)=>d.concat(...h),[]);return[c,f]}return[[],[]]},[e]);return I.useEffect(()=>{const a=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||a;if(e!==null){const f=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Mc(p))return!1;const v=Xf(p.code,l);s.current.add(p[v]),Yf(i,s.current,!1)&&(p.preventDefault(),r(!0))},d=p=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Mc(p))return!1;const v=Xf(p.code,l);Yf(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[v]),p.key==="Meta"&&s.current.clear(),o.current=!1},h=()=>{s.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",f),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",f),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function Yf(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Xf(e,t){return t.includes(e)?"code":"key"}function Hg(e,t,n,r){var l,a;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),i=vr(s,r);return Hg(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=s[Ue])==null?void 0:l.z)??0)>(n.z??0)?((a=s[Ue])==null?void 0:a.z)??0:n.z??0},r)}function Vg(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:i,y:l,z:a}=Hg(r,e,{...r.position,z:((s=r[Ue])==null?void 0:s.z)??0},t);r.positionAbsolute={x:i,y:l},r[Ue].z=a,n!=null&&n[r.id]&&(r[Ue].isParent=!0)}})}function Na(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(l=>{var p;const a=(Rt(l.zIndex)?l.zIndex:0)+(l.selected?i:0),c=t.get(l.id),f={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},d=l.parentNode||l.parentId;d&&(s[d]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==l.type;Object.defineProperty(f,Ue,{enumerable:!1,value:{handleBounds:h||(p=c==null?void 0:c[Ue])==null?void 0:p.handleBounds,z:a}}),o.set(l.id,f)}),Vg(o,n,s),o}function Bg(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:a,fitViewOnInitDone:c,fitViewOnInit:f,nodeOrigin:d}=e(),h=t.initial&&!c&&f;if(l&&a&&(h||!t.initial)){const w=n().filter(S=>{var g;const m=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(g=t.nodes)!=null&&g.length?m&&t.nodes.some(x=>x.id===S.id):m}),v=w.every(S=>S.width&&S.height);if(w.length>0&&v){const S=Al(w,d),{x:m,y:g,zoom:x}=jg(S,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),y=wn.translate(m,g).scale(x);return typeof t.duration=="number"&&t.duration>0?l.transform(ar(a,t.duration),y):l.transform(a,y),!0}}return!1}function nS(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ue]:r[Ue],selected:n.selected})}),new Map(t)}function rS(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function ui({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:a,hasDefaultEdges:c}=n();e!=null&&e.length&&(a&&r({nodeInternals:nS(e,o)}),i==null||i(e)),t!=null&&t.length&&(c&&r({edges:rS(t,s)}),l==null||l(t))}const zr=()=>{},oS={zoomIn:zr,zoomOut:zr,zoomTo:zr,getZoom:()=>1,setViewport:zr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:zr,fitBounds:zr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},sS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),iS=()=>{const e=Xe(),{d3Zoom:t,d3Selection:n}=Me(sS,Je);return I.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ar(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(ar(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(ar(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,l,a]=e.getState().transform,c=wn.translate(o.x??i,o.y??l).scale(o.zoom??a);t.transform(ar(n,s==null?void 0:s.duration),c)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>Bg(e.getState,o),setCenter:(o,s,i)=>{const{width:l,height:a,maxZoom:c}=e.getState(),f=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,d=l/2-o*f,h=a/2-s*f,p=wn.translate(d,h).scale(f);t.transform(ar(n,i==null?void 0:i.duration),p)},fitBounds:(o,s)=>{const{width:i,height:l,minZoom:a,maxZoom:c}=e.getState(),{x:f,y:d,zoom:h}=jg(o,i,l,a,c,(s==null?void 0:s.padding)??.1),p=wn.translate(f,d).scale(h);t.transform(ar(n,s==null?void 0:s.duration),p)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Rc(o,s,i,l)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:a}=e.getState();if(!a)return o;const{x:c,y:f}=a.getBoundingClientRect(),d={x:o.x-c,y:o.y-f};return Rc(d,s,i,l)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:l,y:a}=i.getBoundingClientRect(),c=kg(o,s);return{x:c.x+l,y:c.y+a}},viewportInitialized:!0}:oS,[t,n])};function Rs(){const e=iS(),t=Xe(),n=I.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),r=I.useCallback(v=>t.getState().nodeInternals.get(v),[]),o=I.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(S=>({...S}))},[]),s=I.useCallback(v=>{const{edges:S=[]}=t.getState();return S.find(m=>m.id===v)},[]),i=I.useCallback(v=>{const{getNodes:S,setNodes:m,hasDefaultNodes:g,onNodesChange:x}=t.getState(),y=S(),_=typeof v=="function"?v(y):v;if(g)m(_);else if(x){const b=_.length===0?y.map(C=>({type:"remove",id:C.id})):_.map(C=>({item:C,type:"reset"}));x(b)}},[]),l=I.useCallback(v=>{const{edges:S=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:x}=t.getState(),y=typeof v=="function"?v(S):v;if(g)m(y);else if(x){const _=y.length===0?S.map(b=>({type:"remove",id:b.id})):y.map(b=>({item:b,type:"reset"}));x(_)}},[]),a=I.useCallback(v=>{const S=Array.isArray(v)?v:[v],{getNodes:m,setNodes:g,hasDefaultNodes:x,onNodesChange:y}=t.getState();if(x){const b=[...m(),...S];g(b)}else if(y){const _=S.map(b=>({item:b,type:"add"}));y(_)}},[]),c=I.useCallback(v=>{const S=Array.isArray(v)?v:[v],{edges:m=[],setEdges:g,hasDefaultEdges:x,onEdgesChange:y}=t.getState();if(x)g([...m,...S]);else if(y){const _=S.map(b=>({item:b,type:"add"}));y(_)}},[]),f=I.useCallback(()=>{const{getNodes:v,edges:S=[],transform:m}=t.getState(),[g,x,y]=m;return{nodes:v().map(_=>({..._})),edges:S.map(_=>({..._})),viewport:{x:g,y:x,zoom:y}}},[]),d=I.useCallback(({nodes:v,edges:S})=>{const{nodeInternals:m,getNodes:g,edges:x,hasDefaultNodes:y,hasDefaultEdges:_,onNodesDelete:b,onEdgesDelete:C,onNodesChange:z,onEdgesChange:A}=t.getState(),E=(v||[]).map(M=>M.id),R=(S||[]).map(M=>M.id),D=g().reduce((M,j)=>{const F=j.parentNode||j.parentId,T=!E.includes(j.id)&&F&&M.find(P=>P.id===F);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(E.includes(j.id)||T)&&M.push(j),M},[]),O=x.filter(M=>typeof M.deletable=="boolean"?M.deletable:!0),N=O.filter(M=>R.includes(M.id));if(D||N){const M=Cg(D,O),j=[...N,...M],F=j.reduce((T,k)=>(T.includes(k.id)||T.push(k.id),T),[]);if((_||y)&&(_&&t.setState({edges:x.filter(T=>!F.includes(T.id))}),y&&(D.forEach(T=>{m.delete(T.id)}),t.setState({nodeInternals:new Map(m)}))),F.length>0&&(C==null||C(j),A&&A(F.map(T=>({id:T,type:"remove"})))),D.length>0&&(b==null||b(D),z)){const T=D.map(k=>({id:k.id,type:"remove"}));z(T)}}},[]),h=I.useCallback(v=>{const S=_2(v),m=S?null:t.getState().nodeInternals.get(v.id);return!S&&!m?[null,null,S]:[S?v:Ff(m),m,S]},[]),p=I.useCallback((v,S=!0,m)=>{const[g,x,y]=h(v);return g?(m||t.getState().getNodes()).filter(_=>{if(!y&&(_.id===x.id||!_.positionAbsolute))return!1;const b=Ff(_),C=$c(b,g);return S&&C>0||C>=g.width*g.height}):[]},[]),w=I.useCallback((v,S,m=!0)=>{const[g]=h(v);if(!g)return!1;const x=$c(g,S);return m&&x>0||x>=g.width*g.height},[]);return I.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:l,addNodes:a,addEdges:c,toObject:f,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:w}),[e,n,r,o,s,i,l,a,c,f,d,p,w])}const lS={actInsideInputWithModifier:!1};var aS=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Xe(),{deleteElements:r}=Rs(),o=ks(e,lS),s=ks(t);I.useEffect(()=>{if(o){const{edges:i,getNodes:l}=n.getState(),a=l().filter(f=>f.selected),c=i.filter(f=>f.selected);r({nodes:a,edges:c}),n.setState({nodesSelectionActive:!1})}},[o]),I.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function cS(e){const t=Xe();I.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=qu(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",_n.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const td={position:"absolute",width:"100%",height:"100%",top:0,left:0},uS=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,di=e=>({x:e.x,y:e.y,zoom:e.k}),Rr=(e,t)=>e.target.closest(`.${t}`),Kf=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Gf=e=>{const t=e.ctrlKey&&ol()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},dS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),fS=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:a=mr.Free,zoomOnDoubleClick:c=!0,elementsSelectable:f,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:w,maxZoom:v,zoomActivationKeyCode:S,preventScrolling:m=!0,children:g,noWheelClassName:x,noPanClassName:y})=>{const _=I.useRef(),b=Xe(),C=I.useRef(!1),z=I.useRef(!1),A=I.useRef(null),E=I.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:D,d3ZoomHandler:O,userSelectionActive:N}=Me(dS,Je),M=ks(S),j=I.useRef(0),F=I.useRef(!1),T=I.useRef();return cS(A),I.useEffect(()=>{if(A.current){const k=A.current.getBoundingClientRect(),P=pg().scaleExtent([w,v]).translateExtent(p),L=Mt(A.current).call(P),H=wn.translate(h.x,h.y).scale(xo(h.zoom,w,v)),q=[[0,0],[k.width,k.height]],Q=P.constrain()(H,q,p);P.transform(L,Q),P.wheelDelta(Gf),b.setState({d3Zoom:P,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[Q.x,Q.y,Q.k],domNode:A.current.closest(".react-flow")})}},[]),I.useEffect(()=>{D&&R&&(i&&!M&&!N?D.on("wheel.zoom",k=>{if(Rr(k,x))return!1;k.preventDefault(),k.stopImmediatePropagation();const P=D.property("__zoom").k||1;if(k.ctrlKey&&s){const ce=Ut(k),pe=Gf(k),B=P*Math.pow(2,pe);R.scaleTo(D,B,ce,k);return}const L=k.deltaMode===1?20:1;let H=a===mr.Vertical?0:k.deltaX*L,q=a===mr.Horizontal?0:k.deltaY*L;!ol()&&k.shiftKey&&a!==mr.Vertical&&(H=k.deltaY*L,q=0),R.translateBy(D,-(H/P)*l,-(q/P)*l,{internal:!0});const Q=di(D.property("__zoom")),{onViewportChangeStart:Y,onViewportChange:G,onViewportChangeEnd:te}=b.getState();clearTimeout(T.current),F.current||(F.current=!0,t==null||t(k,Q),Y==null||Y(Q)),F.current&&(e==null||e(k,Q),G==null||G(Q),T.current=setTimeout(()=>{n==null||n(k,Q),te==null||te(Q),F.current=!1},150))},{passive:!1}):typeof O<"u"&&D.on("wheel.zoom",function(k,P){if(!m&&k.type==="wheel"&&!k.ctrlKey||Rr(k,x))return null;k.preventDefault(),O.call(this,k,P)},{passive:!1}))},[N,i,a,D,R,O,M,s,m,x,t,e,n]),I.useEffect(()=>{R&&R.on("start",k=>{var H,q;if(!k.sourceEvent||k.sourceEvent.internal)return null;j.current=(H=k.sourceEvent)==null?void 0:H.button;const{onViewportChangeStart:P}=b.getState(),L=di(k.transform);C.current=!0,E.current=L,((q=k.sourceEvent)==null?void 0:q.type)==="mousedown"&&b.setState({paneDragging:!0}),P==null||P(L),t==null||t(k.sourceEvent,L)})},[R,t]),I.useEffect(()=>{R&&(N&&!C.current?R.on("zoom",null):N||R.on("zoom",k=>{var L;const{onViewportChange:P}=b.getState();if(b.setState({transform:[k.transform.x,k.transform.y,k.transform.k]}),z.current=!!(r&&Kf(d,j.current??0)),(e||P)&&!((L=k.sourceEvent)!=null&&L.internal)){const H=di(k.transform);P==null||P(H),e==null||e(k.sourceEvent,H)}}))},[N,R,e,d,r]),I.useEffect(()=>{R&&R.on("end",k=>{if(!k.sourceEvent||k.sourceEvent.internal)return null;const{onViewportChangeEnd:P}=b.getState();if(C.current=!1,b.setState({paneDragging:!1}),r&&Kf(d,j.current??0)&&!z.current&&r(k.sourceEvent),z.current=!1,(n||P)&&uS(E.current,k.transform)){const L=di(k.transform);E.current=L,clearTimeout(_.current),_.current=setTimeout(()=>{P==null||P(L),n==null||n(k.sourceEvent,L)},i?150:0)}})},[R,i,d,n,r]),I.useEffect(()=>{R&&R.filter(k=>{const P=M||o,L=s&&k.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&k.button===1&&k.type==="mousedown"&&(Rr(k,"react-flow__node")||Rr(k,"react-flow__edge")))return!0;if(!d&&!P&&!i&&!c&&!s||N||!c&&k.type==="dblclick"||Rr(k,x)&&k.type==="wheel"||Rr(k,y)&&(k.type!=="wheel"||i&&k.type==="wheel"&&!M)||!s&&k.ctrlKey&&k.type==="wheel"||!P&&!i&&!L&&k.type==="wheel"||!d&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(d)&&!d.includes(k.button)&&k.type==="mousedown")return!1;const H=Array.isArray(d)&&d.includes(k.button)||!k.button||k.button<=1;return(!k.ctrlKey||k.type==="wheel")&&H})},[N,R,o,s,i,c,d,f,M]),V.createElement("div",{className:"react-flow__renderer",ref:A,style:td},g)},pS=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function hS(){const{userSelectionActive:e,userSelectionRect:t}=Me(pS,Je);return e&&t?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Zf(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Ug(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(l=>l.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&Zf(r,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&Zf(r,i);break}case"remove":return r}return r.push(i),r},n)}function Wg(e,t){return Ug(e,t)}function mS(e,t){return Ug(e,t)}const zn=(e,t)=>({id:e,type:"select",selected:t});function Gr(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(zn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(zn(r.id,!1))),n},[])}const Sa=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},gS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Qg=I.memo(({isSelecting:e,selectionMode:t=Es.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:a,onPaneMouseMove:c,onPaneMouseLeave:f,children:d})=>{const h=I.useRef(null),p=Xe(),w=I.useRef(0),v=I.useRef(0),S=I.useRef(),{userSelectionActive:m,elementsSelectable:g,dragging:x}=Me(gS,Je),y=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,v.current=0},_=O=>{s==null||s(O),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},b=O=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){O.preventDefault();return}i==null||i(O)},C=l?O=>l(O):void 0,z=O=>{const{resetSelectedElements:N,domNode:M}=p.getState();if(S.current=M==null?void 0:M.getBoundingClientRect(),!g||!e||O.button!==0||O.target!==h.current||!S.current)return;const{x:j,y:F}=Xn(O,S.current);N(),p.setState({userSelectionRect:{width:0,height:0,startX:j,startY:F,x:j,y:F}}),r==null||r(O)},A=O=>{const{userSelectionRect:N,nodeInternals:M,edges:j,transform:F,onNodesChange:T,onEdgesChange:k,nodeOrigin:P,getNodes:L}=p.getState();if(!e||!S.current||!N)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=Xn(O,S.current),q=N.startX??0,Q=N.startY??0,Y={...N,x:H.x<q?H.x:q,y:H.y<Q?H.y:Q,width:Math.abs(H.x-q),height:Math.abs(H.y-Q)},G=L(),te=_g(M,Y,F,t===Es.Partial,!0,P),ce=Cg(te,j).map(B=>B.id),pe=te.map(B=>B.id);if(w.current!==pe.length){w.current=pe.length;const B=Gr(G,pe);B.length&&(T==null||T(B))}if(v.current!==ce.length){v.current=ce.length;const B=Gr(j,ce);B.length&&(k==null||k(B))}p.setState({userSelectionRect:Y})},E=O=>{if(O.button!==0)return;const{userSelectionRect:N}=p.getState();!m&&N&&O.target===h.current&&(_==null||_(O)),p.setState({nodesSelectionActive:w.current>0}),y(),o==null||o(O)},R=O=>{m&&(p.setState({nodesSelectionActive:w.current>0}),o==null||o(O)),y()},D=g&&(e||m);return V.createElement("div",{className:rt(["react-flow__pane",{dragging:x,selection:e}]),onClick:D?void 0:Sa(_,h),onContextMenu:Sa(b,h),onWheel:Sa(C,h),onMouseEnter:D?void 0:a,onMouseDown:D?z:void 0,onMouseMove:D?A:c,onMouseUp:D?E:void 0,onMouseLeave:D?R:f,ref:h,style:td},d,V.createElement(hS,null))});Qg.displayName="Pane";function qg(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:qg(r,t):!1}function Jf(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function yS(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!qg(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function xS(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Yg(e,t,n,r,o=[0,0],s){const i=xS(e,e.extent||r);let l=i;const a=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(a&&e.width&&e.height){const d=n.get(a),{x:h,y:p}=vr(d,o).positionAbsolute;l=d&&Rt(h)&&Rt(p)&&Rt(d.width)&&Rt(d.height)?[[h+e.width*o[0],p+e.height*o[1]],[h+d.width-e.width+e.width*o[0],p+d.height-e.height+e.height*o[1]]]:l}else s==null||s("005",_n.error005()),l=i;else if(e.extent&&a&&e.extent!=="parent"){const d=n.get(a),{x:h,y:p}=vr(d,o).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let c={x:0,y:0};if(a){const d=n.get(a);c=vr(d,o).positionAbsolute}const f=l&&l!=="parent"?Yu(t,l):t;return{position:{x:f.x-c.x,y:f.y-c.y},positionAbsolute:f}}function ba({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const ep=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),l={x:i.width*r[0],y:i.height*r[1]};return s.map(a=>{const c=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(c.left-i.left-l.x)/n,y:(c.top-i.top-l.y)/n,...qu(a)}})};function Do(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Oc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:a}=t.getState(),c=l.get(e);if(!c){a==null||a("012",_n.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):o([e])}function vS(){const e=Xe();return I.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,a={x:(i-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(a.x/o[0]):a.x,ySnapped:s?o[1]*Math.round(a.y/o[1]):a.y,...a}},[])}function Ea(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Xg({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const l=Xe(),[a,c]=I.useState(!1),f=I.useRef([]),d=I.useRef({x:null,y:null}),h=I.useRef(0),p=I.useRef(null),w=I.useRef({x:0,y:0}),v=I.useRef(null),S=I.useRef(!1),m=I.useRef(!1),g=I.useRef(!1),x=vS();return I.useEffect(()=>{if(e!=null&&e.current){const y=Mt(e.current),_=({x:z,y:A})=>{const{nodeInternals:E,onNodeDrag:R,onSelectionDrag:D,updateNodePositions:O,nodeExtent:N,snapGrid:M,snapToGrid:j,nodeOrigin:F,onError:T}=l.getState();d.current={x:z,y:A};let k=!1,P={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&N){const H=Al(f.current,F);P=bs(H)}if(f.current=f.current.map(H=>{const q={x:z-H.distance.x,y:A-H.distance.y};j&&(q.x=M[0]*Math.round(q.x/M[0]),q.y=M[1]*Math.round(q.y/M[1]));const Q=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];f.current.length>1&&N&&!H.extent&&(Q[0][0]=H.positionAbsolute.x-P.x+N[0][0],Q[1][0]=H.positionAbsolute.x+(H.width??0)-P.x2+N[1][0],Q[0][1]=H.positionAbsolute.y-P.y+N[0][1],Q[1][1]=H.positionAbsolute.y+(H.height??0)-P.y2+N[1][1]);const Y=Yg(H,q,E,Q,F,T);return k=k||H.position.x!==Y.position.x||H.position.y!==Y.position.y,H.position=Y.position,H.positionAbsolute=Y.positionAbsolute,H}),!k)return;O(f.current,!0,!0),c(!0);const L=o?R:Ea(D);if(L&&v.current){const[H,q]=ba({nodeId:o,dragItems:f.current,nodeInternals:E});L(v.current,H,q)}},b=()=>{if(!p.current)return;const[z,A]=mg(w.current,p.current);if(z!==0||A!==0){const{transform:E,panBy:R}=l.getState();d.current.x=(d.current.x??0)-z/E[2],d.current.y=(d.current.y??0)-A/E[2],R({x:z,y:A})&&_(d.current)}h.current=requestAnimationFrame(b)},C=z=>{var F;const{nodeInternals:A,multiSelectionActive:E,nodesDraggable:R,unselectNodesAndEdges:D,onNodeDragStart:O,onSelectionDragStart:N}=l.getState();m.current=!0;const M=o?O:Ea(N);(!i||!s)&&!E&&o&&((F=A.get(o))!=null&&F.selected||D()),o&&s&&i&&Oc({id:o,store:l,nodeRef:e});const j=x(z);if(d.current=j,f.current=yS(A,R,j,o),M&&f.current){const[T,k]=ba({nodeId:o,dragItems:f.current,nodeInternals:A});M(z.sourceEvent,T,k)}};if(t)y.on(".drag",null);else{const z=Pw().on("start",A=>{const{domNode:E,nodeDragThreshold:R}=l.getState();R===0&&C(A),g.current=!1;const D=x(A);d.current=D,p.current=(E==null?void 0:E.getBoundingClientRect())||null,w.current=Xn(A.sourceEvent,p.current)}).on("drag",A=>{var O,N;const E=x(A),{autoPanOnNodeDrag:R,nodeDragThreshold:D}=l.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(g.current=!0),!g.current){if(!S.current&&m.current&&R&&(S.current=!0,b()),!m.current){const M=E.xSnapped-(((O=d==null?void 0:d.current)==null?void 0:O.x)??0),j=E.ySnapped-(((N=d==null?void 0:d.current)==null?void 0:N.y)??0);Math.sqrt(M*M+j*j)>D&&C(A)}(d.current.x!==E.xSnapped||d.current.y!==E.ySnapped)&&f.current&&m.current&&(v.current=A.sourceEvent,w.current=Xn(A.sourceEvent,p.current),_(E))}}).on("end",A=>{if(!(!m.current||g.current)&&(c(!1),S.current=!1,m.current=!1,cancelAnimationFrame(h.current),f.current)){const{updateNodePositions:E,nodeInternals:R,onNodeDragStop:D,onSelectionDragStop:O}=l.getState(),N=o?D:Ea(O);if(E(f.current,!1,!1),N){const[M,j]=ba({nodeId:o,dragItems:f.current,nodeInternals:R});N(A.sourceEvent,M,j)}}}).filter(A=>{const E=A.target;return!A.button&&(!n||!Jf(E,`.${n}`,e))&&(!r||Jf(E,r,e))});return y.call(z),()=>{y.on(".drag",null)}}}},[e,t,n,r,s,l,o,i,x]),a}function Kg(){const e=Xe();return I.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:a,onError:c,nodesDraggable:f}=e.getState(),d=i().filter(g=>g.selected&&(g.draggable||f&&typeof g.draggable>"u")),h=l?a[0]:5,p=l?a[1]:5,w=n.isShiftPressed?4:1,v=n.x*h*w,S=n.y*p*w,m=d.map(g=>{if(g.positionAbsolute){const x={x:g.positionAbsolute.x+v,y:g.positionAbsolute.y+S};l&&(x.x=a[0]*Math.round(x.x/a[0]),x.y=a[1]*Math.round(x.y/a[1]));const{positionAbsolute:y,position:_}=Yg(g,x,r,o,void 0,c);g.position=_,g.positionAbsolute=y}return g});s(m,!0,!1)},[])}const io={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Oo=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:a,selected:c,onClick:f,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:w,onDoubleClick:v,style:S,className:m,isDraggable:g,isSelectable:x,isConnectable:y,isFocusable:_,selectNodesOnDrag:b,sourcePosition:C,targetPosition:z,hidden:A,resizeObserver:E,dragHandle:R,zIndex:D,isParent:O,noDragClassName:N,noPanClassName:M,initialized:j,disableKeyboardA11y:F,ariaLabel:T,rfId:k,hasHandleBounds:P})=>{const L=Xe(),H=I.useRef(null),q=I.useRef(null),Q=I.useRef(C),Y=I.useRef(z),G=I.useRef(r),te=x||g||f||d||h||p,ce=Kg(),pe=Do(n,L.getState,d),B=Do(n,L.getState,h),ee=Do(n,L.getState,p),Z=Do(n,L.getState,w),J=Do(n,L.getState,v),ae=$=>{const{nodeDragThreshold:U}=L.getState();if(x&&(!b||!g||U>0)&&Oc({id:n,store:L,nodeRef:H}),f){const K=L.getState().nodeInternals.get(n);K&&f($,{...K})}},re=$=>{if(!Mc($)&&!F)if(vg.includes($.key)&&x){const U=$.key==="Escape";Oc({id:n,store:L,unselect:U,nodeRef:H})}else g&&c&&Object.prototype.hasOwnProperty.call(io,$.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${$.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ce({x:io[$.key].x,y:io[$.key].y,isShiftPressed:$.shiftKey}))};I.useEffect(()=>()=>{q.current&&(E==null||E.unobserve(q.current),q.current=null)},[]),I.useEffect(()=>{if(H.current&&!A){const $=H.current;(!j||!P||q.current!==$)&&(q.current&&(E==null||E.unobserve(q.current)),E==null||E.observe($),q.current=$)}},[A,j,P]),I.useEffect(()=>{const $=G.current!==r,U=Q.current!==C,K=Y.current!==z;H.current&&($||U||K)&&($&&(G.current=r),U&&(Q.current=C),K&&(Y.current=z),L.getState().updateNodeDimensions([{id:n,nodeElement:H.current,forceUpdate:!0}]))},[n,r,C,z]);const W=Xg({nodeRef:H,disabled:A||!g,noDragClassName:N,handleSelector:R,nodeId:n,isSelectable:x,selectNodesOnDrag:b});return A?null:V.createElement("div",{className:rt(["react-flow__node",`react-flow__node-${r}`,{[M]:g},m,{selected:c,selectable:x,parent:O,dragging:W}]),ref:H,style:{zIndex:D,transform:`translate(${l}px,${a}px)`,pointerEvents:te?"all":"none",visibility:j?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:pe,onMouseMove:B,onMouseLeave:ee,onContextMenu:Z,onClick:ae,onDoubleClick:J,onKeyDown:_?re:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":F?void 0:`${Lg}-${k}`,"aria-label":T},V.createElement(M2,{value:n},V.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:c,isConnectable:y,sourcePosition:C,targetPosition:z,dragging:W,dragHandle:R,zIndex:D})))};return t.displayName="NodeWrapper",I.memo(t)};const wS=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Al(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function NS({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Xe(),{width:o,height:s,x:i,y:l,transformString:a,userSelectionActive:c}=Me(wS,Je),f=Kg(),d=I.useRef(null);if(I.useEffect(()=>{var w;n||(w=d.current)==null||w.focus({preventScroll:!0})},[n]),Xg({nodeRef:d}),c||!o||!s)return null;const h=e?w=>{const v=r.getState().getNodes().filter(S=>S.selected);e(w,v)}:void 0,p=w=>{Object.prototype.hasOwnProperty.call(io,w.key)&&f({x:io[w.key].x,y:io[w.key].y,isShiftPressed:w.shiftKey})};return V.createElement("div",{className:rt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a}},V.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:o,height:s,top:l,left:i}}))}var SS=I.memo(NS);const bS=e=>e.nodesSelectionActive,Gg=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:a,onMoveStart:c,onMoveEnd:f,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:w,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:x,zoomOnScroll:y,zoomOnPinch:_,panOnScroll:b,panOnScrollSpeed:C,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:E,defaultViewport:R,translateExtent:D,minZoom:O,maxZoom:N,preventScrolling:M,onSelectionContextMenu:j,noWheelClassName:F,noPanClassName:T,disableKeyboardA11y:k})=>{const P=Me(bS),L=ks(d),H=ks(m),q=H||E,Q=H||b,Y=L||h&&q!==!0;return aS({deleteKeyCode:l,multiSelectionKeyCode:S}),V.createElement(fS,{onMove:a,onMoveStart:c,onMoveEnd:f,onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:y,zoomOnPinch:_,panOnScroll:Q,panOnScrollSpeed:C,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:!L&&q,defaultViewport:R,translateExtent:D,minZoom:O,maxZoom:N,zoomActivationKeyCode:g,preventScrolling:M,noWheelClassName:F,noPanClassName:T},V.createElement(Qg,{onSelectionStart:w,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:q,isSelecting:!!Y,selectionMode:p},e,P&&V.createElement(SS,{onSelectionContextMenu:j,noPanClassName:T,disableKeyboardA11y:k})))};Gg.displayName="FlowRenderer";var ES=I.memo(Gg);function kS(e){return Me(I.useCallback(n=>e?_g(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function _S(e){const t={input:Oo(e.input||zg),default:Oo(e.default||Dc),output:Oo(e.output||Dg),group:Oo(e.group||ed)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=Oo(e[s]||Dc),o),n);return{...t,...r}}const CS=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},jS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Zg=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=Me(jS,Je),l=kS(e.onlyRenderVisibleElements),a=I.useRef(),c=I.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return a.current=f,f},[]);return I.useEffect(()=>()=>{var f;(f=a==null?void 0:a.current)==null||f.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:td},l.map(f=>{var _,b,C;let d=f.type||"default";e.nodeTypes[d]||(i==null||i("003",_n.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(f.draggable||t&&typeof f.draggable>"u"),w=!!(f.selectable||o&&typeof f.selectable>"u"),v=!!(f.connectable||n&&typeof f.connectable>"u"),S=!!(f.focusable||r&&typeof f.focusable>"u"),m=e.nodeExtent?Yu(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,g=(m==null?void 0:m.x)??0,x=(m==null?void 0:m.y)??0,y=CS({x:g,y:x,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return V.createElement(h,{key:f.id,id:f.id,className:f.className,style:f.style,type:d,data:f.data,sourcePosition:f.sourcePosition||ie.Bottom,targetPosition:f.targetPosition||ie.Top,hidden:f.hidden,xPos:g,yPos:x,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:p,isSelectable:w,isConnectable:v,isFocusable:S,resizeObserver:c,dragHandle:f.dragHandle,zIndex:((_=f[Ue])==null?void 0:_.z)??0,isParent:!!((b=f[Ue])!=null&&b.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((C=f[Ue])!=null&&C.handleBounds)})}))};Zg.displayName="NodeRenderer";var IS=I.memo(Zg);const PS=(e,t,n)=>n===ie.Left?e-t:n===ie.Right?e+t:e,TS=(e,t,n)=>n===ie.Top?e-t:n===ie.Bottom?e+t:e,tp="react-flow__edgeupdater",np=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:l})=>V.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:rt([tp,`${tp}-${l}`]),cx:PS(t,r,e),cy:TS(n,r,e),r,stroke:"transparent",fill:"transparent"}),$S=()=>!0;var Dr=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:l,selected:a,animated:c,label:f,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:v,style:S,source:m,target:g,sourceX:x,sourceY:y,targetX:_,targetY:b,sourcePosition:C,targetPosition:z,elementsSelectable:A,hidden:E,sourceHandleId:R,targetHandleId:D,onContextMenu:O,onMouseEnter:N,onMouseMove:M,onMouseLeave:j,reconnectRadius:F,onReconnect:T,onReconnectStart:k,onReconnectEnd:P,markerEnd:L,markerStart:H,rfId:q,ariaLabel:Q,isFocusable:Y,isReconnectable:G,pathOptions:te,interactionWidth:ce,disableKeyboardA11y:pe})=>{const B=I.useRef(null),[ee,Z]=I.useState(!1),[J,ae]=I.useState(!1),re=Xe(),W=I.useMemo(()=>`url('#${zc(H,q)}')`,[H,q]),$=I.useMemo(()=>`url('#${zc(L,q)}')`,[L,q]);if(E)return null;const U=oe=>{var Pe;const{edges:Ne,addSelectedEdges:se,unselectNodesAndEdges:Se,multiSelectionActive:Ce}=re.getState(),je=Ne.find(Fe=>Fe.id===n);je&&(A&&(re.setState({nodesSelectionActive:!1}),je.selected&&Ce?(Se({nodes:[],edges:[je]}),(Pe=B.current)==null||Pe.blur()):se([n])),i&&i(oe,je))},K=Ro(n,re.getState,l),ue=Ro(n,re.getState,O),ge=Ro(n,re.getState,N),ve=Ro(n,re.getState,M),de=Ro(n,re.getState,j),xe=(oe,Ne)=>{if(oe.button!==0)return;const{edges:se,isValidConnection:Se}=re.getState(),Ce=Ne?g:m,je=(Ne?D:R)||null,Pe=Ne?"target":"source",Fe=Se||$S,He=Ne,Ke=se.find(Pt=>Pt.id===n);ae(!0),k==null||k(oe,Ke,Pe);const at=Pt=>{ae(!1),P==null||P(Pt,Ke,Pe)};Tg({event:oe,handleId:je,nodeId:Ce,onConnect:Pt=>T==null?void 0:T(Ke,Pt),isTarget:He,getState:re.getState,setState:re.setState,isValidConnection:Fe,edgeUpdaterType:Pe,onReconnectEnd:at})},le=oe=>xe(oe,!0),ye=oe=>xe(oe,!1),fe=()=>Z(!0),me=()=>Z(!1),we=!A&&!i,he=oe=>{var Ne;if(!pe&&vg.includes(oe.key)&&A){const{unselectNodesAndEdges:se,addSelectedEdges:Se,edges:Ce}=re.getState();oe.key==="Escape"?((Ne=B.current)==null||Ne.blur(),se({edges:[Ce.find(Pe=>Pe.id===n)]})):Se([n])}};return V.createElement("g",{className:rt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:a,animated:c,inactive:we,updating:ee}]),onClick:U,onDoubleClick:K,onContextMenu:ue,onMouseEnter:ge,onMouseMove:ve,onMouseLeave:de,onKeyDown:Y?he:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Q===null?void 0:Q||`Edge from ${m} to ${g}`,"aria-describedby":Y?`${Fg}-${q}`:void 0,ref:B},!J&&V.createElement(e,{id:n,source:m,target:g,selected:a,animated:c,label:f,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:v,data:s,style:S,sourceX:x,sourceY:y,targetX:_,targetY:b,sourcePosition:C,targetPosition:z,sourceHandleId:R,targetHandleId:D,markerStart:W,markerEnd:$,pathOptions:te,interactionWidth:ce}),G&&V.createElement(V.Fragment,null,(G==="source"||G===!0)&&V.createElement(np,{position:C,centerX:x,centerY:y,radius:F,onMouseDown:le,onMouseEnter:fe,onMouseOut:me,type:"source"}),(G==="target"||G===!0)&&V.createElement(np,{position:z,centerX:_,centerY:b,radius:F,onMouseDown:ye,onMouseEnter:fe,onMouseOut:me,type:"target"})))};return t.displayName="EdgeWrapper",I.memo(t)};function MS(e){const t={default:Dr(e.default||il),straight:Dr(e.bezier||Gu),step:Dr(e.step||Ku),smoothstep:Dr(e.step||Ml),simplebezier:Dr(e.simplebezier||Xu)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=Dr(e[s]||il),o),n);return{...t,...r}}function rp(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case ie.Top:return{x:r+s/2,y:o};case ie.Right:return{x:r+s,y:o+i/2};case ie.Bottom:return{x:r+s/2,y:o+i};case ie.Left:return{x:r,y:o+i/2}}}function op(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const AS=(e,t,n,r,o,s)=>{const i=rp(n,e,t),l=rp(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function zS({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:l,transform:a}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const f=bs({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:i/a[2],height:l/a[2]}),d=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),h=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y));return Math.ceil(d*h)>0}function sp(e){var r,o,s,i,l;const t=((r=e==null?void 0:e[Ue])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const RS=[{level:0,isMaxLevel:!0,edges:[]}];function DS(e,t,n=!1){let r=-1;const o=e.reduce((i,l)=>{var f,d;const a=Rt(l.zIndex);let c=a?l.zIndex:0;if(n){const h=t.get(l.target),p=t.get(l.source),w=l.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),v=Math.max(((f=p==null?void 0:p[Ue])==null?void 0:f.z)||0,((d=h==null?void 0:h[Ue])==null?void 0:d.z)||0,1e3);c=(a?l.zIndex:0)+(w?v:0)}return i[c]?i[c].push(l):i[c]=[l],r=c>r?c:r,i},{}),s=Object.entries(o).map(([i,l])=>{const a=+i;return{edges:l,level:a,isMaxLevel:a===r}});return s.length===0?RS:s}function OS(e,t,n){const r=Me(I.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&zS({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return DS(r,t,n)}const LS=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),FS=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ip={[sl.Arrow]:LS,[sl.ArrowClosed]:FS};function HS(e){const t=Xe();return I.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(ip,e)?ip[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",_n.error009(e)),null)},[e])}const VS=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const a=HS(t);return a?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},V.createElement(a,{color:n,strokeWidth:i})):null},BS=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=zc(i,t);r.includes(l)||(o.push({id:l,color:i.color||e,...i}),r.push(l))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},Jg=({defaultColor:e,rfId:t})=>{const n=Me(I.useCallback(BS({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return V.createElement("defs",null,n.map(r=>V.createElement(VS,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Jg.displayName="MarkerDefinitions";var US=I.memo(Jg);const WS=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),e0=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:a,onEdgeMouseLeave:c,onEdgeClick:f,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:w,reconnectRadius:v,children:S,disableKeyboardA11y:m})=>{const{edgesFocusable:g,edgesUpdatable:x,elementsSelectable:y,width:_,height:b,connectionMode:C,nodeInternals:z,onError:A}=Me(WS,Je),E=OS(t,z,n);return _?V.createElement(V.Fragment,null,E.map(({level:R,edges:D,isMaxLevel:O})=>V.createElement("svg",{key:R,style:{zIndex:R},width:_,height:b,className:"react-flow__edges react-flow__container"},O&&V.createElement(US,{defaultColor:e,rfId:r}),V.createElement("g",null,D.map(N=>{const[M,j,F]=sp(z.get(N.source)),[T,k,P]=sp(z.get(N.target));if(!F||!P)return null;let L=N.type||"default";o[L]||(A==null||A("011",_n.error011(L)),L="default");const H=o[L]||o.default,q=C===Jn.Strict?k.target:(k.target??[]).concat(k.source??[]),Q=op(j.source,N.sourceHandle),Y=op(q,N.targetHandle),G=(Q==null?void 0:Q.position)||ie.Bottom,te=(Y==null?void 0:Y.position)||ie.Top,ce=!!(N.focusable||g&&typeof N.focusable>"u"),pe=N.reconnectable||N.updatable,B=typeof h<"u"&&(pe||x&&typeof pe>"u");if(!Q||!Y)return A==null||A("008",_n.error008(Q,N)),null;const{sourceX:ee,sourceY:Z,targetX:J,targetY:ae}=AS(M,Q,G,T,Y,te);return V.createElement(H,{key:N.id,id:N.id,className:rt([N.className,s]),type:L,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:ee,sourceY:Z,targetX:J,targetY:ae,sourcePosition:G,targetPosition:te,elementsSelectable:y,onContextMenu:i,onMouseEnter:l,onMouseMove:a,onMouseLeave:c,onClick:f,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:w,reconnectRadius:v,rfId:r,ariaLabel:N.ariaLabel,isFocusable:ce,isReconnectable:B,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:m})})))),S):null};e0.displayName="EdgeRenderer";var QS=I.memo(e0);const qS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function YS({children:e}){const t=Me(qS);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function XS(e){const t=Rs(),n=I.useRef(!1);I.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const KS={[ie.Left]:ie.Right,[ie.Right]:ie.Left,[ie.Top]:ie.Bottom,[ie.Bottom]:ie.Top},t0=({nodeId:e,handleType:t,style:n,type:r=On.Bezier,CustomComponent:o,connectionStatus:s})=>{var b,C,z;const{fromNode:i,handleId:l,toX:a,toY:c,connectionMode:f}=Me(I.useCallback(A=>({fromNode:A.nodeInternals.get(e),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[e]),Je),d=(b=i==null?void 0:i[Ue])==null?void 0:b.handleBounds;let h=d==null?void 0:d[t];if(f===Jn.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!h)return null;const p=l?h.find(A=>A.id===l):h[0],w=p?p.x+p.width/2:(i.width??0)/2,v=p?p.y+p.height/2:i.height??0,S=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+w,m=(((z=i.positionAbsolute)==null?void 0:z.y)??0)+v,g=p==null?void 0:p.position,x=g?KS[g]:null;if(!g||!x)return null;if(o)return V.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:S,fromY:m,toX:a,toY:c,fromPosition:g,toPosition:x,connectionStatus:s});let y="";const _={sourceX:S,sourceY:m,sourcePosition:g,targetX:a,targetY:c,targetPosition:x};return r===On.Bezier?[y]=Eg(_):r===On.Step?[y]=Ac({..._,borderRadius:0}):r===On.SmoothStep?[y]=Ac(_):r===On.SimpleBezier?[y]=bg(_):y=`M${S},${m} ${a},${c}`,V.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};t0.displayName="ConnectionLine";const GS=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function ZS({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:l,height:a,connectionStatus:c}=Me(GS,Je);return!(o&&s&&l&&i)?null:V.createElement("svg",{style:e,width:l,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:rt(["react-flow__connection",c])},V.createElement(t0,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:c})))}function lp(e,t){return I.useRef(null),Xe(),I.useMemo(()=>t(e),[e])}const n0=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:a,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:S,connectionLineType:m,connectionLineStyle:g,connectionLineComponent:x,connectionLineContainerStyle:y,selectionKeyCode:_,selectionOnDrag:b,selectionMode:C,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:E,deleteKeyCode:R,onlyRenderVisibleElements:D,elementsSelectable:O,selectNodesOnDrag:N,defaultViewport:M,translateExtent:j,minZoom:F,maxZoom:T,preventScrolling:k,defaultMarkerColor:P,zoomOnScroll:L,zoomOnPinch:H,panOnScroll:q,panOnScrollSpeed:Q,panOnScrollMode:Y,zoomOnDoubleClick:G,panOnDrag:te,onPaneClick:ce,onPaneMouseEnter:pe,onPaneMouseMove:B,onPaneMouseLeave:ee,onPaneScroll:Z,onPaneContextMenu:J,onEdgeContextMenu:ae,onEdgeMouseEnter:re,onEdgeMouseMove:W,onEdgeMouseLeave:$,onReconnect:U,onReconnectStart:K,onReconnectEnd:ue,reconnectRadius:ge,noDragClassName:ve,noWheelClassName:de,noPanClassName:xe,elevateEdgesOnSelect:le,disableKeyboardA11y:ye,nodeOrigin:fe,nodeExtent:me,rfId:we})=>{const he=lp(e,_S),oe=lp(t,MS);return XS(s),V.createElement(ES,{onPaneClick:ce,onPaneMouseEnter:pe,onPaneMouseMove:B,onPaneMouseLeave:ee,onPaneContextMenu:J,onPaneScroll:Z,deleteKeyCode:R,selectionKeyCode:_,selectionOnDrag:b,selectionMode:C,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:E,elementsSelectable:O,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:L,zoomOnPinch:H,zoomOnDoubleClick:G,panOnScroll:q,panOnScrollSpeed:Q,panOnScrollMode:Y,panOnDrag:te,defaultViewport:M,translateExtent:j,minZoom:F,maxZoom:T,onSelectionContextMenu:w,preventScrolling:k,noDragClassName:ve,noWheelClassName:de,noPanClassName:xe,disableKeyboardA11y:ye},V.createElement(YS,null,V.createElement(QS,{edgeTypes:oe,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:D,onEdgeContextMenu:ae,onEdgeMouseEnter:re,onEdgeMouseMove:W,onEdgeMouseLeave:$,onReconnect:U,onReconnectStart:K,onReconnectEnd:ue,reconnectRadius:ge,defaultMarkerColor:P,noPanClassName:xe,elevateEdgesOnSelect:!!le,disableKeyboardA11y:ye,rfId:we},V.createElement(ZS,{style:g,type:m,component:x,containerStyle:y})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(IS,{nodeTypes:he,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:N,onlyRenderVisibleElements:D,noPanClassName:xe,noDragClassName:ve,disableKeyboardA11y:ye,nodeOrigin:fe,nodeExtent:me,rfId:we})))};n0.displayName="GraphView";var JS=I.memo(n0);const Lc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Tn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Lc,nodeExtent:Lc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Jn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:C2,isValidConnection:void 0},eb=()=>Vv((e,t)=>({...Tn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:Na(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?Na(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:a,nodeOrigin:c}=t(),f=a==null?void 0:a.querySelector(".react-flow__viewport");if(!f)return;const d=window.getComputedStyle(f),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((v,S)=>{const m=o.get(S.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[Ue]:{...m[Ue],handleBounds:void 0}});else if(m){const g=qu(S.nodeElement);!!(g.width&&g.height&&(m.width!==g.width||m.height!==g.height||S.forceUpdate))&&(o.set(m.id,{...m,[Ue]:{...m[Ue],handleBounds:{source:ep(".source",S.nodeElement,h,c),target:ep(".target",S.nodeElement,h,c)}},...g}),v.push({id:m.id,type:"dimensions",dimensions:g}))}return v},[]);Vg(o,c);const w=i||s&&!i&&Bg(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:w}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(l=>{const a={id:l.id,type:"position",dragging:o};return r&&(a.positionAbsolute=l.positionAbsolute,a.position=l.position),a});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:a}=t();if(n!=null&&n.length){if(s){const c=Wg(n,l()),f=Na(c,o,i,a);e({nodeInternals:f})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>zn(a,!0)):(i=Gr(s(),n),l=Gr(o,[])),ui({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(a=>zn(a,!0)):(i=Gr(o,n),l=Gr(s(),[])),ui({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),l=r||o,a=i.map(f=>(f.selected=!1,zn(f.id,!1))),c=l.map(f=>zn(f.id,!1));ui({changedNodes:a,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(l=>l.selected).map(l=>zn(l.id,!1)),i=n.filter(l=>l.selected).map(l=>zn(l.id,!1));ui({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Yu(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:l,translateExtent:a}=t();if(!i||!l||!n.x&&!n.y)return!1;const c=wn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),f=[[0,0],[o,s]],d=i==null?void 0:i.constrain()(c,f,a);return i.transform(l,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Tn.connectionNodeId,connectionHandleId:Tn.connectionHandleId,connectionHandleType:Tn.connectionHandleType,connectionStatus:Tn.connectionStatus,connectionStartHandle:Tn.connectionStartHandle,connectionEndHandle:Tn.connectionEndHandle}),reset:()=>e({...Tn})}),Object.is),nd=({children:e})=>{const t=I.useRef(null);return t.current||(t.current=eb()),V.createElement(w2,{value:t.current},e)};nd.displayName="ReactFlowProvider";const r0=({children:e})=>I.useContext(Tl)?V.createElement(V.Fragment,null,e):V.createElement(nd,null,e);r0.displayName="ReactFlowWrapper";const tb={input:zg,default:Dc,output:Dg,group:ed},nb={default:il,straight:Gu,step:Ku,smoothstep:Ml,simplebezier:Xu},rb=[0,0],ob=[15,15],sb={x:0,y:0,zoom:1},ib={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},o0=I.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=tb,edgeTypes:i=nb,onNodeClick:l,onEdgeClick:a,onInit:c,onMove:f,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:w,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:m,onNodeMouseEnter:g,onNodeMouseMove:x,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:b,onNodeDragStart:C,onNodeDrag:z,onNodeDragStop:A,onNodesDelete:E,onEdgesDelete:R,onSelectionChange:D,onSelectionDragStart:O,onSelectionDrag:N,onSelectionDragStop:M,onSelectionContextMenu:j,onSelectionStart:F,onSelectionEnd:T,connectionMode:k=Jn.Strict,connectionLineType:P=On.Bezier,connectionLineStyle:L,connectionLineComponent:H,connectionLineContainerStyle:q,deleteKeyCode:Q="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:G=!1,selectionMode:te=Es.Full,panActivationKeyCode:ce="Space",multiSelectionKeyCode:pe=ol()?"Meta":"Control",zoomActivationKeyCode:B=ol()?"Meta":"Control",snapToGrid:ee=!1,snapGrid:Z=ob,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:ae=!0,nodesDraggable:re,nodesConnectable:W,nodesFocusable:$,nodeOrigin:U=rb,edgesFocusable:K,edgesUpdatable:ue,elementsSelectable:ge,defaultViewport:ve=sb,minZoom:de=.5,maxZoom:xe=2,translateExtent:le=Lc,preventScrolling:ye=!0,nodeExtent:fe,defaultMarkerColor:me="#b1b1b7",zoomOnScroll:we=!0,zoomOnPinch:he=!0,panOnScroll:oe=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:se=mr.Free,zoomOnDoubleClick:Se=!0,panOnDrag:Ce=!0,onPaneClick:je,onPaneMouseEnter:Pe,onPaneMouseMove:Fe,onPaneMouseLeave:He,onPaneScroll:Ke,onPaneContextMenu:at,children:un,onEdgeContextMenu:Pt,onEdgeDoubleClick:jn,onEdgeMouseEnter:Pr,onEdgeMouseMove:Ve,onEdgeMouseLeave:wt,onEdgeUpdate:pt,onEdgeUpdateStart:rr,onEdgeUpdateEnd:en,onReconnect:or,onReconnectStart:dn,onReconnectEnd:Eo,reconnectRadius:Tr=10,edgeUpdaterRadius:In=10,onNodesChange:ko,onEdgesChange:Ds,noDragClassName:Os="nodrag",noWheelClassName:Ll="nowheel",noPanClassName:$r="nopan",fitView:Fl=!1,fitViewOptions:Hl,connectOnClick:P0=!0,attributionPosition:T0,proOptions:$0,defaultEdgeOptions:M0,elevateNodesOnSelect:A0=!0,elevateEdgesOnSelect:z0=!1,disableKeyboardA11y:ld=!1,autoPanOnConnect:R0=!0,autoPanOnNodeDrag:D0=!0,connectionRadius:O0=20,isValidConnection:L0,onError:F0,style:H0,id:ad,nodeDragThreshold:V0,...B0},U0)=>{const Vl=ad||"1";return V.createElement("div",{...B0,style:{...H0,...ib},ref:U0,className:rt(["react-flow",o]),"data-testid":"rf__wrapper",id:ad},V.createElement(r0,null,V.createElement(JS,{onInit:c,onMove:f,onMoveStart:d,onMoveEnd:h,onNodeClick:l,onEdgeClick:a,onNodeMouseEnter:g,onNodeMouseMove:x,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:b,nodeTypes:s,edgeTypes:i,connectionLineType:P,connectionLineStyle:L,connectionLineComponent:H,connectionLineContainerStyle:q,selectionKeyCode:Y,selectionOnDrag:G,selectionMode:te,deleteKeyCode:Q,multiSelectionKeyCode:pe,panActivationKeyCode:ce,zoomActivationKeyCode:B,onlyRenderVisibleElements:J,selectNodesOnDrag:ae,defaultViewport:ve,translateExtent:le,minZoom:de,maxZoom:xe,preventScrolling:ye,zoomOnScroll:we,zoomOnPinch:he,zoomOnDoubleClick:Se,panOnScroll:oe,panOnScrollSpeed:Ne,panOnScrollMode:se,panOnDrag:Ce,onPaneClick:je,onPaneMouseEnter:Pe,onPaneMouseMove:Fe,onPaneMouseLeave:He,onPaneScroll:Ke,onPaneContextMenu:at,onSelectionContextMenu:j,onSelectionStart:F,onSelectionEnd:T,onEdgeContextMenu:Pt,onEdgeDoubleClick:jn,onEdgeMouseEnter:Pr,onEdgeMouseMove:Ve,onEdgeMouseLeave:wt,onReconnect:or??pt,onReconnectStart:dn??rr,onReconnectEnd:Eo??en,reconnectRadius:Tr??In,defaultMarkerColor:me,noDragClassName:Os,noWheelClassName:Ll,noPanClassName:$r,elevateEdgesOnSelect:z0,rfId:Vl,disableKeyboardA11y:ld,nodeOrigin:U,nodeExtent:fe}),V.createElement(K2,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:w,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:m,nodesDraggable:re,nodesConnectable:W,nodesFocusable:$,edgesFocusable:K,edgesUpdatable:ue,elementsSelectable:ge,elevateNodesOnSelect:A0,minZoom:de,maxZoom:xe,nodeExtent:fe,onNodesChange:ko,onEdgesChange:Ds,snapToGrid:ee,snapGrid:Z,connectionMode:k,translateExtent:le,connectOnClick:P0,defaultEdgeOptions:M0,fitView:Fl,fitViewOptions:Hl,onNodesDelete:E,onEdgesDelete:R,onNodeDragStart:C,onNodeDrag:z,onNodeDragStop:A,onSelectionDrag:N,onSelectionDragStart:O,onSelectionDragStop:M,noPanClassName:$r,nodeOrigin:U,rfId:Vl,autoPanOnConnect:R0,autoPanOnNodeDrag:D0,onError:F0,connectionRadius:O0,isValidConnection:L0,nodeDragThreshold:V0}),V.createElement(Y2,{onSelectionChange:D}),un,V.createElement(S2,{proOptions:$0,position:T0}),V.createElement(tS,{rfId:Vl,disableKeyboardA11y:ld})))});o0.displayName="ReactFlow";function s0(e){return t=>{const[n,r]=I.useState(t),o=I.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const lb=s0(Wg),ab=s0(mS),i0=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:l,strokeWidth:a,className:c,borderRadius:f,shapeRendering:d,onClick:h,selected:p})=>{const{background:w,backgroundColor:v}=s||{},S=i||w||v;return V.createElement("rect",{className:rt(["react-flow__minimap-node",{selected:p},c]),x:t,y:n,rx:f,ry:f,width:r,height:o,fill:S,stroke:l,strokeWidth:a,shapeRendering:d,onClick:h?m=>h(m,e):void 0})};i0.displayName="MiniMapNode";var cb=I.memo(i0);const ub=e=>e.nodeOrigin,db=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),ka=e=>e instanceof Function?e:()=>e;function fb({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:s=cb,onClick:i}){const l=Me(db,Je),a=Me(ub),c=ka(t),f=ka(e),d=ka(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return V.createElement(V.Fragment,null,l.map(p=>{const{x:w,y:v}=vr(p,a).positionAbsolute;return V.createElement(s,{key:p.id,x:w,y:v,width:p.width,height:p.height,style:p.style,selected:p.selected,className:d(p),color:c(p),borderRadius:r,strokeColor:f(p),strokeWidth:o,shapeRendering:h,onClick:i,id:p.id})}))}var pb=I.memo(fb);const hb=200,mb=150,gb=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?k2(Al(t,e.nodeOrigin),n):n,rfId:e.rfId}},yb="react-flow__minimap-desc";function l0({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:f=1,position:d="bottom-right",onClick:h,onNodeClick:p,pannable:w=!1,zoomable:v=!1,ariaLabel:S="React Flow mini map",inversePan:m=!1,zoomStep:g=10,offsetScale:x=5}){const y=Xe(),_=I.useRef(null),{boundingRect:b,viewBB:C,rfId:z}=Me(gb,Je),A=(e==null?void 0:e.width)??hb,E=(e==null?void 0:e.height)??mb,R=b.width/A,D=b.height/E,O=Math.max(R,D),N=O*A,M=O*E,j=x*O,F=b.x-(N-b.width)/2-j,T=b.y-(M-b.height)/2-j,k=N+j*2,P=M+j*2,L=`${yb}-${z}`,H=I.useRef(0);H.current=O,I.useEffect(()=>{if(_.current){const Y=Mt(_.current),G=pe=>{const{transform:B,d3Selection:ee,d3Zoom:Z}=y.getState();if(pe.sourceEvent.type!=="wheel"||!ee||!Z)return;const J=-pe.sourceEvent.deltaY*(pe.sourceEvent.deltaMode===1?.05:pe.sourceEvent.deltaMode?1:.002)*g,ae=B[2]*Math.pow(2,J);Z.scaleTo(ee,ae)},te=pe=>{const{transform:B,d3Selection:ee,d3Zoom:Z,translateExtent:J,width:ae,height:re}=y.getState();if(pe.sourceEvent.type!=="mousemove"||!ee||!Z)return;const W=H.current*Math.max(1,B[2])*(m?-1:1),$={x:B[0]-pe.sourceEvent.movementX*W,y:B[1]-pe.sourceEvent.movementY*W},U=[[0,0],[ae,re]],K=wn.translate($.x,$.y).scale(B[2]),ue=Z.constrain()(K,U,J);Z.transform(ee,ue)},ce=pg().on("zoom",w?te:null).on("zoom.wheel",v?G:null);return Y.call(ce),()=>{Y.on("zoom",null)}}},[w,v,m,g]);const q=h?Y=>{const G=Ut(Y);h(Y,{x:G[0],y:G[1]})}:void 0,Q=p?(Y,G)=>{const te=y.getState().nodeInternals.get(G);p(Y,te)}:void 0;return V.createElement($l,{position:d,style:e,className:rt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},V.createElement("svg",{width:A,height:E,viewBox:`${F} ${T} ${k} ${P}`,role:"img","aria-labelledby":L,ref:_,onClick:q},S&&V.createElement("title",{id:L},S),V.createElement(pb,{onClick:Q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:l}),V.createElement("path",{className:"react-flow__minimap-mask",d:`M${F-j},${T-j}h${k+j*2}v${P+j*2}h${-k-j*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fill:a,fillRule:"evenodd",stroke:c,strokeWidth:f,pointerEvents:"none"})))}l0.displayName="MiniMap";var xb=I.memo(l0);function vb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function wb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Nb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Sb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function bb(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Wo=({children:e,className:t,...n})=>V.createElement("button",{type:"button",className:rt(["react-flow__controls-button",t]),...n},e);Wo.displayName="ControlButton";const Eb=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),a0=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:a,className:c,children:f,position:d="bottom-left"})=>{const h=Xe(),[p,w]=I.useState(!1),{isInteractive:v,minZoomReached:S,maxZoomReached:m}=Me(Eb,Je),{zoomIn:g,zoomOut:x,fitView:y}=Rs();if(I.useEffect(()=>{w(!0)},[]),!p)return null;const _=()=>{g(),s==null||s()},b=()=>{x(),i==null||i()},C=()=>{y(o),l==null||l()},z=()=>{h.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),a==null||a(!v)};return V.createElement($l,{className:rt(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls"},t&&V.createElement(V.Fragment,null,V.createElement(Wo,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},V.createElement(vb,null)),V.createElement(Wo,{onClick:b,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},V.createElement(wb,null))),n&&V.createElement(Wo,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},V.createElement(Nb,null)),r&&V.createElement(Wo,{className:"react-flow__controls-interactive",onClick:z,title:"toggle interactivity","aria-label":"toggle interactivity"},v?V.createElement(bb,null):V.createElement(Sb,null)),f)};a0.displayName="Controls";var kb=I.memo(a0),Ot;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ot||(Ot={}));function _b({color:e,dimensions:t,lineWidth:n}){return V.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Cb({color:e,radius:t}){return V.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const jb={[Ot.Dots]:"#91919a",[Ot.Lines]:"#eee",[Ot.Cross]:"#e2e2e2"},Ib={[Ot.Dots]:1,[Ot.Lines]:1,[Ot.Cross]:6},Pb=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function c0({id:e,variant:t=Ot.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:i,style:l,className:a}){const c=I.useRef(null),{transform:f,patternId:d}=Me(Pb,Je),h=i||jb[t],p=r||Ib[t],w=t===Ot.Dots,v=t===Ot.Cross,S=Array.isArray(n)?n:[n,n],m=[S[0]*f[2]||1,S[1]*f[2]||1],g=p*f[2],x=v?[g,g]:m,y=w?[g/s,g/s]:[x[0]/s,x[1]/s];return V.createElement("svg",{className:rt(["react-flow__background",a]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},V.createElement("pattern",{id:d+e,x:f[0]%m[0],y:f[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},w?V.createElement(Cb,{color:h,radius:g/s}):V.createElement(_b,{dimensions:x,color:h,lineWidth:o})),V.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}c0.displayName="Background";var Tb=I.memo(c0);const u0={},{useDebugValue:$b}=V,{useSyncExternalStoreWithSelector:Mb}=Dm;let ap=!1;const Ab=e=>e;function zb(e,t=Ab,n){(u0?"production":void 0)!=="production"&&n&&!ap&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ap=!0);const r=Mb(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $b(r),r}const Rb=e=>{(u0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Om(e):e,n=(r,o)=>zb(t,r,o);return Object.assign(n,t),n},Db=e=>Rb;var d0=Symbol.for("immer-nothing"),cp=Symbol.for("immer-draftable"),_t=Symbol.for("immer-state");function qt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vo=Object.getPrototypeOf;function wo(e){return!!e&&!!e[_t]}function _r(e){var t;return e?f0(e)||Array.isArray(e)||!!e[cp]||!!((t=e.constructor)!=null&&t[cp])||Rl(e)||Dl(e):!1}var Ob=Object.prototype.constructor.toString();function f0(e){if(!e||typeof e!="object")return!1;const t=vo(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ob}function ll(e,t){zl(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function zl(e){const t=e[_t];return t?t.type_:Array.isArray(e)?1:Rl(e)?2:Dl(e)?3:0}function Fc(e,t){return zl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function p0(e,t,n){const r=zl(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Lb(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Rl(e){return e instanceof Map}function Dl(e){return e instanceof Set}function cr(e){return e.copy_||e.base_}function Hc(e,t){if(Rl(e))return new Map(e);if(Dl(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=f0(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[_t];let o=Reflect.ownKeys(r);for(let s=0;s<o.length;s++){const i=o[s],l=r[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(vo(e),r)}else{const r=vo(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function rd(e,t=!1){return Ol(e)||wo(e)||!_r(e)||(zl(e)>1&&(e.set=e.add=e.clear=e.delete=Fb),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>rd(r,!0))),e}function Fb(){qt(2)}function Ol(e){return Object.isFrozen(e)}var Hb={};function Cr(e){const t=Hb[e];return t||qt(0,e),t}var _s;function h0(){return _s}function Vb(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function up(e,t){t&&(Cr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Vc(e){Bc(e),e.drafts_.forEach(Bb),e.drafts_=null}function Bc(e){e===_s&&(_s=e.parent_)}function dp(e){return _s=Vb(_s,e)}function Bb(e){const t=e[_t];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fp(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[_t].modified_&&(Vc(t),qt(4)),_r(e)&&(e=al(t,e),t.parent_||cl(t,e)),t.patches_&&Cr("Patches").generateReplacementPatches_(n[_t].base_,e,t.patches_,t.inversePatches_)):e=al(t,n,[]),Vc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==d0?e:void 0}function al(e,t,n){if(Ol(t))return t;const r=t[_t];if(!r)return ll(t,(o,s)=>pp(e,r,t,o,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return cl(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let s=o,i=!1;r.type_===3&&(s=new Set(o),o.clear(),i=!0),ll(s,(l,a)=>pp(e,r,o,l,a,n,i)),cl(e,o,!1),n&&e.patches_&&Cr("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function pp(e,t,n,r,o,s,i){if(wo(o)){const l=s&&t&&t.type_!==3&&!Fc(t.assigned_,r)?s.concat(r):void 0,a=al(e,o,l);if(p0(n,r,a),wo(a))e.canAutoFreeze_=!1;else return}else i&&n.add(o);if(_r(o)&&!Ol(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;al(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&cl(e,o)}}function cl(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rd(t,n)}function Ub(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:h0(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,s=od;n&&(o=[r],s=Cs);const{revoke:i,proxy:l}=Proxy.revocable(o,s);return r.draft_=l,r.revoke_=i,l}var od={get(e,t){if(t===_t)return e;const n=cr(e);if(!Fc(n,t))return Wb(e,n,t);const r=n[t];return e.finalized_||!_r(r)?r:r===_a(e.base_,t)?(Ca(e),e.copy_[t]=Wc(r,e)):r},has(e,t){return t in cr(e)},ownKeys(e){return Reflect.ownKeys(cr(e))},set(e,t,n){const r=m0(cr(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=_a(cr(e),t),s=o==null?void 0:o[_t];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Lb(n,o)&&(n!==void 0||Fc(e.base_,t)))return!0;Ca(e),Uc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _a(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ca(e),Uc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=cr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){qt(11)},getPrototypeOf(e){return vo(e.base_)},setPrototypeOf(){qt(12)}},Cs={};ll(od,(e,t)=>{Cs[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Cs.deleteProperty=function(e,t){return Cs.set.call(this,e,t,void 0)};Cs.set=function(e,t,n){return od.set.call(this,e[0],t,n,e[0])};function _a(e,t){const n=e[_t];return(n?cr(n):e)[t]}function Wb(e,t,n){var o;const r=m0(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function m0(e,t){if(!(t in e))return;let n=vo(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=vo(n)}}function Uc(e){e.modified_||(e.modified_=!0,e.parent_&&Uc(e.parent_))}function Ca(e){e.copy_||(e.copy_=Hc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Qb=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const i=this;return function(a=s,...c){return i.produce(a,f=>n.call(this,f,...c))}}typeof n!="function"&&qt(6),r!==void 0&&typeof r!="function"&&qt(7);let o;if(_r(t)){const s=dp(this),i=Wc(t,void 0);let l=!0;try{o=n(i),l=!1}finally{l?Vc(s):Bc(s)}return up(s,r),fp(o,s)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===d0&&(o=void 0),this.autoFreeze_&&rd(o,!0),r){const s=[],i=[];Cr("Patches").generateReplacementPatches_(t,o,s,i),r(s,i)}return o}else qt(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...l)=>this.produceWithPatches(i,a=>t(a,...l));let r,o;return[this.produce(t,n,(i,l)=>{r=i,o=l}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_r(e)||qt(8),wo(e)&&(e=qb(e));const t=dp(this),n=Wc(e,void 0);return n[_t].isManual_=!0,Bc(t),n}finishDraft(e,t){const n=e&&e[_t];(!n||!n.isManual_)&&qt(9);const{scope_:r}=n;return up(r,t),fp(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=Cr("Patches").applyPatches_;return wo(e)?r(e,t):this.produce(e,o=>r(o,t))}};function Wc(e,t){const n=Rl(e)?Cr("MapSet").proxyMap_(e,t):Dl(e)?Cr("MapSet").proxySet_(e,t):Ub(e,t);return(t?t.scope_:h0()).drafts_.push(n),n}function qb(e){return wo(e)||qt(10,e),g0(e)}function g0(e){if(!_r(e)||Ol(e))return e;const t=e[_t];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Hc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Hc(e,!0);return ll(n,(r,o)=>{p0(n,r,g0(o))}),t&&(t.finalized_=!1),n}var Ct=new Qb,Yb=Ct.produce;Ct.produceWithPatches.bind(Ct);Ct.setAutoFreeze.bind(Ct);Ct.setUseStrictShallowCopy.bind(Ct);Ct.applyPatches.bind(Ct);Ct.createDraft.bind(Ct);Ct.finishDraft.bind(Ct);const Xb=e=>(t,n,r)=>(r.setState=(o,s,...i)=>{const l=typeof o=="function"?Yb(o):o;return t(l,s,...i)},e(r.setState,n,r)),Kb=Xb,ur=class ur{constructor(){Ls(this,"counters",new Map);Ls(this,"pathRegistry",{nodeToPathsMap:new Map,pathToNodeMap:new Map})}static getInstance(){return ur.instance||(ur.instance=new ur),ur.instance}generateQuestionPathId(t,n,r){return t?`${t.pathId}-Q${n}`:`${r}-Q${n}`}generateAnswerPathId(t,n){return`${t.pathId}-A${n}`}generateOutcomePathId(t,n){return`${t.pathId}-E${n}`}generateVariantPathId(t,n){return`${t}-V${n+1}`}parseVariantFromPath(t){const n=t.match(/(.*-A\d+)-V(\d+)/);return n?{answerPath:n[1],variantNumber:parseInt(n[2])}:null}parsePathId(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];i.startsWith("Q")?o.push({type:"Q",number:parseInt(i.substring(1))}):i.startsWith("A")&&o.push({type:"A",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}parsePathIdWithVariants(t){const n=t.split("-"),r=n[0],o=[];for(let s=1;s<n.length;s++){const i=n[s];if(i.startsWith("Q"))o.push({type:"Q",number:parseInt(i.substring(1))});else if(i.startsWith("A"))o.push({type:"A",number:parseInt(i.substring(1))});else if(i.startsWith("V")&&i.includes("+V")){const l=i.substring(1).split("+V").map(a=>parseInt(a));o.push({type:"VC",numbers:l})}else i.startsWith("V")?o.push({type:"V",number:parseInt(i.substring(1))}):i.startsWith("E")&&o.push({type:"E",number:parseInt(i.substring(1))})}return{topic:r,segments:o}}getPathLevel(t){return this.parsePathId(t).segments.filter(r=>r.type==="Q").length}getParentPathId(t){const n=t.split("-");return n.length<=2?null:n.slice(0,-1).join("-")}generateEdgeId(t,n,r){const o=r?`-${r}`:"";return`edge-${t}-${n}${o}`}registerNode(t,n){this.pathRegistry.pathToNodeMap.set(n,t);const r=this.pathRegistry.nodeToPathsMap.get(t)||[];r.includes(n)||this.pathRegistry.nodeToPathsMap.set(t,[...r,n])}getNodePaths(t){return this.pathRegistry.nodeToPathsMap.get(t)||[]}getNodeForPath(t){return this.pathRegistry.pathToNodeMap.get(t)||null}recalculatePathIds(t,n,r){var p,w,v,S,m,g,x,y,_;const o={nodeToPathsMap:new Map,pathToNodeMap:new Map},s=new Map,i=new Map,l=new Map;t.forEach(b=>{s.set(b.id,b)}),n.forEach(b=>{const C=i.get(b.source)||[];C.push(b),i.set(b.source,C);const z=l.get(b.target)||[];z.push(b),l.set(b.target,z)});const a=t.filter(b=>{var C;return b.type==="question"&&((C=b.data)==null?void 0:C.isRoot)===!0});this.counters.clear();const c=new Map;t.forEach(b=>{var C;c.set(b.id,{...b,data:{...b.data,pathIds:[],topic:((C=b.data)==null?void 0:C.topic)||r}})});const f=[];a.forEach(b=>{var z;i.has(b.id)&&(((z=i.get(b.id))==null?void 0:z.length)||0)>0&&f.push({nodeId:b.id,parentPathId:null,level:1})});const d=new Set;for(;f.length>0;){const{nodeId:b,parentPathId:C,level:z}=f.shift(),A=c.get(b);if(!A)continue;let E;if(A.type==="question"){const M=this.getQuestionNumberForNode(A.id,C,t);C===null?E=`${((p=A.data)==null?void 0:p.topic)||r}-Q${M}`:E=`${C}-Q${M}`}else if(A.type==="answer"){const M=this.getAnswerNumberForNode(A.id,C||"STANDALONE",t);if(E=`${C||"STANDALONE"}-A${M}`,((w=A.data)==null?void 0:w.answerType)==="single"){const F=`${b}:${E}`;if(!d.has(F)){d.add(F);const T=c.get(b),k=T.data.pathIds||[];if(!k.includes(E)){c.set(b,{...T,data:{...T.data,pathId:E,primaryPathId:E,pathIds:[...k,E],isRoot:!1,questionLevel:z}}),o.pathToNodeMap.set(E,b);const P=o.nodeToPathsMap.get(b)||[];P.includes(E)||o.nodeToPathsMap.set(b,[...P,E])}}}else{const F=c.get(b),T=F.data.pathIds||[],k=[];if(((v=A.data)==null?void 0:v.answerType)==="multiple")(((S=A.data)==null?void 0:S.variants)||[]).forEach((H,q)=>{const Q=`${E}-V${q+1}`;T.includes(Q)||k.push(Q)});else if(((m=A.data)==null?void 0:m.answerType)==="combinations"){const H=(((g=A.data)==null?void 0:g.variants)||[]).length;for(let q=1;q<Math.pow(2,H);q++){const Q=[];for(let G=0;G<H;G++)q&1<<G&&Q.push(G+1);const Y=`${E}-V${Q.join("+V")}`;T.includes(Y)||k.push(Y)}}const P=[...T,...k];c.set(b,{...F,data:{...F.data,pathId:E,pathIds:P,isRoot:!1,questionLevel:z}}),k.forEach(L=>{o.pathToNodeMap.set(L,b);const H=o.nodeToPathsMap.get(b)||[];H.includes(L)||o.nodeToPathsMap.set(b,[...H,L])})}const j=i.get(b)||[];((x=A.data)==null?void 0:x.answerType)==="single"?j.forEach(F=>{f.push({nodeId:F.target,parentPathId:E,level:z+1,sourceHandle:F.sourceHandle||void 0,sourceNodeId:b})}):((y=A.data)==null?void 0:y.answerType)==="multiple"?j.forEach(F=>{if(F.sourceHandle&&F.sourceHandle.startsWith("variant-")){const T=parseInt(F.sourceHandle.replace("variant-","")),k=`${E}-V${T+1}`;f.push({nodeId:F.target,parentPathId:k,level:z+1,sourceHandle:F.sourceHandle||void 0,sourceNodeId:b})}}):((_=A.data)==null?void 0:_.answerType)==="combinations"&&j.forEach(F=>{var T;if(F.sourceHandle&&F.sourceHandle.startsWith("combination-")){const k=F.sourceHandle.replace("combination-",""),P=((T=A.data)==null?void 0:T.variants)||[],L=[],H=P.length;for(let Q=1;Q<Math.pow(2,H);Q++){const Y=[];for(let te=0;te<H;te++)Q&1<<te&&Y.push(te+1);const G={id:`combo-${Q}`,variantIndices:Y};L.push(G)}const q=L.find(Q=>Q.id===k);if(q){const Q=`${E}-V${q.variantIndices.join("+V")}`;f.push({nodeId:F.target,parentPathId:Q,level:z+1,sourceHandle:F.sourceHandle||void 0,sourceNodeId:b})}}});continue}else if(A.type==="outcome"){const M=this.getOutcomeNumberForNode(A.id,C||"STANDALONE",t);E=`${C||"STANDALONE"}-E${M}`}else E=`${C||"STANDALONE"}-NODE`;const R=`${b}:${E}`;if(d.has(R))continue;d.add(R);const D=c.get(b),O=D.data.pathIds||[];if(!O.includes(E)){const M=[...O,E],j=D.data.primaryPathId,F=!j||E.length<(j||"").length;c.set(b,{...D,data:{...D.data,pathId:F?E:D.data.pathId||E,primaryPathId:F?E:j||E,pathIds:M,isRoot:D.data.isRoot||!1,questionLevel:z,topic:(D.data.isRoot&&D.data.topic,D.data.topic)}})}o.pathToNodeMap.set(E,b);const N=o.nodeToPathsMap.get(b)||[];N.includes(E)||o.nodeToPathsMap.set(b,[...N,E]),A.type!=="answer"&&(i.get(b)||[]).forEach(j=>{if(c.get(j.target)){const T=A.type==="question"?z:z+1;f.push({nodeId:j.target,parentPathId:E,level:T,sourceHandle:j.sourceHandle||void 0,sourceNodeId:b})}})}return t.forEach(b=>{var A;const C=c.get(b.id);if(((A=b.data)==null?void 0:A.isRoot)===!0)return;let z=!1;if(C&&(!C.data.pathIds||C.data.pathIds.length===0)&&(z=!0),z){let E;b.type==="question"?E=`disconnected from root-Q${this.getQuestionNumberForNode(b.id,"disconnected from root",t)}`:b.type==="answer"?E=`disconnected from root-A${this.getAnswerNumberForNode(b.id,"disconnected from root",t)}`:b.type==="outcome"?E=`disconnected from root-E${this.getOutcomeNumberForNode(b.id,"disconnected from root",t)}`:E="disconnected from root-NODE";const R=`${b.id}:${E}`;if(!d.has(R)){d.add(R);const D=c.get(b.id);c.set(b.id,{...D,data:{...D.data,pathId:E,primaryPathId:E,pathIds:[E],isRoot:!1,questionLevel:1,topic:D.data.topic}}),o.pathToNodeMap.set(E,b.id),o.nodeToPathsMap.set(b.id,[E])}}}),this.pathRegistry=o,{nodes:Array.from(c.values()),registry:o}}getQuestionNumberForNode(t,n,r){var a;const o=r.find(c=>c.id===t);return n===null||((a=o==null?void 0:o.data)==null?void 0:a.isRoot)===!0?1:r.filter(c=>{var f;return c.type==="question"&&!((f=c.data)!=null&&f.isRoot)}).sort((c,f)=>c.id.localeCompare(f.id)).findIndex(c=>c.id===t)+2}getAnswerNumberForNode(t,n,r){return r.filter(l=>l.type==="answer").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getOutcomeNumberForNode(t,n,r){return r.filter(l=>l.type==="outcome").sort((l,a)=>l.id.localeCompare(a.id)).findIndex(l=>l.id===t)+1}getNextQuestionNumber(t,n){if(t===null)return 1;const r="Q-NEXT",o=this.counters.get(r)||0;return this.counters.set(r,o+1),o+1}getNextAnswerNumber(t){const n="A-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}getNextOutcomeNumber(t){const n="E-NEXT",r=this.counters.get(n)||0;return this.counters.set(n,r+1),r+1}reset(){this.counters.clear(),this.pathRegistry={nodeToPathsMap:new Map,pathToNodeMap:new Map}}getRegistry(){return this.pathRegistry}getDisplayLabel(t,n){const r=this.parsePathId(t),o=[];switch(r.segments.forEach(s=>{s.type==="Q"&&o.push(s.number)}),n){case"question":return`Q${o.join(".")}`;case"answer":const s=r.segments.filter(i=>i.type==="A").pop();return`A${(s==null?void 0:s.number)||"?"}`;case"outcome":return`Outcome ${this.getPathLevel(t)}`;default:return t}}calculatePathScore(t,n){const r=this.parsePathIdWithVariants(t);let o=0,s=r.topic;for(let i=0;i<r.segments.length;i++){const l=r.segments[i];if(l.type==="Q")s+=`-Q${l.number}`;else if(l.type==="A")s+=`-A${l.number}`;else if(l.type==="V"&&l.number!==void 0){s+=`-V${l.number}`;const a=s.substring(0,s.lastIndexOf("-V")),c=this.getNodeForPath(a);if(c){const f=n.find(d=>d.id===c);if(f&&f.data.variants){const d=l.number-1,h=f.data.variants[d];h&&(o+=h.score||0)}}}else if(l.type==="VC"&&l.numbers){const a=`V${l.numbers.join("+V")}`;s+=`-${a}`;const c=s.substring(0,s.lastIndexOf("-V")),f=this.getNodeForPath(c);if(f){const d=n.find(h=>h.id===f);d&&d.data.variants&&l.numbers.forEach(h=>{const p=d.data.variants[h];p&&(o+=p.score||0)})}}else l.type==="E"&&l.number!==void 0&&(s+=`-E${l.number}`)}return o}getHumanReadablePath(t,n){const r=this.parsePathIdWithVariants(t),o=[];let s="";return r.segments.forEach((i,l)=>{if(i.type==="Q"&&i.number!==void 0){s=l===0?`${r.topic}-Q${i.number}`:s+`-Q${i.number}`;const a=this.getNodeForPath(s),c=n.find(f=>f.id===a);c&&o.push(`Q${i.number}: ${c.data.questionText||"Question"}`)}else if(i.type==="A"&&i.number!==void 0)s+=`-A${i.number}`,o.push(`Answer ${i.number}`);else if(i.type==="V"&&i.number!==void 0){const a=s;s+=`-V${i.number}`;const c=this.getNodeForPath(a),f=n.find(d=>d.id===c);if(f&&f.data.variants){const d=f.data.variants[i.number-1];d&&o.push(` "${d.text}"`)}}else if(i.type==="VC"&&i.numbers){const a=s,c=`V${i.numbers.join("+V")}`;s+=`-${c}`;const f=this.getNodeForPath(a),d=n.find(h=>h.id===f);if(d&&d.data.variants){const h=i.numbers.map(p=>{var w;return(w=d.data.variants[p])==null?void 0:w.text}).filter(Boolean);h.length>0&&o.push(` [${h.join(" + ")}]`)}}else i.type==="E"&&i.number!==void 0&&(s+=`-E${i.number}`,o.push(`Outcome ${i.number}`))}),o.join(" ")}printPathStructure(t){console.log("=== Path Structure Debug ==="),t.forEach(n=>{n.data.pathIds?(console.log(`Node ${n.id} (${n.type}):`),console.log(`  Primary: ${n.data.pathId||n.data.primaryPathId}`),console.log(`  All paths: ${n.data.pathIds.join(", ")}`)):n.data.pathId&&console.log(`Node ${n.id} (${n.type}): ${n.data.pathId}`)}),console.log("=== Counters ==="),this.counters.forEach((n,r)=>{console.log(`${r}: ${n}`)})}};Ls(ur,"instance");let At=ur;const ke=Db()(Kb((e,t)=>{let n=null;const r=()=>{n&&clearTimeout(n),n=setTimeout(()=>{console.log(" Auto-triggering path propagation after structural changes"),t().propagatePathToAll(),n=null},100)};return{nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,selectedNodeIds:[],copiedNodeIds:[],clipboard:{nodes:[],edges:[]},focusNodeId:null,pathDisplaysFolded:!1,combinationSectionsFolded:!1,history:[{nodes:[],edges:[]}],historyIndex:0,addNode:o=>{t().saveToHistory(),e(s=>{s.nodes.push(o)}),r()},updateNode:(o,s)=>e(i=>{const l=i.nodes.findIndex(a=>a.id===o);l!==-1&&(i.nodes[l].data={...i.nodes[l].data,...s})}),updateNodePosition:(o,s)=>e(i=>{const l=i.nodes.findIndex(a=>a.id===o);l!==-1&&(i.nodes[l].position=s)}),deleteNode:o=>{t().saveToHistory(),e(s=>{s.nodes=s.nodes.filter(l=>l.id!==o);const i=s.edges.filter(l=>l.source===o||l.target===o);s.edges=s.edges.filter(l=>l.source!==o&&l.target!==o),s.selectedNodeId===o&&(s.selectedNodeId=null),i.length>0&&console.log(`Cleaned up ${i.length} edges for deleted node ${o}`)}),r()},deleteNodes:o=>{t().saveToHistory(),e(s=>{s.nodes=s.nodes.filter(l=>!o.includes(l.id));const i=s.edges.filter(l=>o.includes(l.source)||o.includes(l.target));s.edges=s.edges.filter(l=>!o.includes(l.source)&&!o.includes(l.target)),o.includes(s.selectedNodeId||"")&&(s.selectedNodeId=null),s.selectedNodeIds=s.selectedNodeIds.filter(l=>!o.includes(l)),i.length>0&&console.log(`Cleaned up ${i.length} edges for ${o.length} deleted nodes`)}),r()},addEdge:o=>{t().saveToHistory(),e(s=>{s.edges.some(l=>l.source===o.source&&l.target===o.target&&l.sourceHandle===o.sourceHandle&&l.targetHandle===o.targetHandle)||(s.edges.push(o),console.log(`Added edge: ${o.source} -> ${o.target} (handle: ${o.sourceHandle})`))}),r()},deleteEdge:o=>{t().saveToHistory(),e(s=>{const i=s.edges.find(l=>l.id===o);if(i){console.log(` Deleting edge: ${i.source} -> ${i.target}`);const l=s.nodes.findIndex(a=>a.id===i.target);if(l!==-1){const a=s.nodes[l];s.nodes[l].data={...a.data,pathId:`disconnected from root-${a.id}`,pathIds:[`disconnected from root-${a.id}`]},console.log(` Marked target node ${i.target} as disconnected from root`)}}s.edges=s.edges.filter(l=>l.id!==o)}),r()},setNodes:o=>e(s=>{s.nodes=o}),setEdges:o=>e(s=>{s.edges=o}),setSelectedNodeId:o=>e(s=>{s.selectedNodeId=o,s.selectedEdgeId=null,o?s.selectedNodeIds=[o]:s.selectedNodeIds=[]}),setSelectedEdgeId:o=>e(s=>{s.selectedEdgeId=o,s.selectedNodeId=null}),setSelectedNodeIds:o=>e(s=>{s.selectedNodeIds=o}),addToSelection:o=>e(s=>{s.selectedNodeIds.includes(o)||s.selectedNodeIds.push(o)}),removeFromSelection:o=>e(s=>{s.selectedNodeIds=s.selectedNodeIds.filter(i=>i!==o)}),clearSelection:()=>e(o=>{o.selectedNodeId=null,o.selectedEdgeId=null,o.selectedNodeIds=[]}),markNodesAsCopied:o=>e(s=>{console.log(" markNodesAsCopied() called with:",o);const i=o.filter(a=>s.copiedNodeIds.includes(a)),l=o.filter(a=>!s.copiedNodeIds.includes(a));i.length>0&&console.log(" Some nodes already pulsing:",i),l.length>0?(console.log(" Setting copiedNodeIds to:",[...s.copiedNodeIds,...l]),s.copiedNodeIds=[...s.copiedNodeIds,...l],setTimeout(()=>{console.log(" Auto-clearing copiedNodeIds after 1 second for nodes:",l),e(a=>{a.copiedNodeIds=a.copiedNodeIds.filter(c=>!l.includes(c)),console.log(" copiedNodeIds after clearing:",a.copiedNodeIds)})},1e3)):console.log(" All nodes already pulsing, skipping")}),clearCopiedNodes:()=>e(o=>{o.copiedNodeIds=[]}),copySelectedNodes:()=>e(o=>{console.log(" copySelectedNodes() called - selectedNodeIds:",o.selectedNodeIds);const s=o.nodes.filter(l=>o.selectedNodeIds.includes(l.id)),i=o.edges.filter(l=>o.selectedNodeIds.includes(l.source)&&o.selectedNodeIds.includes(l.target));console.log(" copySelectedNodes() - filtered nodes:",s.length,"edges:",i.length),o.clipboard.nodes=s,o.clipboard.edges=i,console.log(` CLIPBOARD OVERWRITTEN by copySelectedNodes() - ${s.length} nodes and ${i.length} edges to clipboard.`)}),pasteNodes:o=>e(s=>{if(s.clipboard.nodes.length===0){console.log("Clipboard is empty, nothing to paste.");return}const i=[],l=[],a=new Map,c=s.clipboard.nodes,f=Math.min(...c.map(y=>y.position.x)),d=Math.max(...c.map(y=>y.position.x)),h=Math.min(...c.map(y=>y.position.y)),p=Math.max(...c.map(y=>y.position.y)),w=(f+d)/2,v=(h+p)/2,S=(o==null?void 0:o.x)||0,m=(o==null?void 0:o.y)||0,g=S-w,x=m-v;console.log(` Centering ${c.length} nodes at (${S}, ${m})`),console.log(` Clipboard bounds: (${f}, ${h}) to (${d}, ${p}), center: (${w}, ${v})`),console.log(` Applying offset: (${g}, ${x})`),s.clipboard.nodes.forEach(y=>{const _=`pasted-${y.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.set(y.id,_);const b={...y,id:_,position:{x:y.position.x+g,y:y.position.y+x},data:{...y.data,pathId:y.data.pathId?`${y.data.pathId}-copy`:void 0,topic:y.data.topic?`${y.data.topic}-copy`:y.data.topic,isRoot:!1}};i.push(b)}),s.clipboard.edges.forEach(y=>{const _=a.get(y.source),b=a.get(y.target);if(_&&b){const C=`pasted-${y.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,z={...y,id:C,source:_,target:b,sourceHandle:y.sourceHandle,targetHandle:y.targetHandle,animated:!0};l.push(z)}}),s.nodes.push(...i),s.edges.push(...l),console.log(`Pasted ${i.length} nodes and ${l.length} edges. Original selection preserved.`),r()}),focusOnNode:o=>{e({focusNodeId:o})},clearFocusNode:()=>{e({focusNodeId:null})},togglePathDisplays:()=>{e(o=>({pathDisplaysFolded:!o.pathDisplaysFolded}))},toggleCombinationSections:()=>{e(o=>({combinationSectionsFolded:!o.combinationSectionsFolded}))},toggleAllMeta:()=>{e(o=>{const s=!o.pathDisplaysFolded||!o.combinationSectionsFolded;return{pathDisplaysFolded:s,combinationSectionsFolded:s}})},canUndo:()=>t().historyIndex>0,canRedo:()=>{const o=t();return o.historyIndex<o.history.length-1},cleanupDuplicateEdges:()=>e(o=>{const s=[],i=new Set;o.edges.forEach(a=>{const c=`${a.source}-${a.target}-${a.sourceHandle||""}-${a.targetHandle||""}`;i.has(c)||(i.add(c),s.push(a))});const l=o.edges.length-s.length;o.edges=s,l>0&&console.log(`Removed ${l} duplicate edges`)}),recalculateFlowIds:(o,s)=>e(i=>{var v;const l=At.getInstance(),a=i.nodes.find(S=>S.id===o);if(!a||!((v=a.data)!=null&&v.isRoot)){console.log(`Root node ${o} not found or is not a root node`);return}const c=i.nodes.findIndex(S=>S.id===o);c!==-1&&(i.nodes[c]={...i.nodes[c],data:{...i.nodes[c].data,topic:s}});const f=new Set,d=[o];for(f.add(o);d.length>0;){const S=d.shift();i.edges.filter(g=>g.source===S).forEach(g=>{f.has(g.target)||(f.add(g.target),d.push(g.target))})}const h=i.nodes.filter(S=>f.has(S.id)),p=i.edges.filter(S=>f.has(S.source)&&f.has(S.target));console.log(`Recalculating ${h.length} nodes for root "${o}" with topic "${s}"`);const w=l.recalculatePathIds(h,p,s);w.nodes.forEach(S=>{const m=i.nodes.findIndex(g=>g.id===S.id);m!==-1&&(i.nodes[m]=S)}),console.log(`Recalculated path IDs for topic: ${s} (${w.nodes.length} nodes updated)`)}),propagateTopicOnConnection:(o,s)=>e(i=>{var h,p;const l=i.nodes.find(w=>w.id===o),a=i.nodes.find(w=>w.id===s);if(!l||!a)return;if((h=a.data)!=null&&h.isRoot){console.log(`Target node ${s} is a root node - preserving its dedicated topic "${a.data.topic}"`);return}const c=(w,v=new Set)=>{var g,x,y;if(v.has(w))return null;v.add(w);const S=i.nodes.find(_=>_.id===w);if(!S)return null;if((g=S.data)!=null&&g.topic&&((x=S.data)!=null&&x.isRoot)||(y=S.data)!=null&&y.topic)return S.data.topic;const m=i.edges.find(_=>_.target===w);return m?c(m.source,v):null},f=c(o),d=c(s);if(d&&f&&d!==f){console.log(`Cross-topic connection: ${f} -> ${d} (preserving target topic)`);return}if(f&&(!((p=a.data)!=null&&p.topic)||a.data.topic!==f)){const w=i.nodes.findIndex(v=>v.id===s);w!==-1&&(i.nodes[w].data={...i.nodes[w].data,topic:f},console.log(`Propagated topic "${f}" to node ${s}`))}}),propagatePathIdOnConnection:(o,s,i)=>e(l=>{var w,v,S,m,g,x,y,_,b,C,z,A;const a=l.nodes.find(E=>E.id===o),c=l.nodes.find(E=>E.id===s);if(!a||!c)return;const f=At.getInstance();let d=[];if(((w=a.data)==null?void 0:w.answerType)==="multiple"&&(i!=null&&i.startsWith("variant-"))){const E=(v=a.data)==null?void 0:v.pathId;if(E&&!E.startsWith("disconnected from root-")){const D=`V${parseInt(i.replace("variant-",""))+1}`,O=`${E}-${D}`;d=[O],console.log(`Generated variant path for Multiple answer: ${O} from base ${E}`)}else{console.log(`Source node ${o} has invalid base path for Multiple variant connection`);return}}else if(((S=a.data)==null?void 0:S.answerType)==="combinations"&&(i!=null&&i.startsWith("combination-"))){const E=(m=a.data)==null?void 0:m.pathId;if(console.log(` Combination path propagation - Base path: ${E}, Source handle: ${i}`),E&&!E.startsWith("disconnected from root-")){const R=i.replace("combination-","");console.log(` Extracted combination ID: ${R}`);const D=((g=a.data)==null?void 0:g.combinations)||[];console.log(" Available combinations:",D.map(N=>({id:N.id,variantIndices:N.variantIndices})));const O=D.find(N=>N.id===R);if(console.log(" Found combination:",O),O&&O.variantIndices){const N=O.variantIndices.map(j=>`V${j}`).join("+"),M=`${E}-${N}`;d=[M],console.log(` Generated combination path for Combinations answer: ${M} from base ${E}`)}else{console.log(` Could not find combination data for ${R} or missing variantIndices`),console.log(" Combination found:",O);return}}else{console.log(` Source node ${o} has invalid base path for Combinations connection: ${E}`);return}}else d=((x=a.data)==null?void 0:x.pathIds)||[(y=a.data)==null?void 0:y.pathId].filter(Boolean);if(d.length===0){console.log(`Source node ${o} has no valid path IDs for propagation`);return}const h=[];d.forEach(E=>{let R;if(c.type==="question"){const D=f.getQuestionNumberForNode(s,E,l.nodes);R=`${E}-Q${D}`}else if(c.type==="answer"){const D=f.getAnswerNumberForNode(s,E,l.nodes);R=`${E}-A${D}`}else if(c.type==="outcome"){const D=f.getOutcomeNumberForNode(s,E,l.nodes);R=`${E}-E${D}`}else R=`${E}-NODE`;h.push(R)});const p=l.nodes.findIndex(E=>E.id===s);if(p!==-1){const R=[...((_=l.nodes[p].data)==null?void 0:_.pathIds)||[(b=l.nodes[p].data)==null?void 0:b.pathId].filter(Boolean)];h.forEach(N=>{R.includes(N)||R.push(N)}),l.nodes[p].data={...l.nodes[p].data,pathId:R[0]||((C=l.nodes[p].data)==null?void 0:C.pathId),pathIds:R},console.log(`Updated ${c.type} node ${s} with ${h.length} new path IDs via handle "${i}". Total paths: ${R.length}`),console.log(`All path IDs for node ${s}:`,R);const D=(z=a.data)==null?void 0:z.topic,O=(A=c.data)==null?void 0:A.topic;D&&O&&D!==O&&console.log(`Cross-topic connection detected: ${D} -> ${O} for node ${s}`)}}),createLinkedQuestion:(o,s)=>e(i=>{var _,b,C,z,A,E,R;const l=i.nodes.find(D=>D.id===o);if(!l)return;const a=At.getInstance(),c=a.getNextQuestionNumber(((_=l.data)==null?void 0:_.pathId)||null),f=((b=l.data)==null?void 0:b.topic)||"NEW-TOPIC",d=(C=l.data)!=null&&C.pathId?{nodeId:l.id,pathId:l.data.pathId,parentPathId:null,level:((z=l.data)==null?void 0:z.questionLevel)||1,topic:f}:null,h=a.generateQuestionPathId(d,c,f),p=`q-${Date.now()}`,w={id:p,type:"question",position:s,data:{pathId:h,topic:f,questionText:"New Question",questionLevel:(((A=l.data)==null?void 0:A.questionLevel)||1)+1,elementId:"NEW",subElementId:"NEW"}},v=a.getNextAnswerNumber(h),S={nodeId:p,pathId:h,parentPathId:((E=l.data)==null?void 0:E.pathId)||null,level:(((R=l.data)==null?void 0:R.questionLevel)||1)+1,topic:f},m=a.generateAnswerPathId(S,v),g=`a-${Date.now()}`,x={id:g,type:"answer",position:{x:s.x,y:s.y+120},data:{pathId:m,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},y={id:a.generateEdgeId(p,g),source:p,target:g,animated:!0};i.nodes.push(w,x),i.edges.push(y),r()}),importFromExcel:o=>e(s=>{s.nodes=o.nodes,s.edges=o.edges,r()}),additiveImport:(o,s)=>e(i=>{i.nodes.push(...o),i.edges.push(...s),r()}),exportToFormat:o=>{const{nodes:s,edges:i}=t();return o==="json"?{nodes:s,edges:i}:null},validateTopicUniqueness:(o,s)=>t().nodes.filter(l=>{var a;return((a=l.data)==null?void 0:a.topic)===o&&l.id!==s}).length===0,generateUniqueTopicName:(o,s)=>{let i=o||"New Topic",l=1;for(;!t().validateTopicUniqueness(i,s);)i=`${o} ${l++}`;return i},clearFlow:()=>e(o=>{o.nodes=[],o.edges=[],o.selectedNodeId=null,o.focusNodeId=null,o.history=[{nodes:[],edges:[]}],o.historyIndex=0,At.getInstance().reset()}),saveToHistory:()=>e(o=>{const s={nodes:JSON.parse(JSON.stringify(o.nodes)),edges:JSON.parse(JSON.stringify(o.edges))};o.history=o.history.slice(0,o.historyIndex+1),o.history.push(s),o.historyIndex=o.history.length-1,o.history.length>50&&(o.history.shift(),o.historyIndex=o.history.length-1)}),undo:()=>e(o=>{if(o.historyIndex>0){o.historyIndex--;const s=o.history[o.historyIndex];o.nodes=JSON.parse(JSON.stringify(s.nodes)),o.edges=JSON.parse(JSON.stringify(s.edges)),console.log("Undo: Restored state from history index",o.historyIndex),r()}}),redo:()=>e(o=>{if(o.historyIndex<o.history.length-1){o.historyIndex++;const s=o.history[o.historyIndex];o.nodes=JSON.parse(JSON.stringify(s.nodes)),o.edges=JSON.parse(JSON.stringify(s.edges)),console.log("Redo: Restored state from history index",o.historyIndex),r()}}),propagatePathToAll:()=>{n&&(clearTimeout(n),n=null),t().saveToHistory(),e(o=>{const s=o.nodes.filter(l=>{var a,c;return((a=l.data)==null?void 0:a.isRoot)&&((c=l.data)==null?void 0:c.topic)});if(s.length===0){console.log("No root nodes with topics found");return}console.log(`Found ${s.length} root nodes with topics`);const i=At.getInstance();if(i.reset(),s.length===1){const l=s[0].data.topic;console.log(`Recalculating path IDs for single topic "${l}"`);const a=i.recalculatePathIds(o.nodes,o.edges,l);o.nodes=a.nodes,console.log(`Recalculated path IDs for topic "${l}"`)}else{console.log("Multiple root nodes detected - processing all nodes together to preserve individual topics and handle cross-connections");const l=i.recalculatePathIds(o.nodes,o.edges,"MULTI-ROOT");o.nodes=l.nodes,console.log(`Processed ${s.length} roots with cross-connection support`),console.log(`Processed ${s.length} roots with individual topic preservation`)}console.log("Path ID propagation completed - all nodes now have updated path IDs")})}}})),y0=["shift","alt","meta","mod","ctrl","control"],Gb={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Kn(e){return(Gb[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function x0(e){return y0.includes(e)}function ja(e,t=","){return e.toLowerCase().split(t)}function Ia(e,t="+",n=">",r=!1,o){let s=[],i=!1;e.includes(n)?(i=!0,s=e.toLocaleLowerCase().split(n).map(c=>Kn(c))):s=e.toLocaleLowerCase().split(t).map(c=>Kn(c));const l={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:r},a=s.filter(c=>!y0.includes(c));return{...l,keys:a,description:o,isSequence:i}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&v0([Kn(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&w0([Kn(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{xn.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{xn.clear()},0)}));const xn=new Set;function sd(e){return Array.isArray(e)}function Zb(e,t=","){return(sd(e)?e:e.split(t)).every(n=>xn.has(n.trim().toLowerCase()))}function v0(e){const t=Array.isArray(e)?e:[e];xn.has("meta")&&xn.forEach(n=>!x0(n)&&xn.delete(n.toLowerCase())),t.forEach(n=>xn.add(n.toLowerCase()))}function w0(e){const t=Array.isArray(e)?e:[e];e==="meta"?xn.clear():t.forEach(n=>xn.delete(n.toLowerCase()))}function Jb(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function eE(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function tE(e){return N0(e,["input","textarea","select"])}function N0(e,t=!1){const{target:n,composed:r}=e;let o;return nE(n)&&r?o=e.composedPath()[0]&&e.composedPath()[0].tagName:o=n&&n.tagName,sd(t)?!!(o&&t&&t.some(s=>s.toLowerCase()===o.toLowerCase())):!!(o&&t&&t)}function nE(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function rE(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(n=>t.includes(n))||e.includes("*"):!0}const oE=(e,t,n=!1)=>{const{alt:r,meta:o,mod:s,shift:i,ctrl:l,keys:a,useKey:c}=t,{code:f,key:d,ctrlKey:h,metaKey:p,shiftKey:w,altKey:v}=e,S=Kn(f);if(c&&(a==null?void 0:a.length)===1&&a.includes(d))return!0;if(!(a!=null&&a.includes(S))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(S))return!1;if(!n){if(r!==v&&S!=="alt"||i!==w&&S!=="shift")return!1;if(s){if(!p&&!h)return!1}else if(o!==p&&S!=="meta"&&S!=="os"||l!==h&&S!=="ctrl"&&S!=="control")return!1}return a&&a.length===1&&a.includes(S)?!0:a?Zb(a):!a},sE=I.createContext(void 0),iE=()=>I.useContext(sE);function S0(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((n,r)=>n&&S0(e[r],t[r]),!0):e===t}const lE=I.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),aE=()=>I.useContext(lE);function cE(e){const t=I.useRef(void 0);return S0(t.current,e)||(t.current=e),t.current}const hp=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},uE=typeof window<"u"?I.useLayoutEffect:I.useEffect;function sr(e,t,n,r){const o=I.useRef(null),s=I.useRef(!1),i=n instanceof Array?r instanceof Array?void 0:r:n,l=sd(e)?e.join(i==null?void 0:i.delimiter):e,a=n instanceof Array?n:r instanceof Array?r:void 0,c=I.useCallback(t,a??[]),f=I.useRef(c);a?f.current=c:f.current=t;const d=cE(i),{activeScopes:h}=aE(),p=iE();return uE(()=>{if((d==null?void 0:d.enabled)===!1||!rE(h,d==null?void 0:d.scopes))return;let w=[],v;const S=(y,_=!1)=>{var b;if(!(tE(y)&&!N0(y,d==null?void 0:d.enableOnFormTags))){if(o.current!==null){const C=o.current.getRootNode();if((C instanceof Document||C instanceof ShadowRoot)&&C.activeElement!==o.current&&!o.current.contains(C.activeElement)){hp(y);return}}(b=y.target)!=null&&b.isContentEditable&&!(d!=null&&d.enableOnContentEditable)||ja(l,d==null?void 0:d.delimiter).forEach(C=>{var z,A,E,R;if(C.includes((d==null?void 0:d.splitKey)??"+")&&C.includes((d==null?void 0:d.sequenceSplitKey)??">")){console.warn(`Hotkey ${C} contains both ${(d==null?void 0:d.splitKey)??"+"} and ${(d==null?void 0:d.sequenceSplitKey)??">"} which is not supported.`);return}const D=Ia(C,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description);if(D.isSequence){v=setTimeout(()=>{w=[]},(d==null?void 0:d.sequenceTimeoutMs)??1e3);const O=D.useKey?y.key:Kn(y.code);if(x0(O.toLowerCase()))return;w.push(O);const N=(z=D.keys)==null?void 0:z[w.length-1];if(O!==N){w=[],v&&clearTimeout(v);return}w.length===((A=D.keys)==null?void 0:A.length)&&(f.current(y,D),v&&clearTimeout(v),w=[])}else if(oE(y,D,d==null?void 0:d.ignoreModifiers)||(E=D.keys)!=null&&E.includes("*")){if((R=d==null?void 0:d.ignoreEventWhen)!=null&&R.call(d,y)||_&&s.current)return;if(Jb(y,D,d==null?void 0:d.preventDefault),!eE(y,D,d==null?void 0:d.enabled)){hp(y);return}f.current(y,D),_||(s.current=!0)}})}},m=y=>{y.code!==void 0&&(v0(Kn(y.code)),((d==null?void 0:d.keydown)===void 0&&(d==null?void 0:d.keyup)!==!0||d!=null&&d.keydown)&&S(y))},g=y=>{y.code!==void 0&&(w0(Kn(y.code)),s.current=!1,d!=null&&d.keyup&&S(y,!0))},x=o.current||(i==null?void 0:i.document)||document;return x.addEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),x.addEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),p&&ja(l,d==null?void 0:d.delimiter).forEach(y=>p.addHotkey(Ia(y,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),()=>{x.removeEventListener("keyup",g,i==null?void 0:i.eventListenerOptions),x.removeEventListener("keydown",m,i==null?void 0:i.eventListenerOptions),p&&ja(l,d==null?void 0:d.delimiter).forEach(y=>p.removeHotkey(Ia(y,d==null?void 0:d.splitKey,d==null?void 0:d.sequenceSplitKey,d==null?void 0:d.useKey,d==null?void 0:d.description))),w=[],v&&clearTimeout(v)}},[l,d,h]),o}function dE(){const e=Rs();sr("tab",t=>{t.preventDefault();const{selectedNodeId:n,nodes:r,createLinkedQuestion:o}=ke.getState();if(n){const s=r.find(i=>i.id===n);if(s){const i={x:s.position.x+300,y:s.position.y};o(n,i)}}},{enableOnFormTags:!1}),sr("delete, backspace",()=>{const{selectedEdgeId:t,selectedNodeIds:n,selectedNodeId:r,deleteNode:o,deleteNodes:s,deleteEdge:i}=ke.getState();t?i(t):n.length>0?s(n):r&&o(r)},{enableOnFormTags:!1}),sr("ctrl+c, cmd+c",t=>{t.preventDefault();const{selectedNodeIds:n,copySelectedNodes:r}=ke.getState();console.log("Copy shortcut pressed, selectedNodeIds:",n),n.length>0?(r(),console.log(` Copied ${n.length} node(s) to clipboard`)):console.log(" No nodes selected for copying")},{enableOnFormTags:!1}),sr("ctrl+v, cmd+v",t=>{t.preventDefault();const{clipboard:n,pasteNodes:r}=ke.getState();if(console.log("Paste shortcut pressed"),console.log(" Clipboard contents:",n),console.log(" Clipboard nodes count:",n.nodes.length),console.log(" Clipboard edges count:",n.edges.length),n.nodes.length>0){const o=e.getViewport(),s=(-o.x+window.innerWidth/2)/o.zoom,i=(-o.y+window.innerHeight/2)/o.zoom;console.log(` Pasting at viewport center: (${s}, ${i})`),r({x:s,y:i}),console.log(` Pasted ${n.nodes.length} node(s) from clipboard at viewport center`)}else console.log(" Clipboard is empty - nothing to paste"),console.log(" Full clipboard object:",JSON.stringify(n,null,2))},{enableOnFormTags:!1}),sr("ctrl+z, cmd+z",t=>{t.preventDefault();const{undo:n}=ke.getState();n()},{enableOnFormTags:!1}),sr("ctrl+y, cmd+shift+z",t=>{t.preventDefault();const{redo:n}=ke.getState();n()},{enableOnFormTags:!1}),sr("escape",()=>{const{setSelectedNodeId:t,setSelectedEdgeId:n,clearSelection:r}=ke.getState();t(null),n(null),r()},{enableOnFormTags:!1})}/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),b0=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},a)=>I.createElement("svg",{ref:a,...pE,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:b0("lucide",o),...l},[...i.map(([c,f])=>I.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(e,t)=>{const n=I.forwardRef(({className:r,...o},s)=>I.createElement(hE,{ref:s,iconNode:t,className:b0(`lucide-${fE(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=Te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Te("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Te("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Te("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Te("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Te("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=Te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function CE({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,recalculateFlowIds:s,propagateTopicOnConnection:i,propagatePathIdOnConnection:l,focusOnNode:a,edges:c,pathDisplaysFolded:f,nodes:d}=ke(),[h,p]=I.useState(null),[w,v]=I.useState(null),S=h!==null?h:f,m=R=>R.trim()?d.filter(O=>{var N;return((N=O.data)==null?void 0:N.isRoot)&&O.id!==e&&O.data.topic===R.trim()}).length===0:!1,g=R=>{const D=[],O=d.filter(M=>{var j;return((j=M.data)==null?void 0:j.isRoot)&&M.id!==e}).map(M=>M.data.topic).filter(M=>M);for(let M=1;M<=5;M++){const j=`${R}-${M}`;O.includes(j)||D.push(j)}return["NEW","ALT","BRANCH","FLOW","PATH"].forEach(M=>{const j=`${M}-${R}`;!O.includes(j)&&D.length<8&&D.push(j)}),D.slice(0,5)},x=()=>{r(e)},y=R=>{const D=R.target;if(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.closest("input")||D.closest("textarea"))return;const O=c.find(N=>N.source===e);O&&a(O.target)},_=R=>{o(e,{questionText:R.target.value})},b=R=>{const D=R.target.value;if(v(null),o(e,{topic:D}),t.isRoot&&D.trim()&&!m(D)){v(`Topic "${D}" already exists. Please choose a different name.`);return}t.isRoot&&D.trim()&&s(e,D)},C=R=>{if(!R.target.value.trim()&&t.isRoot){const O=d.filter(j=>{var F;return((F=j.data)==null?void 0:F.isRoot)&&j.id!==e}).map(j=>j.data.topic).filter(j=>j);let N=1,M=`TOPIC-${N}`;for(;O.includes(M);)N++,M=`TOPIC-${N}`;o(e,{topic:M}),s(e,M),v(null)}},z=R=>{o(e,{topic:R}),v(null),t.isRoot&&s(e,R)},A=R=>{R.stopPropagation()},E=()=>{if(t.isRoot&&w){console.log("Cannot create connection: Topic validation failed. Please fix the topic first.");return}const{nodes:R,addNode:D,addEdge:O,edges:N}=ke.getState();if(N.find(P=>P.source===e)){console.log("This question already has a connection. Only one outgoing connection is allowed.");return}const j=R.find(P=>P.id===e);if(!j)return;const F=`answer-${Date.now()}`,T={id:F,type:"answer",position:{x:j.position.x+150,y:j.position.y+150},data:{pathId:"path-id-will-be-generated",pathIds:[],answerType:"single",topic:t.topic,variants:[{id:`var-${Date.now()}`,text:"Answer option",score:0}]}};D(T);const k={id:`edge-${e}-${F}`,source:e,target:F,sourceHandle:null,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};O(k),i(e,F),l(e,F)};return u.jsxs("div",{className:`
        bg-white rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-blue-500 shadow-xl ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:x,onDoubleClick:y,children:[!t.isRoot&&u.jsx(Yt,{type:"target",position:ie.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:t.isRoot?"Root Question":"Question"})]}),u.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Level ",t.questionLevel]})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),S?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}),!S&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((R,D)=>u.jsx("div",{className:"text-xs pl-2",children:R},D))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathIds[0]}),S?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:R=>{R.stopPropagation(),p(!S)},children:[u.jsx("div",{className:"truncate",children:S?"Path: ...":t.pathId}),S?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]})}),t.isRoot&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Topic"}),u.jsxs("div",{onClick:A,onMouseDown:A,children:[u.jsx("input",{type:"text",value:t.topic||"",onChange:b,onBlur:C,className:`w-full p-2 border rounded text-sm font-semibold focus:outline-none focus:ring-2 focus:border-transparent ${w?"border-red-300 focus:ring-red-500":"border-gray-200 focus:ring-blue-500"}`,placeholder:"Enter topic...",onFocus:A,onKeyDown:A}),w&&u.jsxs("div",{className:"mt-1 space-y-2",children:[u.jsx("p",{className:"text-xs text-red-600",children:w}),t.topic&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Suggestions:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:g(t.topic).map((R,D)=>u.jsx("button",{onClick:()=>z(R),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:R},D))})]})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Question"}),u.jsx("div",{onClick:A,onMouseDown:A,children:u.jsx("textarea",{value:t.questionText,onChange:_,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:3,placeholder:"Enter your question here...",onFocus:A,onKeyDown:A})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.elementId}),u.jsx("span",{className:"text-gray-400",children:"|"}),u.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t.subElementId})]})]}),u.jsx(Yt,{type:"source",position:ie.Bottom,className:"w-3 h-3 bg-green-500 border-2 border-white cursor-pointer hover:bg-green-600 transition-colors",style:{background:"#22c55e"},onClick:R=>{R.stopPropagation(),E()}})]})}const jE=({onClick:e,hasInfo:t,className:n=""})=>u.jsx("button",{onClick:e,className:`
        w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold
        transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-300
        ${t?"bg-blue-500 text-white shadow-sm hover:bg-blue-600":"bg-gray-300 text-gray-600 hover:bg-gray-400 hover:text-gray-700"}
        ${n}
      `,title:t?"Has additional info - click to edit":"Add additional info",type:"button",children:"i"}),IE=({isOpen:e,onClose:t,onSave:n,currentInfo:r,variantText:o})=>{const[s,i]=I.useState(r),[l,a]=I.useState(o);I.useEffect(()=>{i(r),a(o)},[r,o,e]);const c=()=>{n(l,s),t()},f=d=>{d.key==="Escape"?t():d.key==="Enter"&&(d.ctrlKey||d.metaKey)&&c()};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",onKeyDown:f,children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),u.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",title:"Close",children:u.jsx(id,{size:20,className:"text-gray-500"})})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Answer Variant:"}),u.jsx("textarea",{value:l,onChange:d=>a(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter answer variant text...",style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word"}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Additional Information:"}),u.jsx("textarea",{value:s,onChange:d=>i(d.target.value),className:"w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter additional information that will be stored with this answer variant...",autoFocus:!0})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"This information will be saved with the answer variant but won't be displayed as part of the answer text."})]}),u.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),u.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save"})]})]})}):null};function PE({id:e,data:t,selected:n}){var te,ce,pe;const{setSelectedNodeId:r,updateNode:o,nodes:s,edges:i,addNode:l,addEdge:a,propagateTopicOnConnection:c,focusOnNode:f,pathDisplaysFolded:d,combinationSectionsFolded:h}=ke(),[p,w]=I.useState(t.answerType||"single"),[v,S]=I.useState(null),[m,g]=I.useState(null),x=v!==null?v:d,y=m!==null?m:h,[_,b]=I.useState({isOpen:!1,variantId:null}),C=B=>{B.style.height="auto",B.style.height=B.scrollHeight+"px"};I.useEffect(()=>{w(t.answerType||"single")},[t.answerType]);const z=()=>{r(e)},A=B=>{if(p!=="single")return;const ee=B.target;if(ee.tagName==="INPUT"||ee.tagName==="TEXTAREA"||ee.closest("input")||ee.closest("textarea")||ee.closest("button"))return;const Z=i.find(J=>J.source===e&&J.sourceHandle==="default");Z&&f(Z.target)},E=(B,ee)=>{if(p!=="multiple")return;const Z=ee.target;if(Z.tagName==="INPUT"||Z.tagName==="TEXTAREA"||Z.closest("input")||Z.closest("textarea")||Z.closest("button"))return;const J=`variant-${B}`,ae=i.find(re=>re.source===e&&re.sourceHandle===J);ae&&f(ae.target)},R=(B,ee)=>{if(p!=="combinations")return;const Z=ee.target;if(Z.tagName==="INPUT"||Z.tagName==="TEXTAREA"||Z.closest("input")||Z.closest("textarea")||Z.closest("button"))return;const J=`combination-${B}`,ae=i.find(re=>re.source===e&&re.sourceHandle===J);ae&&f(ae.target)},D=B=>{const{edges:ee}=ke.getState();if(ee.find(U=>U.source===e&&U.sourceHandle===(B||"default"))){console.log("This answer variant already has a connection. Only one connection per variant is allowed.");return}const J=s.find(U=>U.id===e);if(!J)return;let ae=t.topic;if(!ae){const U=K=>{var ve;const ue=s.find(de=>de.id===K);if(!ue)return"Topic";if((ve=ue.data)!=null&&ve.topic)return ue.data.topic;const ge=ke.getState().edges.find(de=>de.target===K);return ge?U(ge.source):"Topic"};ae=U(e)}const re=`question-${Date.now()}`,W={id:re,type:"question",position:{x:B==="default"?J.position.x:J.position.x+200,y:J.position.y+200},data:{pathId:"path-id-will-be-generated",topic:ae,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(W);const $={id:`edge-${e}-${re}`,source:e,target:re,sourceHandle:B||"default",targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a($),c(e,re)},O=()=>{const B={id:`var-${Date.now()}`,text:"New Answer",score:0},Z=[...t.variants||[],B];if(p==="combinations"){const J=k(Z);o(e,{variants:Z,combinations:J}),console.log(` Regenerated ${J.length} combinations after adding variant`)}else o(e,{variants:Z})},N=(B,ee)=>{const J=(t.variants||[]).map(ae=>ae.id===B?{...ae,...ee}:ae);if(p==="combinations"&&ee.text!==void 0){const ae=k(J);o(e,{variants:J,combinations:ae}),console.log(` Regenerated ${ae.length} combinations after updating variant text`)}else o(e,{variants:J})},M=B=>{b({isOpen:!0,variantId:B})},j=()=>{b({isOpen:!1,variantId:null})},F=(B,ee)=>{_.variantId&&N(_.variantId,{text:B,additionalInfo:ee}),j()},T=B=>{const ee=t.variants||[];if(ee.length>1){const Z=ee.filter(J=>J.id!==B);if(p==="combinations"){const J=Z.length>=2?k(Z):[];o(e,{variants:Z,combinations:J}),console.log(` Regenerated ${J.length} combinations after removing variant`)}else o(e,{variants:Z})}},k=B=>{const ee=[],Z=B.length;for(let J=1;J<Math.pow(2,Z);J++){const ae=[],re=[];for(let $=0;$<Z;$++)J&1<<$&&(ae.push($+1),re.push(B[$].text||`Answer ${$+1}`));const W={id:`combo-${J}`,variantIndices:ae,pathId:`combination-${ae.join("-")}`,label:re.join(" + ")};console.log(" Generated combination:",{id:W.id,variantIndices:W.variantIndices,pathId:W.pathId,label:W.label}),ee.push(W)}return ee},P=()=>{if(p!=="combinations")return[];const B=t.variants||[];if(B.length<2)return[];const ee=k(B),Z=t.combinations||[],J=Math.pow(2,B.length)-1;return Z.length!==J||Z.length===0?(console.log(` Combinations out of sync (stored: ${Z.length}, expected: ${J}). Regenerating...`),o(e,{combinations:ee}),ee):Z},L=()=>P().filter(ee=>{const Z=`combination-${ee.id}`;return i.some(J=>J.source===e&&J.sourceHandle===Z)}),H=()=>P().filter(ee=>{const Z=`combination-${ee.id}`;return!i.some(J=>J.source===e&&J.sourceHandle===Z)}),q=B=>{if(console.log("Creating linked question for combination:",B),i.find($=>$.source===e&&$.sourceHandle===`combination-${B}`)){console.log("This combination already has a connection. Only one connection per combination is allowed.");return}const Z=s.find($=>$.id===e);if(!Z)return;let J=t.topic;if(!J){const $=U=>{var ge;const K=s.find(ve=>ve.id===U);if(!K)return"Topic";if((ge=K.data)!=null&&ge.topic)return K.data.topic;const ue=ke.getState().edges.find(ve=>ve.target===U);return ue?$(ue.source):"Topic"};J=$(e)}const ae=`question-${Date.now()}`,re={id:ae,type:"question",position:{x:Z.position.x+200,y:Z.position.y+200},data:{pathId:"path-id-will-be-generated",topic:J,isRoot:!1,questionText:"",questionLevel:2,elementId:"E01",subElementId:"SE01"}};l(re);const W={id:`edge-${e}-${ae}`,source:e,target:ae,sourceHandle:`combination-${B}`,targetHandle:null,animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};a(W),c(e,ae)},Q=B=>{w(B);const ee={answerType:B};if(B==="combinations"){const $=t.variants||[];if($.length>=2){const U=k($);ee.combinations=U,console.log(` Generated ${U.length} combinations when switching to combinations mode`)}}else ee.combinations=[];o(e,ee);const{edges:Z,deleteEdge:J,nodes:ae,updateNode:re}=ke.getState(),W=Z.filter($=>$.source===e);console.log(`Switching to ${B} mode: removing ${W.length} outgoing edges and cleaning up pathIDs`),W.forEach($=>{var K,ue;const U=ae.find(ge=>ge.id===$.target);if(U){const ge=((K=U.data)==null?void 0:K.pathIds)||[(ue=U.data)==null?void 0:ue.pathId].filter(Boolean),ve=t.pathId;if(ve){const de=ge.filter(xe=>!xe.startsWith(ve));re($.target,{pathId:de.length>0?de[0]:void 0,pathIds:de.length>0?de:[]}),console.log(`Cleaned pathIDs for target node ${$.target}: removed paths starting with ${ve}`)}}}),W.forEach($=>J($.id))},Y=B=>{B.stopPropagation()},G=t.variants||[];return u.jsxs("div",{className:`
        bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow-lg border-2 p-4 w-[350px]
        ${n?"border-purple-500 shadow-xl ring-2 ring-purple-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-100":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer relative
      `,onClick:z,onDoubleClick:A,children:[u.jsx(Yt,{type:"target",position:ie.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),t.answerLevel&&u.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:["Level ",t.answerLevel]}),u.jsxs("div",{className:"flex items-center space-x-2 text-xs",onClick:Y,onMouseDown:Y,children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"single",checked:p==="single",onChange:B=>Q(B.target.value),className:"mr-1"}),"Single"]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"multiple",checked:p==="multiple",onChange:B=>Q(B.target.value),className:"mr-1"}),"Multiple"]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"radio",value:"combinations",checked:p==="combinations",onChange:B=>Q(B.target.value),className:"mr-1"}),"Combinations"]})]})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:B=>{B.stopPropagation(),S(!x)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),x?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}),!x&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((B,ee)=>u.jsx("div",{className:"text-xs pl-2",children:B},ee))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:B=>{B.stopPropagation(),S(!x)},children:[u.jsx("div",{className:"truncate",children:x?"Path: ...":t.pathIds[0]}),x?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:B=>{B.stopPropagation(),S(!x)},children:[u.jsx("div",{className:"truncate",children:x?"Path: ...":t.pathId||"No path"}),x?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]})}),u.jsx("div",{className:`text-xs rounded px-2 py-1 text-center font-medium ${p==="single"?"bg-blue-50 text-blue-600":p==="multiple"?"bg-green-50 text-green-600":"bg-yellow-50 text-yellow-600"}`,children:p==="single"?" Single path (bottom)":p==="multiple"?" Multiple paths (variants)":" Combinations (variants)"}),u.jsx("div",{className:"space-y-2",children:G.map((B,ee)=>{var ae;const Z=`variant-${ee}`,J=(ae=t.orphanedVariants)==null?void 0:ae.includes(Z);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`bg-white rounded-lg p-3 shadow-sm border ${p==="multiple"?"border-green-200 hover:border-green-300":"border-gray-100"} ${J?"ring-1 ring-orange-400 border-orange-300":""} transition-colors`,onClick:Y,onMouseDown:Y,onDoubleClick:re=>E(ee,re),children:[u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(jE,{onClick:()=>M(B.id),hasInfo:!!B.additionalInfo,className:"mt-1 flex-shrink-0"}),u.jsx("textarea",{value:B.text,onChange:re=>{N(B.id,{text:re.target.value}),C(re.target)},onInput:re=>C(re.target),className:"flex-1 text-sm bg-transparent focus:outline-none resize-none min-h-[24px] leading-relaxed",placeholder:"Answer text...",rows:1,style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word"},onFocus:Y,onKeyDown:Y}),u.jsx("input",{type:"number",value:B.score,onChange:re=>N(B.id,{score:Number(re.target.value)}),className:"w-12 text-xs text-center bg-gray-50 rounded px-1 py-1 focus:outline-none focus:bg-white border border-gray-200 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield] flex-shrink-0",placeholder:"0",title:"Score",min:"-999",max:"999",onFocus:Y,onKeyDown:Y,onWheel:re=>{re.currentTarget.blur(),re.stopPropagation()},onClick:Y,onMouseDown:Y}),G.length>1&&u.jsx("button",{onClick:re=>{re.stopPropagation(),T(B.id)},className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors flex-shrink-0",children:u.jsx(id,{size:12})})]}),B.additionalInfo&&u.jsxs("div",{className:"mt-2 text-xs text-gray-500 italic truncate bg-blue-50 px-2 py-1 rounded",children:["Info: ",B.additionalInfo]})]}),p==="multiple"&&u.jsx(Yt,{type:"source",position:ie.Right,id:`variant-${ee}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:J?"#fb923c":"#22c55e",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:re=>{re.stopPropagation(),D(`variant-${ee}`)}})]},B.id)})}),p==="combinations"&&G.length>1&&u.jsx("div",{className:"space-y-3 border-t pt-3",children:u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-yellow-100 px-2 py-1 rounded",onClick:B=>{B.stopPropagation(),g(!y)},children:[u.jsx("div",{className:"text-xs text-yellow-700",children:"All combinations are active. Connect them to questions:"}),y?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}),!y&&u.jsx("div",{className:"space-y-2",children:P().map(B=>{const ee=H().some(J=>J.id===B.id),Z=L().some(J=>J.id===B.id);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`flex items-center space-x-2 bg-white rounded-lg p-2 shadow-sm border transition-colors ${Z?"border-green-300 bg-green-50":ee?"border-orange-300 bg-orange-50":"border-gray-200"}`,onClick:Y,onMouseDown:Y,onDoubleClick:J=>R(B.id,J),children:[u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.label})}),u.jsxs("div",{className:"flex items-center space-x-1",children:[Z&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Connected"}),ee&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"Orphaned"})]}),u.jsx("div",{className:"flex space-x-1",children:B.variantIndices.map(J=>u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:J},J))})]}),u.jsx(Yt,{type:"source",position:ie.Right,id:`combination-${B.id}`,style:{top:"50%",right:"-5px",transform:"translateY(-50%)",background:ee?"#fb923c":"#f59e0b",width:"10px",height:"10px",zIndex:10,cursor:"pointer"},className:"border-2 border-white hover:scale-125 transition-transform",onClick:J=>{J.stopPropagation(),q(B.id)}})]},B.id)})})]})}),u.jsxs("button",{onClick:B=>{B.stopPropagation(),O()},className:"w-full flex items-center justify-center space-x-2 p-2 border-2 border-dashed border-purple-300 rounded-lg text-sm text-purple-600 hover:border-purple-500 hover:bg-purple-50 transition-colors font-medium",children:[u.jsx(SE,{size:14}),u.jsx("span",{children:"Add Answer"})]})]}),p==="single"&&u.jsx(Yt,{type:"source",position:ie.Bottom,id:"default",className:"w-3 h-3 border-2 border-white cursor-pointer hover:scale-125 transition-transform",style:{background:(te=t.orphanedVariants)!=null&&te.includes("default")?"#fb923c":"#22c55e"},onClick:B=>{B.stopPropagation(),D("default")}}),_.isOpen&&_.variantId&&u.jsx(IE,{isOpen:_.isOpen,onClose:j,onSave:F,currentInfo:((ce=G.find(B=>B.id===_.variantId))==null?void 0:ce.additionalInfo)||"",variantText:((pe=G.find(B=>B.id===_.variantId))==null?void 0:pe.text)||""})]})}function TE({id:e,data:t,selected:n}){const{setSelectedNodeId:r,updateNode:o,pathDisplaysFolded:s}=ke(),[i,l]=I.useState(null),a=i!==null?i:s,c=()=>{r(e)},f=h=>{o(e,{recommendation:h.target.value})},d=h=>{h.stopPropagation()};return u.jsxs("div",{className:`
        bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg shadow-lg border-2 p-4 min-w-[280px] max-w-[350px]
        ${n?"border-green-500 shadow-xl ring-2 ring-green-200":"border-gray-200 hover:border-gray-300"}
        ${t.isOrphaned?"ring-2 ring-orange-400 border-orange-300":""}
        ${t.isParent||t.isChild||t.isSelected?"ring-2 ring-green-400 border-green-300":""}
        ${t.isMultiSelected?"ring-2 ring-purple-400 border-purple-300 bg-purple-50":""}
        transition-all duration-200 hover:shadow-xl cursor-pointer
      `,onClick:c,children:[u.jsx(Yt,{type:"target",position:ie.Top,className:"w-3 h-3 bg-gray-400 border-2 border-white",style:{background:"#9ca3af"}}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-green-600",children:"Outcome"})]}),u.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Final"})]}),u.jsx("div",{className:"text-xs font-mono text-gray-500 bg-gray-50 px-2 py-1 rounded",children:t.pathIds&&t.pathIds.length>0?t.pathIds.length>1?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsxs("div",{className:"font-semibold text-gray-600",children:["Paths (",t.pathIds.length,"):"]}),a?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}),!a&&u.jsx("div",{className:"space-y-1",children:t.pathIds.map((h,p)=>u.jsx("div",{className:"text-xs pl-2",children:h},p))})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathIds[0]}),a?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]}):u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded",onClick:h=>{h.stopPropagation(),l(!a)},children:[u.jsx("div",{className:"truncate",children:a?"Path: ...":t.pathId}),a?u.jsx(on,{size:12}):u.jsx(Xt,{size:12})]})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Recommendation"}),u.jsx("div",{onClick:d,onMouseDown:d,children:u.jsx("textarea",{value:t.recommendation||"",onChange:f,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm bg-gray-50 hover:bg-white transition-colors",rows:4,placeholder:"Enter recommendation text...",onFocus:d,onKeyDown:d})})]}),u.jsx("div",{className:"text-xs rounded px-2 py-1 text-center font-medium bg-green-50 text-green-600 border border-green-200",children:" Final Outcome"})]})]})}const $E={question:CE,answer:PE,outcome:TE},ME={animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};function AE({shouldAutoOrganize:e=!1,onAutoOrganizeComplete:t}){const{nodes:n,edges:r,addEdge:o,updateNodePosition:s,deleteEdge:i,propagateTopicOnConnection:l,propagatePathIdOnConnection:a,selectedNodeId:c,selectedEdgeId:f,selectedNodeIds:d,setSelectedEdgeId:h,setSelectedNodeIds:p,clearSelection:w,setNodes:v,focusNodeId:S,clearFocusNode:m,copiedNodeIds:g}=ke(),x=I.useMemo(()=>(console.log(" Processing nodes for copied state:",{totalNodes:n.length,copiedNodeIds:g,copiedCount:g.length}),n.map(W=>(g.includes(W.id)&&console.log(` Node ${W.id} will get inline animation styles`),{...W}))),[n,g]),[y,_,b]=lb(x),[C,z,A]=ab(r),E=Rs(),{upstreamSiblings:R,downstreamSiblings:D}=I.useMemo(()=>{if(d.length===0)return{upstreamSiblings:new Set,downstreamSiblings:new Set};const W=new Set,$=new Set;return d.forEach(U=>{C.forEach(K=>{K.target===U&&!d.includes(K.source)&&W.add(K.source)}),C.forEach(K=>{K.source===U&&!d.includes(K.target)&&$.add(K.target)})}),{upstreamSiblings:W,downstreamSiblings:$}},[d,C]);V.useEffect(()=>{console.log(" Applying copied animation to DOM elements directly"),g.forEach($=>{const U=document.querySelector(`[data-id="${$}"]`);if(U){console.log(` Directly applying copied animation to DOM node ${$}`),U.classList.add("copied"),U.style.animation="copiedNodePulse 2s ease-in-out 1";const K=()=>{console.log(` Animation ended for node ${$}, cleaning up`),U.classList.remove("copied"),U.style.animation="",U.removeEventListener("animationend",K)};U.addEventListener("animationend",K)}else console.log(` Could not find DOM element for copied node ${$}`)}),document.querySelectorAll(".react-flow__node").forEach($=>{const U=$.getAttribute("data-id");if(U&&!g.includes(U)){const K=$;K.classList.contains("copied")&&(console.log(` Removing copied animation from DOM node ${U} (fallback cleanup)`),K.classList.remove("copied"),K.style.animation="")}}),_(x)},[x,g,_]);const[O,N]=I.useState(null),[M,j]=I.useState(!1),[F,T]=I.useState(!1),k=M&&!F,P=M&&F,L=k||P;I.useEffect(()=>{const W=K=>{K.key==="Shift"&&(j(!0),console.log(F?"Shift+D mode - entering delete selection mode":"Shift key pressed - entering copy selection mode")),(K.key==="d"||K.key==="D")&&(T(!0),M&&console.log("Shift+D mode - entering delete selection mode"))},$=K=>{if(K.key==="Shift"){console.log("Shift key released - exiting selection mode");const ue=ke.getState().selectedNodeIds;ue.length>0&&(console.log(` Shift released with ${ue.length} selected nodes - triggering pulse as fallback`),ke.getState().markNodesAsCopied(ue)),j(!1)}(K.key==="d"||K.key==="D")&&(console.log("D key released"),T(!1))},U=()=>{O!=null&&O.isSelecting&&(console.log("Global mouse up - ending selection"),B())};return window.addEventListener("keydown",W),window.addEventListener("keyup",$),window.addEventListener("mouseup",U),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",$),window.removeEventListener("mouseup",U)}},[O==null?void 0:O.isSelecting]);const H=V.useRef(!1),q=V.useRef(null);dE(),V.useEffect(()=>{if(S&&E){const W=y.find($=>$.id===S);W&&(E.fitView({nodes:[W],padding:.3,maxZoom:1.2,minZoom:.5,duration:800}),setTimeout(()=>{m()},100))}},[S,y,E,m]),V.useEffect(()=>{const{cleanupDuplicateEdges:W}=ke.getState();W()},[]),V.useEffect(()=>{_(W=>{if(H.current)return console.log("Bulk update detected - using store positions directly"),n;if(W.length===0)return n;const U=(()=>{const le=new Set,ye=new Set;return r.forEach(fe=>{le.add(fe.target),ye.add(fe.source)}),n.filter(fe=>{var he;if(fe.type==="question"&&((he=fe.data)!=null&&he.isRoot))return!ye.has(fe.id);if(fe.type==="outcome")return!le.has(fe.id);const me=le.has(fe.id),we=ye.has(fe.id);return!me||!we}).map(fe=>fe.id)})(),ue=(()=>{const le=new Map;return n.forEach(ye=>{var fe;if(ye.type==="answer"&&((fe=ye.data)!=null&&fe.variants)){const me=ye.data.variants,we=ye.data.answerType||"single",he=[];we==="multiple"&&me.forEach((oe,Ne)=>{const se=`variant-${Ne}`;r.some(Ce=>Ce.source===ye.id&&Ce.sourceHandle===se)||he.push(se)}),we==="single"&&(r.some(Ne=>Ne.source===ye.id&&Ne.sourceHandle==="default")||he.push("default")),he.length>0&&le.set(ye.id,he)}}),le})(),ge=le=>{if(!le)return{parents:[],children:[]};const ye=r.filter(me=>me.target===le).map(me=>me.source),fe=r.filter(me=>me.source===le).map(me=>me.target);return{parents:ye,children:fe}},{parents:ve,children:de}=ge(c),xe=new Map;return W.forEach(le=>{xe.set(le.id,le.position)}),n.map(le=>{const ye=xe.get(le.id),fe=W.find(me=>me.id===le.id);return{...le,position:ye||le.position,selected:(fe==null?void 0:fe.selected)||d.includes(le.id),data:{...le.data,isOrphaned:U.includes(le.id),isParent:ve.includes(le.id),isChild:de.includes(le.id),isSelected:c===le.id,isMultiSelected:d.includes(le.id),orphanedVariants:ue.get(le.id)||[]}}})})},[n,r,_,c,d]),V.useEffect(()=>{const W=r.map($=>{let U="#9ca3af",K={stroke:U,strokeWidth:2};return f===$.id?(U="#dc2626",K={stroke:U,strokeWidth:3,filter:"drop-shadow(0 0 16px #dc2626cc)",opacity:1}):c&&($.source===c||$.target===c)&&(U="#2563eb",K={stroke:U,strokeWidth:2,filter:"drop-shadow(0 0 16px #2563ebcc)",opacity:1}),{...$,style:{...$.style,...K}}});z(W)},[r,z,c,f]);const Q=I.useCallback(W=>{var ve;if(!W.source||!W.target)return;console.log("Creating edge:",W);const $=n.find(de=>de.id===W.source),U=n.find(de=>de.id===W.target);if(!$||!U){console.log("Source or target node not found");return}if($.type==="answer"&&U.type!=="question"&&U.type!=="outcome"){console.log("Answer nodes can only connect to Question nodes or Outcome nodes");return}if($.type==="question"&&U.type!=="answer"){console.log("Question nodes can only connect to Answer nodes");return}if($.type==="question"&&((ve=$.data)!=null&&ve.isRoot)&&n.filter(xe=>{var le;return((le=xe.data)==null?void 0:le.isRoot)&&xe.id!==$.id&&xe.data.topic===$.data.topic}).length>0){console.log(`Cannot create connection: Topic "${$.data.topic}" already exists on another root question. Please choose a different topic.`);return}if($.type==="answer"&&r.find(xe=>xe.source===W.source&&xe.sourceHandle===W.sourceHandle)){console.log("Answer variant already has a connection. Only one connection per variant is allowed.");return}if($.type==="question"&&r.find(xe=>xe.source===W.source)){console.log("Question node already has a connection. Only one outgoing connection is allowed.");return}if(((de,xe)=>{if(de===xe)return!0;const le=new Set,ye=[xe];for(;ye.length>0;){const fe=ye.pop();if(le.has(fe))continue;if(le.add(fe),fe===de)return!0;r.filter(we=>we.source===fe).forEach(we=>{le.has(we.target)||ye.push(we.target)})}return!1})(W.source,W.target)){console.log("Connection would create a loop, preventing connection");return}const ue=At.getInstance(),ge={...W,source:W.source,target:W.target,id:ue.generateEdgeId(W.source,W.target,W.sourceHandle||void 0),animated:!0,type:"smoothstep",style:{stroke:"#9ca3af",strokeWidth:2}};console.log("Generated edge:",ge),o(ge),l(W.source,W.target),a(W.source,W.target,W.sourceHandle||void 0)},[o,r,l,a,n]),Y=I.useCallback((W,$)=>{ke.getState().setSelectedNodeId($.id)},[]),G=I.useCallback((W,$)=>{h($.id)},[h]),te=I.useCallback(()=>{ke.getState().setSelectedNodeId(null),h(null),w()},[h,w]),ce=I.useCallback(W=>{if(L&&!W.target.closest("button, input, textarea, select, .react-flow__handle, .react-flow__controls, .react-flow__minimap")){console.log(`Starting selection box - ${P?"Shift+D delete mode":"Shift copy mode"}`),W.preventDefault(),W.stopPropagation();const K=W.currentTarget.getBoundingClientRect();N({start:{x:W.clientX-K.left,y:W.clientY-K.top},end:{x:W.clientX-K.left,y:W.clientY-K.top},isSelecting:!0})}},[M]),pe=I.useCallback(W=>{if(O!=null&&O.isSelecting){W.preventDefault(),W.stopPropagation();const $=W.currentTarget.getBoundingClientRect();N(U=>U?{...U,end:{x:W.clientX-$.left,y:W.clientY-$.top}}:null)}},[O==null?void 0:O.isSelecting]),B=I.useCallback(W=>{if(O&&E){W&&(W.preventDefault(),W.stopPropagation());const{x:$,y:U}=O.start,{x:K,y:ue}=O.end,ge=Math.min($,K),ve=Math.max($,K),de=Math.min(U,ue),xe=Math.max(U,ue);if(Math.abs(ve-ge)>5||Math.abs(xe-de)>5){const le=E.screenToFlowPosition({x:ge,y:de}),ye=E.screenToFlowPosition({x:ve,y:xe});console.log("Selection box coordinates:",{startFlow:le,endFlow:ye});const fe=y.filter(we=>{const he=we.position.x,oe=we.position.y,Ne=we.width||280,se=we.height||150,Se=he<ye.x&&he+Ne>le.x&&oe<ye.y&&oe+se>le.y;return Se&&console.log(`Node ${we.id} overlaps: pos(${he}, ${oe}) size(${Ne}, ${se})`),Se});console.log(`Selected ${fe.length} nodes:`,fe.map(we=>we.id));const me=fe.map(we=>we.id);if(ke.setState(we=>(we.selectedNodeIds=me,we)),console.log(` Updated selection: store=${me.length} nodes`),me.length>0)if(P)console.log(` Deleting ${me.length} nodes in Shift+D mode`),ke.getState().deleteNodes(me),console.log(` Successfully deleted ${me.length} nodes`);else{const we=fe,he=C.filter(oe=>me.includes(oe.source)&&me.includes(oe.target));ke.setState(oe=>(oe.clipboard.nodes=we,oe.clipboard.edges=he,console.log(" CLIPBOARD UPDATED - Nodes:",oe.clipboard.nodes.length,"Edges:",oe.clipboard.edges.length),oe)),console.log(` Auto-copied ${we.length} nodes and ${he.length} edges to clipboard`),console.log(` Triggering immediate pulse for ${me.length} selected nodes`),ke.getState().markNodesAsCopied(me),setTimeout(()=>{me.forEach(oe=>{const Ne=document.querySelector(`[data-id="${oe}"]`);Ne?(console.log(` DOM node ${oe} classes:`,Ne.className),console.log(` DOM node ${oe} inline style:`,Ne.style.animation),console.log(` DOM node ${oe} inline boxShadow:`,Ne.style.boxShadow),console.log(` DOM node ${oe} computed animation:`,window.getComputedStyle(Ne).animation)):console.log(` Could not find DOM element for node ${oe}`)})},100),setTimeout(()=>{const oe=ke.getState().clipboard;console.log(" CLIPBOARD CHECK (100ms later):",oe.nodes.length,"nodes,",oe.edges.length,"edges")},100)}p(me),me.length>0&&E.setNodes(we=>we.map(he=>({...he,selected:me.includes(he.id)})))}}N(null)},[O,E,y,C,P]),ee=I.useCallback(({nodes:W})=>{const $=W.map(ge=>ge.id);console.log("React Flow selection changed:",$);const U=ke.getState().selectedNodeIds,K=[...$].sort(),ue=[...U].sort();JSON.stringify(K)!==JSON.stringify(ue)&&ke.setState(ge=>(ge.selectedNodeIds=$,ge))},[]),Z=I.useCallback(W=>{if(b(W),H.current){console.log("Skipping position sync during bulk update");return}W.forEach($=>{$.type==="position"&&$.position&&s&&s($.id,$.position)})},[b,s]),J=I.useCallback(W=>{A(W),W.forEach($=>{$.type==="remove"&&$.id&&(console.log("Edge deleted:",$.id),i($.id))})},[A,i]);V.useEffect(()=>(E&&(window.reactFlowInstance=E),()=>{window.reactFlowInstance===E&&delete window.reactFlowInstance}),[E]),V.useEffect(()=>(window.flowCanvasSetBulkUpdate=()=>{console.log("Setting bulk update flag"),H.current=!0,q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{console.log("Resetting bulk update flag"),H.current=!1,q.current=null},500)},()=>{q.current&&clearTimeout(q.current),delete window.flowCanvasSetBulkUpdate}),[]),I.useEffect(()=>{if(e&&E&&n.length>0){console.log("Auto-organizing nodes...");const W=setTimeout(()=>{ae(),setTimeout(()=>{E.fitView({padding:.2,maxZoom:.8,minZoom:.1,duration:1e3}),t==null||t()},500)},1e3);return()=>clearTimeout(W)}},[e,E,n.length,t]);const ae=()=>{if(console.log(" Smart Auto-Organize: Starting advanced layout algorithm..."),n.length<2){console.log("Not enough nodes to organize");return}console.log(" Auto-organizing",n.length,"nodes with smart layout");const W=650,$=200,U=455,K=156,ue=150,ge=se=>{var Ce,je,Pe;let Se=100;if(se.type==="answer"&&((Ce=se.data)==null?void 0:Ce.answerType)==="combinations"){const Fe=((je=se.data)==null?void 0:je.combinations)||[],He=((Pe=se.data)==null?void 0:Pe.variants)||[];if(Fe.length>0){const Ke=He.length*50,at=100,un=Fe.length*70;Se=150+Ke+at+un}}return Se},ve=new Map,de=new Map,xe=new Map,le=new Map,ye=new Map;n.forEach(se=>{ve.set(se.id,[]),de.set(se.id,[]),xe.set(se.id,0),le.set(se.id,0),ye.set(se.id,new Set)}),r.forEach(se=>{var Fe,He;const Se=ve.get(se.source)||[];Se.push(se.target),ve.set(se.source,Se);const Ce=de.get(se.target)||[];Ce.push(se.source),de.set(se.target,Ce);const je=xe.get(se.target)||0;xe.set(se.target,je+1);const Pe=le.get(se.source)||0;le.set(se.source,Pe+1),(Fe=ye.get(se.source))==null||Fe.add(se.target),(He=ye.get(se.target))==null||He.add(se.source)});const fe=[],me=new Set,we=se=>{const Se=[],Ce=[se],je=new Set;for(;Ce.length>0;){const Pe=Ce.pop();if(je.has(Pe.id))continue;je.add(Pe.id),me.add(Pe.id),Se.push(Pe),(ye.get(Pe.id)||new Set).forEach(He=>{const Ke=n.find(at=>at.id===He);Ke&&!je.has(He)&&Ce.push(Ke)})}return Se};n.forEach(se=>{if(!me.has(se.id)){const Se=we(se);Se.length>0&&fe.push(Se)}});const he=(se,Se)=>{const Ce=new Set(se.map(Ve=>Ve.id)),je=se.filter(Ve=>(de.get(Ve.id)||[]).filter(pt=>Ce.has(pt)).length===0);je.length===0&&se.length>0&&je.push(se[0]);const Pe=new Map,Fe=new Map,He=new Set;let Ke=0;const at=[];for(je.forEach(Ve=>{at.push({node:Ve,level:0}),Pe.set(Ve.id,0)});at.length>0;){const{node:Ve,level:wt}=at.shift();if(He.has(Ve.id))continue;He.add(Ve.id),Ke=Math.max(Ke,wt);const pt=Fe.get(wt)||[];pt.push(Ve),Fe.set(wt,pt),(ve.get(Ve.id)||[]).forEach(en=>{if(Ce.has(en)){const or=se.find(dn=>dn.id===en);or&&!He.has(en)&&(at.push({node:or,level:wt+1}),Pe.set(en,wt+1))}})}const un=Math.max(1200,(Math.max(...Array.from(Fe.values()).map(Ve=>Ve.length))-1)*W),Pt=Se*800,jn=[],Pr=new Map;for(let Ve=0;Ve<=Ke;Ve++){const wt=Fe.get(Ve)||[];wt.sort((pt,rr)=>{var dn,Eo;const en=((dn=ye.get(pt.id))==null?void 0:dn.size)||0;return(((Eo=ye.get(rr.id))==null?void 0:Eo.size)||0)-en}),wt.forEach((pt,rr)=>{const en=(wt.length-1)*W,or=Pt+(un-en)/2;let dn=0;(ye.get(pt.id)||new Set).size>0&&(dn=(rr-wt.length/2)*K*.1);const Tr=or+rr*W+dn;let In=$+Ve*U,ko=!0;for(;ko;){ko=!1;for(const[,$r]of Pr.entries()){const Fl=Math.abs(Tr-$r.x)<W*.8,Hl=In<$r.bottom+ue;if(Fl&&Hl){In=$r.bottom+ue,ko=!0;break}}}const Ds=ge(pt),Os=In+Ds;Pr.set(pt.id,{x:Tr,y:In,bottom:Os}),console.log(` Positioned ${pt.id} at (${Tr}, ${In}) with height ${Ds}, bottom: ${Os}`);const Ll={x:Tr,y:In};jn.push({...pt,position:Ll})})}return jn},oe=[];fe.forEach((se,Se)=>{const Ce=he(se,Se);oe.push(...Ce)}),n.filter(se=>!oe.some(Se=>Se.id===se.id)).forEach((se,Se)=>{oe.push({...se,position:{x:100+Se*300,y:$}})}),console.log(" Final layout complete. Total nodes positioned:",oe.length),v(oe)},re=I.useCallback((W,$)=>{E&&E.setCenter($.x,$.y,{zoom:E.getZoom()})},[E]);return u.jsx("div",{className:`w-full h-full bg-gradient-to-br from-gray-50 to-gray-100 ${L?"cursor-crosshair":""}`,children:u.jsxs(o0,{nodes:y,edges:C,onNodesChange:Z,onEdgesChange:J,onConnect:Q,onNodeClick:Y,onPaneClick:te,onEdgeClick:G,onMouseDown:ce,onMouseMove:pe,onMouseUp:B,onSelectionChange:ee,nodeTypes:$E,connectionMode:Jn.Loose,defaultEdgeOptions:ME,className:`bg-transparent ${L?"selection-mode":""}`,nodesDraggable:!L,nodesConnectable:!0,elementsSelectable:!0,selectNodesOnDrag:!1,panOnDrag:!L,panOnScroll:!0,panOnScrollSpeed:.5,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!1,preventScrolling:!1,panActivationKeyCode:null,multiSelectionKeyCode:null,selectionKeyCode:null,deleteKeyCode:null,children:[u.jsx(Tb,{variant:Ot.Dots,gap:16,size:1,color:"#e5e7eb"}),u.jsx(kb,{className:"bg-white shadow-lg rounded-lg border border-gray-200"}),u.jsx(xb,{className:"bg-white shadow-lg rounded-lg border border-gray-200",nodeColor:W=>{var $;if(d.includes(W.id))switch(W.type){case"question":return"#1e40af";case"answer":return"#6b21a8";case"outcome":return"#15803d";default:return"#374151"}if(R.has(W.id))switch(W.type){case"question":return"#ea580c";case"answer":return"#dc2626";case"outcome":return"#f59e0b";default:return"#f97316"}if(D.has(W.id))switch(W.type){case"question":return"#7c3aed";case"answer":return"#9333ea";case"outcome":return"#a855f7";default:return"#8b5cf6"}if(($=W.data)!=null&&$.isOrphaned)return"#fb923c";switch(W.type){case"question":return"#94a3b8";case"answer":return"#cbd5e1";case"outcome":return"#d1d5db";default:return"#e5e7eb"}},maskColor:"rgba(255, 255, 255, 0.9)",pannable:!0,zoomable:!0,onClick:re}),u.jsxs($l,{position:"top-right",className:"bg-white p-3 rounded-lg shadow-lg",children:[u.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Flow Stats"}),u.jsxs("div",{className:"space-y-1 text-xs",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),u.jsxs("span",{children:["Questions: ",y.filter(W=>W.type==="question").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),u.jsxs("span",{children:["Answers: ",y.filter(W=>W.type==="answer").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),u.jsxs("span",{children:["Outcomes: ",y.filter(W=>W.type==="outcome").length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),u.jsxs("span",{children:["Connections: ",C.length]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),u.jsxs("span",{children:["Orphaned: ",y.filter(W=>!C.some($=>$.source===W.id||$.target===W.id)).length]})]})]})]}),(O==null?void 0:O.isSelecting)&&u.jsx("div",{className:"absolute pointer-events-none border-2 border-blue-500 bg-blue-200 bg-opacity-20 z-10",style:{left:Math.min(O.start.x,O.end.x),top:Math.min(O.start.y,O.end.y),width:Math.abs(O.end.x-O.start.x),height:Math.abs(O.end.y-O.start.y)}})]})})}class Qc{generateCombinationsForNode(t){const n=[],r=t.length;for(let o=1;o<Math.pow(2,r);o++){const s=[],i=[];for(let a=0;a<r;a++)o&1<<a&&(s.push(a+1),i.push(t[a].text||`Variant ${a+1}`));const l={id:`combo-${o}`,variantIndices:s,pathId:`PATH-V${s.join("+V")}`,label:i.join(" + ")};n.push(l)}return n}exportToJson(t,n){const r=t.filter(p=>p.type==="question"),o=t.filter(p=>p.type==="answer"),s=t.filter(p=>p.type==="outcome"),l=r.filter(p=>p.data.isRoot).map(p=>p.data.topic).filter(Boolean),c={topic:l.length>1?`Multi-Topic (${l.join(", ")})`:l[0]||"UNTITLED",version:"1.0.0",createdAt:new Date().toISOString(),totalQuestions:r.length},f={};r.forEach(p=>{f[p.id]={id:p.id,type:"question",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:p.data.questionText,level:p.data.questionLevel,position:p.position,topic:p.data.topic}}),o.forEach(p=>{var w,v;f[p.id]={id:p.id,type:"answer",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:`${((w=p.data.variants)==null?void 0:w.length)||0} variants`,level:0,position:p.position,topic:p.data.topic,answerType:p.data.answerType,variants:(v=p.data.variants)==null?void 0:v.map(S=>({id:S.id,text:S.text,score:S.score,allowsInput:S.allowsInput,inputValidation:S.inputValidation,additionalInfo:S.additionalInfo})),combinations:p.data.answerType==="combinations"?this.generateCombinationsForNode(p.data.variants||[]):void 0,combinationRules:p.data.combinationRules}}),s.forEach(p=>{f[p.id]={id:p.id,type:"outcome",pathId:p.data.pathId,pathIds:p.data.pathIds&&p.data.pathIds.length>1?p.data.pathIds:void 0,content:p.data.recommendation||"No recommendation provided",level:0,position:p.position,topic:p.data.topic,recommendation:p.data.recommendation}});const d={},h={};return n.forEach(p=>{const w=t.find(S=>S.id===p.source),v=t.find(S=>S.id===p.target);!w||!v||(d[p.source]||(d[p.source]={}),p.sourceHandle&&p.sourceHandle.startsWith("variant-")?(d[p.source].variants||(d[p.source].variants={}),d[p.source].variants[p.sourceHandle]=v.data.pathId):p.sourceHandle&&p.sourceHandle.startsWith("combination-")?(d[p.source].combinations||(d[p.source].combinations={}),d[p.source].combinations[p.sourceHandle]=v.data.pathId):d[p.source].default=v.data.pathId)}),o.forEach(p=>{(p.data.answerType==="multiple"||p.data.answerType==="combinations")&&p.data.combinationRules&&(h[p.id]=p.data.combinationRules.map((w,v)=>({condition:w.selectedVariants,nextNode:w.nextNode,priority:v+1})))}),{metadata:c,nodes:f,navigation:d,multipleChoiceRules:h}}exportToExcel(t){const n=this.convertToCSV(t);return new Blob([n],{type:"text/csv"})}convertToCSV(t){const r=[["Path ID","All Path IDs","Clean Path ID","Type","Content","Level","Variants","Scores","Next Path"]];return Object.values(t.nodes).forEach(o=>{var s,i;o.type==="question"?r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Question",o.content,o.level.toString(),"","",((s=t.navigation[o.id])==null?void 0:s.default)||""]):o.type==="answer"?((i=o.variants)==null||i.forEach((l,a)=>{var f,d;const c=((d=(f=t.navigation[o.id])==null?void 0:f.variants)==null?void 0:d[`variant-${a}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Answer",l.text,"0",l.text,l.score.toString(),c])}),o.answerType==="combinations"&&o.combinations&&o.combinations.forEach(l=>{var c,f;const a=((f=(c=t.navigation[o.id])==null?void 0:c.combinations)==null?void 0:f[`combination-${l.id}`])||"";r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Combination",l.label,"0",l.label,l.variantIndices.map(d=>{var h,p;return((p=(h=o.variants)==null?void 0:h[d])==null?void 0:p.score)||0}).reduce((d,h)=>d+h,0).toString(),a])})):o.type==="outcome"&&r.push([o.pathId,o.pathIds?o.pathIds.join(" | "):o.pathId,this.cleanPathId(o.pathId),"Outcome",o.recommendation||"No recommendation","0","","",""])}),r.map(o=>o.map(s=>`"${s.replace(/"/g,'""')}"`).join(",")).join(`
`)}cleanPathId(t){const n=t.split("-");return n.length<=2?t:n.slice(1).join("-")}importFromJson(t){const n=[],r=[];return Object.values(t.nodes).forEach((o,s)=>{const i=o.position||{x:200+s%3*400,y:200+Math.floor(s/3)*300};o.type==="question"?n.push({id:o.id,type:"question",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],topic:o.topic||"IMPORTED",isRoot:o.level===1,questionText:o.content,questionLevel:o.level,elementId:"IMPORTED",subElementId:"IMPORTED"}}):o.type==="answer"?n.push({id:o.id,type:"answer",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],answerType:o.answerType||"single",variants:o.variants||[],combinations:o.combinations,combinationRules:o.combinationRules,topic:o.topic||"IMPORTED"}}):o.type==="outcome"&&n.push({id:o.id,type:"outcome",position:i,data:{pathId:o.pathId,pathIds:o.pathIds||[o.pathId],recommendation:o.recommendation||"No recommendation provided",topic:o.topic||"IMPORTED"}})}),Object.entries(t.navigation).forEach(([o,s])=>{if(s.default){const i=n.find(l=>l.data.pathId===s.default);i&&r.push({id:`edge-${o}-${i.id}`,source:o,target:i.id,sourceHandle:"default",animated:!0})}s.variants&&Object.entries(s.variants).forEach(([i,l])=>{const a=n.find(c=>c.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})}),s.combinations&&Object.entries(s.combinations).forEach(([i,l])=>{const a=n.find(c=>c.data.pathId===l);a&&r.push({id:`edge-${o}-${a.id}-${i}`,source:o,target:a.id,sourceHandle:i,animated:!0})})}),{nodes:n,edges:r}}testCombinationExportImport(){var r,o;console.log("Testing combination export/import functionality...");const t=[{id:"test-answer-1",type:"answer",position:{x:100,y:100},data:{pathId:"Test-A1",pathIds:["Test-A1"],answerType:"combinations",variants:[{id:"var1",text:"Option A",score:1},{id:"var2",text:"Option B",score:2}],topic:"Test"}},{id:"test-question-1",type:"question",position:{x:300,y:100},data:{pathId:"Test-A1-V0+V1-Q1",pathIds:["Test-A1-V0+V1-Q1"],questionText:"Test Question",questionLevel:2,topic:"Test",isRoot:!1,elementId:"E1",subElementId:"SE1"}}],n=[{id:"test-edge-1",source:"test-answer-1",target:"test-question-1",sourceHandle:"combination-combo-3",animated:!0}];try{const s=this.exportToJson(t,n);console.log("Export successful:",{hasNavigationCombinations:!!((r=s.navigation["test-answer-1"])!=null&&r.combinations),hasCombinationData:!!((o=s.nodes["test-answer-1"])!=null&&o.combinations)});const{nodes:i,edges:l}=this.importFromJson(s);return console.log("Import successful:",{nodeCount:i.length,edgeCount:l.length,hasCombinationHandle:l.some(a=>{var c;return(c=a.sourceHandle)==null?void 0:c.startsWith("combination-")})}),!0}catch(s){return console.error("Test failed:",s),!1}}}class zE{static findAvailableSpace(t,n=400){if(t.length===0)return{x:200,y:200};const r=Math.max(...t.map(s=>s.position.x+300)),o=Math.min(...t.map(s=>s.position.y));return{x:r+n,y:o}}static generateUniqueId(t,n){let r=1,o=`${t}-imported`;for(;n.has(o);)o=`${t}-imported-${r}`,r++;return o}static adjustImportedPositions(t,n){if(t.length===0)return[];const r=Math.min(...t.map(l=>l.position.x)),o=Math.min(...t.map(l=>l.position.y)),s=n.x-r,i=n.y-o;return t.map(l=>({...l,position:{x:l.position.x+s,y:l.position.y+i}}))}static resolveConflicts(t,n,r,o){const s=[],i=new Set(t.map(d=>d.id)),l=new Set(n.map(d=>d.id)),a=new Map,c=r.map(d=>{if(i.has(d.id)){const h=this.generateUniqueId(d.id,i);return a.set(d.id,h),i.add(h),s.push({originalId:d.id,newId:h,type:"node",reason:`Node ID "${d.id}" already exists`}),{...d,id:h}}return i.add(d.id),d}),f=o.map(d=>{let h={...d};if(a.has(d.source)&&(h.source=a.get(d.source)),a.has(d.target)&&(h.target=a.get(d.target)),l.has(d.id)){const p=this.generateUniqueId(d.id,l);l.add(p),s.push({originalId:d.id,newId:p,type:"edge",reason:`Edge ID "${d.id}" already exists`}),h.id=p}else l.add(d.id);return h});return{resolvedNodes:c,resolvedEdges:f,conflicts:s}}static getTopicsFromNodes(t){const n=new Set;return t.forEach(r=>{var o;(o=r.data)!=null&&o.topic&&n.add(r.data.topic)}),Array.from(n).sort()}static performAdditiveImport(t,n,r,o){const s=this.findAvailableSpace(t),i=this.adjustImportedPositions(r,s),{resolvedNodes:l,resolvedEdges:a,conflicts:c}=this.resolveConflicts(t,n,i,o),f=[...t,...l],d=[...n,...a],h=this.getTopicsFromNodes(l),p=this.getTopicsFromNodes(f);return{nodes:f,edges:d,conflicts:c,statistics:{imported:{nodes:l.length,edges:a.length,topics:h},total:{nodes:f.length,edges:d.length,topics:p}}}}}function RE({isOpen:e,importResult:t,onAccept:n,onRevert:r,onClose:o}){if(!e||!t)return null;const{statistics:s,conflicts:i}=t;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(mp,{className:"w-6 h-6 text-green-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Successful"})]}),u.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(id,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-blue-900 mb-3 flex items-center",children:[u.jsx(xE,{className:"w-5 h-5 mr-2"}),"Imported Content"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Nodes:"}),u.jsx("span",{className:"font-medium text-blue-900",children:s.imported.nodes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Connections:"}),u.jsx("span",{className:"font-medium text-blue-900",children:s.imported.edges})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-blue-700",children:"Topics:"}),u.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.imported.topics.map(l=>u.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded",children:l},l))})]})]})]}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-green-900 mb-3 flex items-center",children:[u.jsx(mp,{className:"w-5 h-5 mr-2"}),"Total Canvas"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Nodes:"}),u.jsx("span",{className:"font-medium text-green-900",children:s.total.nodes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Connections:"}),u.jsx("span",{className:"font-medium text-green-900",children:s.total.edges})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-green-700",children:"Topics:"}),u.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s.total.topics.map(l=>u.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs rounded",children:l},l))})]})]})]})]}),i.length>0&&u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-lg font-medium text-yellow-900 mb-3 flex items-center",children:[u.jsx(kE,{className:"w-5 h-5 mr-2"}),"Conflicts Resolved (",i.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map((l,a)=>u.jsx("div",{className:"bg-yellow-100 rounded p-3 text-sm",children:u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"font-medium text-yellow-900",children:[l.type==="node"?"Node":"Edge"," ID Conflict"]}),u.jsx("div",{className:"text-yellow-700 mt-1",children:l.reason}),u.jsxs("div",{className:"text-yellow-600 mt-1",children:[u.jsx("span",{className:"font-mono",children:l.originalId}),u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{className:"font-mono",children:l.newId})]})]})})},a))})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Summary"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully imported ",s.imported.nodes," nodes and ",s.imported.edges," connections",i.length>0&&` with ${i.length} conflicts resolved`,". The imported content has been positioned to avoid overlap with existing nodes and is ready for use."]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[u.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Revert Import"}),u.jsx("button",{onClick:n,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept Import"})]})]})})}function DE({onAddNode:e,onLoadDemo:t,onClearAll:n,onSetNodes:r,nodes:o=[]}){const{setEdges:s,edges:i,nodes:l,setNodes:a,toggleAllMeta:c,pathDisplaysFolded:f,combinationSectionsFolded:d}=ke(),[h,p]=I.useState(!1),w=I.useRef(null);I.useEffect(()=>{const P=L=>{w.current&&!w.current.contains(L.target)&&p(!1)};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]);const v=o.length>0?o:l,[S,m]=I.useState(!1),[g,x]=I.useState(null),[y,_]=I.useState(null),b=()=>{const P=window.reactFlowInstance;let L=400,H=300;if(P)try{const Y=window.innerWidth,G=window.innerHeight,te={x:Y/2,y:G/2},ce=P.screenToFlowPosition(te);L=ce.x,H=ce.y}catch(Y){console.warn("Failed to get viewport center, using fallback position:",Y)}if(v.length===0)return{x:L,y:H};const q=v.map(Y=>Y.position),Q=100;for(let Y=0;Y<500;Y+=Q)for(let G=0;G<360;G+=45){const te=G*Math.PI/180,ce=L+Y*Math.cos(te),pe=H+Y*Math.sin(te);if(!q.some(ee=>Math.sqrt(Math.pow(ee.x-ce,2)+Math.pow(ee.y-pe,2))<Q))return{x:ce,y:pe}}return{x:L+Math.random()*100-50,y:H+Math.random()*100-50}},C=P=>{const{nodes:L}=ke.getState(),H=L.filter(q=>{var Q;return(Q=q.data)==null?void 0:Q.isRoot}).map(q=>q.data.topic).filter(q=>q);{let q=1,Q=`TOPIC-${q}`;for(;H.includes(Q);)q++,Q=`TOPIC-${q}`;return Q}},z=()=>{const P=At.getInstance(),L=b(),H=C(),q=P.getNextQuestionNumber(null,H),Q=P.generateQuestionPathId(null,q,H),Y={id:`q-${Date.now()}`,type:"question",position:L,data:{pathId:Q,topic:H,isRoot:!0,questionText:"New Root Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};P.registerNode(Y.id,Q),e==null||e(Y),p(!1)},A=()=>{const P=At.getInstance(),L=b(),H=`STANDALONE-Q${Date.now()}`,q={id:`q-${Date.now()}`,type:"question",position:L,data:{pathId:H,topic:"STANDALONE",isRoot:!1,questionText:"New Regular Question",questionLevel:1,elementId:"NEW",subElementId:"NEW"}};P.registerNode(q.id,H),e==null||e(q),p(!1)},E=()=>{const P=At.getInstance(),L=b(),q=`STANDALONE-A${P.getNextAnswerNumber("STANDALONE")}`,Q={id:`a-${Date.now()}`,type:"answer",position:L,data:{pathId:q,answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}};e==null||e(Q)},R=()=>{const P=At.getInstance(),L=b(),q=`STANDALONE-E${P.getNextOutcomeNumber("STANDALONE")}`,Q={id:`o-${Date.now()}`,type:"outcome",position:L,data:{pathId:q,recommendation:"Enter your recommendation here...",topic:"General"}};e==null||e(Q)},D=()=>{const P=ke.getState(),H=new Qc().exportToJson(v,P.edges),q=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),Q=URL.createObjectURL(q),Y=document.createElement("a");Y.href=Q,Y.download=`flow-${H.metadata.topic}-${Date.now()}.json`,Y.click(),URL.revokeObjectURL(Q)},O=()=>{const P=document.createElement("input");P.type="file",P.accept=".json",P.onchange=L=>{var q;const H=(q=L.target.files)==null?void 0:q[0];if(H){const Q=new FileReader;Q.onload=Y=>{var G;try{const te=JSON.parse((G=Y.target)==null?void 0:G.result);let ce=[],pe=[];if(te.metadata&&te.nodes&&te.navigation){const Z=new Qc().importFromJson(te);ce=Z.nodes,pe=Z.edges}else if(te.nodes&&te.edges)ce=te.nodes,pe=te.edges;else{console.error("Invalid file format");return}_({nodes:[...v],edges:[...i]});const B=zE.performAdditiveImport(v,i,ce,pe);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),r==null||r(B.nodes),s(B.edges),x(B),m(!0)}catch(te){console.error("Error importing flow:",te)}},Q.readAsText(H)}},P.click()},N=()=>{t==null||t()},M=()=>{n==null||n()},j=()=>{if(console.log(" Smart Organize: Starting advanced layout algorithm..."),console.log("actualNodes:",v),console.log("actualNodes.length:",v.length),v.length<2){console.log("Not enough nodes to organize");return}console.log(" Organizing",v.length,"nodes with smart layout");const P=650,L=200,H=455,q=156,Q=150,Y=$=>{var K,ue,ge,ve,de,xe,le,ye;let U=100;if(console.log(` Checking node ${$.id}:`,{type:$.type,answerType:(K=$.data)==null?void 0:K.answerType,combinationsCount:((ge=(ue=$.data)==null?void 0:ue.combinations)==null?void 0:ge.length)||0,variantsCount:((de=(ve=$.data)==null?void 0:ve.variants)==null?void 0:de.length)||0,combinationSectionsFolded:d}),$.type==="answer"&&((xe=$.data)==null?void 0:xe.answerType)==="combinations"){const fe=((le=$.data)==null?void 0:le.combinations)||[],me=((ye=$.data)==null?void 0:ye.variants)||[];if(fe.length>0){const we=me.length*50,he=100,oe=fe.length*70;U=150+we+he+oe,console.log(` Height calculation for ${$.id}:`,{variants:me.length,combinations:fe.length,variantsHeight:we,combinationsHeaderHeight:he,combinationsHeight:oe,totalHeight:U})}}return U},G=new Map,te=new Map,ce=new Map,pe=new Map,B=new Map;v.forEach($=>{G.set($.id,[]),te.set($.id,[]),ce.set($.id,0),pe.set($.id,0),B.set($.id,new Set)}),i.forEach($=>{var ve,de;const U=G.get($.source)||[];U.push($.target),G.set($.source,U);const K=te.get($.target)||[];K.push($.source),te.set($.target,K);const ue=ce.get($.target)||0;ce.set($.target,ue+1);const ge=pe.get($.source)||0;pe.set($.source,ge+1),(ve=B.get($.source))==null||ve.add($.target),(de=B.get($.target))==null||de.add($.source)}),console.log(" Graph analysis:",{children:G,parents:te,directConnections:B});const ee=[],Z=new Set,J=$=>{const U=[],K=[$],ue=new Set;for(;K.length>0;){const ge=K.pop();if(ue.has(ge.id))continue;ue.add(ge.id),Z.add(ge.id),U.push(ge),(B.get(ge.id)||new Set).forEach(de=>{const xe=v.find(le=>le.id===de);xe&&!ue.has(de)&&K.push(xe)})}return U};v.forEach($=>{if(!Z.has($.id)){const U=J($);U.length>0&&ee.push(U)}}),console.log(" Connected components:",ee.map($=>$.map(U=>U.id)));const ae=($,U)=>{const K=new Set($.map(he=>he.id)),ue=$.filter(he=>(te.get(he.id)||[]).filter(Ne=>K.has(Ne)).length===0);ue.length===0&&$.length>0&&ue.push($[0]);const ge=new Map,ve=new Map,de=new Set;let xe=0;const le=[];for(ue.forEach(he=>{le.push({node:he,level:0}),ge.set(he.id,0)});le.length>0;){const{node:he,level:oe}=le.shift();if(de.has(he.id))continue;de.add(he.id),xe=Math.max(xe,oe);const Ne=ve.get(oe)||[];Ne.push(he),ve.set(oe,Ne),(G.get(he.id)||[]).forEach(Se=>{if(K.has(Se)){const Ce=$.find(je=>je.id===Se);Ce&&!de.has(Se)&&(le.push({node:Ce,level:oe+1}),ge.set(Se,oe+1))}})}const ye=Math.max(1200,(Math.max(...Array.from(ve.values()).map(he=>he.length))-1)*P),fe=U*800,me=[],we=new Map;for(let he=0;he<=xe;he++){const oe=ve.get(he)||[];oe.sort((Ne,se)=>{var je,Pe;const Se=((je=B.get(Ne.id))==null?void 0:je.size)||0;return(((Pe=B.get(se.id))==null?void 0:Pe.size)||0)-Se}),oe.forEach((Ne,se)=>{const Se=(oe.length-1)*P,Ce=fe+(ye-Se)/2;let je=0;(B.get(Ne.id)||new Set).size>0&&(je=(se-oe.length/2)*q*.1);const Fe=Ce+se*P+je;let He=L+he*H,Ke=!0;for(;Ke;){Ke=!1;for(const[,jn]of we.entries()){const Pr=Math.abs(Fe-jn.x)<P*.8,Ve=He<jn.bottom+Q;if(Pr&&Ve){He=jn.bottom+Q,Ke=!0;break}}}const at=Y(Ne),un=He+at;we.set(Ne.id,{x:Fe,y:He,bottom:un}),console.log(` Positioned ${Ne.id} at (${Fe}, ${He}) with height ${at}, bottom: ${un}`);const Pt={x:Fe,y:He};me.push({...Ne,position:Pt})})}return me},re=[];ee.forEach(($,U)=>{const K=ae($,U);re.push(...K)}),v.filter($=>!re.some(U=>U.id===$.id)).forEach(($,U)=>{re.push({...$,position:{x:100+U*300,y:L}})}),console.log(" Final layout complete. Total nodes positioned:",re.length),r&&re.length>0?r(re):a(re)},F=()=>{m(!1),x(null),_(null)},T=()=>{y&&(r==null||r(y.nodes),s(y.edges),window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate()),m(!1),x(null),_(null)},k=()=>{F()};return u.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Organize nodes in a hierarchical layout",children:[u.jsx(NE,{size:16}),u.jsx("span",{children:"Organize"})]}),u.jsxs("button",{onClick:c,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm font-medium w-[140px] h-10",title:"Toggle visibility of path displays and combination sections",children:[f||d?u.jsx(_0,{size:16}):u.jsx(gE,{size:16}),u.jsx("span",{children:f||d?"Unfold Meta":"Fold Meta"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("div",{className:"relative",ref:w,children:[u.jsxs("button",{onClick:()=>p(!h),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(E0,{size:16}),u.jsx("span",{children:"Add Question"}),u.jsx(Xt,{size:14})]}),h&&u.jsxs("div",{className:"absolute top-full left-0 mt-1 w-[140px] bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[u.jsx("button",{onClick:z,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"ROOT"}),u.jsx("button",{onClick:A,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-b-lg",children:"REGULAR"})]})]}),u.jsxs("button",{onClick:E,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(C0,{size:16}),u.jsx("span",{children:"Add Answer"})]}),u.jsxs("button",{onClick:R,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-400 text-white rounded-lg hover:bg-emerald-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(j0,{size:16}),u.jsx("span",{children:"Add Outcome"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:D,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(k0,{size:16}),u.jsx("span",{children:"Export JSON"})]}),u.jsxs("button",{onClick:O,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-sky-400 text-white rounded-lg hover:bg-sky-500 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(I0,{size:16}),u.jsx("span",{children:"Import JSON"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:N,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-slate-500 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(mE,{size:16}),u.jsx("span",{children:"Load Demo"})]}),u.jsxs("button",{onClick:M,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium w-[140px] h-10",children:[u.jsx(EE,{size:16}),u.jsx("span",{children:"Clear All"})]})]}),u.jsx(RE,{isOpen:S,importResult:g,onAccept:F,onRevert:T,onClose:k})]})}function OE({onEnterApp:e}){return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[u.jsxs("div",{className:"relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10"}),u.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"flex items-center justify-center mb-6",children:u.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:u.jsx(yE,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"Question Flow Builder"}),u.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Create interactive questionnaire flows with a powerful visual interface. Design complex decision trees, manage answer variants, and export your work seamlessly."}),u.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[u.jsx(vp,{className:"w-5 h-5 mr-2"}),"Start Building",u.jsx(Pa,{className:"w-5 h-5 ml-2"})]})]})})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Powerful Features"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Everything you need to create professional questionnaire flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(wE,{className:"w-6 h-6 text-blue-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Visual Flow Builder"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop nodes to create complex questionnaire flows. Connect questions, answers, and outcomes with intuitive visual connections."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(xp,{className:"w-6 h-6 text-cyan-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),u.jsx("p",{className:"text-gray-600",children:"Double-click any node, answer variant, or combination to instantly focus on the next connected element. Navigate your flow with ease."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(vE,{className:"w-6 h-6 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Keyboard Shortcuts"}),u.jsx("p",{className:"text-gray-600",children:"Work efficiently with keyboard shortcuts: Tab to create nodes, Delete to remove, Cmd/Ctrl+Z for undo, and more."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(I0,{className:"w-3 h-3 text-purple-600"}),u.jsx(k0,{className:"w-3 h-3 text-purple-600"})]})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Import & Export"}),u.jsx("p",{className:"text-gray-600",children:"Import Excel files or JSON flows. Export your work to share or backup. Seamless integration with existing workflows."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(_0,{className:"w-6 h-6 text-orange-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Real-time Validation"}),u.jsx("p",{className:"text-gray-600",children:"Instant visual feedback for orphaned nodes, missing connections, and flow integrity issues. Orange highlights show problems."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(gp,{className:"w-6 h-6 text-indigo-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path IDs"}),u.jsx("p",{className:"text-gray-600",children:"Automatic generation of hierarchical path IDs (Q1, Q2, A1, A2, E1, E2) for questions, answers, and outcomes. All paths visible on nodes."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(yp,{className:"w-6 h-6 text-rose-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Answer Combinations"}),u.jsx("p",{className:"text-gray-600",children:"Create complex multi-select scenarios with combination logic. Generate paths like V1+V2, V1+V3 for sophisticated questionnaire flows."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(_E,{className:"w-6 h-6 text-teal-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Smart Path Propagation"}),u.jsx("p",{className:"text-gray-600",children:"Intelligent path propagation across all answer types. Single, Multiple, and Combinations modes all generate correct variant paths."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(bE,{className:"w-6 h-6 text-emerald-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Undo/Redo System"}),u.jsx("p",{className:"text-gray-600",children:"50-state history with standard keyboard shortcuts. Never lose your work with comprehensive undo/redo functionality."})]})]})]}),u.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Demonstrations of Interactions"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Here are a few things you can do"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"group-hover:animate-pulse bg-white border-2 border-blue-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"Question"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"What's your level?"})]}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"group-hover:animate-bounce",children:u.jsx(Pa,{className:"w-4 h-4 text-blue-500 transform group-hover:translate-x-2 transition-transform duration-500"})})}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Beginner"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Double-Click Navigation"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Double-click any node to smoothly focus on the next connected element with zoom animation."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-purple-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Main"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-200",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 1"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-300",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 2"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-2 shadow-md transform group-hover:scale-105 group-hover:bg-green-100 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-700 delay-400",children:[u.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full group-hover:bg-green-500 transition-colors duration-700"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600 group-hover:text-green-600 transition-colors duration-700",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Sibling 3"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sibling Node Highlighting"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Single-click highlights all neighboring nodes in green for 3-5 seconds to show relationships."})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[u.jsx("div",{className:"relative h-48 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg mb-4 overflow-hidden",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-3 shadow-md mb-4 transform group-hover:scale-105 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"Answer"})]}),u.jsx("div",{className:"text-xs text-gray-700 mb-2",children:"Advanced"}),u.jsxs("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full group-hover:bg-green-100 group-hover:text-green-800 transition-colors duration-500",children:[u.jsx("span",{className:"group-hover:hidden",children:"Topic-Q1-A1"}),u.jsx("span",{className:"hidden group-hover:inline",children:"Topic-Q1-A1-E1"})]})]}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"w-0.5 h-6 bg-gray-300 group-hover:bg-green-500 transition-colors duration-500"})}),u.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 rounded-lg p-3 shadow-md transform group-hover:scale-105 group-hover:bg-gradient-to-br group-hover:from-green-50 group-hover:to-emerald-50 group-hover:border-green-400 group-hover:ring-2 group-hover:ring-green-300 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full group-hover:bg-green-500 transition-colors duration-500"}),u.jsxs("span",{className:"text-xs font-semibold text-orange-600 group-hover:text-green-600 transition-colors duration-500",children:[u.jsx("span",{className:"group-hover:hidden",children:"Orphan"}),u.jsx("span",{className:"hidden group-hover:inline",children:"Outcome"})]})]}),u.jsx("div",{className:"text-xs text-gray-700",children:"Expert Path"})]})]})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Orphan Node Connection"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connecting orphan nodes turns them green and updates their path IDs automatically."})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Answer Types & Modes"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Three powerful modes for different questionnaire scenarios"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Single Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Traditional single-choice questions where users select one answer from multiple options."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A1-E1"}),u.jsx("div",{className:"text-xs font-mono text-blue-600",children:"Topic-Q1-A2-E2"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Multiple Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Multi-choice questions where each answer variant creates its own independent path."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V1-E1"}),u.jsx("div",{className:"text-xs font-mono text-purple-600",children:"Topic-Q1-A1-V2-E2"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center mb-4",children:u.jsx(yp,{className:"w-6 h-6 text-rose-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Combinations Mode"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Advanced multi-select with combination logic. Each possible combination of answers creates unique paths."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Example Path IDs:"}),u.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V2-E1"}),u.jsx("div",{className:"text-xs font-mono text-rose-600",children:"Topic-Q1-A1-V1+V3-E2"})]})]})]})]})}),u.jsx("div",{className:"bg-white py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Node Types & Visual Guide"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Understanding the visual language of your flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"Question"})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"What is your experience level?"}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q1"}),u.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Topic-Q2"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(E0,{className:"w-5 h-5 inline mr-2 text-blue-500"}),"Question Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Blue theme  Single outgoing connection  Contains question text and level information  Shows all propagated path IDs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-purple-600",children:"Answer"})]}),u.jsxs("div",{className:"space-y-2 mb-3",children:[u.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"Yes (Score: 1)"}),u.jsx("div",{className:"text-xs bg-white rounded px-2 py-1 border",children:"No (Score: 0)"})]}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1"}),u.jsx("div",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(C0,{className:"w-5 h-5 inline mr-2 text-purple-500"}),"Answer Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Purple theme  Three modes: Single, Multiple, Combinations  Scoring system  Shows all propagated path IDs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-6 shadow-lg mb-4 max-w-sm mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-sm font-semibold text-green-600",children:"Outcome"})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-3",children:"You should explore visual tools..."}),u.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[u.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-E1"}),u.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Topic-Q1-A1-V1-E1"})]})]}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[u.jsx(j0,{className:"w-5 h-5 inline mr-2 text-green-500"}),"Outcome Nodes"]}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Green theme  End points  Contains recommendations  No outgoing connections  Shows all propagated path IDs"})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Navigation & Interaction"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Intuitive ways to navigate and interact with your flows"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:u.jsx(xp,{className:"w-8 h-8 text-cyan-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"Double-Click Navigation"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Question Nodes"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the connected answer node"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Answer Nodes (Single)"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click to focus on the next connected node"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Answer Variants (Multiple)"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click individual variants to follow their path"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full mt-2"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Combinations"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Double-click combination items to navigate their unique paths"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center mb-6 mx-auto",children:u.jsx(gp,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"PathID Display System"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"All Nodes Show Multiple Paths"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Every node displays all propagated path IDs as badges, making it easy to track complex flows"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Automatic Propagation"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Path IDs automatically propagate through the flow, updating connected nodes when changes occur"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"font-medium text-gray-900 mb-2",children:"Smart Variant Generation"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Multiple and Combinations modes generate appropriate variant paths (V1, V2, V1+V2, etc.)"})]})]})]})]})]})}),u.jsx("div",{className:"bg-gray-50 py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Visual Indicators & Alerts"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Understand what the colors and effects mean"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-orange-100 rounded-lg border-2 border-orange-300 ring-2 ring-orange-400 flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Orange Glow"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Orphaned nodes or variants missing connections"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-green-100 rounded-lg border-2 border-green-300 ring-2 ring-green-400 flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Green Glow"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Selected node and its connected parent/child nodes"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-1 bg-blue-500 rounded shadow-lg",style:{boxShadow:"0 0 8px rgba(37, 99, 235, 0.6)"}})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Blue Edges"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connections from selected nodes with blue glow effect"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md text-center",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded"})}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Gray Edges"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Default connection lines between nodes"})]})]})]})}),u.jsx("div",{className:"bg-white py-16",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Keyboard Shortcuts"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Work faster with these essential shortcuts"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Navigation & Selection"}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Create linked question"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Tab"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Multi-select nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Shift + Drag"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Copy selected nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/ + C"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Paste nodes"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl/ + V"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Delete selected node"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Delete"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Deselect all"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Escape"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Undo & Redo"}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Undo (Windows)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Z"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Undo (Mac)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:" + Z"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Redo (Windows)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:"Ctrl + Y"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-gray-700",children:"Redo (Mac)"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-sm",children:" +  + Z"})]})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 py-16",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Build Your First Flow?"}),u.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Start with our pre-loaded example or create your own from scratch"}),u.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[u.jsx(vp,{className:"w-5 h-5 mr-2"}),"Launch Flow Builder",u.jsx(Pa,{className:"w-5 h-5 ml-2"})]})]})})]})}const LE=[{id:"q1",type:"question",position:{x:100,y:100},data:{pathId:"TOPIC-1-Q1",topic:"TOPIC-1",isRoot:!0,questionText:"What is your experience level with React?",questionLevel:1,elementId:"TOPIC-1",subElementId:"REACT"}},{id:"a1",type:"answer",position:{x:100,y:250},data:{pathId:"TOPIC-1-Q1-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Beginner",score:1},{id:"var2",text:"Intermediate",score:2},{id:"var3",text:"Advanced",score:3}]}},{id:"q2",type:"question",position:{x:450,y:100},data:{pathId:"TOPIC-1-Q1-A1-Q2",topic:"TOPIC-1",isRoot:!1,questionText:"Do you prefer TypeScript over JavaScript?",questionLevel:2,elementId:"TOPIC-1",subElementId:"TYPESCRIPT"}},{id:"a2",type:"answer",position:{x:450,y:250},data:{pathId:"TOPIC-1-Q1-A1-Q2-A1",topic:"TOPIC-1",answerType:"single",variants:[{id:"var1",text:"Yes",score:1},{id:"var2",text:"No",score:0}]}},{id:"q3",type:"question",position:{x:100,y:400},data:{pathId:"TOPIC-2-Q1",topic:"TOPIC-2",isRoot:!0,questionText:"What is your preferred development environment?",questionLevel:1,elementId:"TOPIC-2",subElementId:"DEVENV"}},{id:"a3",type:"answer",position:{x:100,y:550},data:{pathId:"TOPIC-2-Q1-A1",topic:"TOPIC-2",answerType:"multiple",variants:[{id:"var1",text:"VS Code",score:1},{id:"var2",text:"WebStorm",score:2},{id:"var3",text:"Vim/Neovim",score:3}]}},{id:"outcome1",type:"outcome",position:{x:800,y:300},data:{pathId:"CROSS-CONNECTED-E1",topic:"CROSS-CONNECTED",outcomeText:"Recommended Learning Path",outcomeType:"recommendation",score:0}}],FE=[{id:"e1",source:"q1",target:"a1",animated:!0,type:"smoothstep"},{id:"e2",source:"a1",target:"q2",animated:!0,type:"smoothstep"},{id:"e3",source:"q2",target:"a2",animated:!0,type:"smoothstep"},{id:"e4",source:"q3",target:"a3",animated:!0,type:"smoothstep"},{id:"e5",source:"a2",target:"outcome1",animated:!0,type:"smoothstep"},{id:"e6",source:"a3",target:"outcome1",sourceHandle:"variant-0",animated:!0,type:"smoothstep"}],Or={nodes:LE,edges:FE};function HE(){const[e,t]=I.useState(!0),[n,r]=I.useState(!1),o=I.useRef(!1),{nodes:s,addNode:i,setNodes:l,setEdges:a,clearFlow:c}=ke(),f=I.useCallback(async()=>{try{const m=await fetch("/qnatool/flow-Topic-1752233651561.json");if(m.ok){const g=await m.json(),x=new Qc,{nodes:y,edges:_}=x.importFromJson(g);window.flowCanvasSetBulkUpdate&&window.flowCanvasSetBulkUpdate(),l(y),a(_),console.log("Default flow loaded successfully")}else console.warn("Default flow not found, loading demo data instead"),l(Or.nodes),a(Or.edges)}catch(m){console.error("Error loading default flow:",m),l(Or.nodes),a(Or.edges)}t(!1),r(!0)},[l,a]),d=I.useCallback(m=>{i(m)},[i]),h=I.useCallback(()=>{r(!1),o.current=!0,console.log("Auto-organize completed")},[]),p=I.useCallback(()=>{l(Or.nodes),a(Or.edges),setTimeout(()=>{const{cleanupDuplicateEdges:m}=ke.getState();m()},100)},[l,a]),w=I.useCallback(()=>{c()},[c]),v=I.useCallback(m=>{l(m)},[l]),S=I.useCallback(()=>{t(!0)},[]);return e?u.jsx(OE,{onEnterApp:f}):u.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:S,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:" Back to Home"}),u.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Question Flow Builder"})]}),u.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," nodes  Auto-loaded flow"]})]}),u.jsx(DE,{onAddNode:d,onLoadDemo:p,onClearAll:w,onSetNodes:v,nodes:s}),u.jsx("div",{className:"flex-1",children:u.jsx(nd,{children:u.jsx(AE,{shouldAutoOrganize:n&&!o.current,onAutoOrganizeComplete:h})})})]})}Ta.createRoot(document.getElementById("root")).render(u.jsx(V.StrictMode,{children:u.jsx(HE,{})}));
